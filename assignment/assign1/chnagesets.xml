<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

   <changeSet id="jwr-db-views-drop-all" author="ShashankSingh" context="local">
	<comment>Dropping all existing views</comment>
	<sqlFile path="drop-views.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
   </changeSet>
    <changeSet id="jwr-db-usersmerge-uci-1" author="Mirek" context="local">
    	<comment>Adding columns/data and dropping from UserContactInformation/properties/UserLastAccountLockReasonTable to Users</comment>
    	<sql>
			ALTER TABLE [dbo].[Users] ADD
				[FirstName] [varchar](50) NULL,
				[LastName] [varchar](50) NULL,
				[DateOfBirth] [date] NULL,
				[Address] [varchar](50) NULL,
				[Address2] [varchar](50) NULL,
				[City] [varchar](50) NULL,
				[PIN] [varchar](10) NULL,
				[ContactDetailsUpdatedTime] [datetime] NULL;

				UPDATE [dbo].[Users]
			 SET
				[dbo].[Users].[FirstName] = [dbo].[UserContactInformation].[FirstName],
				[dbo].[Users].[LastName] = [dbo].[UserContactInformation].[LastName],
				[dbo].[Users].[DateOfBirth] = [dbo].[UserContactInformation].[DateOfBirth],
				[dbo].[Users].[Address] = [dbo].[UserContactInformation].[Address],
				[dbo].[Users].[Address2] = [dbo].[UserContactInformation].[Address2],
				[dbo].[Users].[City] = [dbo].[UserContactInformation].[City],
				[dbo].[Users].[PIN] = [dbo].[UserContactInformation].[PIN],
				[dbo].[Users].[stateID] = [dbo].[UserContactInformation].[StateID],
				[dbo].[Users].[ContactDetailsUpdatedTime] = [dbo].[UserContactInformation].[timestampUpdated]
			 FROM [dbo].[Users] INNER JOIN [dbo].[UserContactInformation]
			 ON [dbo].[Users].[userID] = [dbo].[UserContactInformation].[userID];

			UPDATE [dbo].[Users]
			SET   [dbo].[Users].[mobileNumber] = [dbo].[UserContactInformation].[Mobile]
			FROM  [dbo].[Users]
				INNER JOIN [dbo].[UserContactInformation]
				ON    [dbo].[Users].[userID] = [dbo].[UserContactInformation].[userID]
			WHERE [dbo].[Users].[mobileNumber] IS NULL;

			DROP TABLE [dbo].[UserContactInformation];

			ALTER TABLE [dbo].[Users] ADD
				[isFraud] [tinyint] NOT NULL DEFAULT ((0)),
				[userPanPortraitPath] [varchar](200) NULL,
				[userStatus] [tinyint] NOT NULL DEFAULT ((0)),
				[panCardNumber] [varchar](20) NULL,
				[uploadCount] [int] NULL DEFAULT ((0)),
				[rejectionReason] [varchar](300) NULL,
				[fraudStatus] [varchar](50) NULL,
				[fraudPronity] [int] NULL,
				[fraudType] [varchar](300) NULL,
				[AddressProofType] [varchar](30) NULL,
				[AddressProofText] [varchar](30) NULL,
				[AddressProofImagepath] [varchar](200) NULL,
				[AddressProofStatus] [tinyint] NOT NULL DEFAULT ((0)),
				[AddressProofUploadCount] [int] NULL,
				[AddressProofReason] [varchar](300) NULL,
				[timestampAddressUpdate] [datetime] NULL,
				[Source] [varchar](100) NULL,
				[PaymentTOSAccepted] [tinyint] NOT NULL DEFAULT ((0)),
				[IdProofType] [varchar](30) NULL,
				[IdProofText] [varchar](30) NULL,
				[IdProofImagePath] [varchar](200) NULL,
				[IdProofStatus] [tinyint] NOT NULL DEFAULT ((0)),
				[IdProofReason] [varchar](300) NULL,
				[timestampIdUpdate] [datetime] NULL,
				[timestampPanUpdate] [datetime] NULL,
				[hasSavedCard] [bit] NOT NULL DEFAULT ((0)),
				[timestampIdApproval] [datetime] NULL,
				[timestampPanApproval] [datetime] NULL,
				[timestampAddressApproval] [datetime] NULL;
    	</sql>
    </changeSet>
     <changeSet id="jwr-db-usersmerge-up-2" author="Mirek" context="local">
    	<comment>Copying data from UserProperties to Users</comment>
    	<sql>
			UPDATE [dbo].[Users]
			 SET
				[dbo].[Users].[isFraud] = [dbo].[UserProperties].[isFraud],
				[dbo].[Users].[userPanPortraitPath] = [dbo].[UserProperties].[userPanPortraitPath],
				[dbo].[Users].[userStatus] = [dbo].[UserProperties].[userStatus],
				[dbo].[Users].[panCardNumber] = [dbo].[UserProperties].[panCardNumber],
				[dbo].[Users].[uploadCount] = [dbo].[UserProperties].[uploadCount],
				[dbo].[Users].[rejectionReason] = [dbo].[UserProperties].[reason],
				[dbo].[Users].[fraudStatus] = [dbo].[UserProperties].[fraudStatus],
				[dbo].[Users].[fraudPronity] = [dbo].[UserProperties].[fraudPronity],
				[dbo].[Users].[fraudType] = [dbo].[UserProperties].[fraudType],
				[dbo].[Users].[AddressProofType] = [dbo].[UserProperties].[AddressProofType],
				[dbo].[Users].[AddressProofText] = [dbo].[UserProperties].[AddressProofText],
				[dbo].[Users].[AddressProofImagepath] = [dbo].[UserProperties].[AddressProofImagepath],
				[dbo].[Users].[AddressProofStatus] = [dbo].[UserProperties].[AddressProofStatus],
				[dbo].[Users].[AddressProofUploadCount] = [dbo].[UserProperties].[AddressProofUploadCount],
				[dbo].[Users].[AddressProofReason] = [dbo].[UserProperties].[AddressProofReason],
				[dbo].[Users].[timestampAddressUpdate] = [dbo].[UserProperties].[timestampAddressUpdate],
				[dbo].[Users].[Source] = [dbo].[UserProperties].[Source],
				[dbo].[Users].[PaymentTOSAccepted] = [dbo].[UserProperties].[PaymentTOSAccepted],
				[dbo].[Users].[IdProofType] = [dbo].[UserProperties].[IdProofType],
				[dbo].[Users].[IdProofText] = [dbo].[UserProperties].[IdProofText],
				[dbo].[Users].[IdProofImagePath] = [dbo].[UserProperties].[IdProofImagePath],
				[dbo].[Users].[IdProofStatus] = [dbo].[UserProperties].[IdProofStatus],
				[dbo].[Users].[IdProofReason] = [dbo].[UserProperties].[IdProofReason],
				[dbo].[Users].[timestampIdUpdate] = [dbo].[UserProperties].[timestampIdUpdate],
				[dbo].[Users].[timestampPanUpdate] = [dbo].[UserProperties].[timestampPanUpdate],
				[dbo].[Users].[hasSavedCard] = [dbo].[UserProperties].[hasSavedCard],
				[dbo].[Users].[timestampIdApproval] = [dbo].[UserProperties].[timestampIdApproval],
				[dbo].[Users].[timestampPanApproval] = [dbo].[UserProperties].[timestampPanApproval],
				[dbo].[Users].[timestampAddressApproval] = [dbo].[UserProperties].[timestampAddressApproval]
			 FROM [dbo].[Users] INNER JOIN [dbo].[UserProperties]
			 ON [dbo].[Users].[userID] = [dbo].[UserProperties].[userID];

			 DROP TABLE [dbo].[UserProperties];

			 ALTER TABLE [dbo].[Users] ADD
				[lastLockReason] [text] NULL;

			EXEC DropColumnFromTable 'Users', 'hasSavedCard';
			EXEC DropColumnFromTable 'Users', 'totalCashGamesPlayed';
			EXEC DropColumnFromTable 'Users', 'totalFreeGamesPlayed';
			EXEC DropColumnFromTable 'Users', 'vip';
			EXEC DropColumnFromTable 'Users', 'birthYear';
			EXEC DropColumnFromTable 'Users', 'gender';
			EXEC DropColumnFromTable 'Users', 'PaymentTOSAccepted';
			EXEC DropColumnFromTable 'Users', 'isFirstLogin';
			EXEC DropColumnFromTable 'Users', 'activeDays';

			UPDATE [Users] SET [friendReferral] = '0' WHERE [friendReferral] IS NULL;
			ALTER TABLE [Users] ALTER COLUMN [friendReferral] [int] NOT NULL;
			ALTER TABLE [Users] ADD CONSTRAINT DF_FRIENDREFERRAL_DEFAULT DEFAULT '0' for [friendReferral]

			UPDATE [Users] SET [portraitPath] = '1' WHERE ISNUMERIC([portraitPath]) = 0;
			ALTER TABLE [Users] ALTER COLUMN [portraitPath] [int] NOT NULL;
			EXEC sp_rename 'Users.portraitPath', 'avatarId', 'COLUMN';

			ALTER TABLE [dbo].[Users] ADD [authToken] [varchar](40) NULL;
    		ALTER TABLE [dbo].[Users] ADD [gsAuthToken] [varchar](40) NULL;

			ALTER TABLE [dbo].[Users]
			ADD CurrencyLock BIGINT NOT NULL DEFAULT ((0))
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-5" author="Mirek">
    	<comment>Creating new TableConfigurations table</comment>
    	<sql>
		CREATE TABLE [dbo].[TableConfigurations](
			[tableConfigID] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
			[name] [varchar](50) NOT NULL,
			[seats] [tinyint] NOT NULL CONSTRAINT [DF_TableConfigurations_size]  DEFAULT ((0)),

			[tableType] [tinyint] NOT NULL CONSTRAINT [DF_TableConfigurations_tableType]  DEFAULT ((0)),
			[currencyType] [tinyint] NOT NULL CONSTRAINT [DF_TableConfigurations_currencyType]  DEFAULT ((0)),
			[gameVariant] [tinyint] NOT NULL CONSTRAINT [DF_TableConfigurations_gameVariant]  DEFAULT ((0)),
			[handType] [tinyint] NOT NULL CONSTRAINT [DF_TableConfigurations_handType]  DEFAULT ((0)),
			[gamePlayMode] [smallint] NOT NULL CONSTRAINT [DF_TableConfigurations_gamePlayMode]  DEFAULT ((0)),

			[pointValue] [real] NOT NULL CONSTRAINT [DF_TableConfigurations_pointValue]  DEFAULT ((0)),
			[deals] [tinyint] NOT NULL CONSTRAINT [DF_TableConfigurations_deals]  DEFAULT ((0)),
			[poolPoints] [smallint] NOT NULL CONSTRAINT [DF_TableConfigurations_poolPoints]  DEFAULT ((0)),

			[enabled] [bit] NOT NULL CONSTRAINT [DF_TableConfigurations_enabled]  DEFAULT ((0)),

			[rake] [float] NOT NULL CONSTRAINT [DF_TableConfigurations_rake]  DEFAULT ((0.15)),
			[entryFee] [float] NOT NULL CONSTRAINT [DF_TableConfigurations_entryFee]  DEFAULT ((0)),

			[firstDropScore] [smallint] NOT NULL CONSTRAINT [DF_TableConfigurations_firstDropScore]  DEFAULT ((20)),
			[midDropScore] [smallint] NOT NULL CONSTRAINT [DF_TableConfigurations_midDropScore]  DEFAULT ((40)),

			[isBotTable] [bit] NOT NULL DEFAULT ((0)),
			[vip] [bit] NOT NULL CONSTRAINT [DF_TableConfigurations_vip]  DEFAULT ((0)),
		 CONSTRAINT [PK_TableConfigurations] PRIMARY KEY CLUSTERED
		(
			[tableConfigID] ASC
		)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
		) ON [PRIMARY];
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-tempdata-1" author="Mirek" context="local">
        <comment>Create Initial Database with LiquiBase</comment>
        <sqlFile path="TempTableConfigurations.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>

    <changeSet id="jwr-db-6-favconfigs-1" author="Mirek">
    	<comment>Creating new table for favorite configurations</comment>
    	<sql>
    	CREATE TABLE [dbo].[UserFavouriteTableConfigurations](
			[UserId] [int] NOT NULL,
			[TableConfigId] [int] NOT NULL,
			[DateFavorited] [datetime] NULL,
		PRIMARY KEY CLUSTERED
		(
			[UserId], [TableConfigId]
		)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
		) ON [PRIMARY]
    	</sql>
    </changeSet>

     <!--  TODO
	<changeSet id="jwr-db-13-favconfigs-2" author="Mirek">
   		<comment>Populating UserFavouriteTableConfigurations table</comment>
   		<sql>
   			//TODO read data from UserFavouriteTableConfigs and populate new table
   		</sql>

   	</changeSet>
   	<changeSet id="jwr-db-13-favconfigs-3" author="Mirek">
   		<comment>Dropping old UserFavouriteTableConfigs table</comment>
   		<sql>
   			DROP TABLE UserFavouriteTableConfigs;
   		</sql>

   	</changeSet>
 	-->
	<changeSet id="jwr-db-HouseId-Added" author="Nidhi" context="onlyLocal">
 		<preConditions onFail="MARK_RAN">
			<tableIsEmpty tableName="Users"/>
		</preConditions>

        <comment>Adding a User as House in Users Table</comment>
       <sql>
 		SET IDENTITY_INSERT [dbo].[Users] ON;

	    INSERT INTO [dbo].[Users]
	    ([userID],[username],[password],[email],[stateID],[emailOptIn],[registerDate],[lastLoginDate],[currencyRupees]
	    ,[currencyCoins],[currencyGold],[xpCash],[xpSocial],[avatarId],[emailVerified]
	    ,[locked],[loginAttempts],[isBot],[unverifiedLogins],[totalDeposits],[totalWithdrawals],[totalRake]
	    ,[totalDepositsCount],[totalWithdrawalsCount],[totalCashGamesWon],[totalFreeGamesWon],[totalCashGamesLost]
	    ,[totalFreeGamesLost],[totalCashAmountWon],[totalCashAmountLost],[friendReferral],[totalLoginCount],[ChatAllowed],[mobileVerified]
	    ,[userDeviceType],[smsOptIn],[isFraud],[userStatus],[AddressProofStatus],[IdProofStatus],[CurrencyLock])
	    VALUES
	    (-1 ,'jungleehouse','house@jungleegame.com','house@jungleegame.com',1,0,GETDATE(),GETDATE()
			,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'',0,0,0,0,0,0);

		SET IDENTITY_INSERT [dbo].[Users] OFF;
 		</sql>
    </changeSet>

	<changeSet id="alter-tableconfigurations-add-maxdropscore" author="Nidhi">
	 <comment>Adding column maxDropScore to TableConfigurations</comment>
	  <sql>
	   ALTER TABLE [dbo].[TableConfigurations]
	   ADD maxDropScore smallint not null default((80))
	  </sql>
	 </changeSet>

	<changeSet id="alter-tableconfigurations-add-poolMaxRejoinScore"
		author="Nidhi">
		<comment>Adding column maxDropScore to TableConfigurations</comment>
		<sql>
			ALTER TABLE [dbo].[TableConfigurations]
			ADD poolMaxRejoinScore smallint not null default((79))
		</sql>
	</changeSet>
	<changeSet id="CurrencyTransactions_old" author="Nilesh" context="local">
		<comment>Creating table for CurrencyTransactions_old</comment>
		<sqlFile path="old-schema/tables/CurrencyTransactions_old.sql"
			relativeToChangelogFile="true" endDelimiter="\nGO" />
	</changeSet>

	<changeSet id="CurrencyTransactions_old1" author="Nilesh" context="local">
		<comment>Creating table for CurrencyTransactions_old1</comment>
		<sqlFile path="old-schema/tables/CurrencyTransactions_old1.sql"
			relativeToChangelogFile="true" endDelimiter="\nGO" />
	</changeSet>
	<!-- yahan Pe-->

	<!-- Total CurrencyTransaction changes -->

	<changeSet id="create-function-ExplodeDates" author="Nilesh">
    <comment>Creating function Explode dates</comment>
		<sql>
			CREATE function [dbo].[ExplodeDates](@startdate datetime, @enddate datetime)
			returns table as
			return ( with  N0 as (SELECT 1 as n UNION ALL SELECT 1),N1 as (SELECT 1 as n FROM N0 t1, N0 t2),N2 as (SELECT 1 as n FROM N1 t1, N1 t2),N3 as (SELECT 1 as n FROM N2 t1, N2 t2),N4 as (SELECT 1 as n FROM N3 t1, N3 t2),N5 as (SELECT 1 as n FROM N4 t1, N4 t2),N6 as (SELECT 1 as n FROM N5 t1, N5 t2),nums as (SELECT ROW_NUMBER() OVER (ORDER BY (SELECT 1)) as num FROM N6)
			SELECT DATEADD(day,num-1,@startdate) as thedate
			FROM nums
			WHERE num &lt;= DATEDIFF(day,@startdate,@enddate) + 1
			);
		</sql>
	</changeSet>

	<changeSet id="create-RupeeTransactions-table" author="Nilesh">
    <comment>creating RupeeTransactions table as RupeeTransactions_yyyy_mm</comment>
		<sql>

		DECLARE @name1 VARCHAR(50)
		DECLARE @SQL NVARCHAR(max)
		DECLARE db_cursor CURSOR FOR

		select distinct 'RupeeTransactions_'+CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
		), 2) datw from ExplodeDates ('2011-12-01','2020-12-01')

		OPEN db_cursor
		FETCH NEXT FROM db_cursor INTO @name1

		WHILE @@FETCH_STATUS = 0
		BEGIN


		  SET @SQL = N'CREATE TABLE '+@name1+' (
		 [transactionID] [bigint] IDENTITY(1,1) NOT NULL PRIMARY KEY,
		 [userID] [int] NOT NULL,
		 [delta] [money] NOT NULL DEFAULT ((0)),
		 [newBalance] [money] NOT NULL DEFAULT ((0)),
		 [timestamp] [datetime] NOT NULL,
		 [memo] [varchar](255) NULL,
		 [transactionType] [tinyint] NOT NULL DEFAULT ((0)),
		 [fromUserID] [int] NOT NULL DEFAULT ((0)),
		 [TableConfigId] [int] NOT NULL DEFAULT ((-1))
		 )'

		  EXEC sp_executesql @SQL




		       FETCH NEXT FROM db_cursor INTO @name1
		END

		CLOSE db_cursor
		DEALLOCATE db_cursor
		</sql>
	</changeSet>

	<changeSet id="create-CoinTransactions-table" author="Nilesh">
    <comment>creating CoinTransactions table as CoinTransactions_yyyy_mm</comment>
		<sql>
			DECLARE @name1 VARCHAR(50)
			DECLARE @SQL NVARCHAR(max)
			DECLARE db_cursor CURSOR FOR

			select distinct 'CoinTransactions_'+CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
			), 2) datw from ExplodeDates ('2011-12-01','2020-12-01')

			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @name1

			WHILE @@FETCH_STATUS = 0
			BEGIN


			  SET @SQL = N'CREATE TABLE '+@name1+' (
			 [transactionID] [bigint] IDENTITY(1,1) NOT NULL PRIMARY KEY,
			 [userID] [int] NOT NULL,
			 [delta] [money] NOT NULL DEFAULT ((0)),
			 [newBalance] [money] NOT NULL DEFAULT ((0)),
			 [timestamp] [datetime] NOT NULL,
			 [memo] [varchar](255) NULL,
			 [transactionType] [tinyint] NOT NULL DEFAULT ((0)),
			 [fromUserID] [int] NOT NULL DEFAULT ((0)),
			 [TableConfigId] [int] NOT NULL DEFAULT ((-1))
			 )'

			  EXEC sp_executesql @SQL




			       FETCH NEXT FROM db_cursor INTO @name1
			END

			CLOSE db_cursor
			DEALLOCATE db_cursor
		</sql>
	</changeSet>

	<changeSet id="create_index_rupee_coin_txn" author="shashanksharda" context="prod">
	<comment>creating indexes on monthly rupee coin tables</comment>
	<sql>DECLARE @name1 VARCHAR(50)
DECLARE @name VARCHAR(50)
DECLARE @SQL1 NVARCHAR(max)
DECLARE @SQL2 NVARCHAR(max)
DECLARE db_cursor CURSOR FOR

select distinct CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
), 2) datw from ExplodeDates ('2011-12-01','2020-12-01')

OPEN db_cursor
FETCH NEXT FROM db_cursor INTO @name1

WHILE @@FETCH_STATUS = 0
BEGIN

  SET @SQL1 = N'

	CREATE NONCLUSTERED INDEX [indx_RupeeTransactions_'+@name1+'_UserID_transactionType_fromUserID] ON [dbo].[RupeeTransactions_'+@name1+']
	(	[userID] ASC,[transactionType] ASC,[fromUserID] ASC)INCLUDE([delta],[timestamp],[TableConfigId]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]

	CREATE NONCLUSTERED INDEX [indx_RupeeTransactions_'+@name1+'_UserID_Timestamp_TransactionType] ON [dbo].[RupeeTransactions_'+@name1+']
	([userID] ASC,[timestamp] ASC,[transactionType] ASC	)INCLUDE ( 	[delta],[fromUserID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]

	CREATE NONCLUSTERED INDEX [indx_RupeeTransactions_'+@name1+'_Memo_transactiontype] ON [dbo].[RupeeTransactions_'+@name1+']
	([memo] ASC,[transactionType] ASC)INCLUDE ( [transactionID],[userID],[delta],[newBalance],	[timestamp],[fromUserID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]

    '
   SET @SQL2 =N'
	CREATE NONCLUSTERED INDEX [indx_CoinTransactions_'+@name1+'_UserID_transactionType_fromUserID] ON [dbo].[CoinTransactions_'+@name1+']
	(	[userID] ASC,[transactionType] ASC,[fromUserID] ASC)INCLUDE([delta],[timestamp],[TableConfigId]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]

	CREATE NONCLUSTERED INDEX [indx_CoinTransactions_'+@name1+'_UserID_Timestamp_TransactionType] ON [dbo].[CoinTransactions_'+@name1+']
	([userID] ASC,[timestamp] ASC,[transactionType] ASC	)INCLUDE ( 	[delta],[fromUserID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]

	CREATE NONCLUSTERED INDEX [indx_CoinTransactions_'+@name1+'_Memo_transactiontype] ON [dbo].[CoinTransactions_'+@name1+']
	([memo] ASC,[transactionType] ASC)INCLUDE ( [transactionID],[userID],[delta],[newBalance],	[timestamp],[fromUserID]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]

	'
	 EXEC sp_executesql @SQL1, N'@name NVARCHAR(50)', @name = @name1
	 EXEC sp_executesql @SQL2, N'@name NVARCHAR(50)', @name = @name1

       FETCH NEXT FROM db_cursor INTO @name1
END

CLOSE db_cursor
DEALLOCATE db_cursor
	</sql>
	</changeSet>

	<changeSet id="create-view-AllCurrencyTransactions_old" author="ShashankSingh">
		<comment>create view AllCurrencyTransactions_old</comment>
		<sqlFile path="views/AllCurrencyTransactions_old.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>

	<changeSet id="insert-in-RupeeTransactions-table" author="Nilesh" context="prod">

    <comment>migrating historical rupee data month wise into CoinTransactions table</comment>
		<sql>
			DECLARE @name1 VARCHAR(50)
			DECLARE @month int,@year int
			DECLARE @name VARCHAR(50)
			DECLARE @SQL NVARCHAR(max)
			DECLARE db_cursor CURSOR FOR

			select distinct CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
			), 2) datw,datepart(year,thedate) year,DATEPART(Month,thedate) month
			from ExplodeDates ('2011-12-01','2016-12-01')

			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @name1,@year,@month

			WHILE @@FETCH_STATUS = 0
			BEGIN

			  SET @SQL = N'
			  SET IDENTITY_INSERT RupeeTransactions_'+@name1+'  ON; insert into RupeeTransactions_'+@name1+ ' (transactionID,userid,delta,newBalance,timestamp,memo,transactionType,fromUserID,tableConfigID)select transactionID,userid,delta,newBalance,timestamp,memo,transactionType,fromUserID,case when tableConfigID is null then -1 else tableconfigid end from AllCurrencyTransactions_old ct with(nolock) left join LogGameTables lgt with(nolock) on ct.tableID = lgt.tableID where  ct.currencytype = ''rupees'' and  tyear = '+CAST(@year as varchar)+' and tmonth = '+CAST(@month as varchar)+'
				SET IDENTITY_INSERT RupeeTransactions_'+@name1+'  OFF;'

				EXEC sp_executesql @SQL, N'@name NVARCHAR(50)', @name = @name1




			       FETCH NEXT FROM db_cursor INTO @name1,@year,@month
			END

			CLOSE db_cursor
			DEALLOCATE db_cursor
		</sql>
	</changeSet>
	<changeSet id="insert-in-CoinTransactions-table" author="Nilesh" context="prod">

    <comment>migrating historical coin data month wise into CoinTransactions table</comment>
		<sql>
			DECLARE @name1 VARCHAR(50)
			DECLARE @month int,@year int
			DECLARE @name VARCHAR(50)
			DECLARE @SQL NVARCHAR(max)
			DECLARE db_cursor CURSOR FOR

				select distinct CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
			), 2) datw,datepart(year,thedate) year,DATEPART(Month,thedate) month
			from ExplodeDates ('2011-12-01','2016-12-01')

			OPEN db_cursor
				FETCH NEXT FROM db_cursor INTO @name1,@year,@month

			WHILE @@FETCH_STATUS = 0
			BEGIN

			  SET @SQL = N'
			  SET IDENTITY_INSERT CoinTransactions_'+@name1+'  ON;insert into CoinTransactions_'+@name1+ '(transactionID,userid,delta,newBalance,timestamp,memo,transactionType,fromUserID,tableConfigID)select transactionID,userid,delta,newBalance,timestamp,memo,transactionType,fromUserID,case when tableConfigID is null then -1 else tableconfigid end from AllCurrencyTransactions_old ct with(nolock)left join LogGameTables lgt with(nolock) on ct.tableID = lgt.tableID where  ct.currencytype = ''coins'' and   tyear = '+CAST(@year as varchar)+' and tmonth = '+CAST(@month as varchar)+'
			  SET IDENTITY_INSERT CoinTransactions_'+@name1+'  OFF;'

				EXEC sp_executesql @SQL, N'@name NVARCHAR(50)', @name = @name1




			       FETCH NEXT FROM db_cursor INTO @name1,@year,@month
			END

			CLOSE db_cursor
			DEALLOCATE db_cursor
		</sql>
	</changeSet>

	<changeSet id="insert-in-RupeeTransactions-table-2" author="ShashankSingh" context="prod">

    <comment>migrating historical rupee data month wise into RupeeTransactions table</comment>
		<sql>
			DECLARE @name1 VARCHAR(50)
			DECLARE @month int,@year int
			DECLARE @name VARCHAR(50)
			DECLARE @SQL NVARCHAR(max)
			DECLARE db_cursor CURSOR FOR

				select distinct CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
			), 2) datw,datepart(year,thedate) year,DATEPART(Month,thedate) month
			from ExplodeDates ('2017-01-01','2017-05-01')

			OPEN db_cursor
				FETCH NEXT FROM db_cursor INTO @name1,@year,@month

			WHILE @@FETCH_STATUS = 0
			BEGIN

			  SET @SQL = N'
			  SET IDENTITY_INSERT RupeeTransactions_'+@name1+'  ON; insert into RupeeTransactions_'+@name1+ ' (transactionID,userid,delta,newBalance,timestamp,memo,transactionType,fromUserID,tableConfigID)select transactionID,userid,delta,newBalance,timestamp,memo,transactionType,fromUserID,case when tableConfigID is null then -1 else tableconfigid end from AllCurrencyTransactions_old ct with(nolock) left join LogGameTables lgt with(nolock) on ct.tableID = lgt.tableID where  ct.currencytype = ''rupees''and  tyear = '+CAST(@year as varchar)+' and tmonth = '+CAST(@month as varchar)+'
				SET IDENTITY_INSERT RupeeTransactions_'+@name1+'  OFF;'

				EXEC sp_executesql @SQL, N'@name NVARCHAR(50)', @name = @name1




			       FETCH NEXT FROM db_cursor INTO @name1,@year,@month
			END

			CLOSE db_cursor
			DEALLOCATE db_cursor
		</sql>
	</changeSet>
	<changeSet id="insert-in-CoinTransactions-table-2" author="ShashankSingh" context="prod">

    <comment>migrating historical coin data month wise into CoinTransactions table</comment>
		<sql>
			DECLARE @name1 VARCHAR(50)
			DECLARE @month int,@year int
			DECLARE @name VARCHAR(50)
			DECLARE @SQL NVARCHAR(max)
			DECLARE db_cursor CURSOR FOR

				select distinct CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
			), 2) datw,datepart(year,thedate) year,DATEPART(Month,thedate) month
			from ExplodeDates ('2017-01-01','2017-05-01')

			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @name1,@year,@month

			WHILE @@FETCH_STATUS = 0
			BEGIN

			  SET @SQL = N'
			  SET IDENTITY_INSERT CoinTransactions_'+@name1+'  ON;insert into CoinTransactions_'+@name1+ '(transactionID,userid,delta,newBalance,timestamp,memo,transactionType,fromUserID,tableConfigID)select transactionID,userid,delta,newBalance,timestamp,memo,transactionType,fromUserID,case when tableConfigID is null then -1 else tableconfigid end from AllCurrencyTransactions_old ct with(nolock)left join LogGameTables lgt with(nolock) on ct.tableID = lgt.tableID where  ct.currencytype = ''coins'' and  tyear = '+CAST(@year as varchar)+' and tmonth = '+CAST(@month as varchar)+'
			  SET IDENTITY_INSERT CoinTransactions_'+@name1+'  OFF;'

				EXEC sp_executesql @SQL, N'@name NVARCHAR(50)', @name = @name1




			       FETCH NEXT FROM db_cursor INTO @name1,@year,@month
			END

			CLOSE db_cursor
			DEALLOCATE db_cursor
		</sql>
	</changeSet>

	<changeSet id="create-sequence-currencyTransctionIdGen" author="Nilesh">
    <comment>create sequence currencyTransctionIdGen</comment>
		<sql>
			DECLARE @SQL NVARCHAR(4000)
			DECLARE @var varchar(50) = (select (isnull(max(transactionId),0)) from CurrencyTransactions)

			SET @SQL = N'create sequence currencyTransctionIdGen  as bigint  start with '+@var+' increment by 1'

			EXEC sp_executesql @SQL
		</sql>
	</changeSet>

    <changeSet id="alter-currencytransactions-add-tableconfigs" author="Nilesh" context="onlyLocal">
    <comment>Adding TableConfigId column on CurrencyTransactions table / add data / drop tableid</comment>
		<sql>
			ALTER TABLE [dbo].[CurrencyTransactions]
			ADD TableConfigId INT NOT NULL DEFAULT ((-1));

			UPDATE CurrencyTransactions
			SET TableConfigId = t.tableConfigId
			FROM CurrencyTransactions ct
			INNER JOIN logGameTables t ON
			ct.tableConfigId = t.tableConfigId;

			ALTER TABLE [dbo].[CurrencyTransactions]
			DROP COLUMN tableId;
		</sql>
	</changeSet>

    <!-- Total CurrencyTransaction changes end here -->
 	<!-- Removing all gateway changesets and adding only one -->
 	<!--changeSet id="jwr-db-7-gateway-1" author="Mayank" context="Check">
        <comment>Alter table Gateway</comment>
 		<sql>
 			ALTER TABLE Gateway ADD PostURL VARCHAR(200), ConfigParameters VARCHAR(255),
 			ReturnURL VARCHAR(200), ReturnURLMobile VARCHAR(200), S2Senabled BIT
 		</sql>
 	</changeSet>

    <changeSet id="jwr-db-7-gateway-2" author="Mayank" context="Check">
        <comment>Fill in configs for Gateways into the table</comment>
        <sqlFile path="gateWayConfig.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>

    <changeSet id="jwr-db-7-gateway-3" author="Mayank" context="Check">
        <comment>Additional column that tells if the gateway is able take card details at client side or not</comment>
        <sql>
			ALTER TABLE Gateway ADD takesCardDetails tinyint not null default((0));
			ALTER TABLE Gateway ADD ReconciliationURL VARCHAR(200)
        </sql>
    </changeSet>
    <changeSet id="jwr-db-7-gateway-4" author="Mayank" runOnChange="true" context="Check">
        <comment>BankGateway Mapping and GatewayData</comment>
        <sqlFile path="gatewayBankConfig.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet-->

    <changeSet id="jwr-db-7-gateway-table-fk-drop" author="ShashankSingh" runOnChange="true">
    	<comment>drop FK from BankGateway</comment>
    	<sql>
    		IF (OBJECT_ID('FK__BankGatew__Gatew__407A839F', 'F') IS NOT NULL)
			BEGIN
				ALTER TABLE [dbo].[BankGateway] DROP CONSTRAINT [FK__BankGatew__Gatew__407A839F]
			END
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-bank-table-1" author="Mayank">
    	<comment>Update the display order of banks in netbanking</comment>
    	<sql>
			update bank set DisplayOrder=1 where BankID=41
			update bank set DisplayOrder=2 where BankID=24
			update bank set DisplayOrder=3 where BankID=10
			update bank set DisplayOrder=4 where BankID=27
			update bank set DisplayOrder=5 where BankID=26
			update bank set DisplayOrder=6 where BankID=25
			update bank set DisplayOrder=7 where BankID=17
			update bank set DisplayOrder=8 where BankID=34
		</sql>
	</changeSet>

    <changeSet id="jwr-db-7-gateway-buddies" author="ShashankSingh" runOnChange="true">
    	<comment>Drop table gateway and buddies for dev</comment>
    	<sql>
    		IF OBJECT_ID('dbo.Gateway') IS NOT NULL
    		BEGIN
    			DROP TABLE Gateway
    		END

    		IF OBJECT_ID('dbo.Buddies') IS NOT NULL
    		BEGIN
    			DROP TABLE Buddies
    		END
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-7-gateway-table" author="ShashankSingh" runOnChange="true">
    	<comment>Create gateway table if required</comment>
    	<sql>
    		IF OBJECT_ID('dbo.Gateway') IS NULL
    		BEGIN
    			CREATE TABLE [dbo].[Gateway](
					[GatewayID] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
					[GatewayName] [varchar](255) NOT NULL,
					[PostURL] [varchar](200) NULL,
					[ConfigParameters] [varchar](255) NULL,
					[ReturnURL] [varchar](200) NULL,
					[ReturnURLMobile] [varchar](200) NULL,
					[S2Senabled] [bit] NULL,
					[takesCardDetails] [tinyint] NOT NULL,
					[ReconciliationURL] [varchar](200) NULL,
 					CONSTRAINT [PK__Gateway__66BCD880FA377DA9] PRIMARY KEY CLUSTERED
					(
						[GatewayID] ASC
					)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY]

			END
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-7-gateway-all" author="ShashankSingh" runOnChange="true">
    	<comment>Single changeset to create gateway table and add required configs</comment>
    	<sql>
    		DELETE FROM gateway
    		ALTER TABLE [dbo].[Gateway] ADD  DEFAULT ((0)) FOR [takesCardDetails]

			------------------- for Techpro ---------------------
			IF not exists(select * from Gateway where GatewayName='Techpro')
			BEGIN
				insert into Gateway values ('Techpro', 'https://www.jungleegames.com/jwrtest/qa/techpro/techprocessReq.php',
				'merchantId:L1682;securityKey:6170899524EPNJJL;securityIV:4569382995CYNDMV',
				'http://www.jungleegames.com/jwrtest/qa/techpro/techprocessReq.php', '', 0, 1, 'https://www.jungleegames.com/jwrtest/qa/techpro/reconcileTechpro.php')

				update BankGateway set GatewayID=1
			END

			------------------- for Citrus ---------------------
			IF not exists(select * from Gateway where GatewayName='Citrus')
			BEGIN
				insert into Gateway values ('Citrus', 'https://www.jungleegames.com/jwrtest/qa/citrus/citrusReq.php',
				'secretKey:677514fc99d662f880bdea51c0c83edd0e43bcae;accessKey:N08QJ6CMIHWHHKC4YHSI',
				'http://www.jungleegames.com/jwrtest/qa/citrus/citrusResp.php', '', 0, 1, 'https://www.jungleegames.com/jwrtest/qa/citrus/reconcileCitrus.php')

				update BankGateway set GatewayID=2 where BankGatewayID in (45,46)
			END

			------------------- for Atom_paynetz ---------------------
			IF not exists(select * from Gateway where GatewayName='Atom_paynetz')
			BEGIN
				insert into Gateway values ('Atom_paynetz', '', '', '', '', 0, 0, '')
			END

			------------------- for mobikwik ---------------------
			IF not exists(select * from Gateway where GatewayName='Mobikwik')
			BEGIN
				insert into Gateway values ('Mobikwik', 'https://test.mobikwik.com/wallet',
				'merchantName:MobiKwik;merchantId:MBK9002;secretKey:ju6tygh7u7tdg554k098ujd5468o',
				'http://jwrqa6853.cloudapp.net:8604/payments/mobikwikresponse', '', 0, 0, 'https://test.mobikwik.com/checkstatus')

				update BankGateway set GatewayID=3 where  BankGatewayID in (204,209, 231,223)
			END
			-------------------------------------------------------

			------------------- for Billdesk ---------------------
			IF not exists(select * from Gateway where GatewayName='Billdesk')
			BEGIN
				insert into Gateway values ('Billdesk', '', '', '', '', 0, 0, '')
			END

			------------------- for EBS ---------------------
			IF not exists(select * from Gateway where GatewayName='EBS')
			BEGIN
				insert into Gateway values ('EBS', '', '', '', '', 0, 0, '')
			END

			------------------- for CCavenue ---------------------
			IF not exists(select * from Gateway where GatewayName='CCavenue')
			BEGIN
				insert into Gateway values ('CCavenue', '', '', '', '', 0, 0, '')
			END

			------------------- for paytm -------------------------
			IF not exists(select * from Gateway where GatewayName='PayTM')
			BEGIN
				insert into Gateway values ('PayTM', 'https://www.jungleegames.com/jwrtest/qa/paytm/paytm_post.php',
				'', 'https://www.jungleegames.com/jwrtest/qa/paytm/pay_response_web.php', '', 0, 0, '')
			END

			------------------- for Direcpay ---------------------
			IF not exists(select * from Gateway where GatewayName='Direcpay')
			BEGIN
				insert into Gateway values ('Direcpay', '', '', '', '', 0, 0, '')
			END

			------------------- for AirPay ---------------------
			IF not exists(select * from Gateway where GatewayName='AirPay')
			BEGIN
				insert into Gateway values ('AirPay', '', '', '', '', 0, 0, '')
			END

			------------------- for payumoney ---------------------
			IF not exists(select * from Gateway where GatewayName='PayUMoney')
			BEGIN
				insert into Gateway values ('PayUMoney', 'https://www.jungleegames.com/jwrtest/qa/payumoney/requestHandler.php',
				'merchantId:4939205;key:xgqPEwB5;salt:bD8nb1HwAA;authHeader:Ze3f4vLEyigSU+TFJsA+pRhT3WUwRQD9miwkaBratL4=',
				'https://www.jungleegames.com/jwrtest/qa/payumoney/responseHandler.php', '', 0, 0, '')

				update BankGateway set GatewayID=4 where  BankGatewayID in (238, 239, 205, 215)
			END
			-------------------------------------------------------
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-7-gateway-direcpay" author="Mayank">
    	<comment>Add gateway configs for Direcpay only</comment>
    	<sql>
			update Gateway set
			PostURL='https://www.jungleegames.com/jwrtest/qa/direcpay/request.php',
			ReturnURL='http://www.jungleegames.com/jwrtest/qa/direcpay/response.php',
			takesCardDetails='1',
			ReconciliationURL='http://www.jungleegames.com/jwrtest/qa/direcpay/reconcileDirecpay.php'
			where GatewayName='Direcpay'
		</sql>
	</changeSet>
	
    <changeSet id="jwr-db-7-deposittransaction-1" author="Mayank">
        <comment>Merging temptransaction table and banking table into one with only meaningful data.</comment>
        <sqlFile path="depositTransactions.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
    <changeSet id="jwr-db-7-deposittransaction-2" author="Mayank">
        <comment>Adding column username for reporting purpose / update username / add promocode table</comment>
        <sql>
        	ALTER TABLE [dbo].[DepositTransactions]
			ADD username varchar(14);

			UPDATE [dbo].[DepositTransactions]
			SET username = usr.username
			FROM DepositTransactions txn
			INNER JOIN [dbo].[users] usr on txn.userid = usr.userID;

			ALTER TABLE [dbo].[DepositTransactions]
			ADD
			promoCode varchar(14) NULL,
			isPromoCodeRedeemed SMALLINT NOT NULL DEFAULT(0);
        </sql>
    </changeSet>
    <changeSet id="jwr-db-7-deposittransaction-3" author="Mayank">
        <comment>Adding columns for reporting/tracking purpose</comment>
        <sql>
			ALTER TABLE [dbo].[DepositTransactions]
			ADD
			depositAttemptType SMALLINT NOT NULL DEFAULT(0),
			txnCreditedTime [datetime] NULL,
			txnProcessedVia SMALLINT NOT NULL DEFAULT(0),
			lastReconciledTime [datetime] NULL;
        </sql>
    </changeSet>
    <changeSet id="jwr-db-7-deposittransaction-users-3" author="Mayank" context="local">
        <comment>Adding column lastSuccessfulDepositMethod to reuse in deposit method</comment>
        <sql>
        	ALTER TABLE [dbo].[Users]
			ADD lastSuccessfulDepositMethod INT NOT NULL default(0);

			UPDATE [dbo].[Users]
			SET lastSuccessfulDepositMethod = latestDeposit.BankID
			FROM users usr
			INNER JOIN (
				select bankid,d1.userID from DepositTransactions d1
				INNER JOIN (
					select max(internaltransactionid) maxId, userid from DepositTransactions where Status =2 group by userID
				) d2 on d1.InternalTransactionID = d2.maxId where BankID is not null
			) latestDeposit
			on latestDeposit.userid = usr.userID;
        </sql>
    </changeSet>
    <changeSet id="jwr-db-7-deposittransaction-users-4" author="Mayank" context="local">
        <comment>Adding column lastUsedCardToken to reuse in deposit method, if lastSuccessfulDepositMethod was savedCard</comment>
        <sql>
			ALTER TABLE [dbo].[Users]
			ADD lastUsedCardToken varchar(100) NOT NULL default('');
        </sql>
    </changeSet>
    <changeSet id="jwr-db-7-deposittransaction-users-5" author="Mayank">
        <comment>Adding column CardToken in DepositTransactions, if transaction is with savedCard</comment>
        <sql>
			ALTER TABLE [dbo].[DepositTransactions]
			ADD cardToken varchar(100) NOT NULL default('');
        </sql>
    </changeSet>
    <changeSet id="jwr-db-update-techprotransaction-1" author="Mayank" context="local">
        <comment>Renaming column CustomerId to meaningful name InternalTxnId / table TechProTransactions to PayNimoTransactions</comment>
 		<sql>
 			sp_rename 'TechProTransactions.CustomerId', 'InternalTxnId', 'COLUMN';
			sp_rename 'TechProTransactions', 'PayNimoTransactions';
 		</sql>
    </changeSet>
    <changeSet id="jwr-db-alter-savedcarddetails-1" author="Mayank" context="local">
    	<comment>Altering saved card details table to add gateway-id corresponding to the saved card</comment>
    	<sql>
    		alter table SavedCardsDetails add GatewayId int not null default(0)
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-alter-savedcarddetails-2" author="Mayank" context="local">
    	<comment>Gateway-id corresponding to the saved card must have default set to 1 (Techpro)</comment>
    	<sql>
    		update SavedCardsDetails set GatewayId=1 where GatewayId=0
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-alter-savedcarddetails-3" author="Mayank" context="local">
    	<comment>Altering column CardId[int] to CardToken[varchar(100)] to support savecards on different gateways</comment>
    	<sql>
    		ALTER TABLE SavedCardsDetails ALTER COLUMN CardId varchar(100);
			EXEC sp_rename 'SavedCardsDetails.CardId', 'CardToken', 'COLUMN';
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-create-chat-log-1" author="Thapa">
		<comment>Creating ChatLog table</comment>
		<sql>
		CREATE TABLE [dbo].[Chat_log](
			[playerId] [int] NOT NULL,
			[playerName] [varchar](254) NOT NULL,
			[time] [datetime] NOT NULL,
			[tableId] [int] NOT NULL,
			[gameId] [int] NOT NULL,
			[message] [varchar](254) NOT NULL,
		)

		</sql>
	</changeSet>
    <changeSet id="jwr-db8-currency-locks" author="Nilesh" context="local">
    	<comment>Adding lockedRupees, lockedCoins columns</comment>
		<sql>
			EXEC DropColumnFromTable 'Users', 'CurrencyLock';
			ALTER TABLE [dbo].[Users] ADD lockedRupees money NOT NULL DEFAULT ((0));
			ALTER TABLE [dbo].[Users] ADD lockedCoins money NOT NULL DEFAULT ((0));
		</sql>
	</changeSet>

    <changeSet id="jwr-db-10-chat_logs_alter" author="ShashankSingh">
    	<comment>Adding primary key Id</comment>
		<sqlFile path="ChatLogAlter.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
	</changeSet>

	<changeSet id="jwr-db-14-block_chat_logs_table" author="ShashankSingh">
    	<comment>New table to log chat blocks</comment>
		<sqlFile path="BlockChatLogs.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
	</changeSet>

	<changeSet id="jwr-db-TableConfigurations-6" author="Thapa">
    <comment>Adding Table Created Column in Table Configuration</comment>
		<sql>
			ALTER TABLE [dbo].[TableConfigurations]
			ADD tableCreated [datetime] NOT NULL DEFAULT ((GETDATE()))

			ALTER TABLE [dbo].[TableConfigurations]
			ADD deckCount [int] NOT NULL DEFAULT ((-1))
		</sql>
	</changeSet>

	<changeSet id="jwr-db-TableConfigurations-7" author="Thapa">
    <comment>update Table deck count Column in Table Configuration</comment>
		<sql>
			Update TableConfigurations
			set deckCount = case when handType =1  then 3 else case when seats >2 then 2 else 1 end end
		</sql>
	</changeSet>

    <changeSet id="jwr-db-8" author="Mirek">
    	<comment>Setting Azure Storage settings</comment>
    	<sql>
    		UPDATE [cfg] SET [value] = 'true' WHERE [id] = 'azure' AND [key] = 'azure.storage.enabled';
    		UPDATE [cfg] SET [value] = 'DefaultEndpointsProtocol=https;AccountName=jwrdev;AccountKey=2mX5unTVotyydF9LvWHfhWWiWVKoeDK9wLAqNwLa+9WZZULlOSozuISA1A+/Y6eHXBgBm1wbwf//44z5JRmXqA==' WHERE [id] = 'azure' AND [key] = 'azure.storage.connectionstring';
    	</sql>
    </changeSet>

      <changeSet id="jwr-db-9" author="Nidhi">
    	<comment>Create GameActionLog table</comment>
    	<sql>
		CREATE TABLE [dbo].[GameActionLog](
		    [ID] [int] IDENTITY(1,1) NOT NULL,
			[tableId] [bigint] NOT NULL,
			[gameId] [bigint] NOT NULL,
			[gameinfo] varchar(max) NOT NULL,
			[dateCreated] Datetime NOT NULL DEFAULT(GetDate())
		)
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-Users-insert-Bot-10" author="Nilesh" context="local">
    <comment>inserting HouseId and BotId in users table</comment>
		<sql>
		Set Identity_Insert users On;
		INSERT [dbo].[Users] ([userID], [username], [password], [email], [stateID], [emailOptIn], [registerDate], [lastLoginDate], [currencyRupees], [currencyCoins], [currencyGold], [xpCash], [xpSocial], [xpBonusTimeCash], [xpBonusTimeSocial], [avatarId], [lastCoinReload], [emailVerified], [passwordResetCode], [locked], [loginAttempts], [isBot], [unverifiedLogins], [giftPath], [socialNetwork], [socialNetworkID], [mobileNumber], [registerIPAddress], [totalDeposits], [totalWithdrawals], [totalRake], [firstDepositDate], [firstDepositAmount], [lastDepositDate], [lastDepositAmount], [firstWithdrawalDate], [firstWithdrawalAmount], [lastWithdrawalDate], [lastWithdrawalAmount], [totalDepositsCount], [totalWithdrawalsCount], [totalCashGamesWon], [totalFreeGamesWon], [totalCashGamesLost], [totalFreeGamesLost], [totalCashAmountWon], [totalCashAmountLost], [adKey], [friendReferral], [totalLoginCount], [lastLoginIP], [lastCashGamePlayed], [totalCashBonus], [firstCashGamePlayed], [lastAdKeyStamp], [firstFreeGamePlayed], [lastFreeGamePlayed], [ChatAllowed], [emailVerificationLink], [mobileVerified], [mobileVerificationTimestamp], [userDeviceType], [smsOptIn], [lastOnlineTime], [FirstName], [LastName], [DateOfBirth], [Address], [Address2], [City], [PIN], [ContactDetailsUpdatedTime], [isFraud], [userPanPortraitPath], [userStatus], [panCardNumber], [uploadCount], [rejectionReason], [fraudStatus], [fraudPronity], [fraudType], [AddressProofType], [AddressProofText], [AddressProofImagepath], [AddressProofStatus], [AddressProofUploadCount], [AddressProofReason], [timestampAddressUpdate], [Source], [IdProofType], [IdProofText], [IdProofImagePath], [IdProofStatus], [IdProofReason], [timestampIdUpdate], [timestampPanUpdate], [lastLockReason], [authToken], [gsAuthToken], [lockedRupees], [lockedCoins]) VALUES (-10, N'BOT_PLAYER',  N'27AD3C8F44F3F4B16D542CCFBDB14CD60D0F75A4B6986D677136C15FB11D26A8E01805', N'', 38, 1, CAST(N'2016-04-04 16:22:30.420' AS DateTime), CAST(N'2016-04-14 18:51:36.323' AS DateTime), 0, 0, 0, 0, 0, NULL, NULL, 6, NULL, 0, N'', 0, 0, 0, 25, NULL, N'JUNGLEERUMMY', NULL, N'', N'127.0.0.1', 0.0000, 0.0000, 0.0000, NULL, 0.0000, NULL, 0.0000, NULL, 0.0000, NULL, 0.0000, 0, 0, 0, 0, 0, 0, 0.0000, 0.0000, N'asdf', 0, 26, N'127.0.0.1', NULL, 0.0000, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, N'web', 1, CAST(N'2016-04-14 18:51:36.323' AS DateTime), NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, 0, NULL, NULL, 0, NULL, NULL, NULL, NULL, 0, 0, NULL, NULL, N'', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, N'7zKMjYQo38u5vunFo9yd9Eiq4vW7k4Fx4ZxWrs1j', N'Tu79FwiPnNQI6eqxftKLLpyrntgXLlsX02C2bj4W', 0.0000, 0.0000);
		Set Identity_Insert users Off
		</sql>
	</changeSet>
   <changeSet id="jwr-db-14-invitations_table" author="ShashankSingh" context="local">
    	<comment>Alter table Incvitations</comment>
		<sqlFile path="AlterInvitations.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
	</changeSet>
	<changeSet id="jwr-db-15-invitations_table" author="MayankMishra">
    	<comment>Alter table Invitations, Add deviceType</comment>
		<sql>
			ALTER TABLE Invitations ADD 
			[userDeviceType] [varchar](10) NOT NULL DEFAULT (N'web')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Withdrawals_table" author="NidhiSingh" context="local">
    	<comment>Alter table Withdrawals</comment>
		<sqlFile path="AlterWithdrawals.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
	</changeSet>

	<changeSet id="jwr-db-Add-Withdrawals-Flag-Table" author="NidhiSingh">
		<comment>Adding Withdrawals-Flag table for maintaining withdrawal flags</comment>
		<sql>
			CREATE TABLE [dbo].[WithdrawalFlags](
			[Id] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY,
			[UserId] [int] NOT NULL FOREIGN KEY REFERENCES Users(Userid),
			[WithdrawalId] [int] NOT NULL FOREIGN KEY REFERENCES Withdrawals(WithdrawalId),
			[Flag] [smallint] NOT NULL,
			[dateCreated] Datetime NOT NULL DEFAULT(GetDate())
			)
		</sql>
	</changeSet>

	<changeSet id="jwr-db-1-EOHTable" author="ShashankSharda">
		<comment>Creating new table for Hourly reports</comment>
		<sql>
			CREATE TABLE [dbo].[EOHReports](
			[reportID] [bigint] IDENTITY(1,1) NOT NULL,
			[date] [date] NOT NULL,
			[hour] [int] NOT NULL,
			[totalFreeUSers] [int] NOT NULL DEFAULT((0)),
			[totalNewCashUsers] [int] NOT NULL DEFAULT((0)),
			[totalNewCashUsers1] [int] NOT NULL DEFAULT((0)),
			[totalActiveUsers] [int] NOT NULL DEFAULT((0)),
			[totalActiveCashUsers] [int] NOT NULL DEFAULT((0)),
			[totalFreeCashPlayers] [int] NOT NULL DEFAULT((0)),
			[totalActiveCashUsers1] [int] NOT NULL DEFAULT((0)),
			[totalDeposits] [money] NOT NULL DEFAULT((0)),
			[totalNewDeposit] [money] NOT NULL DEFAULT((0)),
			[totalAmountWon] [int] NULL DEFAULT((0)),
			[totalAmountLost] [int] NULL DEFAULT((0)),
			[totalManualDeposits] [money] NOT NULL DEFAULT((0)),
			[totalDepositMobile] [money] NOT NULL DEFAULT((0)),
			[totalCashGamesOnMobile] [int] NOT NULL DEFAULT((0)),
			[totalWithdrawals] [money] NOT NULL DEFAULT((0)),
			[totalNewWithdrawals] [money] NOT NULL DEFAULT((0)),
			[totalGames] [int] NOT NULL DEFAULT((0)),
			[totalNewGames] [int] NOT NULL DEFAULT((0)),
			[totalCashGames] [int] NOT NULL DEFAULT((0)),
			[totalNewCashGames] [int] NOT NULL DEFAULT((0)),
			[totalRakeMade] [money] NOT NULL DEFAULT((0)),
			[totalNewRakeMade] [money] NOT NULL DEFAULT((0)),
			CONSTRAINT [PK_EOHReports] PRIMARY KEY CLUSTERED
			(
			[reportID] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF,
			IGNORE_DUP_KEY =
			OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON
			[PRIMARY]
			) ON [PRIMARY]
		</sql>
	</changeSet>
	<changeSet id="jwr-db-14-promocodes_table" author="ShashankSingh" context="local">
		<comment>Drop older promocodes and happyhour promocodes and create new Promo Codes Table</comment>
		<sqlFile path="NewPromoCodesTable.sql"
			relativeToChangelogFile="true" endDelimiter="\nGO" />
	</changeSet>
	<changeSet id="jwr-db-14-coupons_table_alter" author="ShashankSingh" context="local">
		<comment>Changing dateAvailable and expire to type date from datetime</comment>
		<sql>
			ALTER TABLE Coupons ALTER COLUMN dateAvailable date
			ALTER TABLE Coupons ALTER COLUMN dateExpires date

			ALTER TABLE COUPONS ADD numberOfTimesUsed int not null default(0)
    		ALTER TABLE COUPONS ADD verifyEmail bit not null default(0)
    		ALTER TABLE COUPONS ADD CONSTRAINT AK_COUPONCODE UNIQUE (code);
		</sql>
	</changeSet>

	<!--changeSet id="jwr-db-18-buddies" author="Nilesh" context="local">
		<comment>Adding fromUserName column</comment>
		<sql>
			ALTER TABLE [dbo].[Buddies] ADD [fromUserName] [varchar](50) ;
		</sql>
	</changeSet-->

	<changeSet id="jwr-db-Alter-withdrawal-table-2" author="Nidhi" context="local">
		<comment>Alter Withdrawal</comment>
		<sql>
			ALTER TABLE Withdrawals DROP COLUMN referenceNumber;
			EXEC sp_RENAME 'Withdrawals.[electronicTransferMICRCode]' , 'IfscCode', 'COLUMN'
			EXEC sp_RENAME 'Withdrawals.[electronicTransferAccountNumber]', 'AccountNumber', 'COLUMN'
		</sql>
	</changeSet>
	<changeSet id="jwr-db-19-adminNotes" author="Nilesh" context="local">
    	<comment>Removing duplicate data</comment>
		<sql>
			DELETE FROM dbo.AdminNotes WHERE ID NOT IN (SELECT MAX(ID)
 			FROM dbo.AdminNotes GROUP BY uid1,uid2) ;
		</sql>
	</changeSet>
	 <changeSet id="jwr-db-20-adminNotes" author="Nilesh" context="local">
    	<comment>Removing Primary key from Adminotes</comment>
		<sql>
		declare @c varchar(256) = (SELECT tc.CONSTRAINT_NAME
		FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
		JOIN INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE ccu ON tc.CONSTRAINT_NAME = ccu.Constraint_name
		WHERE tc.CONSTRAINT_TYPE = 'Primary Key'
		and tc.TABLE_NAME = 'adminnotes'
		)

		exec('
		alter table adminnotes
		drop constraint ' +@c)
		</sql>
	</changeSet>
	 <changeSet id="jwr-db-21-adminNotes" author="Nilesh" context="local">
    	<comment>adding composite primary key</comment>
		<sql>
			ALTER TABLE AdminNotes
			ADD CONSTRAINT PK_AdminNotes
			PRIMARY KEY (uid1, uid2);
		</sql>
	</changeSet>


	<changeSet id="jwr-db-22-adminNotes" author="Nilesh" context="local">
    	<comment>alter table name and column names AdminNotes</comment>
		<sqlFile path="RenameAdminNotes.sql" relativeToChangelogFile="true"
			endDelimiter="\nGO" />
	</changeSet>

	<changeSet id="jwr-db-17-gametTableAnnouncements" author="Nilesh">
		<comment>Adding new table for GameTableAnnouncements</comment>
		<sql>
			CREATE TABLE [dbo].[GameTableAnnouncements](
			[id] [bigint] IDENTITY(1,1) PRIMARY KEY,
			[type] [int] NOT NULL,
			[currencyType] [int] ,
			[gameVariant] [int] ,
			[entryFee] [int],
			[userType] [int],
			[frequency] [int],
			[interval] [int] NOT NULL,
			[messageDuration] [int] NOT NULL,
			[startDate] [datetime] NOT NULL,
			[endDate] [datetime] NOT NULL,
			[messageTitle] [varchar](250) NOT NULL,
			[messageBody] [varchar](500) NOT NULL,
			[targetUserIDs] [varchar](max),
			[targetTableConfigIDs] [varchar](max));
		</sql>
		</changeSet>
	<changeSet id="jwr-db-Alter-GameActionLog" author="Nidhi">
		<comment>Alter GameActionLog Table</comment>
		<sql>
			ALTER TABLE GameActionLog ADD PRIMARY KEY (Id)
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Create-WithdrawalStatus-Table" author="Nidhi">
		<comment>Add WithdrawalStatus table</comment>
		<sql>
			CREATE TABLE [dbo].[WithdrawalStatus](
			[Id] [int] IDENTITY(1,1) NOT NULL PRIMARY KEY,
			[wid] [int] NOT NULL FOREIGN KEY REFERENCES Withdrawals(WithdrawalId),
			[timestamp] [datetime] NOT NULL,
			[status] tinyint NOT NULL)
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Alter-Users-Table" author="Nidhi" context="local">
		<comment>Add vip category column table</comment>
		<sql>
			ALTER TABLE [dbo].[Users] ADD [vipcategory] [varchar](15) ;
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Alter-vip-category-column-in-Users-Table"
		author="Nidhi" context="local">
		<comment>Alter vip category column type</comment>
		<sql>
			ALTER TABLE USERS ALTER COLUMN vipcategory tinyint
		</sql>
	</changeSet>

	<changeSet id="jwr-db-ALTER-Users-Table-UserStatus-Column"
		author="Nidhi" context="local">
		<comment>Alter UserStatus column in users table</comment>
		<sql>
			EXEC sp_RENAME 'Users.UserStatus','PanVerificationStatus','COLUMN'

		</sql>
	</changeSet>

	<changeSet id="jwr-db-ALTER-Withdrawal-Flags-table" author="Nidhi">
		<comment>DROP UserId from withdrawal flags table</comment>
		<sql>

			declare @table_name varchar(20)
			declare @col_name varchar(10)
			declare @ConstraintName varchar(150)

			set @table_name = N'WithdrawalFlags'
			set @col_name = N'UserId'

			SELECT @ConstraintName = CONSTRAINT_NAME FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE TABLE_NAME = @table_name AND COLUMN_NAME = @col_name
			declare @sqlConstraint varchar(1023) = 'alter table ' + @table_name + ' drop constraint ' + @ConstraintName
			exec (@sqlConstraint)

			declare @sqlColumn varchar(1023) = 'alter table ' + @table_name + ' drop column ' + @col_name
			exec (@sqlColumn)

		</sql>
	</changeSet>

	<changeSet id="jwr-db-Users_table" author="Nidhi" context="local">
		<comment>Alter table Users</comment>
		<sqlFile path="AlterUsers.sql" relativeToChangelogFile="true"
			endDelimiter="\nGO" />
	</changeSet>
	<changeSet id="jwr-db-ALTER-Fraud-Check-Table-1" author="Nidhi" context="local">
   		<comment>Alter Fraud check table 1</comment>
   		<sql>
   		ALTER TABLE FraudCheck ALTER COLUMN priority tinyint;
   		</sql>
  	</changeSet>
	<changeSet id="jwr-db-ALTER-Fraud-Check-Table-2" author="Nidhi" context="local">
		<comment>Alter withdrawalId to int and add foreignkeys</comment>
		<sqlFile path="AlterFraudCheckWithdrawalId.sql"
			relativeToChangelogFile="true" endDelimiter="\nGO" />
	</changeSet>
	<changeSet id="jwr-db-ALTER-Fraud-Check-Table" author="Nidhi" context="local">
		<comment>Alter Fraud check</comment>
		<sqlFile path="AlterFraudCheck.sql" relativeToChangelogFile="true"
			endDelimiter="\nGO" />
	</changeSet>

	<changeSet id="jwr-db-ALTER-Fraud-Check-Table-3" author="Nidhi" context="local">
		<comment>DROP not needed columns from Fraucheck table</comment>
		<sql>
			ALTER TABLE FraudCheck DROP COLUMN pendingWithdrawals;
			ALTER TABLE FraudCheck DROP COLUMN pendingWithdrawalAmount;
			ALTER TABLE FraudCheck DROP COLUMN processedWithdrawals;
			ALTER TABLE FraudCheck DROP COLUMN processedWithdrawalAmount;
		</sql>
	</changeSet>

	<changeSet id="jwr-db-ALTER-Withdrawal-Flags" author="Nidhi">
		<comment>Change flag type column to tinyint</comment>
		<sql>
			ALTER TABLE WITHDRAWALFLAGS ALTER COLUMN flag tinyint;
		</sql>
	</changeSet>
	<changeSet id="jwr-db-banner-action-logs-recreating" author="ShashankSingh">
		<comment>Recreating New table to store banner action logs</comment>
		<sql>
			CREATE TABLE [dbo].[BannerActionsLog](
			[ID] [int] IDENTITY(1,1),
			[userId] [int] NOT NULL,
			[bannerId] [int] NOT NULL,
			[timestamp] [datetime] NOT NULL
			)
		</sql>
	</changeSet>
	<changeSet id="jwr-db-banner-configuration-alter" author="ShashankSingh" context="local">
		<comment>Alter table banner configuration add new column clicked count</comment>
		<sql>
			ALTER TABLE BannerConfiguration add clickedCount int NOT NULL default(0)
		</sql>
	</changeSet>
	<changeSet id="jwr-db-ALTER-UserTable" author="Nidhi Singh" context="local">
		<comment>Alter user table</comment>
		<sql>
			ALTER TABLE [dbo].[Users] ADD  DEFAULT (0) FOR [firstDepositAmount];
			ALTER TABLE [dbo].[Users] ADD  DEFAULT (0) FOR [lastDepositAmount];
			ALTER TABLE [dbo].[Users] ADD  DEFAULT (0) FOR [firstWithdrawalAmount];
			ALTER TABLE [dbo].[Users] ADD  DEFAULT (0) FOR [lastWithdrawalAmount];
		</sql>
	</changeSet>
	<changeSet id="jwr-db-alter-user-panimage-path" author="Nidhi" context="local">
		<comment>Changing userPanPortraitPath to be a pancardImagePath (as its just pancardImagePath)</comment>
		<sql>
		    ALTER TABLE Users ADD panRejectionReason varchar(300);
			EXEC sp_rename 'Users.userPanPortraitPath', 'pancardImagePath', 'COLUMN';
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Add-withdrawal-entries-in-cfg" author="Nidhi">
    	<comment>Setting withdrawal config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.min.amount', '100', 1, 'number:1:10000:100', 'Minimum withdrawal amount')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.max.cancel.hours', '2', 1, 'number:1:24:1', 'Max hours to cancel a withdrawal')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.storage.account.name', 'jwrdev', 1, 'text', 'Storage account name')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.kyc.container.name', 'kyc', 1, 'text', 'Kyc container name')
    	</sql>
    </changeSet>

	<changeSet id="jwr-withdrawal-journey-AB" author="Madan">
    	<comment>Setting withdrawal journey AB</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.journey.AB', 0, 1, 'number:0:3:1', '0-> Off ,1-> All Control, 2-> AB Test, 3-> All Test')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-tempdata-2" author="Mirek">
        <comment>Create Initial Database with LiquiBase</comment>
        <sqlFile path="TempTableConfigurations2.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>

    <changeSet id="jwr-db-tempdata-3" author="Mirek">
	    <sql>
	    	  UPDATE [dbo].[TableConfigurations] SET [firstDropScore]=20, [midDropScore]=40, [maxDropScore]=80 WHERE handType = 0;
	    </sql>
    </changeSet>

    <changeSet id="jwr-db-Add-mail-settings-entries-in-cfg" author="Nidhi">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'websitelink', 'www.jungleerummy.com', 1, 'text', 'Junglee Rummy Website Url')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'refernwinlink', 'https://www.jungleerummy.com/friends/refer', 1, 'text', 'Refer N Win Url')

    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-test-Mobile-entries-in-cfg" author="Nidhi">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'testMobileNumber', '7976608280', 1, 'text', 'This number can be use multiple time to test and user will always be removed by system')
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-alter-table-couponuses-add-index" author="ShashankSingh" context="local">
    	<comment>Adding index on coupon uses table</comment>
    	<sql>
    		CREATE NONCLUSTERED INDEX CouponId_UserId ON CouponUses (couponID ASC, userID ASC)
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-alter-gametTableAnnouncements" author="Nilesh">
		<comment>Updating entry fee column for GameTableAnnouncements</comment>
		<sql>
			ALTER TABLE GameTableAnnouncements ALTER COLUMN entryFee FLOAT
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Add-Thread-Pool-Size-in-cfg" author="Nidhi">
    	<comment>Setting thread pool size for table service</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.tablestorage.threadpoolsize', 2, 1, 'number:1:20:1', 'Number of threads in the threadpool used to put game logs on azure asynchronously')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-Add-alert-mail-setting-in-cfg" author="Nidhi">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'fromemail', 'alerts@jungleerummymails.com', 1, 'text', 'Address used to send alert emails')

    	</sql>
    </changeSet>

    <changeSet id="jwr-db-create-view-KYCDetails" author="Nilesh">
    	<comment>Adding new view KYCDetails</comment>
    	<sql>
    		CREATE VIEW [dbo].[KYCDetails]
				as
				with tr( userid , widCount)
				as( select userid , count(distinct withdrawalID) from withdrawals where status =0 group by userid)
				SELECT
				    Vipcategory,
				    a.UserID,
				    Username,
				    FirstName + ' ' + LastName as Name,
				    Address,
				    DateOfBirth,
				    City,
				    AddressProofType,
				    AddressProofText,
				    AddressProofStatus,
				    AddressProofReason,
				    TimestampAddressUpdate,
				    TimestampAddressApproval,
					IdProofType,
					case when IdProofType = 3 then
					panCardNumber else IdProofText end as IdProofText,

					case when IdProofType = 3 then
					PanVerificationStatus else IdProofStatus end as IdProofStatus,

				    case when IdProofType = 3 then
					panRejectionReason else IdProofReason end as IdProofReason,

					case when IdProofType = 3 then
				    timestampPanUpdate else TimestampIdUpdate end as TimestampIdUpdate,

					case when IdProofType = 3 then
					timestampPanApproval else TimestampIdApproval end as TimestampIdApproval,
				    AddressProofImagePath,

					case when IdProofType = 3 then
				    PancardImagePath else IdProofImagePath end as IdProofImagePath,

				    case when lastDepositDate is NOT NULL and timestampIdApproval IS NOT NULL and lastDepositDate > timestampIdApproval then 'Accepted' else 'Rejected'
				    end
				    as 'DepositsPostVerification',
					case when tr.userid is null or tr.widcount = 0 then 'No' else 'Yes' end as withdrawalStatusPending

				    FROM
				    Users a WITH(NOLOCK)
					left join tr on a.userid = tr.userid
				    where a.UserID > -1;
    	</sql>
    	</changeSet>

    <changeSet id="jwr-db-create-kyc-history" author="Mirek">
    	<comment>Creating KycHistory table</comment>
    	<sql>
			CREATE TABLE [dbo].[KycHistory](

				[userID] [int] NOT NULL,

				[uploadTime] [datetime] NOT NULL,

				[counter] [integer] NOT NULL DEFAULT 1,

				[uploadType] [varchar] (32) NOT NULL, -- whether it's id proof, address proof or something else
				[documentType] [varchar] (32) NOT NULL, -- type of the document
				[documentMessage] [varchar] (30) NOT NULL,
				[image] [varchar] (200) NOT NULL,

				[status] [tinyint] NOT NULL,

				[acceptRejectTime] [datetime],
				[rejectReason] [varchar] (200),

				CONSTRAINT [PK_KycHistory] PRIMARY KEY CLUSTERED (
					[userID] ASC,
					[uploadTime] ASC,
					[counter] ASC
				)
    		) ON [PRIMARY];
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-Add-customer-support-name-in-cfg" author="Deepender">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'supportname', 'Customer Support Team', 1, 'text', 'Support text used to send in alert emails')

    	</sql>
    </changeSet>

     <changeSet id="jwr-db-create-gameStats-table" author="ShashankSharda">
    	<comment>Generate gamestats from hourly json parsing dump</comment>
		  <sql>
		    CREATE TABLE [dbo].[GameStats](
			[ID] [int] IDENTITY(1,1) NOT NULL,
			[tableId] [bigint] NOT NULL,
			[gameId] [bigint] NOT NULL,
			[dateCreated] [datetime] NOT NULL DEFAULT (getdate()),
			[startTime] [datetime] NOT NULL DEFAULT (getdate()),
			[endTime] [datetime] NOT NULL DEFAULT (getdate()),
			[tableConfigId] [int] NOT NULL,
			[userId] [bigint] NOT NULL,
			[winnings] [money] not null
		PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
		)
	  	</sql>
    </changeSet>
      <changeSet id="jwr-db-create-userLoginLog-Table" author="ShashankSharda" context="local">
    	<comment>Separate user Login activity in different table</comment>
		  <sql>
		    CREATE TABLE [dbo].[UserLoginLog](
			[id] [int] IDENTITY(1,1) PRIMARY KEY NOT NULL,
			[timestamp] [datetime] NOT NULL,
			[userID] [int] NOT NULL,
			[remoteHost] [varchar](255) NULL,
			[activityType] [varchar](25) NOT NULL,
			[details] varchar(250) NULL,
			[userMachineId] [varchar](200) NULL,
			[userDeviceType] [varchar](10) NULL   DEFAULT (N'web')
		  );

		  BEGIN TRAN
		  INSERT INTO UserLoginLog (timestamp,userid,remoteHost,activityType,details,userMachineId,userdevicetype)
		  SELECT timestamp,userid,remoteHost,activityType,details,userMachineId,userdevicetype
		  FROM UserActivityLog where ActivityType = 'USER_LOGIN';

		  DELETE FROM UserActivityLog WHERE  ActivityType = 'USER_LOGIN';
		  COMMIT TRAN


		 </sql>
    </changeSet>
	<changeSet id="jwr-db-alter-bannerconfiguration-alter-Location-values" author="ShashankSingh" runOnChange="true" context="local">
    	<comment>Changing Location in bannerconfiguration value to number values befor altering column</comment>
		  <sqlFile path="BannerConfigurationsLocationAlter.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
    <changeSet id="jwr-db-alter-bannerconfiguration-alter-Location" author="ShashankSingh" context="local">
    	<comment>Altering Location to int as we are using enums now</comment>
		  <sql>
		  ALTER TABLE BannerConfiguration ALTER COLUMN Location int not null
		</sql>
    </changeSet>
     <changeSet id="initial data for poolSplitCriteria" author="Nilesh" context="local">
    	<comment>Inserting data to poolSplitCriteria</comment>
		  <sql>
			  IF not exists(select * from poolsplitcriteria)
				BEGIN

				SET IDENTITY_INSERT [dbo].[PoolSplitCriteria] ON

				INSERT [dbo].[PoolSplitCriteria] ([sno], [noOfPlayers], [dropKey], [percentagePlayerOne], [percentagePlayerTwo], [percentagePlayerThree]) VALUES
				(1, 2, N'00', CAST(50.00 AS Decimal(5, 2)), CAST(50.00 AS Decimal(5, 2)), CAST(0.00 AS Decimal(5, 2))),
				(2, 2, N'01', CAST(30.00 AS Decimal(5, 2)), CAST(70.00 AS Decimal(5, 2)), CAST(0.00 AS Decimal(5, 2))),
				(3, 2, N'02', CAST(20.00 AS Decimal(5, 2)), CAST(80.00 AS Decimal(5, 2)), CAST(0.00 AS Decimal(5, 2))),
				(4, 2, N'11', CAST(50.00 AS Decimal(5, 2)), CAST(50.00 AS Decimal(5, 2)), CAST(0.00 AS Decimal(5, 2))),
				(5, 2, N'12', CAST(40.00 AS Decimal(5, 2)), CAST(60.00 AS Decimal(5, 2)), CAST(0.00 AS Decimal(5, 2))),
				(6, 2, N'22', CAST(50.00 AS Decimal(5, 2)), CAST(50.00 AS Decimal(5, 2)), CAST(0.00 AS Decimal(5, 2))),
				(7, 3, N'000', CAST(33.33 AS Decimal(5, 2)), CAST(33.33 AS Decimal(5, 2)), CAST(33.33 AS Decimal(5, 2))),
				(8, 3, N'001', CAST(20.00 AS Decimal(5, 2)), CAST(20.00 AS Decimal(5, 2)), CAST(60.00 AS Decimal(5, 2))),
				(9, 3, N'002', CAST(15.00 AS Decimal(5, 2)), CAST(15.00 AS Decimal(5, 2)), CAST(70.00 AS Decimal(5, 2))),
				(10, 3, N'011', CAST(20.00 AS Decimal(5, 2)), CAST(40.00 AS Decimal(5, 2)), CAST(40.00 AS Decimal(5, 2))),
				(11, 3, N'012', CAST(15.00 AS Decimal(5, 2)), CAST(35.00 AS Decimal(5, 2)), CAST(50.00 AS Decimal(5, 2))),
				(12, 3, N'022', CAST(10.00 AS Decimal(5, 2)), CAST(45.00 AS Decimal(5, 2)), CAST(45.00 AS Decimal(5, 2))),
				(13, 3, N'111', CAST(33.33 AS Decimal(5, 2)), CAST(33.33 AS Decimal(5, 2)), CAST(33.33 AS Decimal(5, 2))),
				(14, 3, N'112', CAST(30.00 AS Decimal(5, 2)), CAST(30.00 AS Decimal(5, 2)), CAST(40.00 AS Decimal(5, 2))),
				(15, 3, N'122', CAST(20.00 AS Decimal(5, 2)), CAST(40.00 AS Decimal(5, 2)), CAST(40.00 AS Decimal(5, 2))),
				(16, 3, N'222', CAST(33.33 AS Decimal(5, 2)), CAST(33.33 AS Decimal(5, 2)), CAST(33.33 AS Decimal(5, 2)))
				SET IDENTITY_INSERT [dbo].[PoolSplitCriteria] OFF

				END
		</sql>
    </changeSet>
    <changeSet id="jwr-db-create-staticpagefragment-table" author="Kunal">
    	<comment>Creating new table contians Fragment Info of Page</comment>
	  	<sql>
			CREATE TABLE [dbo].[StaticPageFragment](
				[FragmentId] [int] IDENTITY(1,1) NOT NULL,
				[FragmentName] [varchar](100) NOT NULL,
				[FragmentData] [nvarchar](max) NULL,
				[CreatedDate] [datetime] NOT NULL,
				[LastModifiedDate] [datetime] NULL,
			PRIMARY KEY CLUSTERED
			(
				[FragmentId] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
		</sql>
    </changeSet>
    <changeSet id="jwr-db-create-staticpages-table" author="Kunal">
    	<comment>Creating new table contains specific static Page Info</comment>
	  	<sql>
		  CREATE TABLE [dbo].[StaticPages](
			[PageId] [int] IDENTITY(1,1) NOT NULL,
			[Uri] [varchar](2000) NOT NULL,
			[Title] [varchar](500) NOT NULL,
			[Description] [varchar](1000) NOT NULL,
			[MetaTags] [varchar](5000) NOT NULL,
			[Content] [nvarchar](max) NOT NULL,
			[WrapperFragment] [nvarchar](max) NOT NULL,
			[SiteMap] [bit] NOT NULL,
			[SideMenu] [bit] NOT NULL,
			[PageName] [varchar](100) NULL,
			[Category] [varchar](100) NOT NULL,
			[Css] [nvarchar](max) NULL,
			[Javascript] [nvarchar](max) NULL,
			[AnalyticsEvent] [nvarchar](max) NULL,
			[AdditionalInfo] [nvarchar](max) NULL,
			[CreatedDate] [datetime] NULL,
			[LastModifiedDate] [datetime] NULL,
		PRIMARY KEY CLUSTERED
		(
			[PageId] ASC
		)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
		) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
		</sql>
    </changeSet>
    <changeSet id="jwr-db-create-pagesadditionalinfo-table" author="Kunal">
    	<comment>Creating new table contains pages additional Info like sidemenu/sitemap</comment>
	  	<sql>
		  CREATE TABLE [dbo].[PagesAdditionalInfo](
			[PageId] [int] IDENTITY(1,1) NOT NULL,
			[PageUri] [varchar](2000) NOT NULL,
			[DisplayName] [varchar](2000) NOT NULL,
			[DisplayRank] [int] NOT NULL,
			[PageLink] [varchar](2000) NULL,
			[IncludeInSideMenu] [bit] NULL DEFAULT ((0)),
			[MenuParentId] [int] NOT NULL,
			[IncludeInSiteMap] [bit] NULL DEFAULT ((0)),
			[SiteMapCategory] [varchar](500) NULL,
			[CreatedDate] [datetime] NULL,
			[LastModifiedDate] [datetime] NULL,
		PRIMARY KEY CLUSTERED
		(
			[PageId] ASC
		)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
		) ON [PRIMARY]
		</sql>
    </changeSet>
    <changeSet id="jwr-db-update-staticpage-table" author="rohan">
    	<comment>adding enabled and version columns for static pages table</comment>
	  	<sql>
    		alter table StaticPages add Enabled bit not null default 1
			alter table staticPages add Version int not null default 1
		</sql>
	</changeSet>
    <changeSet id="jwr-db-create-pagetemplate-table" author="Kunal">
    	<comment>Creating new table contians html template of Page/ Altering static page to include external links</comment>
	  	<sql>
			CREATE TABLE PageTemplate
			(
				TemplateId int NOT NULL IDENTITY PRIMARY KEY,
				TemplateCategory varchar(100) NOT NULL,
				TemplateContent nvarchar(MAX),
				CreatedDate datetime,
				LastModifiedDate datetime
			)
			ALTER TABLE StaticPages ADD ExternalLinks NVARCHAR(MAX) NULL
		</sql>
    </changeSet>
    <changeSet id="jwr-db-update-staticpage-robots-table" author="Kunal">
    	<comment>Creating new table contians html template of Page/ Altering static page to include external links</comment>
	  	<sql>
			ALTER TABLE StaticPages ADD NoFollow BIT NOT NULL DEFAULT 0 , NoIndex BIT NOT NULL DEFAULT 0
		</sql>
    </changeSet>

	<changeSet id="jwr-db-insert-pagetemplate-table-data" author="Kunal" runOnChange = "true">
		<comment>Inserting default values for landing/static page template</comment>
		<sqlFile path="StaticPageTemplateData.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
	</changeSet>

    <changeSet id="jwr-db-alter-users-lobby-preference" author="Nilesh" context="local">
    	<comment>Alter users add column lobbyPreference</comment>
		  <sql>
		  ALTER TABLE users ADD LobbyPreference SMALLINT NOT NULL DEFAULT (1);
		</sql>
    </changeSet>
    <changeSet id="jwr-db-update-users-lobby-preference" author="Nilesh" context="local">
    	<comment>Update lobbyPreferences for Old users</comment>
		  <sql>
		  update users set LobbyPreference = 0;
		</sql>
    </changeSet>
     <changeSet id="jwr-db-alter-users-lobby-changecount" author="Nilesh" context="local">
    	<comment>Alter users add column lobbyPreference</comment>
		  <sql>
		  ALTER TABLE users ADD LobbyPreferenceChangeCounter INT NOT NULL DEFAULT (0);
		</sql>
    </changeSet>

    <changeSet id="jwr-db-cfg-lobbyPreference-disable" author="Nilesh">
	<comment>Adding cfg to enable/disable lobbyPreference selection</comment>
	<sql>
		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
		VALUES ('lobbyswitch','lobbyswitch.enabled','true','1','bool', 'Enables/Disables
		service for lobby switching');
	</sql>
</changeSet>

<changeSet id="jwr-db-alter-users-verification-code-timeStamp" author="Deepender" context="local">
    	<comment>Alter users add column verificationCodeTimeStamp</comment>
		  <sql>
		  ALTER TABLE users ADD verificationCodeTimeStamp DATETIME;
		</sql>
    </changeSet>

	<changeSet id="jwr-db-cfg-override-lobbyPreference" author="Nilesh">
		<comment>Adding override preference type if lobby switch is disabled</comment>
		<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('lobbyswitch','lobbyswitch.newlobbyasdefault','true','1','bool',
			'Enables/Disables
			New Lobby as default value for lobby switching mode off');
		</sql>
	</changeSet>

	<changeSet id="jwr-db-starting-cois-update" author="Mirek">
		<sql>
			UPDATE [cfg] SET [value] = '10000' WHERE [id] = 'user' AND [key] = 'user.starting.coins';
		</sql>
	</changeSet>

	<changeSet id="jwr-db-tableconfigs-lqm-tct" author="Mirek">
		<comment>Adding LiquidityMultiplier and TableCreationThrehsold columns to TableCOnfigurations</comment>
		<sql>
			ALTER TABLE [dbo].[TableConfigurations] ADD liquidityMultiplier int not null default((1));
			ALTER TABLE [dbo].[TableConfigurations] ADD tableCreationThreshold int not null default((10));
			ALTER TABLE [dbo].[TableConfigurations] ADD poolRejoinEnabled tinyint not null default((0));
		</sql>
	</changeSet>
	<changeSet id="jwr-db-tableconfigs-set-poolenable" author="Mirek">
		<comment>Setting poolRejoinEnabled to 1 for pool games</comment>
		<sql>
			UPDATE [dbo].[TableConfigurations] SET poolRejoinEnabled = '1' WHERE gameVariant = '1';
		</sql>
	</changeSet>

	<changeSet id="jwr-db-add-columns-gamestat_table" author="shashankshrda">
		<sql>
			ALTER TABLE GameStats
			ADD currencyType INT,
			gameVariant INT,
			handType INT,
			entryFee INT
		</sql>
	</changeSet>

	<changeSet id="jwr-db-inserting-cdn-url" author="ShashankSingh">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cdn', 'url', 'https://d22ueo28hfk252.cloudfront.net/Content/versioned/2.0.0.1/images', 1, 'text', 'CDN URL')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-alter-game-stats-table" author="Nidhi">
		<sql>
			ALTER TABLE GAMESTATS ADD hasDropped bit;
            ALTER TABLE GAMESTATS ADD score smallint;
            ALTER TABLE GAMESTATS ALTER COLUMN userId int
		</sql>
	</changeSet>
	<changeSet id="jwr-db-Add-Index-in-Deposit-Transactions" author="Nidhi" context="Check">
		<sql>
			IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.deposittransactions') AND NAME ='IX_DepositTransactions')
            DROP INDEX IX_DepositTransactions ON dbo.deposittransactions;
            Create NonClustered Index IX_DepositTransactions On DepositTransactions
            (userId Asc, txnInitiatedTime Asc, status Asc) INCLUDE(Username,Amount,CurrencyTransactionId)
		</sql>
	</changeSet>
	<changeSet id="jwr-db-Add-TotalPendingWithdrawalsAmount" author="Nidhi" context="local">
		<sql>
			 ALTER TABLE USERS ADD pendingwithdrawalsAmount int not null default(0);
		</sql>
	</changeSet>
	<changeSet id="jwr-db-Add-Index-in-Withdrawals-Table" author="Nidhi" context="local">
		<sql>
			IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.Withdrawals') AND NAME ='IX_Withdrawals')
            DROP INDEX IX_Withdrawals ON dbo.withdrawals;
            Create NonClustered Index IX_Withdrawals On Withdrawals
            (userId Asc, status Asc, timestampFulfilled Asc) INCLUDE(Amount)
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Alter-Game-Stats-Table-2" author="Nidhi">
		<sql>
			ALTER TABLE GAMESTATS DROP COLUMN hasDropped
			ALTER TABLE GAMESTATS DROP COLUMN SCORE
            ALTER TABLE GAMESTATS ADD isBadDeclared bit;
            ALTER TABLE GAMESTATS ADD isFirstDrop bit;
            ALTER TABLE GAMESTATS ADD isMidDrop bit;
		</sql>
	</changeSet>

	<changeSet id="jwr-db-starting-rupees-0-update" author="Mirek">
		<sql>
			UPDATE [cfg] SET [value] = '0' WHERE [id] = 'user' AND [key] = 'user.starting.rupees';
		</sql>
	</changeSet>

		<changeSet id="jwr-db-kychistory-1" author="Nilesh">
    	<comment>Removing Primary key from kychistory</comment>
		<sql>
			declare @c varchar(256) = (SELECT distinct tc.CONSTRAINT_NAME
			FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
			JOIN INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE ccu ON tc.CONSTRAINT_NAME = ccu.Constraint_name
			WHERE tc.CONSTRAINT_TYPE = 'Primary Key'
			and tc.TABLE_NAME = 'kychistory'
			)

			exec('
			alter table kychistory
			drop constraint ' +@c)
		</sql>
	</changeSet>

	<changeSet id="jwr-db-kychistory-2" author="Nilesh">
    	<comment>Adding primary key column from kychistory</comment>
		<sql>
			ALTER TABLE kychistory ADD id BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY;
		</sql>
	</changeSet>

	<changeSet id="jwr-db-kychistory-3" author="Nilesh">
    	<comment>Adding primary key column from kychistory</comment>
		<sql>
			ALTER TABLE kychistory add CONSTRAINT kychistory_unique UNIQUE (userId, uploadTime, counter);
		</sql>
	</changeSet>
	<!--changeSet id="jwr-db-buddies-1" author="Nilesh" context="local">
		<comment>Adding toUserRequestCount column</comment>
		<sql>
			ALTER TABLE [dbo].[Buddies] ADD [toUserRequestCount] [INT] NOT NULL default(0);
		</sql>
	</changeSet>
	<changeSet id="jwr-db-buddies-2" author="Nilesh" context="local">
		<comment>Renaming requestCount column</comment>
		<sql>
			sp_rename 'Buddies.requestCount', 'fromUserRequestCount', 'COLUMN';
		</sql>
	</changeSet>
	<changeSet id="jwr-db-buddies-3" author="Nilesh" context="local">
		<comment>Adding currentRequesterId column</comment>
		<sql>
			ALTER TABLE Buddies ADD currentRequesterId INT NOT NULL default(0);
		</sql>
	</changeSet>
	<changeSet id="jwr-db-buddies-4" author="Nilesh" context="local">
		<comment>UPDATE currentRequesterId column</comment>
		<sql>
			UPDATE Buddies SET currentRequesterId = fromUserId;
		</sql>
	</changeSet-->
	<changeSet id="jwr-db-buddies-table" author="ShashankSingh">
		<comment>Create buddies new table if not exist</comment>
		<sql>
			IF OBJECT_ID('dbo.Buddies') IS NULL
    		BEGIN
				CREATE TABLE [dbo].[Buddies](
				[ID] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
				[fromUserId] [int] NOT NULL,
				[toUserId] [int] NOT NULL,
				[toUserName] [varchar](50) NULL,
				[requestTimestamp] [datetime] NULL,
				[responseTimesatmp] [datetime] NULL,
				[status] [smallint] NOT NULL,
				[fromUserRequestCount] [int] NOT NULL,
				[fromUserName] [varchar](50) NULL,
				[toUserRequestCount] [int] NOT NULL,
				[currentRequesterId] [int] NOT NULL,
					 CONSTRAINT [PK_Buddies] PRIMARY KEY CLUSTERED
					(
						[ID] ASC
					)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
					) ON [PRIMARY]



					ALTER TABLE [dbo].[Buddies] ADD  DEFAULT ((0)) FOR [status]


					ALTER TABLE [dbo].[Buddies] ADD  DEFAULT ((0)) FOR [fromUserRequestCount]


					ALTER TABLE [dbo].[Buddies] ADD  DEFAULT ((0)) FOR [toUserRequestCount]


					ALTER TABLE [dbo].[Buddies] ADD  DEFAULT ((0)) FOR [currentRequesterId]

			END
		</sql>
	</changeSet>
	<changeSet id="jwr-db-tournaments-archive-old" author="Mirek">
		<comment>Renaming old tournament related tables (we won't use them, but let's keep them)</comment>
		<sql>
			EXEC sp_rename [Tournament], [old_Tournament];
			EXEC sp_rename [TournamentDetailsRunInfo], [old_TournamentDetailsRunInfo];
			EXEC sp_rename [TournamentNextLevel], [old_TournamentNextLevel];
			EXEC sp_rename [TournamentPlayerRankInfo], [old_TournamentPlayerRankInfo];
			EXEC sp_rename [TournamentResults], [old_TournamentResults];
			EXEC sp_rename [TournamentResultsArchieve], [old_TournamentResultsArchieve];
			EXEC sp_rename [TournamentRunInfo], [old_TournamentRunInfo];
			EXEC sp_rename [TournamentSchedule], [old_TournamentSchedule];
			EXEC sp_rename [TournamentSignUp], [old_TournamentSignUp];
			EXEC sp_rename [TournamentSnapShot], [old_TournamentSnapShot];
			EXEC sp_rename [TournamentTDS], [old_TournamentTDS];
			EXEC sp_rename [TournamentTemplate], [old_TournamentTemplate];
			EXEC sp_rename [TournamentTicket], [old_TournamentTicket];
			EXEC sp_rename [TourneyInstanceTracker], [old_TourneyInstanceTracker];
			EXEC sp_rename [TourneySignUpArchieve], [old_TourneySignUpArchieve];
			EXEC sp_rename [FeeStructure], [old_FeeStructure];
			EXEC sp_rename [PrizeStructure], [old_PrizeStructure];
			EXEC sp_rename [PrizeStructureDetails], [old_PrizeStructureDetails];
			EXEC sp_rename [UserTournamentTickets], [old_UserTournamentTickets];
			EXEC sp_rename [W2STournyEvents], [old_W2STournyEvents];
			EXEC sp_rename [WaitlistUsers], [old_WaitlistUsers];

			EXEC sp_rename 'PK_Tournament', 'PK_old_Tournament';
			EXEC sp_rename 'PK_FeeStructure', 'PK_old_FeeStructure';
			EXEC sp_rename 'PK_PrizeStructure', 'PK_old_PrizeStructure';
			EXEC sp_rename 'PK_PrizeStructureDetails', 'PK_old_PrizeStructureDetails';
			EXEC sp_rename 'PK_TournamentDetailsRunInfo', 'PK_old_TournamentDetailsRunInfo';
			EXEC sp_rename 'PK_TournamentMTTNextLevel', 'PK_old_TournamentMTTNextLevel';
			EXEC sp_rename 'PK_TournamentResults', 'PK_old_TournamentResults';
			EXEC sp_rename 'PK_TournamentResultsArchieve', 'PK_old_TournamentResultsArchieve';
			EXEC sp_rename 'PK_TournamentRunInfo', 'PK_old_TournamentRunInfo';
			EXEC sp_rename 'PK_TournamentSchedule', 'PK_old_TournamentSchedule';
			EXEC sp_rename 'PK_TournamentSignUp', 'PK_old_TournamentSignUp';
			EXEC sp_rename 'PK_TournamentSnapShot', 'PK_old_TournamentSnapShot';
			EXEC sp_rename 'PK_TournamentTDS', 'PK_old_TournamentTDS';
			EXEC sp_rename 'PK_TournamentTemplate', 'PK_old_TournamentTemplate';
			EXEC sp_rename 'PK_TournamentTicket', 'PK_old_TournamentTicket';
			EXEC sp_rename 'PK_TourneySignUpArchieve', 'PK_old_TourneySignUpArchieve';
			EXEC sp_rename 'PK_UserTournamentTickets', 'PK_old_UserTournamentTickets';
			EXEC sp_rename 'PK_W2STournyEvents', 'PK_old_W2STournyEvents';
		</sql>
	</changeSet>

	<changeSet id="jwr-db-tournaments-new-tables" author="Mirek" runOnChange = "true">
		<comment>Creating tournament related tables</comment>
		<sqlFile path="Tournaments.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
	</changeSet>
	<changeSet id="jwr-db-Add-Loyality-Points-in-Users-Table" author="Nidhi" context="local">
		<sql>
			 ALTER TABLE USERS ADD loyalitypoints int not null default(0);
		</sql>
	</changeSet>
	<changeSet id="jwr-db-bot-config" author="Nilesh">
		<comment>insert botconfig</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('bots', 'bots.playertobotwinratio.percentage', 60, 1, 'number:0:100:1', 'Percentage of Player to Bots win ratio. The higher the value, more are the chances of player winning. Takes value from 0 to 100')
		</sql>
	</changeSet>
	<changeSet id="jwr-RupeeTrans-GameId" author="Nilesh">
		<comment>add column GameId in RupeeTransactions</comment>
		<sql>
			DECLARE @name1 VARCHAR(50)
			DECLARE @SQL NVARCHAR(max)
			DECLARE db_cursor CURSOR FOR

			select distinct 'RupeeTransactions_'+CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
			), 2) datw from ExplodeDates ('2011-12-01','2020-12-01')

			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @name1

			WHILE @@FETCH_STATUS = 0
			BEGIN


			  SET @SQL = N'ALTER TABLE '+@name1+' ADD GameId BIGINT '

			  EXEC sp_executesql @SQL




			       FETCH NEXT FROM db_cursor INTO @name1
			END

			CLOSE db_cursor
			DEALLOCATE db_cursor
		</sql>
	</changeSet>
	<changeSet id="jwr-Coins-GameId" author="Nilesh">
		<comment>add column GameId in CoinsTransactions</comment>
		<sql>
			DECLARE @name1 VARCHAR(50)
			DECLARE @SQL NVARCHAR(max)
			DECLARE db_cursor CURSOR FOR

			select distinct 'CoinTransactions_'+CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
			), 2) datw from ExplodeDates ('2011-12-01','2020-12-01')

			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @name1

			WHILE @@FETCH_STATUS = 0
			BEGIN


			  SET @SQL = N'ALTER TABLE '+@name1+' ADD GameId BIGINT '

			  EXEC sp_executesql @SQL




			       FETCH NEXT FROM db_cursor INTO @name1
			END

			CLOSE db_cursor
			DEALLOCATE db_cursor
		</sql>
	</changeSet>

	<changeSet id="jwr-db-leaderboardPromoSummary" author="Nilesh">
		<comment>CREATE leaderboardPromoResultSummary table</comment>
		<sql>
			create table leaderboardPromoResultSummary (
			rowid int IDENTITY(1,1) PRIMARY KEY,
			userid int,
			username varchar(15),
			usernetwork varchar(50),
			rake money,
			amountwon money,
			amountlost money,
			deposits money);
		</sql>
	</changeSet>
	<changeSet id="jwr-db-leaderboardPromoSummary2" author="Nilesh">
		<comment>alter leaderboardPromoResultSummary table</comment>
		<sql>
			alter table leaderboardPromoResultSummary add
			rakerank int,
			amountwonrank int,
			amountlostrank int,
			depositsrank int;
		</sql>
	</changeSet>

	<changeSet id="jwr-client-theme" author="Nilesh" context="local">
		<comment>add columns for client theme/view tracking</comment>
		<sql>
			alter table users add
			currentThemeId int,
			themeViewType3d bit,
			themeSwitchCount int not null default((0)),
			viewSwitchCount int not null default((0));
		</sql>
	</changeSet>
	<changeSet id="jwr-3deck-changes" author="Nilesh" context="local">
		<comment>add columns for tracking popup for 3 deck points game</comment>
		<sql>
			alter table users add
			popupCount3deck int not null default((0));
		</sql>
	</changeSet>
	<changeSet id="jwr-ip-restriction" author="Nilesh">
		<comment>config for enabling/disabling IP restriction</comment>
		<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('iprestriction','iprestriction.enabled','false','1','bool', 'Enables/Disables IP restriction for players on the table');
		</sql>
	</changeSet>
	<changeSet id="jwr-db-leaderboardPromoSummaryArchive" author="Nilesh">
		<comment>CREATE leaderboardPromoResultSummaryArchive table</comment>
		<sql>
			create table leaderboardPromoResultSummaryArchive (
			rowid int IDENTITY(1,1) PRIMARY KEY,
			promotionId bigint,
			userid int,
			username varchar(15),
			usernetwork varchar(50),
			rake money,
			amountwon money,
			amountlost money,
			deposits money);
		</sql>
	</changeSet>
	 <changeSet id="jwr-db-dailyreportKPI" author="shashanksharda">
		<comment>CREATE table Daily report KPI</comment>
		<sql>IF OBJECT_ID('dbo.DailyReportLog') IS NULL -- Check if Table Exists
		 EXEC(N'CREATE TABLE [dbo].[DailyReportLog](
					[date] [date] NOT NULL,
					[HTML] [varchar](max) NULL,
				 CONSTRAINT [PK_DailyReportLog] PRIMARY KEY CLUSTERED
				(
					[date] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
		')


	</sql>
	</changeSet>
	<changeSet id="jwr-db-markTester" author="shashanksharda" context="local">
		<comment>addcolumn fortesters and mark test accounts</comment>
		<sql>
		ALTER TABLE USers
		ADD isTester bit default ((0));

		Update users
		set isTester = 1
		where userid in (
		23, 8589, 31370, 31692, 31798, 31893, 36042, 37483, 37719, 41281, 56913, 58247, 62349, 63361, 66707, 67078, 67185, 67193, 73673, 74393, 74400, 74587, 74769, 78265, 78723, 79988, 86294, 87776, 102363, 142846, 157639, 201420, 222905, 254558, 262877, 263270, 273086, 276649, 291459, 314539, 358458, 361547, 370207, 376822, 491181, 506912, 652954, 659350, 662710, 697452, 720048, 721475, 1124661, 1154690, 1186139, 1199539, 1199540, 1199541, 1199545, 1199550, 1199553, 1199558, 1199562, 1199576, 1199579, 1199581, 1208785, 1343778, 1357525, 1380177, 1387519, 1387535, 1388746, 1398788, 1399620
		)
	</sql>
	</changeSet>
	<changeSet id="jwr-db-dailyRakeAnlaysislog" author="shashanksharda">
		<comment>CREATE table Daily rake analysis log</comment>
		<sql>IF OBJECT_ID('dbo.DailyRakeAnalysisTable') IS NULL -- Check if Table Exists
		 EXEC(N'CREATE TABLE [dbo].[DailyRakeAnalysisTable](
			[date] [datetime] NOT NULL,
			[network] varchar(20) not null,
			[Count_0to5K] [int] NULL,
			[Rake_0to5K] [money] NULL,
			[Count_5Kto10K] [int] NULL,
			[Rake_5Kto10K] [money] NULL,
			[Count_10Kto50K] [int] NULL,
			[Rake_10Kto50K] [money] NULL,
			[Count_50Kto100K] [int] NULL,
			[Rake_50Kto100K] [money] NULL,
			[Count_100Kto500K] [int] NULL,
			[Rake_100Kto500K] [money] NULL,
			[Count_500Kto1M] [int] NULL,
			[Rake_500Kto1M] [money] NULL,
			[Count_>1M] [int] NULL,
			[Rake_>1M] [money] NULL,
			[FreeUserRake] [money] NULL,
			[TesterRake] [money] NULL,
			[FreeUserCount] [int] NULL,
			[TesterCount] [int] NULL
		) ON [PRIMARY]')
	</sql>
	</changeSet>

	<changeSet id="jwr-db-leaderboardPromoSummaryArchive2" author="Nilesh">
		<comment>alter leaderboardPromoResultSummaryArchive table</comment>
		<sql>
			alter table leaderboardPromoResultSummaryArchive add
			rakerank int,
			amountwonrank int,
			amountlostrank int,
			depositsrank int;
		</sql>
	</changeSet>

	<changeSet id="jwr-db-alter-view-KYCDetails2" author="Nilesh">
    	<comment>Altering view KYCDetails</comment>
    	<sql>
    		ALTER VIEW [dbo].[KYCDetails]
				as
				with tr( userid , widCount)
				as( select userid , count(distinct withdrawalID) from withdrawals where status =0 group by userid)
				SELECT
				    Vipcategory,
				    a.UserID,
				    Username,
				    FirstName + ' ' + LastName as Name,
				    Address,
				    DateOfBirth,
				    City,
					panCardNumber as PanProofText,
					panVerificationStatus as PanProofStatus,
					panRejectionReason as PanProofReason,
					timestampPanUpdate as TimestampPanUpdate,
					timestampPanApproval as TimestampPanApproval,
				    AddressProofType,
				    AddressProofText,
				    AddressProofStatus,
				    AddressProofReason,
				    TimestampAddressUpdate,
				    TimestampAddressApproval,
					IdProofType,
					IdProofText,
				    IdProofStatus,
					IdProofReason,
					TimestampIdUpdate,
					TimestampIdApproval,
					pancardImagePath as PanProofImagePath,
				    AddressProofImagePath,
					IdProofImagePath,

				    case when lastDepositDate is NOT NULL and timestampIdApproval IS NOT NULL and lastDepositDate > timestampIdApproval then 'Accepted' else 'Rejected'
				    end
				    as 'DepositsPostVerification',
					case when tr.userid is null or tr.widcount = 0 then 'No' else 'Yes' end as withdrawalStatusPending

				    FROM
				    Users a WITH(NOLOCK)
					left join tr on a.userid = tr.userid
				    where a.UserID > -1;
    	</sql>
    	</changeSet>
    <!--changeSet id="jwr-db-couponuses-remove-fk" author="mayank" context="prod">
		<comment>Remove FK constraint of TransactionId with currencyTransactionTable</comment>
		<sql>
			alter table CouponUses drop FK_CouponUses_CurrencyTransactions
		</sql>
	</changeSet-->
    <changeSet id="jwr-db-CurrencyLocksAlter" author="ShashankSharda" context="local">
		<comment>alter CurrencyLocks table</comment>
		<sql>
			Truncate table CurrencyLocks;
			ALTER TABLE CurrencyLocks DROP CONSTRAINT [PK_CurrencyLocks];
			ALTER table currencyLocks drop column id;
			ALTER TABLE CurrencyLocks ADD gameServerId VARCHAR(255) NOT NULL DEFAULT('');
			ALTER TABLE CurrencyLocks drop column tableid;
			ALTER TABLE CurrencyLocks ADD tableID BIGINT NOT NULL DEFAULT((0)) ;
			ALTER TABLE CurrencyLocks ADD CONSTRAINT [PK_CurrencyLocks] PRIMARY KEY (USERID, TableID)
		</sql>
	</changeSet>
	<changeSet id="jwr-db-NewMappingTables" author="ShashankSharda">
		<comment>adding mapping tables</comment>
		<sql>

			CREATE TABLE [dbo].[DepositStatus](
				[Status] [varchar](50) NULL,
				[Value] TINYINT NULL
			) ON [PRIMARY]



			CREATE TABLE [dbo].[GameInstanceTypes](
				[Type] [varchar](50) NULL,
				[Value] TINYINT NULL
			) ON [PRIMARY]


			CREATE TABLE [dbo].[GameVariantTypes](
				[Type] [varchar](50) NULL,
				[Value] TINYINT NULL
			) ON [PRIMARY]


			CREATE TABLE [dbo].[TransactionTypes](
				[txnName] [varchar](50) NULL,
				[ttype] TINYINT NULL
			) ON [PRIMARY]


			CREATE TABLE [dbo].[WithdrawalStatusTypes](
				[Status] [varchar](100) NULL,
				[Value] TINYINT NULL
			) ON [PRIMARY]


			INSERT [dbo].[DepositStatus] ([Status], [Value]) VALUES (N'UNKNOWN', N'0')

			INSERT [dbo].[DepositStatus] ([Status], [Value]) VALUES (N'FAILED', N'1')

			INSERT [dbo].[DepositStatus] ([Status], [Value]) VALUES (N'SUCCESS', N'2')

			INSERT [dbo].[DepositStatus] ([Status], [Value]) VALUES (N'PROCESSED', N'3')

			INSERT [dbo].[DepositStatus] ([Status], [Value]) VALUES (N'AWAITED', N'4')

			INSERT [dbo].[DepositStatus] ([Status], [Value]) VALUES (N'ERROR', N'5')

			INSERT [dbo].[DepositStatus] ([Status], [Value]) VALUES (N'PROCESSING', N'6')

			INSERT [dbo].[GameInstanceTypes] ([Type], [Value]) VALUES (N'POINTSRUMMY', N'0')

			INSERT [dbo].[GameInstanceTypes] ([Type], [Value]) VALUES (N'MTTRUMMY', N'1')

			INSERT [dbo].[GameInstanceTypes] ([Type], [Value]) VALUES (N'DEALS', N'2')

			INSERT [dbo].[GameInstanceTypes] ([Type], [Value]) VALUES (N'POOLRUMMY', N'3')

			INSERT [dbo].[GameInstanceTypes] ([Type], [Value]) VALUES (N'TEENPATTI', N'4')

			INSERT [dbo].[GameInstanceTypes] ([Type], [Value]) VALUES (N'TWENTYONECARDPOINTSRUMMY', N'5')

			INSERT [dbo].[GameVariantTypes] ([Type], [Value]) VALUES (N'THIRTEENCARD', N'0')

			INSERT [dbo].[GameVariantTypes] ([Type], [Value]) VALUES (N'SEVENCARD', N'1')

			INSERT [dbo].[GameVariantTypes] ([Type], [Value]) VALUES (N'POOLRUMMY', N'2')

			INSERT [dbo].[GameVariantTypes] ([Type], [Value]) VALUES (N'TWENTYONECARD', N'4')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'TRANSFER', N'0')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'DEPOSIT', N'1')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'WITHDRAWAL', N'2')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'PURCHASE', N'3')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'RELOAD', N'4')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'BONUS', N'5')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'REFUND', N'6')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'RAKE', N'7')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'COUPON', N'8')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'POOLPRIZES', N'9')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'POOLENTFEES', N'10')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'POOLBUYIN', N'11')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'DEALPRIZES', N'12')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'DEALENTFEES', N'13')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'DEALBUYIN', N'14')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'MTTPRIZES', N'15')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'MTTENTFEES', N'16')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'MTTBUYIN', N'17')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'MANUALTRANSFER', N'18')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'POOLRAKE', N'19')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'DEALSRAKE', N'20')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'MTTRAKE', N'21')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'TestAccountCredit', N'22')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'Fraudaccountreversal', N'23')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'BirthdayBonus', N'24')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'VIPBonus', N'25')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'SupportBonus', N'26')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'DisconnectRefund', N'27')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'Promotions', N'28')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'ProcessingFailure', N'29')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'PGTransfer', N'30')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'MTTBUYINWITHDRAWAL', N'31')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'MTTENTFEESWITHDRAWAL', N'32')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'MTTBUYINREFUND', N'33')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'MTTENTFEESREFUND', N'34')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'TDS', N'35')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'BONUSREVERSAL', N'36')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'FRIENDREFERRALBONUS', N'37')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'GAMECONTRIBUTION', N'38')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'RetrospectiveBonus', N'39')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'TWENTYONECARDFEES', N'40')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'TWENTYONECARDRAKE', N'41')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'TWENTYONECARDPRIZES', N'42')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'SURPRISEBONUS', N'43')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'GIFTPURCHASE', N'44')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'MTTREJOINFEE', N'45')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'OTPBONUSTRANSFER', N'46')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'EXTRAINSTANTCASHBACKBONUS', N'47')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'GIFTPURCHASEFAILURE', N'48')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'ADDRVERFICATIONBONUS', N'49')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'INVITEEREGISTRATIONREFERRALBONUS', N'50')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'GAMECREDITBONUS', N'51')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'RAFBONUS', N'52')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'TOURNAMENTREFUNDBONUS', N'53')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'INACTIVEBONUS', N'54')

			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'BALANCETRANSFER', N'55')

			INSERT [dbo].[WithdrawalStatusTypes] ([Status], [Value]) VALUES (N'PENDING', N'0')

			INSERT [dbo].[WithdrawalStatusTypes] ([Status], [Value]) VALUES (N'DENIED', N'1')

			INSERT [dbo].[WithdrawalStatusTypes] ([Status], [Value]) VALUES (N'FULFILLED', N'2')

			INSERT [dbo].[WithdrawalStatusTypes] ([Status], [Value]) VALUES (N'INPROGRESS', N'3')

			INSERT [dbo].[WithdrawalStatusTypes] ([Status], [Value]) VALUES (N'CANCELLED_BY_USER', N'4')

			INSERT [dbo].[WithdrawalStatusTypes] ([Status], [Value]) VALUES (N'UNDER_VERIFICATION', N'5')

			INSERT [dbo].[WithdrawalStatusTypes] ([Status], [Value]) VALUES (N'CLEAN', N'6')

			INSERT [dbo].[WithdrawalStatusTypes] ([Status], [Value]) VALUES (N'FRAUD', N'7')

			INSERT [dbo].[WithdrawalStatusTypes] ([Status], [Value]) VALUES (N'NONE', N'8')

			INSERT [dbo].[WithdrawalStatusTypes] ([Status], [Value]) VALUES (N'PROCESSED_TO_BANK', N'9')


		</sql>
	</changeSet>
	   <changeSet id="jwr-db-fixFirstDepositDateAmount" author="ShashankSharda" context="local">
		<comment>Fix FirstDeposit Amount and DAte</comment>
		<sql>
			DECLARE @timestampStart DATE='2011-12-01'
			DECLARE @timestampEnd DATE= cast(getdate() as date)

			DECLARE @name1 VARCHAR(50)
			DECLARE @SQL NVARCHAR(max)
			CREATE TABLE #trnsction (userid int ,delta money,timestamp datetime)

			  SET @SQL  = N'SELECT userid,delta , timestamp  FROM RupeeTransactions_'+CAST(datepart(year,@timestampstart) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,@timestampstart)), 2)
			+ ' ct WHERE userid &gt;0 and  transactiontype in (1,30) '
			DECLARE db_cursor CURSOR FOR

			select distinct 'RupeeTransactions_'+CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
			), 2) datw from ExplodeDates (DATEADD(month,1,DATEADD(month,datediff(month,0,@timestampstart),0)),@timestampEnd)

			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @name1
			WHILE @@FETCH_STATUS = 0
			BEGIN
			   SET @SQL = @SQL + N' UNION SELECT userid,delta, timestamp FROM '+@name1
			+ ' ct WHERE userid &gt;0 and  transactiontype in (1,30)  '
			        FETCH NEXT FROM db_cursor INTO @name1
			END
			CLOSE db_cursor
			DEALLOCATE db_cursor

			insert into #trnsction
			EXEC sp_executesql @SQL;

			update users
			set firstDepositDate = x.timestamp,
			firstDepositAmount = x.delta
			from users u inner join (
			SELECT t.userid,delta,timestamp, firstdepositdate,firstdepositAmount from (
			SELECT *, row_number() over (partition by userid order by timestamp) Attempt
			FROM #trnsction ) t
			inner join users u on t.userid = u.userid
			where Attempt =1 and (t.delta &lt;&gt; u.firstDepositamount or DATEDIFF(D,timestamp,firstDepositDate) &lt;&gt; 0) ) x on u.userID = x.userID;

		</sql>
	</changeSet>
	<changeSet id="jwr-db-gameTableAnnouncements2" author="Nilesh">
    	<comment>Adding handType column from GameTableAnnouncements</comment>
		<sql>
			ALTER TABLE [dbo].[GameTableAnnouncements] add [handType] [int] NULL;
		</sql>
	</changeSet>
	<changeSet id="jwr-db-gameTableAnnouncements3" author="Nilesh">
    	<comment>Adding isImmediate column from GameTableAnnouncements</comment>
		<sql>
			ALTER TABLE [dbo].[GameTableAnnouncements] add [isImmediate] [bit] NOT NULL DEFAULT ((0));
		</sql>
	</changeSet>

	<changeSet id="jwr-db-LastupdateTimestampUserStable" author="ShashankSharda" context="local">
    	<comment>Adding lastupdatetimestamp in users table and trigger to update val</comment>
		<sql>
		alter table Users
		add LastUpdateTimestamp DATETIME null;

	</sql>
	</changeSet>
	<changeSet id="jwr-db-marketingPromotions" author="Rohan" runOnChange="true">
    	<comment>Creating tables for Marketing Promotions </comment>
		<sql>
			IF OBJECT_ID('dbo.MarketingPromotionPrizes', 'U') IS NOT NULL
  				DROP TABLE dbo.MarketingPromotionPrizes;
			IF OBJECT_ID('dbo.MarketingPromotionsEligibleUsers', 'U') IS NOT NULL
  				DROP TABLE dbo.MarketingPromotionsEligibleUsers;
  			IF OBJECT_ID('dbo.MarketingPromotions', 'U') IS NOT NULL
  				DROP TABLE dbo.MarketingPromotions;

			create table [dbo].[MarketingPromotions] (
				[id] [int] PRIMARY KEY IDENTITY(1,1),
				[name] [varchar](100) NOT NULL,
				[animationData] [varchar](MAX) NOT NULL ,
				[startDate] [datetime] NOT NULL,
				[endDate] [datetime] NOT NULL,
				[lastRanDate] [datetime],
				[prizeDistributionTime] [bigint] NOT NULL,
				[firstLoginOrAllLogin] [bit] DEFAULT (1),
				[maxPrizePerUser] [int] NOT NULL,
				[cashprizecap] [bigint] NOT NULL,
				[criteria] [int] NOT NULL,
				[prizecycle] [int] NOT NULL,
				[enabled] [bit] Default((0)) NOT NULL
			);

			create table [dbo].[MarketingPromotionPrizes] (
				[id] [int] PRIMARY KEY IDENTITY(1,1),
				[promotionId] [int] NOT NULL,
				[rank] [int] NOT NULL,
				[type] [int] NOT NULL,
				[name] [varchar](50) NOT NULL,
				[value] [float] NOT NULL,
				[requiredvalue] [bigint] NOT NULL,
				[count] [int] NOT NULL,
				[description] [varchar](500)
			);

			create table [dbo].[MarketingPromotionWinners] (
				[promotionId] int NOT NULL,
				[userId] int NOT NULL ,
				[rankAlloted] int NOT NULL,
				[rankAllotedTime] datetime NOT NULL,
				[prizeProcessedTime] datetime,

				CONSTRAINT [PromotionWinners]
					PRIMARY KEY CLUSTERED
					(
						[promotionId] ASC,
						[userId] ASC
					),
			);
			create table [dbo].[MarketingPromotionsEligibleUserCategory] (
						[promotionId] [int] NOT NULL,
						[userCategory] [varchar](50) NOT NULL,
						[users] [varchar](MAX)
					);
		</sql>
</changeSet>



	<changeSet id="jwr-db-deviceTypeGameStats" author="ShashankSharda">
    	<comment>adding devicetype column in gmestats dump table</comment>
		<sql>
		alter table Gamestats
		add deviceType varchar(5) not null default('web');
	</sql>

	</changeSet>

	<changeSet id="jwr-db-deviceTypeGameStats-1" author="ShashankSingh" context="local">
		<comment>Updating few columns of users table for production. One time.</comment>
		<sql>
			UPDATE [Users] SET [friendReferral] = '0' WHERE [friendReferral] IS NULL;

			UPDATE [Users] SET [avatarId] = '1' WHERE ISNUMERIC([avatarId]) = 0;

			UPDATE [dbo].[Users]
			SET lastSuccessfulDepositMethod = latestDeposit.BankID
			FROM users usr
			INNER JOIN (
				select bankid,d1.userID from DepositTransactions d1
				INNER JOIN (
					select max(internaltransactionid) maxId, userid from DepositTransactions where Status =2 group by userID
				) d2 on d1.InternalTransactionID = d2.maxId where BankID is not null
			) latestDeposit
			on latestDeposit.userid = usr.userID;

			update users set LobbyPreference = 0;

			Update users
			set isTester = 1
			where userid in (
			23, 8589, 31370, 31692, 31798, 31893, 36042, 37483, 37719, 41281, 56913, 58247, 62349, 63361, 66707, 67078, 67185, 67193, 73673, 74393, 74400, 74587, 74769, 78265, 78723, 79988, 86294, 87776, 102363, 142846, 157639, 201420, 222905, 254558, 262877, 263270, 273086, 276649, 291459, 314539, 358458, 361547, 370207, 376822, 491181, 506912, 652954, 659350, 662710, 697452, 720048, 721475, 1124661, 1154690, 1186139, 1199539, 1199540, 1199541, 1199545, 1199550, 1199553, 1199558, 1199562, 1199576, 1199579, 1199581, 1208785, 1343778, 1357525, 1380177, 1387519, 1387535, 1388746, 1398788, 1399620
			);

			DECLARE @timestampStart DATE='2011-12-01'
			DECLARE @timestampEnd DATE= cast(getdate() as date)

			DECLARE @name1 VARCHAR(50)
			DECLARE @SQL NVARCHAR(max)
			CREATE TABLE #trnsction1 (userid int ,delta money,timestamp datetime)

			  SET @SQL  = N'SELECT userid,delta , timestamp  FROM RupeeTransactions_'+CAST(datepart(year,@timestampstart) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,@timestampstart)), 2)
			+ ' ct WHERE userid &gt;0 and  transactiontype in (1,30) '
			DECLARE db_cursor CURSOR FOR

			select distinct 'RupeeTransactions_'+CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
			), 2) datw from ExplodeDates (DATEADD(month,1,DATEADD(month,datediff(month,0,@timestampstart),0)),@timestampEnd)

			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @name1
			WHILE @@FETCH_STATUS = 0
			BEGIN
			   SET @SQL = @SQL + N' UNION SELECT userid,delta, timestamp FROM '+@name1
			+ ' ct WHERE userid &gt;0 and  transactiontype in (1,30)  '
			        FETCH NEXT FROM db_cursor INTO @name1
			END
			CLOSE db_cursor
			DEALLOCATE db_cursor

			insert into #trnsction1
			EXEC sp_executesql @SQL;

			update users
			set firstDepositDate = x.timestamp,
			firstDepositAmount = x.delta
			from users u inner join (
			SELECT t.userid,delta,timestamp, firstdepositdate,firstdepositAmount from (
			SELECT *, row_number() over (partition by userid order by timestamp) Attempt
			FROM #trnsction1 ) t
			inner join users u on t.userid = u.userid
			where Attempt =1 and (t.delta &lt;&gt; u.firstDepositamount or DATEDIFF(D,timestamp,firstDepositDate) &lt;&gt; 0) ) x on u.userID = x.userID;

		</sql>
	</changeSet>

	<changeSet id="jwr-db-Add-clientemulator-cfg" author="Nilesh">
    	<comment>Setting clientEmulator connection config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientEmulator', 'clientEmulator.connectionUrl', 'localhost', 1, 'text', 'Main Server IP');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientEmulator', 'clientEmulator.port', '8080', 1, 'text', 'Connection Port')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-automation-callback-cfg" author="Mirek">
    	<comment>Adding cfg value for built automation</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('automation_cb', 'automation_cb.secretkey', '', 1, 'text', 'Secret Key for automation callback')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-nodes-versions" author="Mirek">
    	<comment>Creates table for storing versions of nodes</comment>
    	<sql>
			CREATE TABLE [dbo].[ServerNodesInfo](
				[NodeType] [varchar] (32) NOT NULL,
				[BuildNumber] [int] NOT NULL,
				[LastUpdated] [datetime] NOT NULL,

				PRIMARY KEY CLUSTERED
				(
					[NodeType]
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]
    	</sql>
    	<sql>
    		INSERT INTO [dbo].[ServerNodesInfo] ([NodeType], [BuildNumber], [LastUpdated]) VALUES ( 'JR-ADMIN-SRV', '0', GETDATE());
    		INSERT INTO [dbo].[ServerNodesInfo] ([NodeType], [BuildNumber], [LastUpdated]) VALUES ( 'JR-GAME-SRV', '0', GETDATE());
    		INSERT INTO [dbo].[ServerNodesInfo] ([NodeType], [BuildNumber], [LastUpdated]) VALUES ( 'JR-GAME-SRV-STAG', '0', GETDATE());
    		INSERT INTO [dbo].[ServerNodesInfo] ([NodeType], [BuildNumber], [LastUpdated]) VALUES ( 'JR-MAIN-SRV', '0', GETDATE());
    		INSERT INTO [dbo].[ServerNodesInfo] ([NodeType], [BuildNumber], [LastUpdated]) VALUES ( 'JR-MAIN-SRV-STAG', '0', GETDATE());
    		INSERT INTO [dbo].[ServerNodesInfo] ([NodeType], [BuildNumber], [LastUpdated]) VALUES ( 'JR-MSTR-SRV', '0', GETDATE());
    		INSERT INTO [dbo].[ServerNodesInfo] ([NodeType], [BuildNumber], [LastUpdated]) VALUES ( 'JR-MSTR-SRV-STAG', '0', GETDATE());
    		INSERT INTO [dbo].[ServerNodesInfo] ([NodeType], [BuildNumber], [LastUpdated]) VALUES ( 'JR-SERV-DIS', '0', GETDATE());
    		INSERT INTO [dbo].[ServerNodesInfo] ([NodeType], [BuildNumber], [LastUpdated]) VALUES ( 'JR-TOUR-SRV', '0', GETDATE());
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-totalRakeGeneratedTournaments" author="NidhiS">
    	<comment>adding total Rake Generated column in tournament table</comment>
		<sql>alter table tournaments add totalRake money not null default(0)</sql>
	</changeSet>

    <changeSet id="jwr-db-tournamentTemplatesEligibility" author="Mirek">
    	<comment>Adding eligibility to tournament template</comment>
		<sql>ALTER TABLE [TournamentTemplates] ADD eligibility [text] NULL</sql>
	</changeSet>

    <changeSet id="jwr-db-alter-tournamentsresult-prize" author="Mirek">
    	<sql>ALTER TABLE [TournamentResults] ALTER COLUMN [prize] [varchar] (256)</sql>
    </changeSet>

    <changeSet id="jwr-db-azure-webhooks-cfg" author="Mirek">
    	<comment>Adding cfg for azure webhooks</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure-nodes-manager', 'azure.webhook.startvm', '', 1, 'text', 'Azure webhook URL for starting VM');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure-nodes-manager', 'azure.webhook.stopvm', '', 1, 'text', 'Azure webhook URL for stopping VM');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure-nodes-manager', 'azure.webhook.updatenodes', '', 1, 'text', 'Azure webhook URL for updating nodes');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure-nodes-manager', 'azure.webhook.updatenodes.stage', '', 1, 'text', 'Azure webhook URL for updating stage nodes');
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-serverBuilds-table" author="Mirek">
    	<sql>
	    	CREATE TABLE [dbo].[ServerBuilds](
			 [BuildNumber] [int] NOT NULL,
			 [Created] [datetime] NOT NULL,
			 [RequiresStageToSignOff] [bit] NOT NULL,
			 [WasOnStage] [bit] NOT NULL,
			 [SignedOff] [bit] NOT NULL,
			 [SignedOffBy] [varchar] (64) NULL,
			 [SignedOffDateTime] [datetime] NULL,
			 [Archived] [bit] NOT NULL,
			 [ArchivedBy] [varchar] (64) NULL,
			 [ArchivedDateTime] [datetime] NULL,

			 PRIMARY KEY CLUSTERED(
					[BuildNumber]
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]
    	</sql>
	</changeSet>
	<changeSet id="jwr-db-server-nodes-adding-state" author="Mirek">
		<sql>
			ALTER TABLE [dbo].[ServerNodesInfo] ADD [State] [varchar] (256) NOT NULL DEFAULT '';
		</sql>
	</changeSet>

	<changeSet id="jwr-db-alter-pageaddionalinfo" author="Rohan">
		<sql>
			EXEC sp_rename 'PagesAdditionalInfo.PageId', 'id', 'COLUMN';
			alter Table PagesAdditionalInfo drop column MenuParentId
			alter Table PagesAdditionalInfo add MenuParentUri varchar(100)
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Add-new-blob-containers-entries-in-cfg" author="Nidhi">
    	<comment>Setting withdrawal config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.addressproof.container.name', 'addressproof', 1, 'text', 'Address proof container name')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.idproof.container.name', 'idproof', 1, 'text', 'IdProof container name')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.pancard.container.name', 'pancard', 1, 'text', 'PanCard container name')
    		delete from cfg where [key] = 'azure.kyc.container.name';
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-Add-currency-lock-alerts-blob-containers-entries-in-cfg" author="rohan">
    	<comment>Setting currency lock alert blob</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.currencylock.container.name', 'currency-lock-alerts', 1, 'text', 'Currency Lock Alert container name')
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-verification-bonus" author="Nilesh">
    	<comment>Adding cfg value for built Verification bonus</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('verificationBonus', 'verificationBonus.email', 'EMAIL_VERIFICATION_BONUS', 1, 'text', 'Email Verification Bonus Code')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('verificationBonus', 'verificationBonus.mobile.amount', '10', 1, 'number:1:10000:100', 'email verification bonus amount');

    		INSERT INTO [dbo].[Coupons]([code],[usesPerPlayer],[currencyType],[rewardAmount],[dateAvailable],[dateExpires],[enabled],[numberOfUsages],[numberOfTimesUsed],[verifyEmail])
     		VALUES('EMAIL_VERIFICATION_BONUS',1,'RUPEES',5,'2016-12-01','2030-12-31',1,-1,0,1);
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-alter_adCashBonus" author="Nilesh" context="local">
    	<comment>Alter column size fir bonuCode in AdCashBonusUsers</comment>
    	<sql>
			ALTER TABLE AdCashBonusUsers ALTER COLUMN BonusCode VARCHAR (25) null;
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-verification-bonus-cfg" author="Nilesh">
    	<comment>Config for enabling/disabling mobile verification bonus</comment>
		<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type],[description])
			VALUES ('verificationBonus','verificationBonus.mobile.enabled','true','1','bool','Enables/Disables service for mobile verification bonus');
		</sql>
    </changeSet>

    <changeSet id="jwr-create-function-stringsplit" author="ShashankSingh">
	<comment>Create function StringSplit</comment>
	<sqlFile path="StringSplit.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
   </changeSet>

	<changeSet id="jwr-drop-table-call-logs" author="ShashankSingh" context="local">
    	<comment>dropping call logs</comment>
		<sql>
			DROP TABLE CallLogs;
		</sql>
    </changeSet>

	<changeSet id="jwr-create-old-call-logs" author="ShashankSingh" context="local">
	<comment>Create new call logs</comment>
	<sqlFile path="old-schema/tables/CallLogs_new.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
   </changeSet>

   <changeSet id="jwr-alter-gameactionlog-to-support-unicode" author="Nidhi">
	<comment>Alter game action and tournament game action log</comment>
        <sql>
			ALTER TABLE TournamentGameActionLog ALTER COLUMN gameinfo nvarchar(max);
            ALTER TABLE GameActionLog ALTER COLUMN gameinfo nvarchar(max);
		</sql>
   </changeSet>

    <changeSet id="jwr-update-gameid-in-RupeeTransaction_table" author="shashanksharda">
	<comment>update gameid to each transaction in historical data</comment>
        <sql>

		DECLARE @name1 VARCHAR(50)
		DECLARE @SQL NVARCHAR(max)
		DECLARE db_cursor CURSOR FOR

		select distinct 'RupeeTransactions_'+CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
		), 2) datw from ExplodeDates ('2013-01-01',CAST(GETDATE() AS DATE))

		OPEN db_cursor
		FETCH NEXT FROM db_cursor INTO @name1

		WHILE @@FETCH_STATUS = 0
		BEGIN

		  SET @SQL = N'update '+@name1+' set gameid = t.gameid
			from ' +@name1+ ' r
			inner join (
			select transactionID,
			CONVERT(BIGINT,REPLACE(REPLACE(SUBSTRING(memo, charindex(''GameID:'', memo), LEN(memo)),'']]'',''''),''GameID:'','''')) GameId
			from  ' +@name1+ ' where  memo like ''\[\[%Gameid:%]]''  ESCAPE ''\''
			) t on r.transactionID = t.transactionID '

		  EXEC sp_executesql @SQL

		 FETCH NEXT FROM db_cursor INTO @name1
		END

		CLOSE db_cursor
		DEALLOCATE db_cursor

		</sql>
   </changeSet>
   <changeSet id="jwr-all-rupeetxn-view" author="shashanksharda">
	<comment>have a single rupee txn view to simplyfy some queries</comment>
        <sql>
			DECLARE @name1 VARCHAR(50)
			DECLARE @name VARCHAR(50)
			DECLARE @SQL nVARCHAR(max) =N'CREATE VIEW All_RupeeTransactions
			AS
			select * from RupeeTransactions_2011_12 '
			DECLARE db_cursor CURSOR FOR

			select distinct CAST(datepart(year,thedate) as varchar)+'_'+ RIGHT('00' + CONVERT(NVARCHAR(2), DATEPART(Month,thedate)
			), 2) datw from ExplodeDates ('2012-12-01','2020-12-01')

			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @name1

			WHILE @@FETCH_STATUS = 0
			BEGIN

			  SET @SQL = @sql + N'
			  union select * from RupeeTransactions_'+@name1
		    FETCH NEXT FROM db_cursor INTO @name1
			END

			CLOSE db_cursor
			DEALLOCATE db_cursor

		    EXEC SP_executesql  @sql
		    </sql>
   </changeSet>

    <!--changeSet id="jwr-duplicate-users-table-1" author="Mayank">
    	<comment>Creating new table for handling duplicate users</comment>
    	<sql>
		IF OBJECT_ID(N'dbo.DuplicatePropertyUsers', N'U') IS NULL
		BEGIN
			CREATE TABLE [dbo].[DuplicatePropertyUsers] (
				[userId] [int] NOT NULL,
				[username] [varchar](14) NOT NULL,
				[password] [char](70) NOT NULL,
				[email] [varchar](254) not null,
				[socialNetwork] [varchar](20) NULL,
				[lastLoginDate] [datetime] NULL,
				[hasDetailsUpdated] [bit] NOT NULL DEFAULT ((0)),
				[detailUpdatedDate] [datetime] NULL
				PRIMARY KEY CLUSTERED
				(
					[UserId]
				)
				WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]
		END
    	</sql>
    </changeSet-->

	<changeSet id="jwr-db-tournamentsCancelReason" author="Mirek">
		<comment>Adding cancelReason to Tournaments table</comment>
		<sql>ALTER TABLE tournaments ADD cancelReason [varchar](128) NOT NULL DEFAULT('')</sql>
	</changeSet>

	<changeSet id="jwr-drop-table-leaderboards" author="Nilesh" context="local">
    	<comment>dropping table leaderboards</comment>
		<sql>
			DROP TABLE LEADERBOARDS;
		</sql>
    </changeSet>
    <changeSet id="jwr-dumptable-for-mobile-rake" author="shashanksharda">
	   <comment>dumping mobile rake data</comment>
	   <sql>
	    CREATE TABLE userMobileRakeDump
	    (
	    ID int PRIMARY KEY IDENTITY(1,1),
	    userID int NOT NULL,
	    timestamp datetime,
	    mobileRake money,
	    apkRake money
	   )
	   </sql>
   </changeSet>

   <changeSet id="jwr-db-Add-Index-in-Game-Stats-Table" author="Nidhi">
		<sql>
			IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.GameStats') AND NAME ='IX_GameStats')
            DROP INDEX IX_GameStats ON dbo.GameStats;
            Create NonClustered Index IX_GameStats On GameStats
            (userId Asc, gameid Asc, [startTime] Asc) INCLUDE(winnings)
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Add-Index-in-Log-Tables" author="Nidhi">
		<sql>
			IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.GameActionLog') AND NAME ='IX_GameActionLog')
            DROP INDEX IX_GameActionLog ON dbo.GameActionLog;
            Create NonClustered Index IX_GameActionLog On GameActionLog
            (gameId Asc, dateCreated Asc)

            IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.TournamentGameActionLog') AND NAME ='IX_TournamentGameActionLog')
            DROP INDEX IX_TournamentGameActionLog ON dbo.GameActionLog;
            Create NonClustered Index IX_TournamentGameActionLog On TournamentGameActionLog
            (tournamentId Asc, roundNumber Asc,gameid Asc, dateCreated Asc)

		</sql>
	</changeSet>

	<changeSet id="jwr-db-Add-Primary-in-TournamentGameAction-Log-Table" author="Nidhi">
		<sql>
			ALTER TABLE TournamentGameActionLog ADD PRIMARY KEY (id)

		</sql>
	</changeSet>
	<changeSet id="jwr-db-Add-RAF-entries-in-cfg" author="ShashankSingh">
    	<comment>Setting RAF setting in config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'raf.hotmail.clientid', '00000000401A4F32', 1, 'text', 'Hotmail Client Id')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'raf.hotmail.redirectUrl', 'https://www.jwrdevjg.com/friends/refer/web-mail', 1, 'text', 'Hotmail Redirect URL')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'raf.gmail.clientid', '1082641265580-tl3rvqcuf7qushdlrehvjahpbqp29atc.apps.googleusercontent.com', 1, 'text', 'Gmail Client Id')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'raf.gmail.apiKey', 'oJU_p7Vhj4tNixOHJdc2aUvI', 1, 'text', 'Gmail Api Key')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'raf.yahoo.apiKey', 'dj0yJmk9QmUwZ3dORnRFdVo5JmQ9WVdrOWNUVjRlbWxrTXpZbWNHbzlNQS0tJnM9Y29uc3VtZXJzZWNyZXQmeD1iNA--', 1, 'text', 'Yahoo Api Key')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'raf.yahoo.apiSecret', '67d85c8ce29710090514720efe580f41e060dbf3', 1, 'text', 'Yahoo Api Secret')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'raf.yahoo.responseUrl', 'https://www.jungleegames.com/importer/yahooimporterlocal.php', 1, 'text', 'Yahoo Response URL')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-Add-BannerLocation-entries-in-cfg" author="ShashankSingh">
    	<comment>Setting BannerLocation setting in config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.baseFolder', '/version4/promotion_', 1, 'text', 'Base CDN Folder For Banners')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.homepageFolder', 'homepage_banners_1282x421', 1, 'text', 'Homepage Banner Folder')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.homepageCPFolder', 'home_page_small_promo_304x226', 1, 'text', 'Homepage Current Promotion Banner Folder')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.lobbyFolder', 'lobby_images_1000x60', 1, 'text', 'Lobby Bar Banner Folder')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.depositLeftFolder', 'home_page_small_promo_304x226', 1, 'text', 'Deposit Left Banner Folder')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.depositRightFolder', 'home_page_small_promo_304x226', 1, 'text', 'Deposit Right Banner Folder')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.landingPageFolder', 'landingpage_images_292x165', 1, 'text', 'Landing Page Small Banner Folder')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.lobbyPopupFolder', 'lobbypopup_images_800x340', 1, 'text', 'Lobby Popup Banner Folder')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.promotionImageFolder', 'promo_page_bigger_450x250', 1, 'text', 'Promotion Image Banner Folder')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.defaultFolder', 'homepage_banners_1282x421', 1, 'text', 'Default Banner Folder')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-add-default-HPCPBanner-in-bannercfg" author="kunal">
    	<comment>Setting DefaultHPCPBannerImage url in config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.homepageRAFBannerUrl', 'https://d22ueo28hfk252.cloudfront.net/Content/versioned/2.0.0.1/images/version4/promotion_oct_16/extras/flash_homepage_1282X421/10k_raf_bonus_hp.jpg', 1, 'text', 'Deafult Banner in CP for cash user on HP')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-add-MobileBannerLocation-in-bannercfg" author="kunal">
    	<comment>Setting Mobile Banner Location in config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.homepageMobileFolder', 'homepage_mobile_banners_400x312', 1, 'text', 'Homepage Mobile Banner Folder')
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-Add-index-userActivityLog-and-userLoginLog" author="shashanksharda">
		<comment>adding indexes to activity log and login log table</comment>

		<sql>

			IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.UserLoginLog') AND NAME ='Index-UserLoginLog-20170106-164823')
            DROP INDEX [Index-UserLoginLog-20170106-164823] ON dbo.UserLoginLog;
         	CREATE NONCLUSTERED INDEX [Index-UserLoginLog-20170106-164823] ON [dbo].[UserLoginLog]
            (
                    [timestamp] ASC,
                    [userID] ASC,
                    [activityType] ASC
            )
            INCLUDE (         [remoteHost],
                    [userDeviceType]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)

        	IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.UserActivityLog') AND NAME ='Index-UserActivityLog-20170106-164823')
            DROP INDEX [Index-UserActivityLog-20170106-164823] ON dbo.UserActivityLog;
            CREATE NONCLUSTERED INDEX [Index-UserActivityLog-20170106-164823] ON [dbo].[UserActivityLog]
            (
                    [timestamp] ASC,
                    [userID] ASC,
                    [activityType] ASC
            )
            INCLUDE (         [remoteHost],
                    [userDeviceType]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)


		</sql>
	</changeSet>
		<changeSet id="jwr-db-update-depattempt" author="shashanksharda" context="local">
			<comment>updateing deposit attempt in depostitxn table</comment>

		<sql>

			WITH firstDeposit ( userid , InternalTxnID)
             AS (
             SELECT userid, InternalTransactionID from (
             select userid, d.InternalTransactionID, ROW_NUMBER() OVER (PARTITION BY USERID ORDER BY InternalTransactionID)rownum from DepositTransactions d
             WHERE CurrencyTransactionID &gt; 0
             and
             Status =2
             ) t where rownum =1
             )

             update DepositTransactions
             set depositAttemptType = t.depAttempt
             from DepositTransactions dt WITH(NOLOCK)
             INNER JOIN (
             SELECT case when (dt.InternalTransactionID &lt;=fd.InternalTxnID) or (fd.InternalTxnID is null)  then 1 Else 2 end depAttempt,dt.userid, dt.InternalTransactionID  from DepositTransactions dt
             LEFT JOIN firstDeposit fd on dt.userID = fd.userid
             ) t on dt.InternalTransactionID = t.InternalTransactionID


		</sql>
	</changeSet>
<!-- 	<changeSet id="jwr-historical-gamestatistics-table" author="shashanksharda">
	   <comment>importing historical gamestats table in one place</comment>
	   <sql>
	    SELECT * into oldGameStats from (
		select gameid, userid,tableinstanceid,tableconfigid,sum(amountwon) amountwon, min(starttime) starttime,max(endtime) endtime, platform, currencyType
		from GameStatistics
		group by gameid,userid,tableInstanceID,tableConfigID,Platform,currencyType
		union
		select gameid, userid,tableinstanceid,tableconfigid,sum(amountwon) amountwon, min(starttime) starttime,max(endtime) endtime,null platform, currencyType from freeGameStatistics group by gameid,userid,tableInstanceID,tableConfigID,currencyType
 		) t
	   </sql>
   </changeSet>
-->
   <changeSet id="jwr-Users-Drop-RejectionReason" author="Nilesh">
   		<comment>dropping column RejectionReason from users table</comment>
		<sql>
			ALTER TABLE Users DROP COLUMN RejectionReason
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Add-RAF-entries-in-cfg-1" author="ShashankSingh">
    	<comment>Setting RAF setting in config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'raf.yahoo.consumerKey', 'dj0yJmk9QmUwZ3dORnRFdVo5JmQ9WVdrOWNUVjRlbWxrTXpZbWNHbzlNQS0tJnM9Y29uc3VtZXJzZWNyZXQmeD1iNA--', 1, 'text', 'Yahoo Consumer Key')
    	</sql>
    </changeSet>

	<changeSet id="jwr-announcements-targetTournamentIds" author="Nilesh">
   		<comment>add column targetTournamentIds to gametableannouncements</comment>
		<sql>
			ALTER TABLE gametableannouncements ADD [targetTournamentIds] [varchar](max);
		</sql>
	</changeSet>

	<changeSet id="jwr-old-tableconfigID-and-buyin-seat-info" author="shashanksharda">
	<comment>getting table info of pre-JWR tables</comment>
	<sql>
	  SELECT * INTO old_TableAndBuyIn FROM (
       SELECT DISTINCT tc.tableid,tc.tableconfigid,
       tc.Type,tc.tableinstanceid,
       CASE WHEN tc.Type = 'Point' THEN pointRummyValue *80
       ELSE
       CASE WHEN tc.Type = 'Rummy21' THEN pointRummyValue *200
       ELSE
       ISNULL(Buyin,0) + ISNULL(entryfee,0) END END EntryFee,
       tc.currencyType as CurrencyType,seats,numHands

       FROM

       dbo.LogGameTables tc
       INNER  JOIN dbo.old_Tournament t ON tc.tableConfigID = t.tableConfigId
       INNER JOIN dbo.old_TournamentTemplate tt   ON t.tournyTemplateID = tt.templateID
       INNER JOIN dbo.old_FeeStructure fs   ON tt.feesStructure = fs.feeStructureID
       WHERE tc.type != 'Tournament'

       UNION

       SELECT  tc.tableid,tc.tableconfigid,
       tc.Type,tc.tableinstanceid,
       CASE WHEN tc.Type = 'Point' THEN pointRummyValue *80
       ELSE
       pointRummyValue *200
       END EntryFee,
       tc.currencyType as CurrencyType,seats,numHands

       FROM

       dbo.LogGameTables tc
       WHERE tc.type = 'Point' OR  tc.type = 'Rummy21'
		) tt

	</sql>
	</changeSet>
	<changeSet id="jwr-update-new-tableconfig-with-offset" author="shashanksharda">
	<comment>Update newly created JWR tableconfigs with offset of LIVE </comment>
	<sqlFile path="UpdateTableConfigID.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>

	</changeSet>

	<changeSet id="jwr-dropping-not-required-views" author="Nidhi">
   		<comment>Drop user withdrawals view</comment>
		<sql>
             IF OBJECT_ID('dbo.UserWithdrawalStatus', 'V') IS NOT NULL
             DROP VIEW dbo.UserWithdrawalStatus;
		</sql>
	</changeSet>

	<changeSet id="jwr-cfg-display-leaderboardprizes" author="Nilesh">
		<comment>Update newly created JWR tableconfigs with offset of LIVE </comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboard', 'leaderboard.prizecount', '25', 1, 'number:1:1000:1', 'Max count of leaderboard prizes to be displayed on website')
		</sql>
	</changeSet>

	<changeSet id="jwr-create-mobiledeviceinfo-table-locally" author="Mayank" context="onlyLocal">
		<comment>Create Mobiledeviceinfo table locally, its not available on local DB</comment>
		<sql>
			CREATE TABLE [dbo].[MobileDeviceInfo](
				[Id] [bigint] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
				[IMEI] [bigint] NULL,
				[DeviceName] [varchar](100) NULL,
				[DeviceType] [varchar](30) NULL,
				[FirstOpenDate] [datetime] NULL,
				[LastOpenDate] [datetime] NULL,
				[OpenCount] [int] NULL,
				[SignupBonusGiven] [bit] NOT NULL CONSTRAINT [DF__MobileDev__Signu__0209E688]  DEFAULT ((0)),
			 CONSTRAINT [PK_MobileDeviceInfo] PRIMARY KEY CLUSTERED
			(
				[Id] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]
		</sql>
	</changeSet>


	<changeSet id="jwr-db-Add-email-bonus-codes-in-cfg" author="Deepender">
     <comment>Setting email bonus codes</comment>
     <sql>
      INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'emailbonuscodes', 'A834MAM80,TUI897YH6,JRRIN25,Free50', 1, 'text', 'Added bonus codes used in landing pages for promotion')

     </sql>
    </changeSet>
	 <changeSet id="jwr-db-Add-support-email-and-other-entries-in-cfg" author="Nidhi">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'webSiteName', 'Jungleerummy.com', 1, 'text', 'Junglee Rummy website name')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'supportEmail', 'support@jungleerummy.com', 1, 'text', 'Customer support email')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-azure-webhooks-cfg-stopstage" author="Mirek">
    	<comment>Adding cfg for azure webhooks</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure-nodes-manager', 'azure.webhook.stopvm.stage', '', 1, 'text', 'Azure webhook URL for stopping stage VM');
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-azure-webhooks-cfg-upgradegs" author="Mirek">
    	<comment>Adding cfg for azure webhooks</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure-nodes-manager', 'azure.webhook.upgradegs', '', 1, 'text', 'Azure webhook URL for starting/upgrade gameserver nodes. JR-GAME-UPGRADE-RB');
    	</sql>
    </changeSet>

     <changeSet id="jwr-db-Add-support-phone-and-timings-in-cfg" author="Nidhi">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'supportPhoneNumber', '011-66481234', 1, 'text', 'Junglee Rummy Support Phone Number')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'supportStartTime', '10:30', 1, 'text', 'Customer support start time')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'supportEndTime', '07:00', 1, 'text', 'Customer support end time')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-Add-download-request-table" author="ShashankSingh">
    	<comment>Setting util values</comment>
    	<sql>
    		CREATE TABLE [dbo].[DownloadRequests](
			[ID] [int] IDENTITY(1,1) NOT NULL,
			[username] [varchar](50) NOT NULL,
			[email] [varchar](50) NOT NULL,
			[module] [varchar](max) NOT NULL,
			[sql] [varchar](max) NOT NULL,
			[values] [nvarchar](max) NOT NULL,
			[timestampRequested] [datetime] NOT NULL,
			[timestampProcessed] [datetime] NULL,
		 CONSTRAINT [PK_DownloadRequests] PRIMARY KEY CLUSTERED
		(
			[ID] ASC
		)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
		) ON [PRIMARY];
		</sql>
    </changeSet>

    <changeSet id="jwr-db-Add-Other-websites-info-in-cfg-table" author="Nidhi">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'rummyInWebsiteLink', 'www.Rummy.in', 1, 'text', 'Rummy in website link')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'rummyInWebsiteName', 'Rummy.in', 1, 'text', 'Rummy in website name')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'rummyInSupportEmail', 'support@rummy.in', 1, 'text', 'Rummy In Customer support email')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'rummyMillionaireWebsiteLink', 'www.Rummymillionaire.com', 1, 'text', 'Rummymillionaire website link')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'rummyMillionaireWebsiteName', 'Rummymillionaire.com', 1, 'text', 'Rummymillionaire website name')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'rummyMillionaireSupportEmail', 'support@rummymillionaire.com', 1, 'text', 'RummyMillionarieCustomer support email')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'zapakWebsiteName', 'Zapak Rummy', 1, 'text', 'Zapak rummy website name')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'facebookWebsiteName', 'Facebook Rummy', 1, 'text', 'Facebook rummy website name')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-Add-column-to-blockchatlogs" author="Rohan">
    	<comment>add column to blockchatlogs table</comment>
    	<sql>
		    ALTER TABLE blockchatlogs ADD [chatAllowed] [bit] NOT NULL default ((0));
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-Add-RAF-banner-in-cfg" author="Deepender">
    	<comment>Setting RAF banner URL in config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'rafPageBanner', '/march2017_raf.png', 1, 'text', 'Raf banner url')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'rafPopupBanner', '/version4/refer_n_win/refer_lobby_10k_new.jpg', 1, 'text', 'Raf popup banner url')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-Add-bonus-code-name-info-for-emails-in-cfg-table" author="deepender">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'JRbonusCode', 'WIN1000', 1, 'text', 'bonus code name info for JR in email template')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'RMbonusCode', 'MILLION', 1, 'text', 'bonus code name info for RM in email template')
    	</sql>
    </changeSet>

     <changeSet id="jwr-db-Add-column-to-adkeycsv" author="Rohan">
    	<comment>add column to adkeycsvmapping table</comment>
    	<sql>
		    IF COL_LENGTH('dbo.adKeySourceCSVMapping', 'landingpage') IS NULL
		        ALTER TABLE adKeySourceCSVMapping ADD [landingpage] NVARCHAR(500);
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-Add-column-to-promocodes" author="Rohan">
    	<comment>add column to promocodes table</comment>
    	<sql>
		IF COL_LENGTH('dbo.Promocodes', 'showindropdown') IS NULL
		        ALTER TABLE Promocodes ADD [showindropdown] bit not null default((0));
    	</sql>
    </changeSet>


     <changeSet id="jwr-db-reset-IdFactorySequence" author="Nilesh">
    	<comment>alter IdFactorySequence</comment>
    	<sql>
		    ALTER SEQUENCE [dbo].[IdFactorySequence] RESTART WITH 140000001;
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-user-bonus-detail-calc" author="Rohan">
    	<comment>calculate users cummulative user bonus details</comment>
    	<sql>
		   CREATE TABLE dbo.UserAllBonusTotals
				(userid           INT PRIMARY KEY
				                      NOT NULL,
				 bonusAmounttotal MONEY NOT NULL,
				 bonusCount       INT NOT NULL,
				 firstBonusAmount MONEY NOT NULL,
				 firstBonusDate   DATETIME NOT NULL
				);
    	</sql>
    </changeSet>




    <changeSet id="jwr-db-kyc-pan-copy" author="Nilesh" context="local">
    	<comment>Move all approved Pan details from Id to Pan proof columns in Users</comment>
    	<sql>
		    update users set panCardNumber = IdProofText, IdProofText = null , pancardImagePath = IdProofImagePath, IdProofImagePath = null,
		    panRejectionReason = IdProofReason, IdProofReason = null, PanVerificationStatus = IdProofStatus, IdProofStatus = 0,
		    timestampPanApproval = timestampIdApproval, timestampIdApproval = null, timestampPanUpdate = timestampIdUpdate, timestampIdUpdate = null
		    where IdProofType = 3 and IdProofStatus = 2 ;
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-uat-env-config" author="Mirek">
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('environment', 'environment.uat', 'false', 1, 'bool', 'Specifies whether server is running on UAT environment or not.')
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-kyc-deletePanAsId" author="Nilesh" context="local">
    	<comment>Remove all Id Proof details if type is PAN and not approved</comment>
    	<sql>
		    update users set IdProofText = null , IdProofImagePath = null,IdProofReason = null, IdProofStatus = 0, timestampIdApproval = null, timestampIdUpdate = null, idProofType = 4 where IdProofType = 3 and IdProofStatus != 2;
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-gameTimer-reduction" author="Nilesh">
		<comment>insert percentageReductionMultiplier for rapid gameTimer</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-timer', 'gameTimerConfig.percentageReductionMultiplier', 50, 1, 'number:0:100:1', 'Percentage multiplier for reduction of timers in Rapid Tables')
		</sql>
	</changeSet>
	<changeSet id="adding-opendeck-pick-and-position-on-user-game-play-report" author="Rohan">
		<comment>insert percentageReductionMultiplier for rapid gameTimer</comment>
		<sql>
			ALTER TABLE Gamestats ADD [seatid] int null , [opendeckpercent] float null;
      </sql>
	</changeSet>
	<changeSet id="jwr-db-add-new-withdrawal-types" author="Rohan">
		<comment>adding newly introduced withdrawal types to db table</comment>
		<sql>
			insert into WithdrawalStatusTypes values('SUSPICIOUS',10)
			insert into WithdrawalStatusTypes values('DEP_WID',11)
			insert into WithdrawalStatusTypes values('DETAILS_MISMATCH',12)
		</sql>
	</changeSet>
	<changeSet id="jwr-db-redis-server-details" author="Nidhi">
		<comment>insert redis server configurable info</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('redis', 'redis.host.name', 'gamelogs.redis.cache.windows.net', 1, 'text', 'Redis server host name')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('redis', 'redis.host.port', 6380, 1, 'number:0:20000:20', 'Redis server port name')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('redis', 'redis_auth_password', '', 1, 'text', 'Redis server auth password')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('redis', 'redis_enable_ssl', 'false', 1, 'bool', 'Enable SSL ')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('redis', 'redis_logging_enabled', 'false', 1, 'bool', 'Whether to enable Redis logging for game logs')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('redis', 'redis_log_reader_time_in_ms', '1', 1, 'number:1:2000:100', 'Frequency in ms at which redis logs reader task should run')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('redis', 'redis_log_reader_thread_pool_size', '4', 1, 'number:1:1000:1', 'Redis reader thread pool size')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Add-Lobby-Top-Tabs-Config-in-cfg" author="Deepender">
    	<comment>Enabling/Disabling the Lobby Top Tabs for Game Variants</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyTopTabs', 'points.13cardrummy.enabled', 'true', 1, 'bool', 'Enable/Disable 13card points rummy')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyTopTabs', 'pool.13cardrummy.enabled', 'true', 1, 'bool', 'Enable/Disable 13card pool rummy')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyTopTabs', 'deal.13cardrummy.enabled', 'true', 1, 'bool', 'Enable/Disable 13card deal rummy')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyTopTabs', 'points.21cardrummy.enabled', 'true', 1, 'bool', 'Enable/Disable 21card points rummy')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyTopTabs', 'points.10cardrummy.enabled', 'true', 1, 'bool', 'Enable/Disable 10card points rummy')
    	</sql>
    </changeSet>


	<changeSet id="jwr-db-add-thread-config-thread-size-write-to-azure" author="Nidhi">
		<comment>insert redis server configurable info</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('redis', 'redis_log_reader_writer_to_azure_thread_pool_size', '4', 1, 'number:1:1000:1', 'Azure Redis write thread pool size')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-modify-cfg-for-redis" author="Nidhi">
		<comment>update the redis keys to have meaningful names</comment>
		<sql>
			update cfg set [key] = 'redis_client_pool_size'  where id = 'redis' and [Key] = 'redis_log_reader_thread_pool_size';
            update cfg set [key] = 'redis_log_reader_writer_to_azure_threads' where id = 'redis' and [Key] = 'redis_log_reader_writer_to_azure_thread_pool_size';
            delete cfg where id = 'redis' and [Key] = 'redis_log_reader_time_in_ms';
		</sql>
	</changeSet>

	<changeSet id="jwr-db-add-cfg-for-azure-redis-logging" author="Nidhi">
		<comment>insert redis and azure logging keys</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'azureLogging', 'true', 1, 'bool', 'To enable game server to log to azure')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'redisLogging', 'false', 1, 'bool', 'To enable game server to log to redis')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-alter-coupons-table" author="ShashankSingh">
		<comment>insert redis and azure logging keys</comment>
		<sql>
			ALTER TABLE Coupons ADD firstDepositBonus money NOT NULL DEFAULT 0
		</sql>
	</changeSet>

	<changeSet id="jwr-db-alter-AdCashBonusUsers-table" author="ShashankSingh">
		<comment>add new column to AdCashBonusUsers</comment>
		<sql>
			ALTER TABLE AdCashBonusUsers ADD reimbursementType int NOT NULL DEFAULT -1
		</sql>
	</changeSet>
	<changeSet id="jwr-db-add-cfg-for-azure-search-service" author="Nidhi">
		<comment>insert azure search related keys</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.search.service.name', 'gamelogssearchservice', 1, 'text', 'Name of Azure search service')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.search.index.name', 'gamelogsindex', 1, 'text', 'Name of Azure search index')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.search.api.version', '2016-09-01', 1, 'text', 'Azure search API version')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.search.api.key', '', 1, 'text', 'Azure search API key')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-add-new-cfg-for-raf-promoid" author="ShashankSingh">
		<comment>insert azure search related keys</comment>
		<sql>
			DELETE FROM cfg where id='RafPromoCodeId'
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RafPromoCodeId', 'RafPromoCode.Id', '82,3', 1, 'text', 'added promo code id for Raf promo code')
	  </sql>
  </changeSet>

	<changeSet id="jwr-db-add-cfg-for-azure-search-admin-key" author="Nidhi">
		<comment>insert azure search related keys</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.search.admin.key', '', 1, 'text', 'Azure search Admin key')
		</sql>
	</changeSet>
	<changeSet id="jwr-db-add-winViaBadDeclare" author="Shashanksharda">
		<comment>add new column in gamestats</comment>
		<sql>
			ALTER TABLE GameStats
			ADD wonViaBadDeclare bit NOT NULL DEFAULT((0));
		</sql>
	</changeSet>
	<changeSet id="jwr-db-add-report-dumpTable" author="ShashankSharda">
		<comment>create dump tables for reports</comment>
		<sql>
			IF OBJECT_ID('dbo.DUMP_ActiveUserReport') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_ActiveUserReport
			(
			ID INT IDENTITY(1,1) PRIMARY KEY,
			DATE DATE ,
			UserType VARCHAR(10),
			TotalCount INT,
			TotalMobileCount INT
			)
			')

			IF OBJECT_ID('dbo.DUMP_TDS') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_TDS
			(
			userid int,
			username VARCHAR(30),
			type varchar(20),
			seats int,
			entryfee int,
			timestamp datetime,
			TDS money
			)
			')


			IF OBJECT_ID('dbo.DUMP_DAILY_BONUS_RAKE_DEPOSIT') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_DAILY_BONUS_RAKE_DEPOSIT
			(
			Date DATE PRIMARY KEY,
			Rake MONEY,
			TotalBonus MONEY,
			DepositBonus MONEY,
			VIPBonus MONEY,
			BirthdayBonus MONEY,
			SupportBonus MONEY,
			DisconnectRefund MONEY,
			Promotions MONEY,
			FriendReferralBonus MONEY,
			RetrospectiveBonus MONEY,
			SurpriseBonus MONEY,
			OTPBonusTransfer MONEY,
			ExtraInstantCashBackBonus MONEY,
			AddVerificationBonus MONEY,
			InviteeRegistrationBonus MONEY,
			GameCreditBonus MONEY,
			RAFBonus MONEY,
			TournamentBonus MONEY,
			InactiveBonus MONEY,
			Deposits MONEY
			)
			')



			IF OBJECT_ID('dbo.DUMP_Concurrent_User_15_Min') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_Concurrent_User_15_Min
			(
			ID int identity(1,1) primary key,
			Date DATE,
			hour int,
			interval varchar(6),
			type VARCHAR(20),
			rake MONEY,
			numofgames int,
			numOfUser int
			)
			')


			IF OBJECT_ID('dbo.DUMP_MachinIDPlayerCount') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_MachinIDPlayerCount
			(
			machineID VARCHAR(40) primary key,
			playerCount int
			)
			')

			IF OBJECT_ID('dbo.DUMP_MachineIDCount') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_MachineIDCount
			(
			playerId int  primary key,
			machineIdCount int
			)
			')

			IF OBJECT_ID('dbo.DUMP_UserDailyData') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_UserDailyData
			(
			ID int identity(1,1) primary key,
			Date DATE,
			userID int,
			gameCount int,
			Rake money,
			Deposit money,
			Withdrawal money,
			Winnings money,
			Losings money,
			GameWon int,
			GamesLost int,
			)
			')

			IF OBJECT_ID('dbo.DUMP_UserDeviceDailyData') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_UserDeviceDailyData
			(
			ID int identity(1,1) primary key,
			Date DATE,
			userID int,
			gameAPK int,
			gameMob int,
			gameWeb int,
			WinningAPK money,
			WinningMob money,
			WinningWeb money,
			LosingAPK money,
			LosingMob money,
			LosingWeb money,
			DepositAPK money,
			DepositMob money,
			DepositWeb money,
			RakeAPK money,
			RakeMob money,
			RakeWeb money
			)
			')


			IF OBJECT_ID('dbo.DUMP_TableAndRakeAnalysis') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_TableAndRakeAnalysis
			(
			ID int identity(1,1) primary key,
			timestamp DATE,
			gameVariant VARCHAR(20),
			entryfee int,
			seats int,
			gameplaymode int,
			numhands int,
			rake money,
			noofgame int,
			noofuser int,
			Loss money,
			userType varchar(4)
			)
			')


			IF OBJECT_ID('dbo.DUMP_CashPlayerActivity') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_CashPlayerActivity
			(
			ID INT IDENTITY(1,1) PRIMARY KEY,
			socialNetwork VARCHAR(20),
			TotalCashPlayerInMonthTillDate int,
			TotalLockedPlayersInMonthTillDate int,
			TotalCashPlayerInMonth int,
			MonthYearWords Date,
			TotalCashPlayerBeforeThis int,
			TotalMobileCashPlayerInMonthTillDate int,
			TotalCashPlayerInMonthFromMobile int
			)
			')
			IF OBJECT_ID('dbo.DUMP_TesterData') IS NULL -- Check if VIEW Exists
			 EXEC(N'CREATE TABLE DUMP_TesterData
			(
			ID int identity(1,1) primary key,
			Date DATE,
			userid int,
			gameVariant varchar(20),
			entryFee float,
			seats int,
			TesterRake money,
			OpponentRake money,
			GameCount int,
			GamesWon int,
			GamesLost int,
			AmountWon money,
			AmountLost money
			)
			')
		</sql>
	</changeSet>

	<changeSet id="jwr-add-idx_for_userAging_related_table" author="shashankSharda">
		<comment>multiple indexes for user aging,inc deposittxns, mobileRake txn,mob no</comment>
		<sql>
			CREATE NONCLUSTERED INDEX [indx_usrcontactinfo_mobile] ON [dbo].[Users]
			(
				[Mobilenumber] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]


			CREATE NONCLUSTERED INDEX [indx_userMobileRakeDump_userID] ON [dbo].[userMobileRakeDump]
			(
				[userID] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]


			CREATE NONCLUSTERED INDEX [indx_depositTransaction_userid_bankid] ON [dbo].[DepositTransactions]
			(
				[userID] ASC,
				[BankID] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]


			CREATE NONCLUSTERED INDEX [indx_DepositTransactions_Timestamp] ON [dbo].DepositTransactions
			(
				[userID] ASC,[status] ASC,[txninitiatedtime] ASC
			)
			INCLUDE ( 	[Internaltransactionid],
				[BankID],
				[Amount],
				[CurrencyTransactionID],
				[GatewayTransactionID],
				[PointOfEntry],
				[PointOfExit]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]



			CREATE NONCLUSTERED INDEX [idx_DepositTransactions_userDeviceType_CTxnId]
			ON [dbo].DepositTransactions ([userDeviceType],[CurrencyTransactionID])
			INCLUDE ([userID],[Amount])



			CREATE NONCLUSTERED INDEX [idx_DepositTransactions_CTxnId]
			ON [dbo].[DepositTransactions] ([CurrencyTransactionID])
			INCLUDE ([userID],[txnInitiatedTime],[userDeviceType])

				</sql>
	</changeSet>

	<changeSet id="jwr-db-add-report-dumpTable-idx" author="ShashankSharda">
		<comment>create dump tables indexes for reports</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.DUMP_ActiveUserReport') AND NAME ='idx_DUMP_ActiveUserReport_Date_userType')
			BEGIN
			CREATE NONCLUSTERED INDEX [idx_DUMP_ActiveUserReport_Date_userType] ON [dbo].[DUMP_ActiveUserReport]
			(
				[DATE] ASC,
				[UserType] ASC
			)
			INCLUDE ( 	[TotalCount],
				[TotalMobileCount]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
			END

			IF NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.DUMP_Concurrent_User_15_Min') AND NAME ='idx_DUMP_Concurrent_User_15_Min_Date')
			BEGIN
			CREATE NONCLUSTERED INDEX [idx_DUMP_Concurrent_User_15_Min_Date] ON [dbo].[DUMP_Concurrent_User_15_Min]
			(
				[Date] ASC
			)
			INCLUDE ( 	[hour],
				[interval],
				[type],
				[rake],
				[numofgames],
				[numOfUser]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)

			END

			IF NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.DUMP_TableAndRakeAnalysis') AND NAME ='idx_DUMP_TableAndRakeAnalysis_timestamp')
			BEGIN
			CREATE NONCLUSTERED INDEX [idx_DUMP_TableAndRakeAnalysis_timestamp] ON [dbo].[DUMP_TableAndRakeAnalysis]
			(
				[timestamp] ASC
			)
			INCLUDE ( 	[gameVariant],
				[entryfee],
				[seats],
				[userType]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)

			END


			IF NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.DUMP_TDS') AND NAME ='idx_DUMP_TDS_userid_timestamp')
			BEGIN
			CREATE UNIQUE CLUSTERED INDEX [idx_DUMP_TDS_userid_timestamp] ON [dbo].[DUMP_TDS]
			(
				[userid] ASC,
				[timestamp] ASC,
				[entryFee]ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
			END

			IF NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.DUMP_TesterData') AND NAME ='idx_TesterData_date_userid')
			BEGIN
			CREATE NONCLUSTERED INDEX [idx_TesterData_date_userid] ON [dbo].[DUMP_TesterData]
			(
				[Date] ASC,
				[userid] ASC
			)
			INCLUDE ( 	[gameVariant],
				[entryFee],
				[seats]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)

			END

			IF NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.DUMP_UserDailyData') AND NAME ='idx_DUMP_UserDailyDate_date_userid')
			BEGIN
			CREATE NONCLUSTERED INDEX [idx_DUMP_UserDailyDate_date_userid] ON [dbo].[DUMP_UserDailyData]
			(
				[Date] ASC,
				[userID] ASC
			)
			INCLUDE ( 	[gameCount],
				[Rake],
				[Deposit],
				[Withdrawal],
				[Winnings],
				[Losings],
				[GameWon],
				[GamesLost]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
			END


			IF NOT EXISTS (SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.DUMP_UserDeviceDailyData') AND NAME ='idx_DUMP_UserDeviceDailyData')
			BEGIN
			CREATE NONCLUSTERED INDEX [idx_DUMP_UserDeviceDailyData] ON [dbo].[DUMP_UserDeviceDailyData]
			(
				[Date] ASC,
				[userID] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
			END



			</sql>
	</changeSet>
  	<changeSet id="jwr-ad-fraud-check-table-withdrawal-request-time-null" author="rohan" context="local">
		<comment>
			making withdrawalRequestTime field accpting null values in order to accept entries from flagged user report
		</comment>
		<sql>
			alter table fraudcheck alter column withdrawalRequestTime datetime null
		</sql>
	</changeSet>

  	<changeSet id="jwr-db-Add-apk-coupon-code-in-cfg" author="ShashankSingh">
    	<comment>Setting apk coupon code value</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'mobiledevice.couponcode', '', 1, 'text', 'Coupon Code For APK Registration')
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-alter_lastUpdateTimestamp-Users-revert" author="ShashankSharda" context="local">
    	<comment>alter column from timestamp to datetime if present</comment>
    	<sql>
			ALTER TABLE USERS
			DROP COLUMN LastUpdateTimestamp

			ALTER TABLE USERS
			ADD LastUpdateTimestamp datetime NULL
 	</sql>
    </changeSet>

    <changeSet id="jwr-db-add-func-split" author="ShashankSingh" context="prod">
    	<comment>Adding function split to db</comment>
    	<sqlFile path="FunctionSplit.sql"	relativeToChangelogFile="true" endDelimiter="\nGO" />
    </changeSet>

    <changeSet id="jwr-db-add-column-dump-userdevicedaily" author="shashanksharda">
    <comment>adding new columns</comment>
    <sql>
    IF COL_LENGTH('dbo.DUMP_UserDeviceDailyData', 'GamesWonAPK') IS NULL
	BEGIN
     ALTER TABLE DUMP_UserDeviceDailyData
     ADD GamesWonAPK INT NULL
    END

    IF COL_LENGTH('dbo.DUMP_UserDeviceDailyData', 'GamesWonMob') IS NULL
	BEGIN
     ALTER TABLE DUMP_UserDeviceDailyData
     ADD GamesWonMob INT NULL
    END

    IF COL_LENGTH('dbo.DUMP_UserDeviceDailyData', 'GamesWonWeb') IS NULL
	BEGIN
     ALTER TABLE DUMP_UserDeviceDailyData
     ADD GamesWonWeb INT NULL
    END
    </sql>
    </changeSet>

   <changeSet id="jwr-add-idprooftypes-enum-to-db" author="rohan">
  	<comment>add idprooftypes enum to db</comment>
  	<sql>
		IF OBJECT_ID('dbo.idProofTypes') IS NULL -- Check if Table Exists
		 EXEC(N' CREATE TABLE dbo.IdProofTypes
			 (Status  VARCHAR(50) NOT NULL,
			 [Value] INT NOT NULL
		  );
		  ')
			INSERT INTO IdProofTypes VALUES ('AADHAR_CARD', 0);
			INSERT INTO IdProofTypes VALUES ('PASSPORT',1);
			INSERT INTO IdProofTypes VALUES ('VOTER_ID',2);
			INSERT INTO IdProofTypes VALUES ('PANCARD',3);
			INSERT INTO IdProofTypes VALUES ('NA', 4 );
  	</sql>
  	</changeSet>

  	<changeSet id="jwr-add-verficationstatus-enum-to-db" author="rohan">
  	<comment>add verificationstatus enum to db</comment>
  	<sql>
	  	IF OBJECT_ID('dbo.verificationstatus') IS NULL -- Check if Table Exists
			 EXEC(N' CREATE TABLE dbo.verificationstatus
				 (Status  VARCHAR(50) NOT NULL,
				 [Value] INT NOT NULL
			  );
		')
		INSERT INTO verificationstatus VALUES ('NOT_SUBMITTED', 0);
		INSERT INTO verificationstatus VALUES ('SUBMITTED',1);
		INSERT INTO verificationstatus VALUES ('APPROVED',2);
		INSERT INTO verificationstatus VALUES ('DECLINED',3);
  	</sql>
  	</changeSet>

  	    <changeSet id="jwr-db-add-column-dump-table" author="shashanksharda">
    <comment>adding new columns</comment>
    <sql>
    IF COL_LENGTH('dbo.DUMP_activeUserReport', 'reportType') IS NULL
	BEGIN

	ALTER TABLE dump_activeUserReport
	ADD reportType VARCHAR
    END
    </sql>
    </changeSet>

	<changeSet id="jwr-db-Add-withdrawal-bankholiday-message-in-cfg" author="Kunal">
    	<comment>bank holiday message withdrawal config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.bank.holiday.message', '', 1, 'text', 'Bank Holiday Message in Withdrawals')
    	</sql>
    </changeSet>

    <changeSet id="jwr-add-entrypoints-enum-to-db" author="rohan">
  	<comment>add entrypoints enum to db</comment>
  	<sql>
	  	IF OBJECT_ID('dbo.entrypoints') IS NULL -- Check if Table Exists
			 EXEC(N' CREATE TABLE dbo.entrypoints
				 (Status  VARCHAR(50) NOT NULL,
				 [Value] INT NOT NULL
			  );
		')

		INSERT INTO entrypoints VALUES ('UNKNOWN', 0);
		INSERT INTO entrypoints VALUES ('LOBBY',1);
		INSERT INTO entrypoints VALUES ('ACCOUNT',2);
		INSERT INTO entrypoints VALUES ('OTHERS',3);
		INSERT INTO entrypoints VALUES ('LOBBY_GETSTARTED', 4);
		INSERT INTO entrypoints VALUES ('PAYMENTS_RETRY',5);
  	</sql>
  	</changeSet>

    <changeSet id="jwr-add-exitpoints-enum-to-db" author="rohan">
  	<comment>add exitpoints enum to db</comment>
  	<sql>
	  	IF OBJECT_ID('dbo.exitpoints') IS NULL -- Check if Table Exists
			 EXEC(N' CREATE TABLE dbo.exitpoints
				 (Status  VARCHAR(50) NOT NULL,
				 [Value] INT NOT NULL
			  );
		')

		INSERT INTO exitpoints VALUES ('NONE', 0);
		INSERT INTO exitpoints VALUES ('CONTACTINFORMATION',1);
		INSERT INTO exitpoints VALUES ('ENTERAMOUNT',2);
		INSERT INTO exitpoints VALUES ('MAKEPAYMENT',3);
		INSERT INTO exitpoints VALUES ('REQUEST', 4);
		INSERT INTO exitpoints VALUES ('PAYMENTSUCCESS',5);
		INSERT INTO exitpoints VALUES ('PROCESSRESPONSESTEP1',6);
		INSERT INTO exitpoints VALUES ('PROCESSRESPONSESTEP2',7);
		INSERT INTO exitpoints VALUES ('PROCESSRESPONSESTEP3',8);
		INSERT INTO exitpoints VALUES ('PROCESSPROMORESPONSE',9);
		INSERT INTO exitpoints VALUES ('PROCESSTESTRESPONSE',10);
		INSERT INTO exitpoints VALUES ('PROCESSRESPONSEEXCEPTION',11);
		INSERT INTO exitpoints VALUES ('PROCESSDIRECTPAYMENTRESPONSE',12);
		INSERT INTO exitpoints VALUES ('PROCESSDIRECTPAYMENTRESPONSEEXCEPTION',13);
  	</sql>
  	</changeSet>

    <changeSet id="jwr-add-depositattempttype-enum-to-db" author="rohan">
  	<comment>add DepositAttemptType enum to db</comment>
  	<sql>
	  	IF OBJECT_ID('dbo.depositattempttype') IS NULL -- Check if Table Exists
			 EXEC(N' CREATE TABLE dbo.depositattempttype
				 (Status  VARCHAR(50) NOT NULL,
				 [Value] INT NOT NULL
			  );
		')

		INSERT INTO depositattempttype VALUES ('FIRSTFAILED', 0);
		INSERT INTO depositattempttype VALUES ('FIRST',1);
		INSERT INTO depositattempttype VALUES ('REPEAT',2);
  	</sql>
  	</changeSet>

  	<changeSet id="jwr-add-depositprocessedvia-enum-to-db" author="rohan">
  	<comment>add DepositProcessedVia enum to db</comment>
  	<sql>
	  	IF OBJECT_ID('dbo.depositprocessedvia') IS NULL -- Check if Table Exists
			 EXEC(N' CREATE TABLE dbo.depositprocessedvia
				 (Status  VARCHAR(50) NOT NULL,
				 [Value] INT NOT NULL
			  );
		')

		INSERT INTO depositprocessedvia VALUES ('NONE', 0);
		INSERT INTO depositprocessedvia VALUES ('CLIENT_SERVER',1);
		INSERT INTO depositprocessedvia VALUES ('ADMIN_SERVER',2);
		INSERT INTO depositprocessedvia VALUES ('SERVER_SERVER',3);
		INSERT INTO depositprocessedvia VALUES ('RECONCILIATION',4);
  	</sql>
  	</changeSet>

  	<changeSet id="jwr-modify-newly-added-enums" author="rohan">
  		<comment>Correct enum values</comment>
  	<sql>
  			delete from IdProofTypes;
  			INSERT INTO IdProofTypes VALUES ('Aadhar Card', 0);
			INSERT INTO IdProofTypes VALUES ('Passport',1);
			INSERT INTO IdProofTypes VALUES ('Voter Id',2);
			INSERT INTO IdProofTypes VALUES ('Pan card',3);
			INSERT INTO IdProofTypes VALUES ('N/A', 4 );

			delete from verificationstatus;
			INSERT INTO verificationstatus VALUES ('Not Submitted', 0);
			INSERT INTO verificationstatus VALUES ('Submitted',1);
			INSERT INTO verificationstatus VALUES ('Approved',2);
			INSERT INTO verificationstatus VALUES ('Declined',3);

			delete from WithdrawalStatusTypes;
			INSERT INTO WithdrawalStatusTypes VALUES ('Pending', 0);
			INSERT INTO WithdrawalStatusTypes VALUES ('Denied', 1);
			INSERT INTO WithdrawalStatusTypes VALUES ('Fulfilled', 2);
			INSERT INTO WithdrawalStatusTypes VALUES ('In Progress', 3);
			INSERT INTO WithdrawalStatusTypes VALUES ('Cancelled by User', 4);
			INSERT INTO WithdrawalStatusTypes VALUES ('Under Verification', 5);
			INSERT INTO WithdrawalStatusTypes VALUES ('Clean', 6);
			INSERT INTO WithdrawalStatusTypes VALUES ('Fraud', 7);
			INSERT INTO WithdrawalStatusTypes VALUES ('None', 8);
			INSERT INTO WithdrawalStatusTypes VALUES ('Processed to Bank', 9);
			INSERT INTO WithdrawalStatusTypes VALUES ('Suspicious', 10);
			INSERT INTO WithdrawalStatusTypes VALUES ('Dep-Wid', 11);
			INSERT INTO WithdrawalStatusTypes VALUES ('Details Mismatch', 12);

  	</sql>
  	</changeSet>

 	<changeSet id="jwr-db-NewMappingTables-drop-create" author="ShashankSharda">
		<comment>adding mapping tables</comment>
		<sql>
			ALTER TABLE depositattempttype ADD PRIMARY KEY([value]);
			ALTER TABLE depositprocessedvia ADD PRIMARY KEY([value]);
			ALTER TABLE entrypoints ADD PRIMARY KEY([value]);
			ALTER TABLE exitpoints ADD PRIMARY KEY([value]);
			ALTER TABLE IdProofTypes ADD PRIMARY KEY([value]);
			ALTER TABLE verificationstatus ADD PRIMARY KEY([value]);

			DROP TABLE depositStatus;
			DROP TABLE GameInstanceTypes;
			DROP TABLE GameVariantTypes;
			DROP TABLE WithdrawalStatusTypes;
			DROP TABLE TransactionTypes;

			CREATE TABLE dbo.DepositStatus
			(
						 Status varchar(50) NOT NULL, [Value] tinyint NOT NULL PRIMARY KEY
			)
			ON [PRIMARY];

			CREATE TABLE dbo.GameInstanceTypes
			(
						 Type varchar(50) NOT NULL, [Value] tinyint NOT NULL PRIMARY KEY
			)
			ON [PRIMARY];

			CREATE TABLE dbo.GameVariantTypes
			(
						 Type varchar(50) NOT NULL, [Value] tinyint NOT NULL PRIMARY KEY
			)
			ON [PRIMARY];

			CREATE TABLE dbo.TransactionTypes
			(
						 txnName varchar(50) NOT NULL, ttype tinyint NOT NULL PRIMARY KEY
			)
			ON [PRIMARY];

			CREATE TABLE dbo.WithdrawalStatusTypes
			(
						 Status varchar(100) NOT NULL, [Value] tinyint NOT NULL PRIMARY KEY
			)
			ON [PRIMARY];

			INSERT INTO dbo.DepositStatus( Status, [Value] )
			VALUES( N'UNKNOWN', N'0' );

			INSERT INTO dbo.DepositStatus( Status, [Value] )
			VALUES( N'FAILED', N'1' );

			INSERT INTO dbo.DepositStatus( Status, [Value] )
			VALUES( N'SUCCESS', N'2' );

			INSERT INTO dbo.DepositStatus( Status, [Value] )
			VALUES( N'PROCESSED', N'3' );

			INSERT INTO dbo.DepositStatus( Status, [Value] )
			VALUES( N'AWAITED', N'4' );

			INSERT INTO dbo.DepositStatus( Status, [Value] )
			VALUES( N'ERROR', N'5' );

			INSERT INTO dbo.DepositStatus( Status, [Value] )
			VALUES( N'PROCESSING', N'6' );

			INSERT INTO dbo.GameInstanceTypes( Type, [Value] )
			VALUES( N'POINTSRUMMY', N'0' );

			INSERT INTO dbo.GameInstanceTypes( Type, [Value] )
			VALUES( N'MTTRUMMY', N'1' );

			INSERT INTO dbo.GameInstanceTypes( Type, [Value] )
			VALUES( N'DEALS', N'2' );

			INSERT INTO dbo.GameInstanceTypes( Type, [Value] )
			VALUES( N'POOLRUMMY', N'3' );

			INSERT INTO dbo.GameInstanceTypes( Type, [Value] )
			VALUES( N'TEENPATTI', N'4' );

			INSERT INTO dbo.GameInstanceTypes( Type, [Value] )
			VALUES( N'TWENTYONECARDPOINTSRUMMY', N'5' );

			INSERT INTO dbo.GameVariantTypes( Type, [Value] )
			VALUES( N'THIRTEENCARD', N'0' );

			INSERT INTO dbo.GameVariantTypes( Type, [Value] )
			VALUES( N'SEVENCARD', N'1' );

			INSERT INTO dbo.GameVariantTypes( Type, [Value] )
			VALUES( N'POOLRUMMY', N'2' );

			INSERT INTO dbo.GameVariantTypes( Type, [Value] )
			VALUES( N'TWENTYONECARD', N'4' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'TRANSFER', N'0' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'DEPOSIT', N'1' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'WITHDRAWAL', N'2' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'PURCHASE', N'3' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'RELOAD', N'4' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'BONUS', N'5' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'REFUND', N'6' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'RAKE', N'7' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'COUPON', N'8' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'POOLPRIZES', N'9' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'POOLENTFEES', N'10' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'POOLBUYIN', N'11' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'DEALPRIZES', N'12' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'DEALENTFEES', N'13' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'DEALBUYIN', N'14' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MTTPRIZES', N'15' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MTTENTFEES', N'16' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MTTBUYIN', N'17' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MANUALTRANSFER', N'18' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'POOLRAKE', N'19' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'DEALSRAKE', N'20' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MTTRAKE', N'21' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'TestAccountCredit', N'22' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'Fraudaccountreversal', N'23' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'BirthdayBonus', N'24' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'VIPBonus', N'25' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'SupportBonus', N'26' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'DisconnectRefund', N'27' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'Promotions', N'28' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'ProcessingFailure', N'29' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'PGTransfer', N'30' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MTTBUYINWITHDRAWAL', N'31' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MTTENTFEESWITHDRAWAL', N'32' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MTTBUYINREFUND', N'33' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MTTENTFEESREFUND', N'34' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'TDS', N'35' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'BONUSREVERSAL', N'36' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'FRIENDREFERRALBONUS', N'37' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'GAMECONTRIBUTION', N'38' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'RetrospectiveBonus', N'39' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'TWENTYONECARDFEES', N'40' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'TWENTYONECARDRAKE', N'41' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'TWENTYONECARDPRIZES', N'42' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'SURPRISEBONUS', N'43' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'GIFTPURCHASE', N'44' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MTTREJOINFEE', N'45' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'OTPBONUSTRANSFER', N'46' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'EXTRAINSTANTCASHBACKBONUS', N'47' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'GIFTPURCHASEFAILURE', N'48' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'ADDRVERFICATIONBONUS', N'49' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'INVITEEREGISTRATIONREFERRALBONUS', N'50' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'GAMECREDITBONUS', N'51' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'RAFBONUS', N'52' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'TOURNAMENTREFUNDBONUS', N'53' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'INACTIVEBONUS', N'54' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'BALANCETRANSFER', N'55' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'PG_TRANSFER_REFUND', N'56' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'TICKET_REDEEMED', N'57' );

			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'TENCARDRAKE', N'58' );
			
			INSERT INTO dbo.WithdrawalStatusTypes( Status, [Value] )
			VALUES( N'PENDING', N'0' );

			INSERT INTO dbo.WithdrawalStatusTypes( Status, [Value] )
			VALUES( N'DENIED', N'1' );

			INSERT INTO dbo.WithdrawalStatusTypes( Status, [Value] )
			VALUES( N'FULFILLED', N'2' );

			INSERT INTO dbo.WithdrawalStatusTypes( Status, [Value] )
			VALUES( N'INPROGRESS', N'3' );

			INSERT INTO dbo.WithdrawalStatusTypes( Status, [Value] )
			VALUES( N'CANCELLED_BY_USER', N'4' );

			INSERT INTO dbo.WithdrawalStatusTypes( Status, [Value] )
			VALUES( N'UNDER_VERIFICATION', N'5' );

			INSERT INTO dbo.WithdrawalStatusTypes( Status, [Value] )
			VALUES( N'CLEAN', N'6' );

			INSERT INTO dbo.WithdrawalStatusTypes( Status, [Value] )
			VALUES( N'FRAUD', N'7' );

			INSERT INTO dbo.WithdrawalStatusTypes( Status, [Value] )
			VALUES( N'NONE', N'8' );

			INSERT INTO dbo.WithdrawalStatusTypes( Status, [Value] )
			VALUES( N'PROCESSED_TO_BANK', N'9' );

			INSERT INTO WithdrawalStatusTypes
			VALUES( 'SUSPICIOUS', 10 );

			INSERT INTO WithdrawalStatusTypes
			VALUES( 'DEP_WID', 11 );

			INSERT INTO WithdrawalStatusTypes
			VALUES( 'DETAILS_MISMATCH', 12 );
		</sql>
	</changeSet>

	<changeSet id="jwr-correct-withdrawal-status-enums" author="rohan">
  		<comment>Correct enum values</comment>
  	<sql>
			delete from WithdrawalStatusTypes;
			INSERT INTO WithdrawalStatusTypes VALUES ('Pending', 0);
			INSERT INTO WithdrawalStatusTypes VALUES ('Denied', 1);
			INSERT INTO WithdrawalStatusTypes VALUES ('Fulfilled', 2);
			INSERT INTO WithdrawalStatusTypes VALUES ('In Progress', 3);
			INSERT INTO WithdrawalStatusTypes VALUES ('Cancelled by User', 4);
			INSERT INTO WithdrawalStatusTypes VALUES ('Under Verification', 5);
			INSERT INTO WithdrawalStatusTypes VALUES ('Clean', 6);
			INSERT INTO WithdrawalStatusTypes VALUES ('Fraud', 7);
			INSERT INTO WithdrawalStatusTypes VALUES ('None', 8);
			INSERT INTO WithdrawalStatusTypes VALUES ('Processed to Bank', 9);
			INSERT INTO WithdrawalStatusTypes VALUES ('Suspicious', 10);
			INSERT INTO WithdrawalStatusTypes VALUES ('Dep-Wid', 11);
			INSERT INTO WithdrawalStatusTypes VALUES ('Details Mismatch', 12);
  	</sql>
  	</changeSet>

  	<changeSet id="jwr-add-addressprooftypes-enum-to-db" author="rohan">
  	<comment>add addressprooftypes enum to db</comment>
  	<sql>
		IF OBJECT_ID('dbo.addressProofTypes') IS NULL -- Check if Table Exists
		 EXEC(N' CREATE TABLE dbo.addressProofTypes
			 (Status  VARCHAR(50) NOT NULL,
			 [Value] INT NOT NULL
		  );
		  ')
		ALTER TABLE addressProofTypes ADD PRIMARY KEY([value]);
		INSERT INTO addressProofTypes VALUES ('Aadhar Card', 0);
		INSERT INTO addressProofTypes VALUES ('Ration Card',1);
		INSERT INTO addressProofTypes VALUES ('Passport',2);
		INSERT INTO addressProofTypes VALUES ('VoterId',3);
		INSERT INTO addressProofTypes VALUES ('Bank statements', 4 );
		INSERT INTO addressProofTypes VALUES ('N/A', 5 );
		
  	</sql>
  	</changeSet>


	<changeSet id="jwr-db-vip-cfg" author="Nilesh">
    	<comment>Setting VIP config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vip', 'vip.starthour', '5', 1, 'number:0:24:1', 'Vip Scheduler Start Hour. Takes values from 0 to 24')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vip', 'vip.repeatinterval', '86400000', 1, 'number:1:86400000:1', 'Repeat Interval for the scheduled task')
    	</sql>
    </changeSet>


	<changeSet id="jwr-db-bot-config2" author="Nilesh">
		<comment>insert botconfig for matching time</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('bots', 'bots.matchingtime', 2000, 1, 'number:500:10000:500', 'Time taken for  bot to be matched to a lone player. Takes value from 500ms to 10000ms')
		</sql>
	</changeSet>
	<!-- changeSet id="jwr-db-modify-kycdetails-view" author="Rohan">
		<comment>Modify KYC Details view to get SocialNetwork of the user in the view result</comment>
		<sqlFile path="views/KYCDetails.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
   </changeSet-->

   	<changeSet id="jwr-db-CMSMLogs-publisher-cfg" author="amit">
     	<comment>Setting CMSMLogs Publsiher config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'enablecmsmlogging', 'false', 1, 'bool', 'Enable/Disable CM/SM Logging')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'pubsub.model', 'eventhub', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'pubsub.publisher.protocol', 'AMQP', 1, 'text', 'network protocol for publishing events')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'pubsub.publisher.sharedaccesspolicy', '', 1, 'text', 'Secured shared access policy name for publisher')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'pubsub.publisher.sharedaccesskey', '', 1, 'text', 'Secured shared access key for publsiher')
     	    </sql>
     </changeSet>

     <changeSet id="jwr-db-CMSMLogs-main-cfg" author="amit">
     	<comment>Setting CMSMLogs Main Server config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'ms.cm.message.types', '', 1, 'text', 'list of main server cm msg types to be published')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'ms.sm.message.types', '', 1, 'text', 'list of main server sm msg types to be published')
     	</sql>
     </changeSet>


	<changeSet id="leaderboard-pro-data-column" author="nilesh">
     	<comment>Add column isProData to LeaderboardPromotion</comment>
     	<sql>
     	    alter table leaderboardPromotion add isProData bit NOT NULL DEFAULT 0;
     	</sql>
	</changeSet>

    <changeSet id="jwr-db-Alter-Index-in-Game-Stats-Table" author="Nidhi">
        <sql>
            IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.GameStats') AND NAME ='IX_GameStats')
            DROP INDEX IX_GameStats ON dbo.GameStats;
            Create NonClustered Index IX_GameStats On GameStats
            (userId Asc, gameid Asc, [dateCreated] Asc) INCLUDE(winnings)
        </sql>
    </changeSet>

    <changeSet id="Alter-Index-in-Game-Stats-Table-start-time" author="Nidhi">
        <sql>
            IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.GameStats') AND NAME ='IX_GameStats')
            DROP INDEX IX_GameStats ON dbo.GameStats;
            Create NonClustered Index IX_GameStats On GameStats
            (userId Asc, gameid Asc,startTime Asc,[dateCreated] Asc) INCLUDE(winnings)
        </sql>
    </changeSet>

    <changeSet id="Alter-Column-in-Currency-Transfer-Requests-db" author="Sonal">
      <comment>Add a Column BatchID in the Table CurrencyTransferRequests if The Column Doesn't Exist</comment>
        <sql>
            IF EXISTS(SELECT 1 FROM sys.Tables WHERE NAME = N'CurrencyTransferRequests' AND TYPE = N'U')
            BEGIN
                IF COL_LENGTH('CurrencyTransferRequests', 'BatchID') IS NULL
                BEGIN
                ALTER TABLE CurrencyTransferRequests ADD BatchID VARCHAR(100)
                ALTER TABLE CurrencyTransferRequests ADD DEFAULT ('-1') FOR BatchID
                END
            END
        </sql>
    </changeSet>
	<changeSet id="Alter-Column-in-Currency-Transfer-Requests-table-Balancetype" author="rohan">
      <comment>Add a Column Balance Type in the Table CurrencyTransferRequests if The Column Doesn't Exist</comment>
        <sql>
            IF EXISTS(SELECT 1 FROM sys.Tables WHERE NAME = N'CurrencyTransferRequests' AND TYPE = N'U')
            BEGIN
                IF COL_LENGTH('CurrencyTransferRequests', 'BalanceType') IS NULL
                BEGIN
					ALTER TABLE CurrencyTransferRequests ADD BalanceType int not null DEFAULT ((0)) 
                END
            END
        </sql>
    </changeSet>
    <changeSet id="Add-Column-in-Currency-Transfer-Requests-db" author="Rohan">
      <comment>Add a Columns in the Table CurrencyTransferRequests if The Column Doesn't Exist</comment>
        <sql>
			IF EXISTS
			(
			    SELECT 1
			    FROM sys.Tables
			    WHERE NAME = N'CurrencyTransferRequests'
			          AND TYPE = N'U'
			)
			    BEGIN
				   IF COL_LENGTH('CurrencyTransferRequests', 'TCErrorCode') IS NULL
			            BEGIN
			                ALTER TABLE CurrencyTransferRequests
			                ADD TCErrorCode int default(-1)
			            END
				   IF COL_LENGTH('CurrencyTransferRequests', 'MCErrorCode') IS NULL
			            BEGIN
			                ALTER TABLE CurrencyTransferRequests
			                ADD MCErrorCode int default(-1)
			            END
			  	   IF COL_LENGTH('CurrencyTransferRequests', 'isSuccess') IS NULL
			            BEGIN
			                ALTER TABLE CurrencyTransferRequests
						    ADD isSuccess bit default(0)
			            END
				   IF COL_LENGTH('CurrencyTransferRequests', 'transactionID') IS NULL
			            BEGIN
			                ALTER TABLE CurrencyTransferRequests
			                ADD transactionID int default(-1)
			            END
				   IF COL_LENGTH('CurrencyTransferRequests', 'retryCount') IS NULL
			            BEGIN
			                ALTER TABLE CurrencyTransferRequests
			                ADD retryCount int default(0)
			            END
		           IF COL_LENGTH('CurrencyTransferRequests', 'status') IS NULL
			            BEGIN
			                ALTER TABLE CurrencyTransferRequests
			                ADD status int default(0)
			            END
			    END
        </sql>
    </changeSet>

	<changeSet id="jwr-db-add-cfg-for-azure-search-service2" author="Rohan">
		<comment>insert azure search related keys for temp azure service</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.search.service.name2', 'gamelogssearchservice', 1, 'text', 'Name of Azure search service')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.search.index.name2', 'gamelogsindex', 1, 'text', 'Name of Azure search index')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.search.api.key2', '', 1, 'text', 'Azure search API key')
		</sql>
	</changeSet>
	<changeSet id="jwr-db-add-cfg-for-azure-search-service2-admmin-key" author="Rohan">
		<comment>insert azure search admin key 2</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.search.admin.key2', '', 1, 'text', 'Azure search Admin key 2')
		</sql>
	</changeSet>
	<changeSet id="jwr-db-add-Telangana-Table" author="Rohan">
		<comment>Add Telangana Table</comment>
		<sql>
			IF OBJECT_ID('dbo.userCityTelanganaRegisterAfter17') IS NULL -- Check if Table Exists
    			EXEC (N' CREATE TABLE [dbo].[userCityTelanganaRegisterAfter17]
					(
					 [userID]             [INT] NOT NULL,
					 [City]               [VARCHAR](50) NULL,
					 [StateName]          [VARCHAR](100) NOT NULL,
					 [PIN]                [VARCHAR](10) NULL,
					 [registerDate]       [DATETIME] NOT NULL,
					 [lastCashGamePlayed] [DATETIME] NULL,
					 [lastOnlineTime]     [DATETIME] NULL,
					 [lastLoginDate]      [DATETIME] NULL,
					 [userType]           [VARCHAR](8) NULL,
					 [mailSent]           [INT] NOT NULL
				   )
			');
		</sql>
	</changeSet>
	<changeSet id="jwr-db-add-whitelistedUsers-Table" author="Rohan">
		<comment>Add whitelistedUsers Table</comment>
		<sql>
			IF OBJECT_ID('dbo.whitelistedUsers') IS NULL -- Check if Table Exists
		    	EXEC (N'
					  CREATE TABLE whitelistedUsers (
					  id INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
					  userID int not null,
					  addedDate DATETIME not null,
					  disabledDate DATETIME null,
					  enabled  bit not null
			   	)');
		</sql>
	</changeSet>
	<changeSet id="jwr-db-add-geolocationSettings-Table" author="Rohan">
		<comment>Add geolocationSettings Table</comment>
		<sql>
			IF OBJECT_ID('dbo.geolocationSettings') IS NULL -- Check if Table Exists
		    BEGIN
		        EXEC (N'
				  CREATE TABLE geolocationSettings (
				  id INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
				  key_name varchar(200) not null,
				  value nvarchar(max) not null
			  	 )')
		        ALTER TABLE geolocationSettings
		        ADD UNIQUE(key_name)
		        INSERT INTO [dbo].[geolocationSettings]
		        ([key_name],
		         [value]
		        )
		        VALUES
		        ('geolocation',
		         '1'
		        )
		    END;
		</sql>
	</changeSet>

	 <changeSet id="Add-Row-Id-Column-in-Currency-Transfer-Requests-db" author="Rohan">
      <comment>Add a Column RowID in the Table CurrencyTransferRequests if The Column Doesn't Exist</comment>
        <sql>
            IF EXISTS(SELECT 1 FROM sys.Tables WHERE NAME = N'CurrencyTransferRequests' AND TYPE = N'U')
            BEGIN
                IF COL_LENGTH('CurrencyTransferRequests', 'RowID') IS NULL
                BEGIN
                ALTER TABLE CurrencyTransferRequests ADD RowID VARCHAR(100)
                ALTER TABLE CurrencyTransferRequests ADD DEFAULT ('-1') FOR RowID
                END
            END
        </sql>
    </changeSet>


	<changeSet id="jwr-cfg-leaderboard-refresh" author="Nilesh">
		<comment>Configs to set leaderboard update/refresh intervals</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboard', 'update.interval.minutes', '15', 1, 'number:1:1000:1', 'Interval to update LeaderboardSummary in DB')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboard', 'refresh.interval.minutes', '15', 1, 'number:1:1000:1', 'Interval to send update to web clients for Leaderboard result')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboard', 'refresh.initialdelay.seconds', '60', 1, 'number:1:10000:1', 'Initial Delay to send update to web clients for Leaderboard result')
		</sql>
	</changeSet>

	 <changeSet id="jwr-db-Add-VIP-Team-calling-Email-in-cfg-table" author="Nidhi">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'vipCallingTeamEmail', 'vipcalling@jungleegames.com', 1, 'text', 'Junglee rummy VIP Calling Team Email')
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-gamelog-publisher-cfg" author="amit">
         <comment>Setting gamelog Publsiher config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogpublisher', 'enablegamelogs', 'true', 1, 'bool', 'Enable/Disable game Logs')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogpublisher', 'pubsub.model', 'eventhub', 1, 'text', 'Publisher-Subscriber model to be used')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogpublisher', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogpublisher', 'pubsub.publisher.protocol', 'REST', 1, 'text', 'network protocol for publishing events')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogpublisher', 'pubsub.publisher.sharedaccesspolicy', '', 1, 'text', 'Secured shared access policy name for publisher')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogpublisher', 'pubsub.publisher.sharedaccesskey', '', 1, 'text', 'Secured shared access key for publsiher')
             </sql>
     </changeSet>

     <changeSet id="jwr-db-CMSMLogs-game-cfg" author="amit">
         <comment>Setting CMSMLogs Game Server config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'gs.cm.message.types', '', 1, 'text', 'list of game server cm msg types to be published')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cmsmlogpublisher', 'gs.sm.message.types', '', 1, 'text', 'list of game server sm msg types to be published')
         </sql>
     </changeSet>

   <changeSet id="jwr-db-add-cfg-for-azure-documentdb" author="Nidhi">
        <comment>insert azure document db values</comment>
        <sql>
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.documentdb.account', 'jrdevdocumentdb', 1, 'text', 'Document db acccount Name')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.documentdb.database.id', 'GamelogsDb', 1, 'text', 'Document db database id')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.documentdb.collection.name', 'GamelogsCollection', 1, 'text', 'Document db collection name')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.documentdb.master.key', '', 1, 'text', 'Document db master key')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'documentDbLogging', 'false', 1, 'bool', 'To enable game server to log to documentDB')
        </sql>
    </changeSet>
    <changeSet id="jwr-db-gamelog-subscriber-cfg" author="amit">
     	<comment>Setting gamelog Subscriber config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'enablesubscription', 'true', 1, 'bool', 'Enable/Disable game Logs subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'pubsub.model', 'eventhub', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'pubsub.subscriber.storageaccount', '', 1, 'text', 'storage account name')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'pubsub.subscriber.storageaccountkey', '', 1, 'text', 'storage account key')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'pubsub.subscriber.sharedaccesspolicy', '', 1, 'text', 'Secured shared access policy name for subscriber')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'pubsub.subscriber.sharedaccesskey', '', 1, 'text', 'Secured shared access key for subscriber')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamelogsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	</sql>
     </changeSet>

    <changeSet id="jwr-db-redis-server-bonusaward-messagekey" author="rohan">
		<comment>insert redis queue message key for bonus award</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('redis', 'redis.bonusaward.messageKey', '', 1, 'text', 'Redis Queue Message key for Bonus Award')
		</sql>
    </changeSet>


    <changeSet id="jwr-db-gameTimer-no-new-deal-time-for-tournament" author="Nilesh">
		<comment>insert percentageReductionMultiplier for rapid gameTimer</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-timer', 'gameTimerConfig.tournamentNoNewDealTime', 60, 1, 'number:0:180:1', 'No new deal will start if remaining roundTime is less then given value in second(s) here')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-bannerConfiguration-alter" author="Kunal">
		<comment>Alter table banner configuration add new column CustomUrl and isCustomUrl</comment>
		<sql>
			ALTER TABLE BannerConfiguration ADD 
			[CustomUrl] [varchar](255) NULL, 
			[isCustomUrl] [bit] NOT NULL DEFAULT ((0));
		</sql>
	</changeSet>

	<changeSet id="jwr-db-Add-new-columns-to-promocodes" author="ShashankSingh">
    	<comment>add new columns to promocodes table</comment>
    	<sql>
		IF COL_LENGTH('dbo.Promocodes', 'platform') IS NULL
		        ALTER TABLE Promocodes ADD [platform] varchar(15) not null default(('All'));
		        
		IF COL_LENGTH('dbo.Promocodes', 'mobileDeviceType') IS NULL
		        ALTER TABLE Promocodes ADD [mobileDeviceType] varchar(150) null;
		        
		IF COL_LENGTH('dbo.Promocodes', 'apkVersion') IS NULL
		        ALTER TABLE Promocodes ADD [apkVersion] varchar(50) null;
		        
		IF COL_LENGTH('dbo.Promocodes', 'userSegment') IS NULL
		        ALTER TABLE Promocodes ADD [userSegment] int not null default((-1));
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-lobby-switch-new-configs" author="Mirek">
		<comment>Adds cfg entries for new configs for lobby switch</comment>
		<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.all.enabled','true','0','bool', 'Enables/Disables LobbySwitch for ALL players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.all.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to ALL players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.old-free.enabled','true','0','bool', 'Enables/Disables LobbySwitch for OLD FREE players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.old-free.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to OLD FREE players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.new-free.enabled','true','0','bool', 'Enables/Disables LobbySwitch for NEW FREE players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.new-free.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to NEW FREE players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.old-cash.enabled','true','0','bool', 'Enables/Disables LobbySwitch for OLD CASH players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.old-cash.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to OLD CASH players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.new-cash.enabled','true','0','bool', 'Enables/Disables LobbySwitch for NEW CASH players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.new-cash.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to NEW CASH players');


			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-1.enabled','true','0','bool', 'Enables/Disables LobbySwitch for VIP-1 players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-1.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to VIP-1 players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-2.enabled','true','0','bool', 'Enables/Disables LobbySwitch for VIP-2 players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-2.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to VIP-2 players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-3.enabled','true','0','bool', 'Enables/Disables LobbySwitch for VIP-3 players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-3.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to VIP-3 players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-4.enabled','true','0','bool', 'Enables/Disables LobbySwitch for VIP-4 players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-4.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to VIP-4 players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-5.enabled','true','0','bool', 'Enables/Disables LobbySwitch for VIP-5 players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-5.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to VIP-5 players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-6.enabled','true','0','bool', 'Enables/Disables LobbySwitch for VIP-6 players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-6.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to VIP-6 players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-7.enabled','true','0','bool', 'Enables/Disables LobbySwitch for VIP-7 players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-7.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to VIP-7 players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-8.enabled','true','0','bool', 'Enables/Disables LobbySwitch for VIP-8 players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-8.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to VIP-8 players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-9.enabled','true','0','bool', 'Enables/Disables LobbySwitch for VIP-9 players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-9.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to VIP-9 players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-10.enabled','true','0','bool', 'Enables/Disables LobbySwitch for VIP-10 players');
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','cat.vip-10.default-new','true','0','bool', 'If LobbySwitch is disabled then true value means that new lobby will be shown to VIP-10 players');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyswitch-new','newuser.cutoffdate','01-01-2020 00:00:00', '0', 'text', 'Users that registered after this date will be treated as new for the needs of new-old lobby display');

		</sql>
	</changeSet>

	<changeSet id="jwr-db-lobby-switch-old-deprecate" author="Mirek">
		<sql>
			UPDATE [cfg] SET [description] = 'Not used since 1.1' WHERE [id] = 'lobbyswitch';
			UPDATE [cfg] SET [description] = 'Not used since 1.1' WHERE [id] = 'registration' AND [key] = 'newuser.cutoffdate';
		</sql>
	</changeSet>
	<changeSet id="jwr-db-create-H5-Visibility-Table" author="rohan">
		<sql>
			IF OBJECT_ID('dbo.H5TableVisibilityOnWeb') IS NULL -- Check if Table Exists
			    BEGIN
			        EXEC (N'
					    CREATE TABLE H5TableVisibilityOnWeb
					    (  [id]  INT NOT NULL IDENTITY(1, 1) PRIMARY KEY,
						   [key] VARCHAR(20) NOT NULL default(0) UNIQUE,
						   [all] BIT NOT NULL default(0),
						   [onflashdetectionfailed] BIT NOT NULL default(0)
					    )')
			    END;
		</sql>
	</changeSet>

	<changeSet id="jwr-db-deposittransaction-3" author="ShashankSingh">
        <comment>Adding column userDeviceName for promocodes</comment>
        <sql>
        	ALTER TABLE [dbo].[DepositTransactions]
			ADD userDeviceName varchar(50);
        </sql>
    </changeSet>

    <changeSet id="jwr-db-deposittransaction-4" author="ShashankSingh">
        <comment>Adding column apkVersion for promocodes</comment>
        <sql>
        	ALTER TABLE [dbo].[DepositTransactions]
			ADD apkVersion varchar(50);
        </sql>
    </changeSet>

	<changeSet id="jwr-db-Add-new-columns-to-coupons" author="ShashankSingh">
    	<comment>add new columns to Coupons table</comment>
    	<sql>
		IF COL_LENGTH('dbo.Coupons', 'platform') IS NULL
		        ALTER TABLE Coupons ADD [platform] varchar(15) not null default(('All'));
		        
		IF COL_LENGTH('dbo.Coupons', 'mobileDeviceType') IS NULL
		        ALTER TABLE Coupons ADD [mobileDeviceType] varchar(150) null;
		        
		IF COL_LENGTH('dbo.Coupons', 'apkVersion') IS NULL
		        ALTER TABLE Coupons ADD [apkVersion] varchar(50) null;
		        
		IF COL_LENGTH('dbo.Coupons', 'userSegment') IS NULL
		        ALTER TABLE Coupons ADD [userSegment] int not null default((-1));
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-userloginlog-extraparams" author="Nilesh">
		<sql>
			alter table userLoginLog add userAgentType varchar(255), osName varchar(255), osVersion varchar(255), 
			browserName varchar(255), browserVersion varchar(255), engineName varchar(255), engineVersion varchar(255),
			appVersion varchar(255), deviceName varchar(255), userAgent varchar(255);
		</sql>
	</changeSet>

	<changeSet id="jwr-db-userloginlog-extraparams2" author="Nilesh">
		<sql>
			alter table userLoginLog add imei bigint;
		</sql>
	</changeSet>

  <changeSet id="Add-Column-in-dump_daily_bonus_rake_deposit" author="shashanksharda">
      <comment>Add a Columns in the Table dump_daily_rake_bonus if The Column Doesn't Exist</comment>
        <sql>
			IF EXISTS
			(
			    SELECT 1
			    FROM sys.Tables
			    WHERE NAME = N'DUMP_DAILY_BONUS_RAKE_DEPOSIT'
			          AND TYPE = N'U'
			)
			    BEGIN       
				   IF COL_LENGTH('DUMP_DAILY_BONUS_RAKE_DEPOSIT', 'COUPONS') IS NULL
			            BEGIN
			                ALTER TABLE DUMP_DAILY_BONUS_RAKE_DEPOSIT
			                ADD TCErrorCode money               
			            END
				   IF COL_LENGTH('DUMP_DAILY_BONUS_RAKE_DEPOSIT', 'BONSREVERSALS') IS NULL
			            BEGIN
			                ALTER TABLE DUMP_DAILY_BONUS_RAKE_DEPOSIT
			                ADD BONSREVERSALS money                  
			            END  
			    END
			</sql>
			</changeSet>            
	<changeSet id="Add-Column-in-dump_daily_bonus_rake_deposit_2" author="shashanksharda">
      <comment>Add a Columns in the Table dump_daily_rake_bonus if The Column Doesn't Exist</comment>
        <sql>
			IF EXISTS
			(
			    SELECT 1
			    FROM sys.Tables
			    WHERE NAME = N'DUMP_DAILY_BONUS_RAKE_DEPOSIT'
			          AND TYPE = N'U'
			)
			    BEGIN       
				   IF COL_LENGTH('DUMP_DAILY_BONUS_RAKE_DEPOSIT', 'COUPONS') IS NULL
			            BEGIN
			                ALTER TABLE DUMP_DAILY_BONUS_RAKE_DEPOSIT
			                ADD COUPONS money               
			            END
			       IF COL_LENGTH('DUMP_DAILY_BONUS_RAKE_DEPOSIT', 'BONUSREVERSALS') IS NULL
			            BEGIN
			                ALTER TABLE DUMP_DAILY_BONUS_RAKE_DEPOSIT
			                ADD BONUSREVERSALS money               
			            END
				   IF COL_LENGTH('DUMP_DAILY_BONUS_RAKE_DEPOSIT', 'BONSREVERSALS') IS NOT NULL
			            BEGIN
			                ALTER TABLE DUMP_DAILY_BONUS_RAKE_DEPOSIT
			                DROP COLUMN BONSREVERSALS                   
			            END  
				   IF COL_LENGTH('DUMP_DAILY_BONUS_RAKE_DEPOSIT', 'TCErrorCode') IS NOT NULL
			            BEGIN
			                ALTER TABLE DUMP_DAILY_BONUS_RAKE_DEPOSIT
			                DROP COLUMN TCErrorCode                   
			            END  
			    END
			</sql>
			</changeSet> 
			      
    <changeSet id ="jwr-db-Create-SpecialUserTables-Table" author="Sonal">
    <comment>Creating SpecialUserTable for Special Users</comment>
        <sql>
            IF OBJECT_ID(N'dbo.SpecialUserTables') IS NULL -- Check if Table Exists
	        BEGIN
		         CREATE TABLE SpecialUserTables(
		         UserID INT,
		         TableConfiguration INT)
	        END
        </sql>
     </changeSet>
          
	<changeSet id="jwr-db-table-configurations-switch" author="Mirek">
		<sql>
			ALTER TABLE [dbo].[TableConfigurations] ADD SwitchOnDropEnabled [bit] NOT NULL DEFAULT ((0));
				ALTER TABLE [dbo].[TableConfigurations] ADD SwitchOnWaitEnabled [bit] NOT NULL DEFAULT ((0));
		</sql>
	</changeSet>

	<changeSet id="jwr-db-reports-cfg" author="Rohan">
    	<comment>Setting Amount of rows to return from admin</comment>
    	<sql>
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('reports', 'reports.analytics.rows.limit', '1000', 1, 'number:1:10000:1', 'Row limit to fetch from analytics reports')
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('reports', 'reports.operations.rows.limit', '1000', 1, 'number:1:10000:1', 'Row limit to fetch from operations reports')
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-add-cfg-for-documentdb-collectionname2" author="Nidhi">
        <comment>insert second document db collection name</comment>
        <sql>
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('azure', 'azure.documentdb.collection.name2', 'GamelogsCollectionTwo', 1, 'text', 'Second Document db collection name')
        </sql>
    </changeSet>

    <changeSet id ="jwr-db-Create-missing-columns-in-loggamesevents-tables-for-extended-logging" author="rohan">
    <comment>add extra columns in loggamesevents table for in game logs archived report for populating later </comment>
        <sql>
            IF COL_LENGTH('[dbo].[LogGameEvents]', 'device_name') IS NULL
			    ALTER TABLE [dbo].[LogGameEvents]
			    ADD device_name VARCHAR(50);
			IF COL_LENGTH('[dbo].[LogGameEvents]', 'device_manufracturer') IS NULL
			    ALTER TABLE [dbo].[LogGameEvents]
			    ADD device_manufracturer VARCHAR(50);
			IF COL_LENGTH('[dbo].[LogGameEvents]', 'os_name') IS NULL
			    ALTER TABLE [dbo].[LogGameEvents]
			    ADD os_name VARCHAR(40);
			IF COL_LENGTH('[dbo].[LogGameEvents]', 'os_version') IS NULL
			    ALTER TABLE [dbo].[LogGameEvents]
			    ADD os_version VARCHAR(40);
			IF COL_LENGTH('[dbo].[LogGameEvents]', 'device_name') IS NULL
			    ALTER TABLE [dbo].[LogGameEvents]
			    ADD os_version VARCHAR(40);
			IF COL_LENGTH('[dbo].[LogGameEvents]', 'browser_name') IS NULL
			    ALTER TABLE [dbo].[LogGameEvents]
			    ADD browser_name VARCHAR(40);
			IF COL_LENGTH('[dbo].[LogGameEvents]', 'browser_version') IS NULL
			    ALTER TABLE [dbo].[LogGameEvents]
			    ADD browser_version VARCHAR(40);
			IF COL_LENGTH('[dbo].[LogGameEvents]', 'apk_version') IS NULL
			    ALTER TABLE [dbo].[LogGameEvents]
			    ADD apk_version VARCHAR(40);
			IF COL_LENGTH('[dbo].[LogGameEvents]', 'imei_number') IS NULL
			    ALTER TABLE [dbo].[LogGameEvents]
			    ADD imei_number VARCHAR(40);
        </sql>
     </changeSet>

     <changeSet id="jwr-db-env-config-local-update" author="Mirek">
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('environment', 'environment.localscriptupdate', 'false', 1, 'bool', 'If true then update manager will run update using local script instead of azure webhook.')
    	</sql>
     </changeSet>
     <changeSet id="jwr-db-useractivitylog-GEOInfo" author="Kunal">
		<sql>
			ALTER TABLE [dbo].[UserActivityLog] 
			ADD [latitude] [varchar] (50) NULL,
				[longitude] [varchar] (50) NULL,
				[city] [varchar] (100) NULL,
				[geoname_id] [integer] NULL;
		</sql>
	</changeSet>
     <changeSet id="jwr-alter-gamelog-subscriber-cfg" author="Nidhi">
     	<comment>Setting gamelog Subscriber config</comment>
     	<sql>
     	     update cfg set type = 'number:2:32:2' where [Key] = 'pubsub.partitions.count' and Id ='gamelogsubscriber';
     	</sql>
     </changeSet>

	<changeSet id="jwr-db-mongo-db-connection" author="rohan">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mongo', 'mongo.host.name', 'localhost', 1, 'text', 'mongo host server ip')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mongo', 'mongo.host.port', 27017, 1, 'number:0:60000:20', 'mongo host server port')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mongo', 'mongo.connection.ssl', 'false', 1, 'bool', 'enable disable ssl for mongo')
		</sql>
	</changeSet>
	<changeSet id="jwr-db-user-flagging-params" author="rohan">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggeduserparams', 'same.user.drop.threshold.ratio', 50, 1, 'number:0:100:1', 'Same User Drop Threshold Ratio')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggeduserparams', 'same.user.drop.offset', 100, 1, 'number:1:1000:1', 'Same User Drop Offset')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggeduserparams', 'all.user.game.drop.offset', 100, 1, 'number:1:10000:1', 'all user game drop offset')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggeduserparams', 'bad.declare.loss.threshold', 5, 1, 'number:1:1000:1', 'bad declare loss theshold')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggeduserparams', 'bad.declare.win.threshold', 5, 1, 'number:1:1000:1', 'bad declare win theshold')
		</sql>
	</changeSet>
	<changeSet id="jwr-db-user-flagging-params-add" author="rohan">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggeduserparams', 'mongo.database.prefix', 'flagged_users_database', 1, 'text', 'flagged_users_database')
		</sql>
	</changeSet>
	<changeSet id="jwr-db-flaggeduser-publisher-cfg" author="rohan">
		<comment>Setting User Flagging Publsiher config</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventpublisher', 'enableflaggeduserpublisher', 'false', 1, 'bool', 'Enable/Disable Flagged User Publisher ')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventpublisher', 'pubsub.model', 'eventhub', 1, 'text', 'Publisher-Subscriber model to be used')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventpublisher', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventpublisher', 'pubsub.publisher.protocol', 'REST', 1, 'text', 'network protocol for publishing events')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventpublisher', 'pubsub.publisher.sharedaccesspolicy', '', 1, 'text', 'Secured shared access policy name for publisher')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventpublisher', 'pubsub.publisher.sharedaccesskey', '', 1, 'text', 'Secured shared access key for publsiher')
		</sql>
	</changeSet>
	<changeSet id="jwr-db-flaggeduser-subscriber-cfg" author="rohan">
		<comment>Setting Flagged User Subscriber config</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'enableflaggedusersubscription', 'false', 1, 'bool', 'Enable/Disable Flagged User subscription')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'pubsub.model', 'eventhub', 1, 'text', 'Publisher-Subscriber model to be used')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'pubsub.subscriber.storageaccount', '', 1, 'text', 'storage account name')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'pubsub.subscriber.storageaccountkey', '', 1, 'text', 'storage account key')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'pubsub.subscriber.sharedaccesspolicy', '', 1, 'text', 'Secured shared access policy name for subscriber')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'pubsub.subscriber.sharedaccesskey', '', 1, 'text', 'Secured shared access key for subscriber')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flaggedusereventsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
		</sql>
	</changeSet>

     <changeSet id="add-handType-Table" author="Rohan">
     	<comment>Add Hand Type Table to DB</comment>
        <sql>
         IF OBJECT_ID('dbo.HandTypes') IS NULL
             BEGIN
             CREATE TABLE [dbo].[HandTypes](
				[Type] [nvarchar](50) NOT NULL,
				[Value] [int] NOT NULL,
				CONSTRAINT [PK_HandTypes] PRIMARY KEY CLUSTERED
					(
						[Value] ASC
					)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			 )
			 INSERT [dbo].[HandTypes] ([Type], [Value]) VALUES (N'13 Cards', 0)
			 INSERT [dbo].[HandTypes] ([Type], [Value]) VALUES (N'21 Cards', 1)
			 INSERT [dbo].[HandTypes] ([Type], [Value]) VALUES (N'10 Cards', 2)
			 END
         </sql>
     </changeSet>
     
     <changeSet id="remove-old-gamevariants" author="Rohan" runOnChange="true">
     	<comment>Add Hand Type Table to DB</comment>
        <sql>
        	 DELETE from [dbo].[GameVariantTypes]
             INSERT [dbo].[GameVariantTypes] ([Type], [Value]) VALUES (N'Points', 0)
			 INSERT [dbo].[GameVariantTypes] ([Type], [Value]) VALUES (N'Pool', 1)
			 INSERT [dbo].[GameVariantTypes] ([Type], [Value]) VALUES (N'Deal', 2)
         </sql>
     </changeSet>
     
      <changeSet id="Adding new transaction types" author="Nidhi">
     	<comment>Add new transaction types to DB</comment>
        <sql>
        	  INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'AMOUNTLOSTINPOINTSGAME', 59)
              INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'AMOUNTWONINPOINTSGAME', 60)
         </sql>
     </changeSet>
     
     <changeSet id="jwr-db-gateway-savecard" author="AmitBansal" runOnChange="true">
     	<comment>Adding Column for enable/disable save card option</comment>
        <sql>
             IF OBJECT_ID('dbo.Gateway') IS NOT NULL
             BEGIN
 				ALTER TABLE [dbo].[Gateway]
 				ADD saveCardFlag bit NOT NULL DEFAULT(1)
 			END
         </sql>
     </changeSet>

     <changeSet id="dumpTables_db_table_creation" author="shashankSharda">
     <comment>add ing blank tables for dump table db</comment>
     	<sqlFile path="dump_tables.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
     </changeSet> 

      <changeSet id="jwr-users-depositLimit" author="Nilesh">
     	<comment>Adding Deposit Limit column for users</comment>
		<sql>
			ALTER TABLE [dbo].[Users] ADD
			[dailyDepositLimit] [money] NOT NULL DEFAULT ((0)),
			[monthlyDepositLimit] [money] NOT NULL DEFAULT ((0)),
			[dailyDepositLimitChangeTime] [datetime] ,
			[monthlyDepositLimitChangeTime] [datetime],
			[gracePeriodStartTime] [datetime]
		</sql>
     </changeSet>
     
     <changeSet id="jwr-depositLimitConfigs" author="Nilesh">
     	<comment>Adding Deposit Limit Configs to be changed from admin</comment>
		<sql>
			 create table AddCashLimitConfig
			([key] varchar(100) NOT NULL PRIMARY KEY,
			[value] varchar(100));
		</sql>
     </changeSet>
     
     <changeSet id="jwr-add-new-addresstype-idprooftype" author="Nidhi">
     	<comment>Adding new address and id proof types</comment>
		<sql>
			 INSERT [dbo].[AddressProofTypes] ([Status], [Value]) VALUES (N'ElectricityBill', 6)
			 INSERT [dbo].[AddressProofTypes] ([Status], [Value]) VALUES (N'TelephoneBill', 7)
			 INSERT [dbo].[IdProofTypes] ([Status], [Value]) VALUES (N'DrivingLicense', 5)
		</sql>
	</changeSet>
	
	  <changeSet id="jwr-correct-marketingPromotionWinnerTable" author="ROHAN" runOnChange="true">
		 <comment>correcting marketing promotion winners structure</comment>
		 <sql>
				ALTER TABLE MarketingPromotionWinners DROP CONSTRAINT [PromotionWinners];
				ALTER TABLE MarketingPromotionWinners ALTER COLUMN rankAllotedTime DATE NOT NULL;
				ALTER TABLE MarketingPromotionWinners
				ADD CONSTRAINT PromotionWinners PRIMARY KEY(promotionid, rankallotedtime, userid);			
		 </sql>
	 </changeSet>

	<changeSet id="jwr-db-alter-withdrawals-add-column" author="Kunal">
		<sql>
			ALTER TABLE Withdrawals ADD userDeviceType VARCHAR(50) NOT NULL DEFAULT('web');
		</sql>
	</changeSet>
     
     <changeSet id="jwr-db-discrepency-resolving-script" author="Mayank">
     	<comment>Long pending script, which should have been added long back, is now being done by me</comment>
     	<sql>
			IF OBJECT_ID('dbo.DuplicatePropertyUsers') IS NULL
			BEGIN
				CREATE TABLE [dbo].[DuplicatePropertyUsers](
					[userId] [int] NOT NULL,
					[username] [varchar](14) NOT NULL,
					[password] [char](70) NOT NULL,
					[email] [varchar](254) NOT NULL,
					[socialNetwork] [varchar](20) NULL,
					[lastLoginDate] [datetime] NULL,
					[hasDetailsUpdated] [bit] NOT NULL,
					[detailUpdatedDate] [datetime] NULL,
				PRIMARY KEY CLUSTERED 
				(
					[userId] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY]
			
				ALTER TABLE [dbo].[DuplicatePropertyUsers] ADD  DEFAULT ((0)) FOR [hasDetailsUpdated]
			END
			
			IF OBJECT_ID('dbo.IFSCInfo') IS NULL
			BEGIN
				CREATE TABLE [dbo].[IFSCInfo](
					[Id] [bigint] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
					[IFSCCode] [varchar](12) NULL,
					[Enabled] [bit] NULL,
					[StateId] [smallint] NULL,
					[DateCreated] [datetime] NULL,
					[DateUpdated] [datetime] NULL,
				 CONSTRAINT [PK__IFSCInfo__3214EC071A96DBBF] PRIMARY KEY CLUSTERED 
				(
					[Id] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY]
			
			END
			
			IF OBJECT_ID('dbo.oldGameStats') IS NULL
			BEGIN
				CREATE TABLE [dbo].[oldGameStats](
					[gameid] [bigint] NOT NULL,
					[userid] [int] NOT NULL,
					[tableinstanceid] [bigint] NOT NULL,
					[tableconfigid] [int] NOT NULL,
					[amountwon] [money] NULL,
					[starttime] [datetime] NULL,
					[endtime] [datetime] NULL,
					[platform] [varchar](150) NULL,
					[currencyType] [int] NOT NULL
				) ON [PRIMARY]
			
			END
     	</sql>
     </changeSet>
 
     <changeSet id="jwr-db-addCashConfigs" author="Nilesh">
     	<comment>Inserting addCashLimits for Responsile Gaming</comment>
		<sql>
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.NON VIP.daily', N'20000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.NON VIP.monthly', N'150000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.NON VIP.oneTime', N'5000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 1.daily', N'200000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 1.monthly', N'800000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 1.oneTime', N'40000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 2.daily', N'160000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 2.monthly', N'600000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 2.oneTime', N'40000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 3.daily', N'120000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 3.monthly', N'400000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 3.oneTime', N'40000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 4.daily', N'80000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 4.monthly', N'320000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 4.oneTime', N'20000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 5.daily', N'40000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 5.monthly', N'280000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 5.oneTime', N'10000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 6.daily', N'40000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 6.monthly', N'240000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'cat.VIP 6.oneTime', N'5000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'conf.depositLimit', N'50000')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'conf.depositRestriction', N'true')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'conf.graceDays', N'10')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'conf.newUserDate', N'13/09/2017')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'conf.restrictedHours', N'48')
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'conf.warningLimitPercentage', N'80')
		</sql>
	</changeSet>
     
      <changeSet id="jwr-Add-indexes-in-gamestats-table" author="Arjun">
     	<comment>Adding Column for enable/disable save card option</comment>
        <sql>
             IF NOT EXISTS (SELECT * FROM sys.indexes WHERE name = 'IDX_GameStats_winnings' AND object_id = OBJECT_ID('[dbo].[GameStats]'))
             BEGIN
             CREATE NONCLUSTERED INDEX [IDX_GameStats_winnings]
             ON [dbo].[GameStats] ([winnings])
             INCLUDE ([gameId], [startTime], [endTime], [userId])
             END

             IF NOT EXISTS (SELECT * FROM sys.indexes WHERE name = 'IDX_GameStats_gameId' AND object_id = OBJECT_ID('[dbo].[GameStats]'))
             BEGIN
             CREATE NONCLUSTERED INDEX [IDX_GameStats_gameId]
             ON [dbo].[GameStats] ([gameId])
             INCLUDE ([userId])
             END
             
         </sql>
     </changeSet>
     
     <changeSet id="jwr-10card-changes" author="Nilesh">
		<comment>add columns for tracking popup for 10 card points game</comment>
		<sql>
			alter table users add
			popupCount10Card int not null default((0));
		</sql>
	</changeSet>
  
    <changeSet id="jwr-db-tableconfigs-tctt-maxtables" author="Mirek">
      <comment>Adding tctTime and maxTablesCount columns to TableCOnfigurations</comment>
      <sql>
        ALTER TABLE [dbo].[TableConfigurations] ADD tctTime int not null default((5));
        ALTER TABLE [dbo].[TableConfigurations] ADD maxTablesCount int not null default((10000));
      </sql>
	</changeSet>
     
     <changeSet id="jwr-db-Add-apkVersions-in-cfg" author="Nidhi">
     <comment>Setting email bonus codes</comment>
     <sql>
      INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'apkVersions', '1.0,1.1,1.2,1.3,1.4', 1, 'text', 'Added APK versions, used in game logs report for filters')

     </sql>
    </changeSet>

       <changeSet id="jwr-users-maxDepositLimitPerUser" author="Nilesh">
     	<comment>Adding Max Deposit Limit column for each users</comment>
		<sql>
			ALTER TABLE [dbo].[Users] ADD
			[maxDailyDepositLimit] [money] NOT NULL DEFAULT ((0)),
			[maxMonthlyDepositLimit] [money] NOT NULL DEFAULT ((0))
		</sql>
     </changeSet>
     
    <changeSet id="add-UserClaims-Table" author="AmitB">
     	<comment>Add UserClaims Table to DB</comment>
        <sql>
         IF OBJECT_ID('dbo.UserClaims') IS NULL
             BEGIN
             CREATE TABLE [dbo].[UserClaims](
             	[id] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
				[timestamp] [datetime] NOT NULL DEFAULT (getdate()),
				[userID] [int] NOT NULL,
				[claimType] [varchar](25) NOT NULL,
				[claimValue] [varchar](128) NOT NULL,
				[claimCode] [varchar](128) NULL,
				[isActive] [bit] NOT NULL DEFAULT 0,
				 CONSTRAINT [PK_UserClaims] PRIMARY KEY CLUSTERED 
				(
					[id] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]        
			)
			 END
         </sql>
     </changeSet>
	 
     <changeSet id="add-UserAccountHistory-Table" author="AmitB">
        <comment>Add UserAccountHistory Table to DB</comment>
       <sql>
        IF OBJECT_ID('dbo.UserAccountHistory') IS NULL
            BEGIN
            CREATE TABLE [dbo].[UserAccountHistory](
                [id] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
                [userid] [int] NOT NULL,
                [changeType] [varchar](128) NOT NULL,
                [oldValue] [varchar](128) NULL,
                [newValue] [varchar](128) NULL,
                [changedBy] [varchar](128) NULL,
                [timestamp] [datetime] NOT NULL DEFAULT (getdate()),
                [recordDump][varchar](max) NULL,
                 CONSTRAINT [PK_UserAccountHistory] PRIMARY KEY CLUSTERED 
                (
                    [id] ASC
                )WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]        
            )

             CREATE NONCLUSTERED INDEX [IDX_UserAccountHistory_userid_timestamp]
		     ON [dbo].[UserAccountHistory] ([userid],[timestamp])
		     INCLUDE ([changeType], [oldValue], [newValue], [changedBy])
            END
    	</sql>
	</changeSet>
    <changeSet id="jwr-add-cfg-for-multiple-userId-params" author="Nidhi">
		<comment>Configs to update multiple UID params</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'namematch', '40', 1, 'number:0:200:1', 'Name match score')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'partialnamematch', '20', 1, 'number:0:200:1', 'Partial Name match score')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'dob', '20', 1, 'number:0:200:1', 'Date of birth match score')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'cookie.imei', '40', 1, 'number:0:200:1', 'Cookie/IMEI match score')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'username', '20', 1, 'number:0:200:1', 'Username match score')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'email', '10', 1, 'number:0:200:1', 'Email match score')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'ipaddress', '40', 1, 'number:0:200:1', 'IpAddress match score')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'password', '20', 1, 'number:0:200:1', 'Password match score')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'mobilenumber', '10', 1, 'number:0:200:1', 'Mobile number match score')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'partialstringpercentMatch', '60', 1, 'number:1:100:1', 'partial string percent match')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'cleanscore', '60', 1, 'number:1:100:1', 'Conisdered clean score')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('multipleuidparams', 'fraudscore', '80', 1, 'number:1:100:1', 'Conisdered fraud score')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-user-score-table" author="Nidhi">
		<comment>Configs to update multiple UID params</comment>
		<sql>
			IF OBJECT_ID('UserScore') IS NULL
			BEGIN
            CREATE TABLE UserScore
            (
              SNo bigint not null identity(1,1) primary key,
              UserID INT NOT NULL ,
              AssociatedUserId int not null,
              scoreUpdateTimestamp Datetime,    
              ScoreLevel VARCHAR(20),
              TotalScore INT,
              FullNameSCORE INT,
              PartialNameScore INT,
              UsernameScore INT,
              MachineScore INT,
              IMEIScore INT,
              IPScore INT,
              DOBScore INT,
              PasswordScore INT,
              MobileScore INT,
              EmailScore INT
            )
            END 
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-dumpuserFirstMachineId-table" author="Nidhi">
		<comment>Configs to update multiple UID params</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[DUMP_UserFirstMachineID]') AND type in (N'U'))
            BEGIN
             CREATE TABLE [dbo].[DUMP_UserFirstMachineID](
	         [ID] [bigint] IDENTITY(1,1) NOT NULL,
	         [userId] [bigint] NULL,
	         [machineId] [varchar](100) NULL,
	         [machineUID] [bigint] NULL,
	         [generatedDate] [datetime] NULL
	         )
            END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-DUMP_UserFirstIMEI-table" author="Nidhi">
		<comment>Configs to update multiple UID params</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[DUMP_UserFirstIMEI]') AND type in (N'U'))
            BEGIN
            CREATE TABLE [dbo].[DUMP_UserFirstIMEI](
	        [ID] [bigint] IDENTITY(1,1) NOT NULL,
	        [userId] [bigint] NULL,
	        [IMEI] [varchar](100) NULL,
	        [UserLoginLogId] [bigint] NULL,
	        [generatedDate] [datetime] NULL
	        )
            END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-index-to-supportMultipleUID1" author="Nidhi">
		<comment>Indexes to support multipleUID</comment>
		<sql>
			IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'IDX_DUMP_UserFirstMachineID_userId' AND object_id = OBJECT_ID('DUMP_UserFirstMachineID'))
            BEGIN
             CREATE NONCLUSTERED INDEX [IDX_DUMP_UserFirstMachineID_userId]
		     ON [dbo].[DUMP_UserFirstMachineID] ([userId])
		     INCLUDE ([machineId])
            END
    	</sql>
	</changeSet>
	
	<changeSet id="jwr-add-index-to-supportMultipleUID2" author="Nidhi">
		<comment>Indexes to support multipleUID</comment>
		<sql>
			 IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'IDX_DUMP_UserFirstIMEI_userId' AND object_id = OBJECT_ID('DUMP_UserFirstIMEI'))
           BEGIN
		     CREATE NONCLUSTERED INDEX [IDX_DUMP_UserFirstIMEI_userId]
		     ON [dbo].[DUMP_UserFirstIMEI] ([userId])
		     INCLUDE ([IMEI])
           END
    	</sql>
	</changeSet>
    
   <changeSet id="jwr-add-index-to-supportMultipleUID3" author="Nidhi">
		<comment>Indexes to support multipleUID</comment>
		<sql>
		 IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'IDX_Users_userID_locked' AND object_id = OBJECT_ID('Users'))
         BEGIN
           CREATE NONCLUSTERED INDEX [IDX_Users_userID_locked]
		   ON [dbo].[Users] ([userID],[locked])
		   INCLUDE ([username],[password],[email],[registerDate],[isBot],[mobileNumber],[registerIPAddress],[FirstName],[LastName],[DateOfBirth])
         END
    	</sql>
	</changeSet>
	
	<changeSet id="jwr-add-view-UsersMultipleIdView" author="ShashankSingh">
		<comment>Adding view here to fix broken changesets as its used before view xml is ran</comment>
		<sqlFile path="views/UsersMultipleIdView.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
	</changeSet>
	   
   <changeSet id="jwr-add-index-to-supportMultipleUID4" author="Nidhi">
		<comment>Indexes to support multipleUID</comment>
		<sql>
		  IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'UsersMultipleIdView_id' AND object_id = OBJECT_ID('UsersMultipleIdView'))
          BEGIN
            create unique clustered index UsersMultipleIdView_id on UsersMultipleIdView (UserId)
          END
    	</sql>
	</changeSet>
	
	 <changeSet id="jwr-add-index-to-supportMultipleUID5" author="Nidhi">
		<comment>Indexes to support multipleUID</comment>
		<sql>
		   IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'IDX_Users_ContactDetailsUpdatedTime' AND object_id = OBJECT_ID('Users'))
            BEGIN
             CREATE NONCLUSTERED INDEX [IDX_Users_ContactDetailsUpdatedTime]
		     ON [dbo].[Users] ([ContactDetailsUpdatedTime])
		     INCLUDE ([userID])
           END
    	</sql>
	</changeSet>
    
    <changeSet id="jwr-add-index-to-supportMultipleUID6" author="Nidhi">
		<comment>Indexes to support multipleUID</comment>
		<sql>
		   IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'IDX_Users_registerDate' AND object_id = OBJECT_ID('Users'))
            BEGIN
             CREATE NONCLUSTERED INDEX [IDX_Users_registerDate]
		     ON [dbo].[Users] ([registerDate])
		     INCLUDE ([userID])
            END
    	</sql>
	</changeSet>
	
	 <changeSet id="jwr-add-index-to-supportMultipleUID7" author="Nidhi">
		<comment>Indexes to support multipleUID</comment>
		<sql>
		    IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'IDX_MachineUID_machineID_generatedDate' AND object_id = OBJECT_ID('MachineUID'))
            BEGIN
             CREATE NONCLUSTERED INDEX [IDX_MachineUID_machineID_generatedDate]
		     ON [dbo].[MachineUID] ([machineID],[generatedDate])
		     INCLUDE ([playerId])
            END
    	</sql>
	</changeSet>
    
    <changeSet id="jwr-add-index-to-supportMultipleUID8" author="Nidhi">
		<comment>Indexes to support multipleUID</comment>
		<sql>
		     IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'IDX_MachineUID_playerId_generatedDate' AND object_id = OBJECT_ID('MachineUID'))
              BEGIN
               CREATE NONCLUSTERED INDEX [IDX_MachineUID_playerId_generatedDate]
		       ON [dbo].[MachineUID] ([playerId],[generatedDate])
		       INCLUDE ([sno],[machineID])
              END
    	</sql>
	</changeSet>
  
     <changeSet id="jwr-add-index-to-supportMultipleUID9" author="Nidhi">
		<comment>Indexes to support multipleUID</comment>
		<sql>
		      IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'IDX_UserLoginLog_timestamp_imei' AND object_id = OBJECT_ID('UserLoginLog'))
                BEGIN
                 CREATE NONCLUSTERED INDEX [IDX_UserLoginLog_timestamp_imei]
		         ON [dbo].[UserLoginLog] ([timestamp],[imei])
		         INCLUDE ([userID])
                END
    	</sql>
	</changeSet>
  
	<changeSet id="jwr-add-Indexes-to-userScore-table" author="Nidhi">
		<comment>Add index to userScore table</comment>
		<sql>
		 IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'IDX_UserScore_timestamp_userid-scoreLevel' AND object_id = OBJECT_ID('UserScore'))
         BEGIN
            CREATE NONCLUSTERED INDEX [IDX_UserScore_timestamp_userid-scoreLevel]
		    ON [dbo].[UserScore] ([scoreUpdateTimeStamp],[userId],[scoreLevel])
         END
		</sql>
	</changeSet>
	
	 <changeSet id="jwr-kyc-changeProofValues" author="Nilesh">
     	<comment>Adding new address and id proof types</comment>
		<sql>
			 UPDATE AddressProofTypes set [Status] = 'Electricity Bill' where [Value] = 6;
			 UPDATE AddressProofTypes set [Status] = 'Telephone Bill' where [Value] = 7;
			 UPDATE IdProofTypes set [Status] = 'Driving License' where [Value] = 5;
		</sql>
	</changeSet>
	
	<changeSet id="jwr-update-cfg-for-multiple-userId-params" author="Nidhi">
		<comment>update clean and fraud score range</comment>
		<sql>
		    update [dbo].[cfg] set type = 'number:1:5000:1' where [Id] = 'multipleuidparams' and [Key] = 'cleanscore'
		    update [dbo].[cfg] set type = 'number:1:5000:1' where [Id] = 'multipleuidparams' and [Key] = 'fraudscore'
		</sql>
	</changeSet>
	
	<changeSet id="jwr-insert-cfg-for-pg-from-email" author="ShashankSingh">
		<comment>insert from email value to cfg for pg routing</comment>
		<sql>
		   INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payments','from.email','pg@jungleegames.com', '1', 'text', 'This email will be used as from address by sendgrid to send email');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-add-googleconversiondata-table" author="Kunal">
		<comment>Add GoogleConversionData Table</comment>
		<sql>
			IF OBJECT_ID('dbo.GoogleConversionData') IS NULL -- Check if Table Exists
		    	EXEC (N'
					  CREATE TABLE GoogleConversionData (
					  GoogleClickId VARCHAR(300) NOT NULL,
					  ConversionName VARCHAR(200) NOT NULL,
					  ConversionTime DATETIME NOT NULL,
					  ConversionValue VARCHAR(200) NULL,
					  ConversionCurrency  FLOAT NULL
					  )');
		</sql>
	</changeSet>
    <changeSet id="jwr-add-bankgatewayjobs-table" author="Amit">
		<comment>Jobs for bank gateway routing</comment>
		<sql>
			IF OBJECT_ID('BankGatewayJobs') IS NULL
			BEGIN
            CREATE TABLE BankGatewayJobs
            (
              [JobId] [bigint] NOT NULL IDENTITY(1,1) PRIMARY KEY,
              [BankId] [INT] NOT NULL ,
              [GatewayId] [INT] NULL ,
              [ReturnGatewayId] [INT] NULL,
              [StartTime] [Datetime] NULL,
              [EndTime] [Datetime] NULL,
              [Reason] [varchar](100) NULL,
              [Disabled] [bit] NOT NULL DEFAULT ((0)),
            )
            END 
		</sql>
	</changeSet>
	<changeSet id="jwr-add-enhancement-columns-to-marketingpromotions" author="Rohan">
     	<comment>Adding Enhancment columns to table</comment>
		<sql>
			ALTER TABLE [dbo].[Marketingpromotions]
			ADD [minDeposit] [MONEY] NOT NULL
									 DEFAULT((-1)),
				[minRake]    [MONEY] NOT NULL
									 DEFAULT((-1));
		</sql>
     </changeSet>
     <changeSet id="elastic-search-config-1" author="Khushal">
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.enabled" />
			<column name="value" value="1" />
			<column name="editable" value="1" />
			<column name="type" value="bool" />
			<column name="description" value="host url of elasticsearch" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.host.url" />
			<column name="value" value="http://10.20.18.36" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="host url of elasticsearch" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.host.port" />
			<column name="value" value="9200" />
			<column name="editable" value="1" />
			<column name="type" value="number:100:600000:1" />
			<column name="description" value="index port number of elasticsearch" />
		</insert>
        <insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.host.adminport" />
			<column name="value" value="9300" />
			<column name="editable" value="1" />
			<column name="type" value="number:100:600000:1" />
			<column name="description" value="admin port number of elasticsearch" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.index.rotation" />
			<column name="value" value="w" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="new index will be create based on this parameter. w stands for week,m stands for year, d for day" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.index.retention.period" />
			<column name="value" value="8" />
			<column name="editable" value="1" />
			<column name="type" value="number:1:50:1" />
			<column name="description" value="index retention period in weeks" />
		</insert>
		
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.index.batch.size" />
			<column name="value" value="300" />
			<column name="editable" value="1" />
			<column name="type" value="number:1:10000:1" />
			<column name="description" value="batch size to push data in elasticsearch and log file" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.search.page.size" />
			<column name="value" value="100" />
			<column name="editable" value="1" />
			<column name="type" value="number:1:1000:1" />
			<column name="description" value="max data per page while fetch from elasticsearch" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.log.iswritetofile" />
			<column name="value" value="1" />
			<column name="editable" value="1" />
			<column name="type" value="bool" />
			<column name="description" value="enable to write the gamelog to file" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.log.iswritetoblob" />
			<column name="value" value="0" />
			<column name="editable" value="1" />
			<column name="type" value="bool" />
			<column name="description" value="enable to write the gamelog to azure blob" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.log.bolb.containername" />
			<column name="value" value="" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="azure gamelog blob container name" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.log.bolb.KEY" />
			<column name="value" value="" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="azure gamelog blob key" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.index.shardsize" />
			<column name="value" value="6" />
			<column name="editable" value="1" />
			<column name="type" value="number:1:20:1" />
			<column name="description" value="No of shards for new index" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.index.replica" />
			<column name="value" value="1" />
			<column name="editable" value="1" />
			<column name="type" value="number:1:20:1" />
			<column name="description" value="No of replica for new index" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.index.refreshinterval" />
			<column name="value" value="30" />
			<column name="editable" value="1" />
			<column name="type" value="number:1:5000:1" />
			<column name="description" value="Refresh interval of shard" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.index.threaddelay" />
			<column name="value" value="1000" />
			<column name="editable" value="1" />
			<column name="type" value="number:0:9999999:1" />
			<column name="description" value="value is in miliseconds to restrict the speed of index rate of documents" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.index.logfilefrequency" />
			<column name="value" value="d" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="it can be daily(d) or hourly(h)." />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="utils" />
			<column name="key" value="gamelog2seaechfromelasticsearch" />
			<column name="value" value="1" />
			<column name="editable" value="1" />
			<column name="type" value="bool" />
			<column name="description" value="if elasticsearch is stable and want to change the source of this report then set true." />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="utils" />
			<column name="key" value="gamelog2elasticsearchstartdate" />
			<column name="value" value="" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="if elasticsearch logging start datetime(yyyy-MM-dd HH:mm:ss.SSS)." />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.index.filelogpath" />
			<column name="value" value="C:\\" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="log folder path." />
		</insert>
	</changeSet>
	
	 <changeSet id="jwr-db-cashfree-cfg" author="Nidhi">
    	<comment>Adding cashfree api configurable values Amount of rows to return from admin</comment>
    	<sql>
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'apilink', 'https://payout-gamma.gocashfree.com', 1, 'text', 'cashfree API link')
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'clientId', '', 1, 'text', 'cashfree clientId')
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'clientsecret', '', 1, 'text', 'cashfree clientSecret')
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'authUrl', '/payout/v1/authorize', 1, 'text', 'cashfree auth Url')
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'verifyTokenUrl', '/payout/v1/verifyToken', 1, 'text', 'cashfree verify Token Url')
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'addBeneficiaryUrl', '/payout/v1/addBeneficiary', 1, 'text', 'cashfree Add beneficiary Url')
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'getBeneficiaryUrl', '/payout/v1/getBeneficiary', 1, 'text', 'cashfree Get beneficiary Url')
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'requestTransferUrl', '/payout/v1/requestTransfer', 1, 'text', 'cashfree request transfer Url')
    		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree','enableCashfree','false','1','bool', 'Enables/Disables cashfree API');
    		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree','cashfreePublicKey','','1','text', 'Cashfree public key');
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-add-CashFreeTransactions-Table" author="Nidhi">
		<comment>Table to hold cashfree transactions</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[CashfreeTransactions]') AND type in (N'U'))
            BEGIN
            CREATE TABLE [dbo].[CashfreeTransactions](
	        [TransferId] [bigint] PRIMARY KEY IDENTITY(1,1) NOT NULL,
	        [ReferenceId] [varchar](50) NULL,
			[UTR] varchar(50) NULL,
			[Status] smallint NOT NULL,
	        [WithdrawalId] [int] NOT NULL FOREIGN KEY REFERENCES Withdrawals(withdrawalID),
	        [Memo] varchar(250) NULL,
	        [CreatedDate] [datetime] NOT NULL DEFAULT(GETDATE()),
			[UpdatedDate] [datetime] NOT NULL DEFAULT(GETDATE()),
			[ProcessedBy] [varchar](50) NOT NULL DEFAULT(''),
			)
			END
		</sql>
	</changeSet>
	
	
	 <changeSet id="jwr-add-CashFreeStatusTypes-Table" author="Nidhi">
		<comment>Create table to hold cashfree transactions status types</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[CashFreeStatusTypes]') AND type in (N'U'))
            BEGIN
            CREATE TABLE [dbo].[CashFreeStatusTypes](
              [Id] [int] IDENTITY(1,1) NOT NULL,
	          [Status] [varchar] (30) NOT NULL,
			  [Value] [smallint],
			  [CreatedDate] [datetime] NOT NULL)
			END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-insert-CashFreeStatusTypes" author="Nidhi">
		<comment>Insert cashfree transactions status types</comment>
		<sql>
		    INSERT into CashfreeStatusTypes VALUES('Initiated',0,GETDATE());
			INSERT into CashfreeStatusTypes VALUES('Success',1,GETDATE());
			INSERT into CashfreeStatusTypes VALUES('Failed',2,GETDATE());
			INSERT into CashfreeStatusTypes VALUES('Pending',3,GETDATE());
			INSERT into CashfreeStatusTypes VALUES('Reversed',4,GETDATE());
			INSERT into CashfreeStatusTypes VALUES('N/A',5,GETDATE());
		</sql>
	</changeSet>
	
	<changeSet id="jwr-insert-new-Withdrawal-Statuses" author="Nidhi">
		<comment>Insert new withdrawal status types</comment>
		<sql>
		    insert into WithdrawalStatusTypes VALUES('Approval requested',13);
            insert into WithdrawalStatusTypes VALUES('Approved',14);
            insert into WithdrawalStatusTypes VALUES('Approval rejected', 15);
            insert into WithdrawalStatusTypes VALUES('Processed',16);
            insert into WithdrawalStatusTypes VALUES('Failed',17);
		</sql>
	</changeSet>
	
	<changeSet id="elastic-search-config-2" author="Khushal">
	<sql>
	      update [dbo].[cfg] set type = 'number:1:10000:1' where [Id] = 'elasticsearch' and [Key] = 'elasticsearch.search.page.size'
	</sql>
	</changeSet>
	
	<changeSet id="jwr-mobile-static-page-table" author="rohan">
	<comment>create mobile static page table</comment>
	<sql>
		IF OBJECT_ID('MobileStaticPages') IS NULL
		BEGIN
			CREATE TABLE [dbo].[MobileStaticPages]
			([id]               [INT] IDENTITY(1, 1) PRIMARY KEY
									  NOT NULL,
			 [content]          [NVARCHAR](MAX) NOT NULL,
			 [name]             [VARCHAR](100) NULL,
			 [creationdate]     [DATETIME] NOT NULL
										   DEFAULT((GETDATE())),
			 [activationdate]   [DATETIME] NULL DEFAULT((NULL)),
			 [isactive]         BIT NOT NULL
									DEFAULT((0)),
			 [version]          INT NOT NULL
			)
		END
	</sql>
	</changeSet>
	
	<changeSet id="jwr-mobile-static-page-variable-table" author="rohan">
	<comment>create mobile static variable table</comment>
	<sql>
		IF OBJECT_ID('MobileStaticPageVariables') IS NULL
		BEGIN
			CREATE TABLE [dbo].[MobileStaticPageVariables]
			([id]             [INT] IDENTITY(1, 1)
									PRIMARY KEY
									NOT NULL,
			[name]           [VARCHAR](100) NOT NULL,
			[value]           [VARCHAR](2560) NOT NULL,
			[lastmodifieddate]   [DATETIME] NOT NULL
										 DEFAULT((GETDATE()))
			)
		END
	</sql>
	</changeSet>

	 <changeSet id="Adding 10Card configs" author="Nilesh">
            <comment>Inserting values for gameTimer delays</comment>
        	<sql>
				INSERT INTO cfg VALUES  ('game-timer','gameTimerConfig.10card.finishTime','45000', '1', 'number:1000:120000:500','Initial value of finish timer');
				INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.10card.bonusTime','45000', '1', 'number:500:150000:500','Initial value of player bonus time');
				INSERT INTO cfg VALUES  ('game-timer','gameTimerConfig.10card.turnTime','30000', '1', 'number:6000:120000:500','Initial value of turn timer');
			</sql>
       </changeSet>
              
        <changeSet id="Adding gamelogs environment config" author="Nidhi">
            <comment>Inserting values for gamelogs environment config</comment>
        	<sql>
        	   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'gamelogsEnvironment', 'dev', 1, 'text', 'Gamelogs environment')
			</sql>
       </changeSet>
       
    <changeSet id="jwr-add-payuTransactions-table" author="Amit">
		<comment>PayU Transactions Table</comment>
		<sql>
			IF OBJECT_ID('PayUTransactions') IS NULL
			BEGIN
            CREATE TABLE PayUTransactions
            (
              [ID] [bigint] NOT NULL IDENTITY(1,1) PRIMARY KEY,
              [TransactionID] [varchar](500) NOT NULL ,
              [OrderID] [varchar](500) NOT NULL ,
              [Amount] [varchar](32) NOT NULL ,
              [Status] [varchar](32) NOT NULL ,
              [PaymentMode] [varchar](32) NULL ,
              [RespMsg] [varchar](500) NULL
            )
            END 
		</sql>
	</changeSet>
    <changeSet id="jwr-add-gateway-payu" author="Amit">
    	   <comment>Add gateway Config for PayU only</comment>
    	   <sql>
				------------------- for payu -------------------------
			IF not exists(select * from Gateway where GatewayName='PayU')
			BEGIN
				insert into Gateway values ('PayU', 'https://www.jungleegames.com/jwr/qa/payu/payu_request.php',
				'', 'https://www.jungleegames.com/jwr/qa/payu/payu_response.php', '', 0, 1, '', 1)
			END
		</sql>
	</changeSet>
	<changeSet id="jwr-add-new-currency-columns" author="Rohan">
		<comment>add columns for users deposita dn withdrawable balnce for rupees and chips</comment>
		<sql>
			ALTER TABLE [dbo].[Users]
			ADD [depositBalanceRupees] [MONEY] NOT NULL
											   DEFAULT((0)),
				[inplayBalanceRupees]  [MONEY] NOT NULL
											   DEFAULT((0)),
				[inplayBalanceCoins]   [INT] NOT NULL
											 DEFAULT((0));
		</sql>
	</changeSet>
    <changeSet id="jwr-add-new-source-columns-for-tournament-EntryFee" author="Rohan">
		<comment>add Source Column for Tournament REgistrations</comment>
		<sql>
			ALTER TABLE [dbo].[TournamentRegistrations]
			ADD [entryFeeValueFromDepositBalance] [MONEY] NOT NULL
											   DEFAULT((0))
		</sql>
	</changeSet>   
	<changeSet id="jwr-User-Balance-Config-table" author="Rohan">
		<comment>Add config Table</comment>
		<sql>
			CREATE TABLE UserBalanceConfigs
			([ID]           [INT] NOT NULL IDENTITY(1, 1)
										   PRIMARY KEY,
			 [UserCategory] [VARCHAR](500) NOT NULL,
			 [Enabled]      [BIT] DEFAULT((0))
								  NOT NULL,
			 [CutOffDate] [datetime],
			 CONSTRAINT UQ_UserCategory UNIQUE(UserCategory) 
			)
		</sql>
	</changeSet>
	<changeSet id="jwr-RupeeTrans-Deposit-And-WithdrawableBalance" author="Rohan">
		<comment>add column DB and WB in RupeeTransactions</comment>
		<sql>
			DECLARE @RupeeTransactionTable VARCHAR(50)
			DECLARE @SQL NVARCHAR(MAX)
			DECLARE db_cursor CURSOR
			FOR SELECT DISTINCT
					   'RupeeTransactions_'+CAST(DATEPART(year, thedate) AS VARCHAR)+'_'+RIGHT('00'+CONVERT(NVARCHAR(2), DATEPART(Month, thedate)), 2) AS datw
				FROM ExplodeDates('2018-04-01', '2020-12-01')
			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @RupeeTransactionTable
			WHILE @@FETCH_STATUS = 0
				BEGIN
					SET @SQL = N'ALTER TABLE '+@RupeeTransactionTable+' ADD DepositBalance MONEY not null default((0)), WithdrawableBalance MONEY not null default((0)) '
					EXEC sp_executesql
						 @SQL
					FETCH NEXT FROM db_cursor INTO @RupeeTransactionTable
				END
			CLOSE db_cursor
			DEALLOCATE db_cursor
		</sql>
	</changeSet>
	<changeSet id="jwr-CoinTrans-Deposit-And-WithdrawableBalance" author="Rohan">
		<comment>add column DB and WB in CointTransactions</comment>
		<sql>
			DECLARE @CoinTransactionTable VARCHAR(50)
			DECLARE @SQL NVARCHAR(MAX)
			DECLARE db_cursor CURSOR
			FOR SELECT DISTINCT
					   'CoinTransactions_'+CAST(DATEPART(year, thedate) AS VARCHAR)+'_'+RIGHT('00'+CONVERT(NVARCHAR(2), DATEPART(Month, thedate)), 2) AS datw
				FROM ExplodeDates('2018-04-01', '2020-12-01')
			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @CoinTransactionTable
			WHILE @@FETCH_STATUS = 0
				BEGIN
					SET @SQL = N'ALTER TABLE '+@CoinTransactionTable+' ADD DepositBalance MONEY not null default((0)), WithdrawableBalance MONEY not null default((0)) '
					EXEC sp_executesql
						 @SQL
					FETCH NEXT FROM db_cursor INTO @CoinTransactionTable
				END
			CLOSE db_cursor
			DEALLOCATE db_cursor
		</sql>
	</changeSet>
	<changeSet id="jwr-db-Add-creditType-columns-to-promocodes" author="Rohan">
    	<comment>add new columns to promocodes table</comment>
    	<sql>
			IF COL_LENGTH('dbo.Promocodes', 'bonusCreditType') IS NULL
		        ALTER TABLE Promocodes ADD [bonusCreditType] int not null default((0));
		</sql>
	</changeSet>
	 <changeSet id="jwr-new-transaction-types-for-boonus-waller" author="Rohan">
     	<comment>Add new transaction types to DB</comment>
        <sql>
        	  INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'ACCOUNTCONFISCATION', 61)
              INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'BALANCEMOVEMENTTOINPLAY', 62)
			  INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'BALANCEMOVEMENTTOWITHDRAWABLE', 63)
			  INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'BALANCEMOVEMENTTODEPOSIT', 64)
              INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'BALANCEMERGETOWITHDRAWABLE', 65)
         </sql>
     </changeSet>
	  <changeSet id="jwr-add-new-wallet-configs" author="Rohan">
     	<comment>Add new wallet configs to DB</comment>
        <sql>
			INSERT INTO dbo.UserBalanceConfigs (UserCategory, Enabled, CutOffDate) VALUES('All', 0, NULL);
			INSERT INTO dbo.UserBalanceConfigs (UserCategory, Enabled, CutOffDate) VALUES('VIP 0', 0, NULL);
			INSERT INTO dbo.UserBalanceConfigs (UserCategory, Enabled, CutOffDate) VALUES('VIP 1', 0, NULL);
			INSERT INTO dbo.UserBalanceConfigs (UserCategory, Enabled, CutOffDate) VALUES('VIP 2', 0, NULL);
			INSERT INTO dbo.UserBalanceConfigs (UserCategory, Enabled, CutOffDate) VALUES('VIP 3', 0, NULL);
			INSERT INTO dbo.UserBalanceConfigs (UserCategory, Enabled, CutOffDate) VALUES('VIP 4', 0, NULL);
			INSERT INTO dbo.UserBalanceConfigs (UserCategory, Enabled, CutOffDate) VALUES('VIP 5', 0, NULL);
			INSERT INTO dbo.UserBalanceConfigs (UserCategory, Enabled, CutOffDate) VALUES('VIP 6', 0, NULL);
			INSERT INTO dbo.UserBalanceConfigs (UserCategory, Enabled, CutOffDate) VALUES('New Users', 0, NULL);
		</sql>
	</changeSet>
	 <changeSet id="jwr-add-new-source-columns-for-withdrawals" author="Rohan">
		<comment>add Source Column for Withdrawals</comment>
		<sql>
			ALTER TABLE [dbo].[Withdrawals]
			ADD [amountFromDepositBalance]      [MONEY] NOT NULL
														DEFAULT((0)),
				[amountFromWithdrawableBalance] [MONEY] NOT NULL
														DEFAULT((0))
		</sql>
	</changeSet>   
	<changeSet id="jwr-db-insert-initial-table-data" author="rohan" runOnChange = "true">
		<comment>Inserting initial pages to extends</comment>
		<sqlFile path="MobileStaticPageInitialData.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
	</changeSet>
	<changeSet id="jwr-db-clientlog-publisher-cfg" author="khushal">
		<comment>Setting User Flagging Publsiher config</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogpublisher', 'enableclientlogpublisher', 'false', 1, 'bool', 'Enable/Disable mobile client log Publisher ')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogpublisher', 'pubsub.model', 'eventhub', 1, 'text', 'Publisher-Subscriber model to be used')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogpublisher', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogpublisher', 'pubsub.publisher.protocol', 'REST', 1, 'text', 'network protocol for publishing events')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogpublisher', 'pubsub.publisher.sharedaccesspolicy', '', 1, 'text', 'Secured shared access policy name for publisher')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogpublisher', 'pubsub.publisher.sharedaccesskey', '', 1, 'text', 'Secured shared access key for publsiher')
		</sql>
	</changeSet>
       <changeSet id="jwr-db-clientlog-subscriber-cfg" author="khushal">
     	<comment>Setting gamelog Subscriber config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'enablesubscription', 'true', 1, 'bool', 'Enable/Disable Logs subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'pubsub.model', 'eventhub', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'pubsub.subscriber.storageaccount', '', 1, 'text', 'storage account name')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'pubsub.subscriber.storageaccountkey', '', 1, 'text', 'storage account key')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'pubsub.subscriber.sharedaccesspolicy', '', 1, 'text', 'Secured shared access policy name for subscriber')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'pubsub.subscriber.sharedaccesskey', '', 1, 'text', 'Secured shared access key for subscriber')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'enablelogtofile',  'true', 1, 'bool', 'Enable/Disable write Logs to file')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientlogsubscriber', 'logfilelocation', '', 1, 'text', 'log file location path')
     	</sql>
     </changeSet>

	<changeSet id="jwr-db-multipleid-download-report-cfg" author="Khushal">
    	<comment>This is the max limit of data in downloaded file</comment>
    	<sql>
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('reports', 'reports.multipleuserid.download.rows.limit', '2000', 1, 'number:100:100000:1', 'max limit of data in downloaded file')
    	</sql>
    </changeSet>


	
	<changeSet id="jwr-db-kafka-gamelog-publisher-cfg" author="Nidhi">
         <comment>Setting kafka gamelog Publsiher config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogpublisher', 'enablegamelogs', 'false', 1, 'bool', 'Enable/Disable game Logs')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogpublisher', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
             </sql>
     </changeSet>
    
     <changeSet id="jwr-db-kafka-gamelog-subscriber-cfg" author="Nidhi">
     	<comment>Setting gamelog Subscriber config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogsubscriber', 'enablesubscription', 'true', 1, 'bool', 'Enable/Disable game Logs subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogsubscriber', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogsubscriber', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:8:2', 'partitions count')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	</sql>
     </changeSet>


    <changeSet id="jwr-users-problemgambler-flag" author="Kunal">
   		<comment>Adding ProblemGambler column for each users</comment>
		<sql>
			ALTER TABLE [dbo].[Users] ADD
			[problemGambler] [bit] NOT NULL DEFAULT ((0))
		</sql>
   </changeSet>

	<changeSet id="jwr-db-cfg-tiebreaker" author="Nilesh">
		<comment>Adding cfg to enable/disable tie breaker round in deal variant</comment>
		<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('dealconfig','dealconfig.tieBreaker.enabled','false','1','bool','Enables/Disables tie breaker round for deal games');
		</sql>
	</changeSet>
   
   <changeSet id="jwr-db-useraccountmodification-cfg" author="amit">
     	<comment>Setting UserAccoutModification config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccount', 'enable.username.update', 'true', 1, 'bool', 'Enable/Disable Change Username Feature')
        		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccount', 'enable.email.update', 'true', 1, 'bool', 'Enable/Disable Change Email Feature')
        		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccount', 'enable.mobile.update', 'true', 1, 'bool', 'Enable/Disable Change Mobile Feature')
        </sql>
     </changeSet>
     
      <changeSet id="jwr-db-bonusconfig-userSpecific1" author="Nilesh">
     	<comment>Schema changes for userSpecific Bonus</comment>
     	<sql>
     	    alter table promocodes add
			userSpecific bit not null DEFAULT((0));
        </sql>
     </changeSet>
     
     <changeSet id="jwr-db-bonusconfig-userSpecific2" author="Nilesh">
     	<comment>Create table UsersByPromoCodes for userSpecific Bonus</comment>
     	<sql>
			create table UsersByPromoCodes (
			promoCodeID int,
			userID int);
        </sql>
     </changeSet>
     
      <changeSet id="jwr-db-bonusconfig-maxUniqueUsages" author="Nilesh">
     	<comment>Add column maxUniqueUsages in promocodes</comment>
     	<sql>
			alter table promocodes add
			maxUniqueUsages int not null default((0));
        </sql>
     </changeSet>

    <changeSet id="jwr-db-Add-Top-BannerLocation-entries-in-cfg" author="Arjun">
    	<comment>Setting BannerLocationt Top banner setting in config</comment>
    	<sql>    		
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.topbannerPromotionPage', 'promo_page_bigger_top_774x115', 1, 'text', 'Promotion Image Banner Folder')
    	</sql>
    </changeSet>

   <changeSet id="jwr-Add-FacebookId-Column" author="Khushal">
  	   <comment>Add FacebookId Column</comment>
  	   <sql>
		------------------- Add FacebookId Column -------------------------
		ALTER TABLE [dbo].[Users] ADD
			[FacebookId] [varchar](50) NULL
	</sql>
	</changeSet>
	<changeSet id="jwr-Add-isFacebookRegister-Column" author="Khushal">
	  	   <comment>Add FacebookId Column</comment>
	  	   <sql>
			------------------- Add FacebookId Column -------------------------
			ALTER TABLE [dbo].[Users] ADD
				[isFacebookRegister] bit NULL
		</sql>
	</changeSet>
	<changeSet id="jwr-Add-FacebookName-Column" author="Khushal">
	  	   <comment>Add FacebookId Column</comment>
	  	   <sql>
			------------------- Add FacebookId Column -------------------------
			ALTER TABLE [dbo].[Users] ADD
				[FacebookName] [varchar](50) NULL
		</sql>
	</changeSet>
	
	<changeSet id="jwr-Add-FacebookEmail-Column" author="Khushal">
	  	   <comment>Add FacebookId Column</comment>
	  	   <sql>
			------------------- Add FacebookId Column -------------------------
			ALTER TABLE [dbo].[Users] ADD
				[FacebookEmail] [varchar](50) NULL
		</sql>
	</changeSet>
	
	<changeSet id="jwr-facebook-app-configs" author="Khushal">
	  	   <comment>Add FacebookId Column</comment>
	  	   <sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'facebook.appid.h5', '1637594482965948', 1, 'text', 'Facebook appid for H5')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'facebook.appid.web', '1610961912280600', 1, 'text', 'Facebook appid for web')
		</sql>
	</changeSet>
	<changeSet id="jwr-facebook-id-index" author="Khushal">
	  	   <comment>Index on FacebookId Column of Users Table	</comment>
	  	   <sql>
			CREATE NONCLUSTERED INDEX [IDX_Users_FacebookId]
			ON [dbo].[Users] ([FacebookId])
			INCLUDE ([userID])
		</sql>
	</changeSet>
	<changeSet id="jwr-facebook-SocialNetworkEmail-Constraint" author="Khushal">
	  	   <comment>SocialNetwork and Email constraint</comment>
	  	   <sql>
			if not exists( SELECT   1 
			    FROM INFORMATION_SCHEMA.CONSTRAINT_TABLE_USAGE  where TABLE_NAME='users'
			    and CONSTRAINT_NAME ='uq_SocialNetworkEmail')
			BEGIN
			
						ALTER TABLE [dbo].[Users] ADD  CONSTRAINT [uq_SocialNetworkEmail] UNIQUE NONCLUSTERED 
					(
						[socialNetwork] ASC,
						[email] ASC
					)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			
			end
		</sql>
	</changeSet>
	
     <changeSet id="jwr-db-kychistory-4" author="Rohan">
    		<comment>Adding primary key column from kychistory</comment>
		<sql>
			ALTER TABLE kychistory DROP CONSTRAINT kychistory_unique
			ALTER TABLE kychistory add CONSTRAINT kychistory_unique UNIQUE (userId, uploadTime, counter, uploadtype);
		</sql>
	</changeSet>
	
	<changeSet id="facebook_appid_prod" author="khushal" context="prod">
		<comment>facebook appid for prod environment</comment>
		<sql>
			update [dbo].[cfg] set [value]='347517578913382' where [id]='registration' and [key]='facebook.appid.h5';
			update [dbo].[cfg] set [value]='347517578913382' where [id]='registration' and [key]='facebook.appid.web';
		</sql>
	</changeSet>
	
	<changeSet id="add-LinkedWalletDetails-Table" author="AmitB">
      <comment>Add LinkedWalletDetails Table to DB</comment>
        <sql>
         IF OBJECT_ID('dbo.LinkedWalletDetails') IS NULL
             BEGIN
             CREATE TABLE [dbo].[LinkedWalletDetails](
                [id] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
				[userID] [int] NOT NULL,
				[walletType] [varchar](25) NOT NULL,
				[walletBankId] [int] NOT NULL,
				[walletToken] [varchar](128) NULL,
				[linkedMobile] [varchar](16) NULL,
				[Enabled] [bit] NOT NULL DEFAULT 0,
				[TimeStampCreated] [datetime] NOT NULL DEFAULT (getdate()),
				[TimeStampUpdated] [datetime] NOT NULL DEFAULT (getdate()),
				 CONSTRAINT [PK_LinkedWalletDetails] PRIMARY KEY CLUSTERED
				(
					[id] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				)
			 END
         </sql>
     </changeSet>
     
     <changeSet id="jwr-add-freechargeTransactions-table" author="AmitB">
		<comment>Freecharge Transactions Table</comment>
		<sql>
			IF OBJECT_ID('FreechargeTransactions') IS NULL
			BEGIN
            CREATE TABLE FreechargeTransactions
            (
              [ID] [bigint] NOT NULL IDENTITY(1,1) PRIMARY KEY,
              [TransactionID] [varchar](500) NOT NULL ,
              [OrderID] [varchar](500) NOT NULL ,
              [Amount] [varchar](32) NOT NULL ,
              [Status] [varchar](32) NOT NULL ,
              [ErrorMsg] [varchar](500) NULL,
              [Timestamp] [datetime] NULL,
            )
            END
		</sql>
	 </changeSet>
	
	<changeSet id="jwr-insert-cfg-for-pg-from-email-new" author="ShashankSingh">
		<comment>insert from email value to cfg for pg routing</comment>
		<sql>
		   INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('email','pg.from.email','prashant.bhardwaj@jungleegames.com', '1', 'text', 'This email will be used as from address by sendgrid to send PAYMENT specific email');
		</sql>
	</changeSet>

	<changeSet id="jwr-db-add-all-MobileBannerLocation-in-bannercfg" author="Arjun">
    	<comment>Setting All Mobile Banner Location in config</comment>
    	<sql>    		
    		DELETE FROM [dbo].[cfg] WHERE [key]='banner.homepageMobileFolder'
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.homepageMobileFolder', 'mobile_homepage_297X178', 1, 'text', 'Mobile Home Page')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.promotionMainMobileFolder', 'mobile_promotion_760X194', 1, 'text', 'Mobile Promotion Main Page')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.promotionInnerMobileFolder', 'mobile_promotion_inner_page_760X194', 1, 'text', 'Mobile Promotion Inner Page')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.lobbybannerMobileFolder', 'mobile_lobby_banner_365X53', 1, 'text', 'Mobile Lobby Baner')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.RAFMainMobileFolder', 'mobile_RAF_Main_369X116', 1, 'text', 'Mobile RAF main Page')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.loginpageMobileFolder', 'mobile_loginpage_297X178', 1, 'text', 'Mobile Login Page')
    	</sql>
    </changeSet>
	<changeSet id="jwr-db-add-all-MobileBannerLocation-in-bannercfg-1" author="Mayank">
    	<comment>Setting Registration Mobile Banner Location in config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.registerpageMobileFolder', '/mobile_registerpage_297X178/', 1, 'text', 'Mobile Register Page')
    	</sql>
    </changeSet>

	<changeSet id="jwr-insert-cfg-for-invoicepdffile" author="ArjunSingh">
		<comment>insert new value for invoce pdffile path</comment>
		<sql>
		   INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pdfpath','invoice.pdffile.path','D://Invoice.pdf', '1', 'text', 'This value will be used to generate pdf invoice for user');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-insert-cfg-for-jr-rm-email-alias" author="Nidhi">
		<comment>insert email alias name to cfg for all alert emails</comment>
		<sql>
		   INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils','JrEmailFromName','www.jungleerummy.com', '1', 'text', 'Email address alias for all the JR alerts emails');
		   INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils','RmEmailFromName','www.rummymillionaire.com', '1', 'text', 'Email address alias for all the RM alerts emails');
		</sql>
	</changeSet>

	<changeSet id="jwr-cfg-table-migration" author="Mirek">
		<sql>
		   INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('table-migration','tablemigration.enabled','true', '1', 'bool', 'Table migration that happens when gameserver is shutting down');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-alter-withdrawals-table-to-add-social-network" author="Nidhi">
		<comment>ALTER Withdrawals table to add Social network</comment>
		<sql>
		   ALTER TABLE Withdrawals ADD SocialNetwork varchar(20);
		</sql>
	</changeSet>


	 <changeSet id="jwr-cfg-gametimer-variants" author="Mirek">
       	<sql>
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.2s.finish',	 '45000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.2s.bonus',		 '45000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.2s.turn',		 '30000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.2s.gamestart',	 '10000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.2s.viewresults','10000', '1', 'number:1000:120000:1000','View Results time');

			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.6s.finish',	 '45000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.6s.bonus',		 '45000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.6s.turn',		 '30000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.6s.gamestart',	 '20000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.6s.viewresults','10000', '1', 'number:1000:120000:1000','View Results time');

			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.2s.finish',	 '35000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.2s.bonus',		 '30000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.2s.turn',		 '25000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.2s.gamestart',	 '10000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.2s.viewresults','10000', '1', 'number:1000:120000:1000','View Results time');

			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.6s.finish',	 '35000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.6s.bonus',		 '30000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.6s.turn',		 '25000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.6s.gamestart',	 '20000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.6s.viewresults','10000', '1', 'number:1000:120000:1000','View Results time');

			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.2s.finish',	 '35000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.2s.bonus',		 '30000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.2s.turn',		 '25000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.2s.gamestart',	 '10000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.2s.viewresults','10000', '1', 'number:1000:120000:1000','View Results time');

			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.6s.finish',	 '35000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.6s.bonus',		 '30000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.6s.turn',		 '25000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.6s.gamestart',	 '20000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.6s.viewresults','10000', '1', 'number:1000:120000:1000','View Results time');

			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.2s.finish',	 	'35000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.2s.bonus',		'30000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.2s.turn',		'25000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.2s.gamestart',	'5000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.2s.viewresults',	'10000', '1', 'number:1000:120000:1000','View Results time');

			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.6s.finish',	 	'35000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.6s.bonus',		'30000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.6s.turn',		'25000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.6s.gamestart',	'30000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.6s.viewresults',	'10000', '1', 'number:1000:120000:1000','View Results time');

			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal.13c.2s.finish',	 	'35000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal.13c.2s.bonus',		'30000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal.13c.2s.turn',		'25000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal.13c.2s.gamestart',	'10000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal.13c.2s.viewresults',	'10000', '1', 'number:1000:120000:1000','View Results time');

			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal.13c.6s.finish',	 	'35000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal.13c.6s.bonus',		'30000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal.13c.6s.turn',		'25000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal.13c.6s.gamestart',	'30000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal.13c.6s.viewresults',	'10000', '1', 'number:1000:120000:1000','View Results time');
			
			DELETE FROM cfg WHERE [id] = 'game-timer' AND [key] = 'gameTimerConfig.10card.bonusTime';
			DELETE FROM cfg WHERE [id] = 'game-timer' AND [key] = 'gameTimerConfig.10card.finishTime';
			DELETE FROM cfg WHERE [id] = 'game-timer' AND [key] = 'gameTimerConfig.10card.turnTime';
			DELETE FROM cfg WHERE [id] = 'game-timer' AND [key] = 'gameTimerConfig.dealGameStartTime2pl';
			DELETE FROM cfg WHERE [id] = 'game-timer' AND [key] = 'gameTimerConfig.dealGameStartTime4/6pl';
			DELETE FROM cfg WHERE [id] = 'game-timer' AND [key] = 'gameTimerConfig.pointGameStartTime2pl';
			DELETE FROM cfg WHERE [id] = 'game-timer' AND [key] = 'gameTimerConfig.pointGameStartTime4/6pl';
			DELETE FROM cfg WHERE [id] = 'game-timer' AND [key] = 'gameTimerConfig.poolGameStartTime2pl';
			DELETE FROM cfg WHERE [id] = 'game-timer' AND [key] = 'gameTimerConfig.poolGameStartTime4/6pl';
		</sql>
      </changeSet>

	<changeSet id="jwr-cfg-gametimer-debug" author="Mirek">
		<sql>
			INSERT INTO cfg VALUES
			('game-timer','gameTimerConfig.debug.enable', 'false', '1',
			'bool','Enable to print debug info on gameserver consoles when config values are changed.');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-Add-RegisteredFrom-Column" author="Kunal">
  		<comment>Add RegisteredFrom Column to determin from where user is registered</comment>
  		<sql>
			ALTER TABLE [dbo].[Users] ADD [registeredFrom] [varchar](100) NULL
		</sql>
	</changeSet>
	<changeSet id="jwr-multi-table-support" author="Raju">
	<comment>Config for enabling/disabling multiple table support on mobile</comment>
		<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.all.enabled','false','0','bool', 'Enables/Disables multiple table support for all users');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.vip1.enabled','false','0','bool', 'Enables/Disables multiple table support for VIP-1 users');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.vip2.enabled','false','0','bool', 'Enables/Disables multiple table support for VIP-2 users');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.vip3.enabled','false','0','bool', 'Enables/Disables multiple table support for VIP-3 users');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.vip4.enabled','false','0','bool', 'Enables/Disables multiple table support for VIP-4 users');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.vip5.enabled','false','0','bool', 'Enables/Disables multiple table support for VIP-5 users');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.vip6.enabled','false','0','bool', 'Enables/Disables multiple table support for VIP-6 users');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.nonvip.enabled','false','0','bool', 'Enables/Disables multiple table support for non vip users');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.freecash.enabled','false','0','bool', 'Enables/Disables multiple table support for free cash users');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.free.enabled','false','0','bool', 'Enables/Disables multiple table support for free users');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.channel.apk.enabled','false','0','bool', 'Enables/Disables multiple table support on apk channel');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.channel.h5.enabled','false','0','bool', 'Enables/Disables multiple table support on h5 channel');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.channel.ipa.enabled','false','0','bool', 'Enables/Disables multiple table support on IPA channel');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.channel.webh5.enabled','false','0','bool', 'Enables/Disables multiple table support on webh5 channel');
		</sql>
	</changeSet>
	<changeSet id="jwr-multi-table-support-pwa" author="Mayank Mishra">
		<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.channel.pwa.enabled','false','0','bool', 'Enables/Disables multiple table support on pwa channel');
		</sql>
	</changeSet>
	<changeSet id="jwr-Add-Google-Column" author="Khushal">
  	   <comment>Add Google Column</comment>
  	   <sql>
		------------------- Add Google Column -------------------------
		ALTER TABLE [dbo].[Users] ADD [GoogleId] [varchar](50) NULL;
		ALTER TABLE [dbo].[Users] ADD [isGoogleRegister] BIT NULL;
		ALTER TABLE [dbo].[Users] ADD [GoogleName] [varchar](50) NULL;
		ALTER TABLE [dbo].[Users] ADD [GoogleEmail] [varchar](50) NULL;
		ALTER TABLE [dbo].[Users] ADD [GoogleDOB] [varchar](50) NULL;
		ALTER TABLE [dbo].[Users] ADD [GoogleLanguage] [varchar](50) NULL;			
	</sql>
	</changeSet>
	<changeSet id="jwr-googleClientId-configs" author="Khushal">
	  	   <comment>Set config of googleClientId</comment>
	  	   <sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'google.client.id', '355210738022-4gn4gu13b5dk3an6m1jj3u4h2neh146v', 1, 'text', 'Google login ClientId')
		</sql>
	</changeSet>

 	<changeSet id="jwr-db-addCashConfigs-2" author="Nilesh">
     	<comment>Inserting oneTimeMinDeposit to addCashLimits for Responsile Gaming</comment>
		<sql>
			INSERT [dbo].[AddCashLimitConfig] ([key], [value]) VALUES (N'conf.oneTimeMinDeposit', N'25');
		</sql>
	</changeSet>
	
	 <changeSet id="jwr-db-bonusconfig-uniqueUsageCount" author="Nilesh">
     	<comment>Add column maxUniqueUsages in promocodes</comment>
     	<sql>
			alter table promocodes add
			uniqueUsageCount int not null default((0));
        </sql>
     </changeSet>
     
	<changeSet id="jwr-tableconfigurations-platform" author="Mirek">
		<comment>Adding platform column to TableConfigurations</comment>
		<sql>
			ALTER TABLE [dbo].[TableConfigurations]
			ADD [platform] [varchar] (100) NOT NULL DEFAULT 'all'
		</sql>
  </changeSet>
	
	<changeSet id="jwr-add-phonepeTransactions-table" author="AmitB">
		<comment>Phonepe Transactions Table</comment>
		<sql>
			IF OBJECT_ID('PhonepeTransactions') IS NULL
			BEGIN
            CREATE TABLE PhonepeTransactions
            (
              [ID] [bigint] NOT NULL IDENTITY(1,1) PRIMARY KEY,
              [TransactionID] [varchar](500) NOT NULL ,
              [OrderID] [varchar](500) NOT NULL ,
              [Amount] [varchar](32) NOT NULL ,
              [Status] [varchar](32) NOT NULL ,
              [ErrorMsg] [varchar](500) NULL,
              [Timestamp] [datetime] NULL,
            )
            END
		</sql>
	 </changeSet>
     <changeSet id="jwr-Add-GSTCode-Column" author="Arjun">
  		<comment>Add GSTCode Column In state table for Invoice</comment>
  		<sql>
			ALTER TABLE States ADD GSTCode INT
		</sql>
	 </changeSet>
	  <changeSet id="jwr-Update-GSTCode-Column-Against-State" author="Arjun">
  		<comment>Update GSTCode Column Against State</comment>
  		<sql>
			UPDATE States SET GSTCode=1 WHERE stateID=14
			UPDATE States SET GSTCode=2 WHERE stateID=13
			UPDATE States SET GSTCode=3 WHERE stateID=27
			UPDATE States SET GSTCode=4 WHERE stateID=6
			UPDATE States SET GSTCode=5 WHERE stateID=32
			UPDATE States SET GSTCode=6 WHERE stateID=12
			UPDATE States SET GSTCode=7 WHERE stateID=24
			UPDATE States SET GSTCode=8 WHERE stateID=37
			UPDATE States SET GSTCode=9 WHERE stateID=31
			UPDATE States SET GSTCode=10 WHERE stateID=5
			UPDATE States SET GSTCode=11 WHERE stateID=28
			UPDATE States SET GSTCode=12 WHERE stateID=3
			UPDATE States SET GSTCode=13 WHERE stateID=22
			UPDATE States SET GSTCode=14 WHERE stateID=20
			UPDATE States SET GSTCode=15 WHERE stateID=21
			UPDATE States SET GSTCode=16 WHERE stateID=30
			UPDATE States SET GSTCode=17 WHERE stateID=35
			UPDATE States SET GSTCode=18 WHERE stateID=4
			UPDATE States SET GSTCode=19 WHERE stateID=33
			UPDATE States SET GSTCode=20 WHERE stateID=15
			UPDATE States SET GSTCode=21 WHERE stateID=25
			UPDATE States SET GSTCode=22 WHERE stateID=7
			UPDATE States SET GSTCode=23 WHERE stateID=19
			UPDATE States SET GSTCode=24 WHERE stateID=11
			UPDATE States SET GSTCode=25 WHERE stateID=9
			UPDATE States SET GSTCode=26 WHERE stateID=8
			UPDATE States SET GSTCode=27 WHERE stateID=34
			UPDATE States SET GSTCode=28 WHERE stateID=2
			UPDATE States SET GSTCode=29 WHERE stateID=16
			UPDATE States SET GSTCode=30 WHERE stateID=10
			UPDATE States SET GSTCode=31 WHERE stateID=18
			UPDATE States SET GSTCode=32 WHERE stateID=17
			UPDATE States SET GSTCode=33 WHERE stateID=29
			UPDATE States SET GSTCode=34 WHERE stateID=36
			UPDATE States SET GSTCode=35 WHERE stateID=1
			UPDATE States SET GSTCode=36 WHERE stateID=39
		</sql>
	 </changeSet>

	<changeSet id="jwr-UserLoginLog-add-uuid-column-for-iOSdevices" author="Mayank and Gopal">
  		<comment>Change datatype of imei column in UserLoginLog table</comment>
  		<sql>
	  		ALTER TABLE userloginlog ADD uuid varchar(50);
			IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'IDX_UserLoginLog_timestamp_uuid' AND object_id = OBJECT_ID('UserLoginLog'))
			BEGIN
			    CREATE NONCLUSTERED INDEX [IDX_UserLoginLog_timestamp_uuid]
				ON [dbo].[UserLoginLog] ([timestamp], [uuid])
				INCLUDE ([userID])
			END
		</sql>
	</changeSet>
	<changeSet id="jwr-MobileDeviceInfo-add-uuid-column-for-iOSdevices" author="Mayank and Gopal">
  		<comment>Change datatype of imei column in UserLoginLog table</comment>
  		<sql>
			ALTER TABLE MobileDeviceInfo ADD uuid varchar(50);
			IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'indx_MobileDeviceInfo_uuid' AND object_id = OBJECT_ID('MobileDeviceInfo'))
			BEGIN
				CREATE NONCLUSTERED INDEX [indx_MobileDeviceInfo_uuid] 
				ON MobileDeviceInfo([IMEI] ASC, [DeviceType] ASC)
			END
		</sql>
	</changeSet>
	
	 <changeSet id="jwr-currency-lock-alert-receivers-table" author="Rohan">
		<comment>currency-lock-alert-receivers table</comment>
		<sql>
			IF OBJECT_ID('CurrencyLockAlertReceivers') IS NULL
		    BEGIN
		        CREATE TABLE CurrencyLockAlertReceivers
		        ([ID]           [INT] NOT NULL IDENTITY(1, 1)
		                                       PRIMARY KEY,
		         [emailaddress] [VARCHAR](500) NOT NULL,
		         [enabled]      [BIT] DEFAULT((0))
		                              NOT NULL
		        )
		    END
		</sql>
	 </changeSet>
	 <changeSet id="jwr-currency-lock-alert" author="Rohan">
		<comment>currency-lock-alert</comment>
		<sql>
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('currency-lock-alert',
				 'alert.enabled',
				 'false',
				 '0',
				 'bool',
				 'Enables/Disables Currency Lock Alert Emails'
				);
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('currency-lock-alert',
				 'alert.inplaydbcolumn',
				 'lockedrupees',
				 '0',
				 'text',
				 'db column name used for locking currency'
				);
		</sql>
	 </changeSet>

	 <changeSet id="jwr-create-table-user-raf-friends" author="Gopal">
		<comment>User Raf Friends</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UserRafFriends]') AND type in (N'U'))
			BEGIN
			CREATE TABLE [dbo].[UserRafFriends](
				[ID] [int] IDENTITY(1,1) NOT NULL,
				[UserId] [int] NULL,
				[Name] [nvarchar](100) NULL,
				[Email] [varchar](100) NULL,
				[CreatedDate] [datetime] NULL,
			PRIMARY KEY CLUSTERED 
			(
				[ID] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]
			END
			
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[DF__UserRafFr__Creat__78B4BB21]') AND type = 'D')
			BEGIN
			ALTER TABLE [dbo].[UserRafFriends] ADD  DEFAULT (getdate()) FOR [CreatedDate]
			END
		</sql>
	 </changeSet>

	<changeSet id="jwr-transaction-type-bonus-reversal-locked-accounts" author="Arjun">
		<comment>bonus-reversal-locked-accounts</comment>
		<sql>
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'BONUSREVERSALLOCKEDACCOUNTS', N'66')
		</sql>
	 </changeSet>

	 <changeSet id="jwr-add-birthday-bonus-config-table" author="ShashankSingh">
		<comment>Birthday Bonus Configuration Table</comment>
		<sql>
			IF OBJECT_ID('BirthdayBonusConfig') IS NULL
			BEGIN
            CREATE TABLE BirthdayBonusConfig
            (
              [ID] [int] NOT NULL IDENTITY(1,1) PRIMARY KEY,
              [UserCategory] [varchar](500) NOT NULL ,
              [cashAmount] [money] NOT NULL DEFAULT ((0)),
              [bonusCodeName] [varchar](50) NULL ,
              [removingDays] [int] NOT NULL DEFAULT((7)),
              [minDeposit] [money] NOT NULL DEFAULT ((0)),
              [bonusPercentage] [int] NOT NULL DEFAULT ((0)),
              [maBonusAmount] [money] NOT NULL DEFAULT ((0)),
              [bonusCreditType] [bit] NOT NULL DEFAULT ((0)),
            )
            END
		</sql>
	 </changeSet>
	 <changeSet id="jwr-birthday-bonus-automation" author="ShashankSingh">
		<comment>birthday-bonus-automation</comment>
		<sql>
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('birthday-bonus-automation',
				 'service.enabled',
				 'false',
				 '0',
				 'bool',
				 'Enables/Disables Birthday Bonus Automation'
				);
		</sql>
	 </changeSet>
	 <changeSet id="jwr-birthday-bonus-defaultsn" author="ShashankSingh">
		<comment>birthday-bonus-automation-defaults</comment>
		<sql>
			INSERT INTO [BirthdayBonusConfig]
				(
              [UserCategory],
              [cashAmount],
              [bonusCodeName],
              [removingDays],
              [minDeposit],
              [bonusPercentage],
              [maBonusAmount],
              [bonusCreditType]
				)
				VALUES
				('NONVIP',0.0,'HBB',7,500,100,500,0),
				('VIP1',5000,'HBB',7,2000,100,2000,0),
				('VIP2',2500,'HBB',7,2000,100,2000,0),
				('VIP3',1000,'HBB',7,1000,100,1000,0),
				('VIP4',500,'HBB',7,1000,100,1000,0),
				('VIP5',0.0,'HBB',7,500,100,500,0),
				('VIP6',0.0,'HBB',7,500,100,500,0);
		</sql>
	 </changeSet>
	 	<changeSet id="jwr-birthday-bonus-automation-vip7"
		author="Niraj">
		<comment>birthday-bonus-vip7-added</comment>
		<sql>
			INSERT INTO [BirthdayBonusConfig]
			(
			[UserCategory],
			[cashAmount],
			[bonusCodeName],
			[removingDays],
			[minDeposit],
			[bonusPercentage],
			[maBonusAmount],
			[bonusCreditType]
			)
			VALUES
			('NEWBIE',0.0,'HBB',7,500,100,500,0);
		</sql>
	</changeSet>
	 
	 <changeSet id="jwr-birthday-bonus-automation-1" author="ShashankSingh">
		<comment>birthday-bonus-automation-1</comment>
		<sql>
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('birthday-bonus-automation',
				 'service.activedays',
				 '30',
				 '0',
				 'number:1:10000:100',
				 'Number of days to consider being active'
				);
		</sql>
	 </changeSet>
	 <changeSet id="jwr-birthday-bonus-automation-2" author="ShashankSingh">
		<comment>birthday-bonus-automation-2</comment>
		<sql>
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('birthday-bonus-automation',
				 'service.codeapplicable',
				 '7',
				 '0',
				 'number:1:10000:100',
				 'Number of days prior to the birthday of the user when code is applicable'
				),
				('birthday-bonus-automation',
				 'service.bonusremovalwarning',
				 '7',
				 '0',
				 'number:1:10000:100',
				 'Number of days prior to which the warning email for removal of birthday Bonus'
				),
				
				('birthday-bonus-automation',
				 'service.birthdaybonusapplicable',
				 'true',
				 '0',
				 'bool',
				 'Trigger email when birthday bonus is applicable'
				),
				
				('birthday-bonus-automation',
				 'service.birthdaybonusaddition',
				 'true',
				 '0',
				 'bool',
				 'Trigger email when birthday bonus is added'
				),
				
				('birthday-bonus-automation',
				 'service.birthdaybonusremovalwarning',
				 'true',
				 '0',
				 'bool',
				 'Trigger email for birthdya bonus removal warning'
				),
				
				('birthday-bonus-automation',
				 'service.birthdaybonusremoval',
				 'true',
				 '0',
				 'bool',
				 'Trigger email for removal of birthday bonus'
				);
		</sql>
	 </changeSet>
	 <changeSet id="jwr-birthday-bonus-automation-3" author="ShashankSingh">
		<comment>birthday-bonus-automation-2</comment>
		<sql>
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('birthday-bonus-automation',
				 'service.birthdayduein',
				 '7',
				 '0',
				 'number:1:10000:100',
				 'Number of days in which birthday is due'
				);
		</sql>
	 </changeSet>
	 <changeSet id="jwr-add-birthday-bonus-track-log-tablee" author="ShashankSingh">
		<comment>Birthday Bonus Track and Log Table</comment>
		<sql>
			IF OBJECT_ID('BirthdayBonusLog') IS NULL
			BEGIN
            CREATE TABLE BirthdayBonusLog
            (
              [ID] [int] NOT NULL IDENTITY(1,1) PRIMARY KEY,
              [userId] [int] NOT NULL DEFAULT((0)),
              [email] [varchar](500) NOT NULL ,
              [bonusAddedTime] [datetime] NOT NULL,
              [sentForCurrentYear] [bit] NOT NULL DEFAULT ((0)),
              [amount] [money] NOT NULL DEFAULT ((0)),
              [bonusCreditType] [bit] NOT NULL DEFAULT ((0)),
              [warnEmailSent] [bit] NOT NULL DEFAULT ((0)),
              [removeBonusAfterDays] [int] NOT NULL DEFAULT((0)),
            )
            END
		</sql>
	 </changeSet>
	 <changeSet id="jwr-add-birthday-bonus-config-table-alter" author="ShashankSingh">
		<comment>Birthday Bonus Config Table alter</comment>
		<sql>
			ALTER TABLE [dbo].[BirthdayBonusConfig] ADD [isEnabled] [bit] NOT NULL DEFAULT ((0));
		</sql>
	 </changeSet>
	 <changeSet id="jwr-add-birthday-bonus-log-table-alter" author="ShashankSingh">
		<comment>Birthday Bonus log Table alter</comment>
		<sql>
			ALTER TABLE [dbo].[BirthdayBonusLog] ADD [year] [int] NOT NULL DEFAULT ((0));
		</sql>
	 </changeSet>

	<changeSet id="jwr-pwa-configs" author="Khushal">
	  	   <comment>PWA configuration</comment>
	  	   <sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'pwa.a2h.popup.android', 'true', 1, 'bool', 'to enable/disable Add to homescreen popup on android')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'pwa.a2h.popup.ios', 'true', 1, 'bool', 'to enable/disable Add to homescreen popup on iOs')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'pwa.a2h.popup.autologincount', '5', 1, 'text', 'Add to homescreen popup after these click')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'pwa.send.offline.after.click', '5', 1, 'text', 'Send user to offline page if click count is this')
		</sql>
	</changeSet>

	 <changeSet id="jwr-add-tournament-table-type" author="Nidhi">
		<comment>Adding table type for Inserting tournament tables</comment>
		<sql>
				CREATE TYPE TournamentTables AS TABLE
                (
                  [tableInstanceId] [bigint], 
	              [tournamentID] [int],
	              [round] [tinyint] ,
	              [gsFwUUID] [varchar](64),
	              [gsIP] [varchar](16),
	              [state] [varchar](16),
	              [tableCreationTime] [datetime],
	              [gameStartTime] [datetime] ,
	              [gameEndTime] [datetime] ,
	              [currentDeal] [int],
	              [deals] [int],
	              [players] [text]
                );
		</sql>
	 </changeSet>
	<changeSet id="jwr-db-Users-insert-newBots" author="Nilesh">
    <comment>inserting HouseId and BotId in users table</comment>
		<sql>
			Set Identity_Insert users On;
			INSERT [dbo].[Users] ([userID], [username], [password], [email], [stateID], [emailOptIn], [registerDate], [lastLoginDate], [currencyRupees], [currencyCoins], [currencyGold], [xpCash], [xpSocial], [xpBonusTimeCash], [xpBonusTimeSocial], [avatarId], [lastCoinReload], [emailVerified], [passwordResetCode], [locked], [loginAttempts], [isBot], [unverifiedLogins], [giftPath], [socialNetwork], [socialNetworkID], [mobileNumber], [registerIPAddress], [totalDeposits], [totalWithdrawals], [totalRake], [firstDepositDate], [firstDepositAmount], [lastDepositDate], [lastDepositAmount], [firstWithdrawalDate], [firstWithdrawalAmount], [lastWithdrawalDate], [lastWithdrawalAmount], [totalDepositsCount], [totalWithdrawalsCount], [totalCashGamesWon], [totalFreeGamesWon], [totalCashGamesLost], [totalFreeGamesLost], [totalCashAmountWon], [totalCashAmountLost], [adKey], [friendReferral], [totalLoginCount], [lastLoginIP], [lastCashGamePlayed], [totalCashBonus], [firstCashGamePlayed], [lastAdKeyStamp], [firstFreeGamePlayed], [lastFreeGamePlayed], [ChatAllowed], [emailVerificationLink], [mobileVerified], [mobileVerificationTimestamp], [userDeviceType], [smsOptIn], [lastOnlineTime], [FirstName], [LastName], [DateOfBirth], [Address], [Address2], [City], [PIN], [ContactDetailsUpdatedTime], [isFraud], [pancardImagePath], [PanVerificationStatus], [panCardNumber], [uploadCount], [panRejectionReason], [fraudStatus], [fraudPronity], [fraudType], [AddressProofType], [AddressProofText], [AddressProofImagepath], [AddressProofStatus], [AddressProofUploadCount], [AddressProofReason], [timestampAddressUpdate], [Source], [IdProofType], [IdProofText], [IdProofImagePath], [IdProofStatus], [IdProofReason], [timestampIdUpdate], [timestampPanUpdate], [lastLockReason], [authToken], [gsAuthToken], [lockedRupees], [lockedCoins]) VALUES (-11, N'BOT_PLAYER_2',  N'27AD3C8F44F3F4B16D542CCFBDB14CD60D0F75A4B6986D677136C15FB11D26A8E01805', N'bot2@jungleegames.com', 38, 1, CAST(N'2016-04-04 16:22:30.420' AS DateTime), CAST(N'2016-04-14 18:51:36.323' AS DateTime), 0, 0, 0, 0, 0, NULL, NULL, 6, NULL, 0, N'', 0, 0, 0, 25, NULL, N'JUNGLEERUMMY', NULL, N'', N'127.0.0.1', 0.0000, 0.0000, 0.0000, NULL, 0.0000, NULL, 0.0000, NULL, 0.0000, NULL, 0.0000, 0, 0, 0, 0, 0, 0, 0.0000, 0.0000, N'asdf', 0, 26, N'127.0.0.1', NULL, 0.0000, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, N'web', 1, CAST(N'2016-04-14 18:51:36.323' AS DateTime), NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, 0, NULL, NULL, 0, NULL, NULL, NULL, NULL, 0, 0, NULL, NULL, N'', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, N'7zKMjYQo38u5vunFo9yd9Eiq4vW7k4Fx4ZxWrs1j', N'Tu79FwiPnNQI6eqxftKLLpyrntgXLlsX02C2bj4W', 0.0000, 0.0000);
			INSERT [dbo].[Users] ([userID], [username], [password], [email], [stateID], [emailOptIn], [registerDate], [lastLoginDate], [currencyRupees], [currencyCoins], [currencyGold], [xpCash], [xpSocial], [xpBonusTimeCash], [xpBonusTimeSocial], [avatarId], [lastCoinReload], [emailVerified], [passwordResetCode], [locked], [loginAttempts], [isBot], [unverifiedLogins], [giftPath], [socialNetwork], [socialNetworkID], [mobileNumber], [registerIPAddress], [totalDeposits], [totalWithdrawals], [totalRake], [firstDepositDate], [firstDepositAmount], [lastDepositDate], [lastDepositAmount], [firstWithdrawalDate], [firstWithdrawalAmount], [lastWithdrawalDate], [lastWithdrawalAmount], [totalDepositsCount], [totalWithdrawalsCount], [totalCashGamesWon], [totalFreeGamesWon], [totalCashGamesLost], [totalFreeGamesLost], [totalCashAmountWon], [totalCashAmountLost], [adKey], [friendReferral], [totalLoginCount], [lastLoginIP], [lastCashGamePlayed], [totalCashBonus], [firstCashGamePlayed], [lastAdKeyStamp], [firstFreeGamePlayed], [lastFreeGamePlayed], [ChatAllowed], [emailVerificationLink], [mobileVerified], [mobileVerificationTimestamp], [userDeviceType], [smsOptIn], [lastOnlineTime], [FirstName], [LastName], [DateOfBirth], [Address], [Address2], [City], [PIN], [ContactDetailsUpdatedTime], [isFraud], [pancardImagePath], [PanVerificationStatus], [panCardNumber], [uploadCount], [panRejectionReason], [fraudStatus], [fraudPronity], [fraudType], [AddressProofType], [AddressProofText], [AddressProofImagepath], [AddressProofStatus], [AddressProofUploadCount], [AddressProofReason], [timestampAddressUpdate], [Source], [IdProofType], [IdProofText], [IdProofImagePath], [IdProofStatus], [IdProofReason], [timestampIdUpdate], [timestampPanUpdate], [lastLockReason], [authToken], [gsAuthToken], [lockedRupees], [lockedCoins]) VALUES (-12, N'BOT_PLAYER_3',  N'27AD3C8F44F3F4B16D542CCFBDB14CD60D0F75A4B6986D677136C15FB11D26A8E01805', N'bot3@jungleegames.com', 38, 1, CAST(N'2016-04-04 16:22:30.420' AS DateTime), CAST(N'2016-04-14 18:51:36.323' AS DateTime), 0, 0, 0, 0, 0, NULL, NULL, 6, NULL, 0, N'', 0, 0, 0, 25, NULL, N'JUNGLEERUMMY', NULL, N'', N'127.0.0.1', 0.0000, 0.0000, 0.0000, NULL, 0.0000, NULL, 0.0000, NULL, 0.0000, NULL, 0.0000, 0, 0, 0, 0, 0, 0, 0.0000, 0.0000, N'asdf', 0, 26, N'127.0.0.1', NULL, 0.0000, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, N'web', 1, CAST(N'2016-04-14 18:51:36.323' AS DateTime), NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, 0, NULL, NULL, 0, NULL, NULL, NULL, NULL, 0, 0, NULL, NULL, N'', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, N'7zKMjYQo38u5vunFo9yd9Eiq4vW7k4Fx4ZxWrs1j', N'Tu79FwiPnNQI6eqxftKLLpyrntgXLlsX02C2bj4W', 0.0000, 0.0000);
			INSERT [dbo].[Users] ([userID], [username], [password], [email], [stateID], [emailOptIn], [registerDate], [lastLoginDate], [currencyRupees], [currencyCoins], [currencyGold], [xpCash], [xpSocial], [xpBonusTimeCash], [xpBonusTimeSocial], [avatarId], [lastCoinReload], [emailVerified], [passwordResetCode], [locked], [loginAttempts], [isBot], [unverifiedLogins], [giftPath], [socialNetwork], [socialNetworkID], [mobileNumber], [registerIPAddress], [totalDeposits], [totalWithdrawals], [totalRake], [firstDepositDate], [firstDepositAmount], [lastDepositDate], [lastDepositAmount], [firstWithdrawalDate], [firstWithdrawalAmount], [lastWithdrawalDate], [lastWithdrawalAmount], [totalDepositsCount], [totalWithdrawalsCount], [totalCashGamesWon], [totalFreeGamesWon], [totalCashGamesLost], [totalFreeGamesLost], [totalCashAmountWon], [totalCashAmountLost], [adKey], [friendReferral], [totalLoginCount], [lastLoginIP], [lastCashGamePlayed], [totalCashBonus], [firstCashGamePlayed], [lastAdKeyStamp], [firstFreeGamePlayed], [lastFreeGamePlayed], [ChatAllowed], [emailVerificationLink], [mobileVerified], [mobileVerificationTimestamp], [userDeviceType], [smsOptIn], [lastOnlineTime], [FirstName], [LastName], [DateOfBirth], [Address], [Address2], [City], [PIN], [ContactDetailsUpdatedTime], [isFraud], [pancardImagePath], [PanVerificationStatus], [panCardNumber], [uploadCount], [panRejectionReason], [fraudStatus], [fraudPronity], [fraudType], [AddressProofType], [AddressProofText], [AddressProofImagepath], [AddressProofStatus], [AddressProofUploadCount], [AddressProofReason], [timestampAddressUpdate], [Source], [IdProofType], [IdProofText], [IdProofImagePath], [IdProofStatus], [IdProofReason], [timestampIdUpdate], [timestampPanUpdate], [lastLockReason], [authToken], [gsAuthToken], [lockedRupees], [lockedCoins]) VALUES (-13, N'BOT_PLAYER_4',  N'27AD3C8F44F3F4B16D542CCFBDB14CD60D0F75A4B6986D677136C15FB11D26A8E01805', N'bot4@jungleegames.com', 38, 1, CAST(N'2016-04-04 16:22:30.420' AS DateTime), CAST(N'2016-04-14 18:51:36.323' AS DateTime), 0, 0, 0, 0, 0, NULL, NULL, 6, NULL, 0, N'', 0, 0, 0, 25, NULL, N'JUNGLEERUMMY', NULL, N'', N'127.0.0.1', 0.0000, 0.0000, 0.0000, NULL, 0.0000, NULL, 0.0000, NULL, 0.0000, NULL, 0.0000, 0, 0, 0, 0, 0, 0, 0.0000, 0.0000, N'asdf', 0, 26, N'127.0.0.1', NULL, 0.0000, NULL, NULL, NULL, NULL, 1, NULL, 0, NULL, N'web', 1, CAST(N'2016-04-14 18:51:36.323' AS DateTime), NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, 0, NULL, 0, NULL, NULL, 0, NULL, NULL, NULL, NULL, 0, 0, NULL, NULL, N'', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, N'7zKMjYQo38u5vunFo9yd9Eiq4vW7k4Fx4ZxWrs1j', N'Tu79FwiPnNQI6eqxftKLLpyrntgXLlsX02C2bj4W', 0.0000, 0.0000);
			Set Identity_Insert users Off
		</sql>
	</changeSet> 

	 <changeSet id="jwr-alter-deposit-transactions-table-column" author="ShashankSingh">
		<comment>alter promocode column of deposit transactions</comment>
		<sql>
			ALTER TABLE [dbo].[DepositTransactions]
			ALTER COLUMN promoCode varchar(25)
		</sql>
	 </changeSet>
	<changeSet id="jwr-db-webengage-cfg" author="Nidhi">
		<comment>Adding webengage api configurable values</comment>
		<sql>
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'apilink', 'https://api.webengage.com/v1/accounts/', 1, 'text', 'webengage API link')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'licensecode', '11b5651d0', 1, 'text', 'webengage license code')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'apikey', '225224b4-88dc-42a7-a6c2-06de2a2ee997', 1, 'text', 'webengage API Key')
		</sql>
	</changeSet>

	<changeSet id="jwr-create-webengage-attributes-table" author="Nidhi">
		<comment>Adding webengage api configurable values</comment>
		<sql>
			CREATE TABLE [Dump_Tables]..[WebEngageUserAttributes](
		    [userId] [int] NOT NULL,
		    [ApkRake] [money] NULL,
		    [MobileRake] [money] NULL,
		    [WebRake] [money] NULL,
		    [WebH5Rake] [money] NULL,
		    [TournamentsPlayed] [int] NULL,
		    [TournamentsRake] [money] NULL,
		    [LastActiveDevicetype] [varchar](20) NULL) ON [PRIMARY]

		</sql>
	</changeSet> 
	<changeSet id="jwr-contextual-promotion-table" author="Arjun">
		<comment>contextual-Promotion table</comment>
		<sql>
			IF OBJECT_ID('ContextualPromotion') IS NULL
			BEGIN
				CREATE TABLE [dbo].[ContextualPromotion](
					[CashbackId] [bigint] IDENTITY(1,1) NOT NULL,
					[PromotionName] [nvarchar](100) NOT NULL,
					[StartDate] [datetime] NOT NULL,
					[EndDate] [datetime] NOT NULL,
					[PromotionType] [int] NOT NULL,
					[MinDepositAmount] [money] NULL,					
					[MonthDays] [VARCHAR](50) NULL,
					[StartTime] [VARCHAR](20) NULL,
					[EndTime] [VARCHAR](20) NULL,
					[PlatformType] [VARCHAR](30) NOT NULL,
					[EntryFeeFrom] [money] NOT NULL,
					[EntryFeeTo] [Money] NOT NULL,
					[IsEnabled] [bit] NULL,
					[CreatedDate] [datetime] NULL,
					[UpdatedDate] [datetime] NULL,	
				 CONSTRAINT [PK_ContextualPromotion] PRIMARY KEY CLUSTERED 
				(
					[CashbackId] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY]
			END	
		</sql>
	</changeSet>		
	<changeSet id="jwr-winner-cashback-promotion-table" author="Rohan">
		<comment>Winner Cashback Promotion table</comment>
		<sql>
			IF OBJECT_ID('WinnerCashbackPromotion') IS NULL
			BEGIN
				CREATE TABLE [dbo].[WinnerCashbackPromotion](
					[id] [int] IDENTITY(1,1) NOT NULL,
					[name] [nvarchar](100) UNIQUE NOT NULL,
					[startdate] [date] NOT NULL,
					[enddate] [date] NOT NULL,
					[minimumdeposit] [money] NOT NULL,
					[platforms] [varchar](100) NOT NULL,
					[frequency] [int] NOT NULL,
					[frequencyvalue] [varchar](500) NOT NULL,
					[criteria][int] not null,
					[prizestages][varchar](200) not null,	
					[UpdatedDate] [datetime] not NULL,
					[enabled] [bit] not NULL default((0)),
				 CONSTRAINT [PK_WinnerCashbackPromotion] PRIMARY KEY CLUSTERED 
				(
					[id] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY]
			END
		</sql>
	 </changeSet>
	 <changeSet id="jwr-contextual-promotion-gamerange-table" author="Arjun">
		<comment>contextual-Promotion-gamerange-table</comment>
		<sql>
			IF OBJECT_ID('ContextualPromotionGameRange') IS NULL
			BEGIN
				CREATE TABLE [dbo].[ContextualPromotionGameRange](
					[ContextualPromotionGameRangeId] [bigint] IDENTITY(1,1) NOT NULL,
					[CashbackId] [bigint] NOT NULL,
					[CashGameFrom] [INT] NOT NULL,
					[CashGameTo] [INT] NOT NULL,
					[CashbackAmount] [money] NOT NULL,	
				 CONSTRAINT [PK_ContextualPromotionGameRange] PRIMARY KEY CLUSTERED 
				(
					[ContextualPromotionGameRangeId] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY]
			END
		</sql>
	 </changeSet>
	 <changeSet id="jwr-add-table-contextual-promotion-job-run-history" author="Arjun">
		<comment>add-table-contextual-promotion-job-run-history</comment>
		<sql>
			IF OBJECT_ID('ContextualRunHistory') IS NULL
			BEGIN
				CREATE TABLE [dbo].[ContextualRunHistory](
					[Id] [bigint] IDENTITY(1,1) NOT NULL,
					[CashbackId] [bigint] NULL,
					[LastRunDate] [date] NULL,
				 CONSTRAINT [PK_ContextualRunHistory] PRIMARY KEY CLUSTERED 
				(
					[Id] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY]
			END			
		</sql>
	 </changeSet>
	<changeSet id="leaderboard-enhancements" author="Nilesh">
		<comment>Creating new tables for Leaderboard</comment>
		<sql>
			CREATE TABLE [dbo].[Leaderboard](
				[LeaderboardId] [bigint] IDENTITY(1,1) PRIMARY KEY,
				[LeaderboardName] [varchar](250) NOT NULL,
				[StartTime] [datetime] NOT NULL,
				[EndTime] [datetime] NOT NULL,
				[CreatedTime] [datetime] NOT NULL,
				[PrizeType] [smallint] NOT NULL,
				[RuleType] [smallint] NOT NULL,
				[Fullfilled] [bit] NOT NULL,
				[PrizePool] [money] NOT NULL,
				[PointValue] [int] NOT NULL,
				[MinDeposit] [money] NOT NULL,
				[IsProRata] [bit] NOT NULL,
				[Completed] [bit] NOT NULL,
				[ScheduleType] [smallint] NOT NULL
			 );

			CREATE TABLE [dbo].[LeaderboardResultArchive](
				[rowid] [bigint] IDENTITY(1,1) NOT NULL,
				[leaderboardId] [bigint] NULL,
				[userid] [int] NULL,
				[username] [varchar](15) NULL,
				[usernetwork] [varchar](50) NULL,
				[points] [money] NULL,
				[rank] [int] NULL,
				[amountwon] [money] NULL,
			PRIMARY KEY CLUSTERED 
			(
				[rowid] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY],
			 CONSTRAINT [LeaderboardResultArchive_Unique] UNIQUE NONCLUSTERED 
			(
				[leaderboardId] ASC,
				[userid] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]

			
			CREATE TABLE [dbo].[LeaderboardPrizeList](
				[id] [bigint] IDENTITY(1,1) PRIMARY KEY,
				[leaderboardId] [bigint] NOT NULL,
				[prizeRank] [int] NOT NULL,
				[amount] [money] NOT NULL
			);
		 </sql>
	</changeSet>
	<changeSet id="jwr-create-DefaultEntryFees-table-and-default-values" author="Mayank">
		<comment>Adding DefaultEntryFees table and its default values</comment>
		<sql>
			IF OBJECT_ID('dbo.DefaultEntryFees') IS NULL
    		BEGIN		
				CREATE TABLE DefaultEntryFees (
					ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
					USERCATEGORY varchar(10) not null DEFAULT 'VIP0',
					POINT varchar(10) not null DEFAULT '0',
					POOL101 varchar(10) not null DEFAULT '0',
					POOL201 varchar(10) not null DEFAULT '0',
					POOL varchar(10) not null DEFAULT '0',
					DEAL varchar(10) not null DEFAULT '0',
					POINT21 varchar(10) not null DEFAULT '0',
					POINT10 varchar(10) not null DEFAULT '0',
					PLATFORM varchar(10) not null DEFAULT 'web' 
				)
	
				insert into DefaultEntryFees values ('VIP1', '3200',	'0',	'0', 	'1000', '2000', '2000', '0',  'web')
				insert into DefaultEntryFees values ('VIP2', '1600',	'0',	'0', 	'1000', '1000', '1000',	'0',  'web')
				insert into DefaultEntryFees values ('VIP3', '800', 	'0',	'0', 	'500', 	'500', 	'500', 	'0',  'web')
				insert into DefaultEntryFees values ('VIP4', '400', 	'0',	'0', 	'100',	'100', 	'100', 	'0',  'web')
				insert into DefaultEntryFees values ('VIP5', '160', 	'0',	'0', 	'100', 	'100', 	'100', 	'0',  'web')
				insert into DefaultEntryFees values ('VIP6', '80',  	'0',	'0', 	'50', 	'50', 	'20', 	'0',  'web')
				insert into DefaultEntryFees values ('VIP0', '80',  	'0',	'0', 	'50', 	'50',	'10', 	'0',  'web')
	
				insert into DefaultEntryFees values ('VIP1', '3200',  	'1000',	'1000', '0', '2000', '0', '0', 'mob')
				insert into DefaultEntryFees values ('VIP2', '1600',  	'1000',	'1000', '0', '1000', '0', '0', 'mob')
				insert into DefaultEntryFees values ('VIP3', '800',  	'500',	'500', '0', '500', '0', '0', 'mob')
				insert into DefaultEntryFees values ('VIP4', '400',  	'100',	'100', '0', '100', '0', '0', 'mob')
				insert into DefaultEntryFees values ('VIP5', '160',  	'100',	'100', '0', '100', '0', '0', 'mob')
				insert into DefaultEntryFees values ('VIP6', '80',  	'50',	'50', '0', '50', '0', '0', 'mob')
				insert into DefaultEntryFees values ('VIP0', '80',  	'50',	'50', '0', '50', '0', '0', 'mob')
			END;

		</sql>
	</changeSet>

	<changeSet id="jwr-db-defaultentryfees-GeneralConfiguration" author="Mayank">
		<comment>Adding default entry fees configurable values</comment>
		<sql>
			INSERT into [dbo].[GeneralConfiguration] ([configKey], [configValue], [usedFor]) VALUES ('defaultentryfees_noofgames', '5', 'No of last played games to calculate def entryfee')
			INSERT into [dbo].[GeneralConfiguration] ([configKey], [configValue], [usedFor]) VALUES ('defaultentryfees_enabled', '0', 'Calculate default entryfee based on played games')
		</sql>
	</changeSet>
	

	<changeSet id="jwr-tournament-schedules-archive-cancelled" author="Mirek">
		<sql>
			ALTER TABLE [dbo].[TournamentSchedules] ADD [archiveCancelled] [int] NOT NULL DEFAULT ((0));
			UPDATE [dbo].[TournamentSchedules] SET [archiveCancelled] = [hideInLobby];
		</sql>
	</changeSet>
	
	<changeSet id="jwr-tournaments-archive-cancelled" author="Mirek">
		<sql>
			ALTER TABLE [dbo].[Tournaments] ADD [archiveCancelled] [int] NOT NULL DEFAULT ((0));
			UPDATE [dbo].[Tournaments] SET [archiveCancelled] = [stayInLobbyMinutesAfterEnd];
		</sql>
	</changeSet>

	<changeSet id="jwr-RG-limits-auto-change" author="Nilesh">
  		<comment>Add new columns to detect if user has manually decreased his limits</comment>
  		<sql>
			ALTER TABLE [dbo].[Users] ADD 
			[isDailyLimitDecreased] [bit] NOT NULL DEFAULT((0)), 
			[isMonthlyLimitDecreased] [bit] NOT NULL DEFAULT((0))
		</sql>
	</changeSet>	
	<changeSet id="jwr-RG-limits-auto-change2" author="Nilesh">
  		<comment>Add new table to log changes in user's deposit limits</comment>
  		<sql>
			CREATE TABLE [dbo].[UserDepositLimitsChangeLog](
			[logId] [bigint] IDENTITY(1,1) PRIMARY KEY,
			[userId] [int] NULL,
			[dailyDepositLimit] [money] NULL,
			[monthlyDepositLimit] [money] NULL,
			[maxDailyDepositLimit] [money] NULL,
			[maxMonthlyDepositLimit] [money] NULL,
			[changeReason] [varchar] (100),
			[vipCatrgory] [int] NULL,
			[changeTime] [datetime] NOT NULL)
		</sql>
	</changeSet>
	<changeSet id="jwr-RG-limits-auto-change3" author="Nilesh">
  		<comment>Add new column to users table to identify limit set by admin</comment>
  		<sql>
			ALTER TABLE [dbo].[Users] ADD 
			[adminUpdatedDepositLimits] [bit] NOT NULL DEFAULT((0))
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-leaderboard-cfg" author="Nilesh">
    	<comment>Setting leaderboard config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardv2', 'leaderboard.starthour1', '0', 1, 'number:0:24:1', 'Vip Scheduler Start Hour. Takes values from 0 to 24')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardv2', 'leaderboard.starthour2', '12', 1, 'number:0:24:1', 'Vip Scheduler Start Hour. Takes values from 0 to 24')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardv2', 'leaderboard.repeatinterval', '86400000', 1, 'number:1:86400000:1', 'Repeat Interval for the scheduled task')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardv2', 'leaderboard.fetchonstart.enabled','true','1','bool', 'Enables/Disables fetching of leaderboard data whenever leaderboard server starts');
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-leaderboard-cfg2" author="Nilesh">
    	<comment>Setting leaderboard config cont..</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardv2', 'leaderboard.starthour1.minutes', '15', 1, 'number:0:59:1', 'Leaderboard Scheduler Start Minutes. Takes values from 0 to 59')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardv2', 'leaderboard.starthour2.minutes', '15', 1, 'number:0:59:1', 'Leaderboard Scheduler Start Minutes. Takes values from 0 to 59')
    	</sql>
    </changeSet>


	<changeSet id="jwr-transactiontype-leaderboard" author="Nilesh">
		<comment>Add transaction type for leaderboard prizes to DB</comment>
		<sql>
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'LEADERBOARD_PRIZES', 67)
		</sql>
	</changeSet>

	<changeSet id="jwr-db-addmore-webengage-cfg" author="Nidhi">
		<comment>Adding webengage email/sms webhook configurable values and PRP account details</comment>
		<sql>
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'emailnotificationwebhook', '/webengage/email-notification', 1, 'text', 'webengage notification webhook')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'emailnotificationurl', 'http://et.webengage.com/tracking/', 1, 'text', 'webengage notification url')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'emailwebhook', '/webengage/email-webhook', 1, 'text', 'webengage email webhook')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'emailwebhookauthkey', '', 1, 'text', 'This is the key to authenticate if request coming from web engage')
			
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'smsnotificationwebhook', '/webengage/sms-notification', 1, 'text', 'webengage sms notification webhook')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'smsnotificationurl', 'http://et.webengage.com/tracking/', 1, 'text', 'webengage sms notification url')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'smswebhook', '/webengage/sms-webhook', 1, 'text', 'webengage sms webhook')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'smswebhookauthkey', '', 1, 'text', 'This is the key to authenticate if request coming from web engage')
			
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'falconideapilink', 'http://api.falconide.com/v4/sendEmail', 1, 'text', 'falconide API link')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'falconideapikey', 'd839836621c3c1776d82589e5cb9aba1', 1, 'text', 'falconide API key')
			
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'secretkey', 'qkjll5@2md3gs5@g', 1, 'text', 'secret key use for encrytion')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'ivparamKey', 'qkjl$#hjkl87s5@f', 1, 'text', 'IV param key')
			
			
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'prpusername', 'jungleegames', 1, 'text', 'PRP account username')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'prppassword', 'f@6Ym!7E', 1, 'text', 'PRP account password')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'senderId', 'JRUMMY', 1, 'text', 'PRP account Sender Id')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'prpapilink', 'http://103.250.30.4/SendSMS/sendmsg.php?', 1, 'text', 'PRP SMS API link')
			
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-kafka-gamelog-publisher-cfg" author="Nidhi">
         <comment>Setting kafka gamelog Publsiher config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogpublisher', 'enablegamelogs', 'false', 1, 'bool', 'Enable/Disable game Logs')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogpublisher', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkagamelogpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
             </sql>
     </changeSet>
    
	<changeSet id="jwr-create-AddCashDepositLimits" author="Nilesh">
     	<comment>Create table AddCashDepositLimits for Responsile Gaming</comment>
		<sql>
			 create table AddCashDepositLimits
			([key] varchar(100) NOT NULL PRIMARY KEY,
			[value] varchar(100));
		</sql>
     </changeSet>
     
     <changeSet id="jwr-insert-AddCashDepositLimits" author="Nilesh">
     	<comment>Inserting into AddCashDepositLimits for Responsile Gaming</comment>
		<sql>
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.NON VIP.daily', N'25000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.NON VIP.monthly', N'75000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.NON VIP.oneTimeMax', N'5000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.NON VIP.oneTimeMin', N'25')
			
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 1.daily', N'200000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 1.monthly', N'1500000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 1.oneTimeMax', N'60000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 1.oneTimeMin', N'25')
			
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 2.daily', N'180000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 2.monthly', N'1000000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 2.oneTimeMax', N'50000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 2.oneTimeMin', N'25')
			
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 3.daily', N'120000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 3.monthly', N'500000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 3.oneTimeMax', N'40000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 3.oneTimeMin', N'25')
			
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 4.daily', N'80000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 4.monthly', N'350000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 4.oneTimeMax', N'30000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 4.oneTimeMin', N'25')
			
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 5.daily', N'60000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 5.monthly', N'200000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 5.oneTimeMax', N'20000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 5.oneTimeMin', N'25')
			
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 6.daily', N'40000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 6.monthly', N'100000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 6.oneTimeMax', N'10000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.VIP 6.oneTimeMin', N'25')
			
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'conf.depositRestriction', N'true')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'conf.mandateKYCLimit', N'50000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'conf.graceDays', N'120')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'conf.newUserDate', N'04/10/2017')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'conf.restrictedHours', N'48')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'conf.warningLimitPercentage', N'80')
			
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'conf.firstTimeMinDeposit', N'25');
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'conf.showOneTimeMinDeposit.allPlatforms', N'true')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'conf.showFirstTimeMinDeposit.allPlatforms', N'true')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-clientlog-kafka-cfg" author="khushal">
		<sql>
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogsubscriber', 'pubsub.namespace', '', 1, 'text', 'namespace name')
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogsubscriber', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:8:2', 'partitions count')
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogsubscriber', 'enablesubscription', 'true', 1, 'bool', 'Enable/Disable Logs subscription')
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogsubscriber', 'enablelogtofile', 'false', 1, 'bool', 'Enable/Disable Logs write to file')
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogsubscriber', 'logfilelocation', '', 1, 'text', 'file location on machine')
	
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogpublisher', 'enableclientlogpublisher', 'false', 1, 'bool', 'Enable/Disable client Logs')
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogpublisher', 'pubsub.namespace', '', 1, 'text', 'kafka namespace name')
				INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaclientlogpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
		</sql>
	</changeSet>
	
	
	  <changeSet id="jwr-db-Add-staticPageAlert-mail-setting-in-cfg" author="Ritika">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'staticPageAlertsEmail', 'shashank@jungleegames.com,nidhi.kushwaha@jungleegames.com,rahul.singh@jungleegames.com,mohit@jungleegames.com,vinay@jungleegames.com,raju.jha@jungleegames.com,amit.sharma@jungleegames.com,virat@jungleegames.com,abhishek@jungleegames.com,ramesh@jungleegames.com,bharat@jungleegames.com,bharat.bhatia@jungleegames.com,ojas@jungleegames.com,kapil@jungleegames.com', 1, 'text', 'Static Page Published/Disabled Alert Email')
    	</sql>
    </changeSet>
  
	<changeSet id="jwr-db-Phonepe-PayU-Transactions-unique-key" author="Amit">
    	    <comment>Adding unique key constraint in PhonepeTransactions and PayUTransactions</comment>
		<sql>
			IF (OBJECT_ID('UK_PhonepeTransactions_orderId') IS NULL)
			BEGIN
				ALTER TABLE PhonepeTransactions add CONSTRAINT UK_PhonepeTransactions_orderId UNIQUE (OrderID)
			END
			IF (OBJECT_ID('UK_PayUTransactions_orderId') IS NULL)
			BEGIN
				ALTER TABLE PayUTransactions add CONSTRAINT UK_PayUTransactions_orderId UNIQUE (OrderID)
			END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-Add-Index-in-UserClaims-Tables" author="Nidhi">
		<sql>
			IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.UserClaims') AND NAME ='INDEX_UserClaims_UserID_ClaimType_ClaimValue_isActive')
            DROP INDEX INDEX_UserClaims_UserID_ClaimType_ClaimValue_isActive ON dbo.UserClaims;
            Create NonClustered Index INDEX_UserClaims_UserID_ClaimType_ClaimValue_isActive
            ON [dbo].[UserClaims] ([userID],[claimType],[claimValue],[isActive])
		</sql>
	</changeSet>

	<changeSet id="jwr-add-birthday-bonus-log-table-alter-1" author="ShashankSingh">
		<comment>Birthday Bonus log Table alter 1</comment>
		<sql>
			ALTER TABLE [dbo].[BirthdayBonusLog] ADD [username] [varchar] (50) NULL;
		</sql>
	 </changeSet>

	<changeSet id="jwr-db-MatchingLogic" author="Nilesh">
    	<comment>Setting matching logic config</comment>
    	<sql>
    		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('matchinglogic','tct.enabled','true','1','bool', 'Enables/Disables TCT(old logic) for join table and switch table logic');
    	</sql>
    </changeSet>

	<changeSet id="jwr-add-cashfreePayments-table" author="AmitB">
		<comment>Cashfree Payments Table</comment>
		<sql>
			IF OBJECT_ID('CashfreePayments') IS NULL
			BEGIN
            CREATE TABLE CashfreePayments
            (
              [ID] [bigint] NOT NULL IDENTITY(1,1) PRIMARY KEY,
              [TransactionID] [varchar](500),
              [OrderID] [varchar](500) NOT NULL UNIQUE,
              [Amount] [varchar](32) NOT NULL ,
              [Status] [varchar](32) NOT NULL ,
              [PaymentMode] [varchar](32) NULL ,
              [ErrorMsg] [varchar](500) NULL,
              [Timestamp] [datetime] NULL,
            )
            END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-rfm-scores-table" author="Rohan">
  		<comment>Add Rfm score Table</comment>
  		<sql>
  			IF OBJECT_ID('Dump_Tables..RFM_score') IS NULL
  			BEGIN
	  			CREATE TABLE  [Dump_Tables]..[RFM_score](
					[userid] [int] NULL,
					[ActiveDaysBreakup] [nvarchar](max) NULL,
					[ActiveDay] [bigint] NOT NULL,
					[AllPeriod] [int] NULL,
					[wager] [int] NULL,
					[FirstCashPlayed] [date] NULL,
					[lastCashGamePlayed] [date] NULL,
					[userType] [varchar](3) NOT NULL,
					[Recency] [int] NOT NULL,
					[Frequency] [float] NOT NULL,
					[Monetry] [float] NOT NULL,
					[RakeBaseLine] [float] NOT NULL,
					[Date] [date] NULL,
					[userBalance] [money] NULL
				)
				CREATE NONCLUSTERED INDEX rfm_table_index
				ON Dump_Tables..RFM_score (userid, [Date])
			END
  		</sql>
  	</changeSet>
	<changeSet id="jwr-add-rfm-cuts-table" author="Rohan">
  		<comment>Add Rfm cuts Table</comment>
  		<sql>
			IF OBJECT_ID('dbo.RFMCuts') IS NULL
			BEGIN		
			    CREATE TABLE RFMCuts (
			        ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
			        recency float   null,
			        rscore bigint  null,
			        freqeuncy float  null,
			        fscore bigint  null,
			        monetary float  null,
			        mscore bigint  null
			    )
			    insert into RFMCuts values (-1,100,null,null,null,null)
			    insert into RFMCuts values (null,null,-1,10,null,null)
			    insert into RFMCuts values (null,null,null,null,-1,5)
			    
			    insert into RFMCuts values (4,500,null,null,null,null)
			    insert into RFMCuts values (null,null,1,50,null,null)
			    insert into RFMCuts values (null,null,null,null,100,1)
			    
			    insert into RFMCuts values (7,400,null,null,null,null)
			    insert into RFMCuts values (null,null,2,40,null,null)
			    insert into RFMCuts values (null,null,null,null,500,2)
			    
			    insert into RFMCuts values (14,300,null,null,null,null)
			    insert into RFMCuts values (null,null,4,30,null,null)
			    insert into RFMCuts values (null,null,null,null,10000,3)
			    
			    insert into RFMCuts values (21,200,null,null,null,null)
			    insert into RFMCuts values (null,null,10,20,null,null)
			    insert into RFMCuts values (null,null,null,null,100000,4)
			END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-utm-params-table" author="ShashankSingh">
		<comment>Utm Params Table</comment>
		<sql>
			IF OBJECT_ID('UtmParams') IS NULL
			BEGIN
            CREATE TABLE UtmParams
            (
              [ID] [bigint] NOT NULL IDENTITY(1,1) PRIMARY KEY,
              [userid] [int] NOT NULL ,
              [utm_source] [varchar](500) NULL ,
              [utm_medium] [varchar](500) NULL ,
              [utm_campaign] [varchar](500) NULL ,
              [utm_term] [varchar](500) NULL ,
              [utm_content] [varchar](500) NULL ,
            )
            END 
		</sql>
	</changeSet>

	<changeSet id="jwr-db-payment-juspay-cfg" author="Amit">
		<comment>Enable Disable juspay</comment>
		<sql>
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payments', 'deposit.juspay.enabled', 'true', 1, 'bool', 'Enable/Disable juspay flow')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-deposittransaction-juspay" author="Amit">
        <comment>Adding column for tracking transactions routed via juspay</comment>
        <sql>
			ALTER TABLE [dbo].[DepositTransactions]
			ADD JuspayEnabled bit NOT NULL DEFAULT(0);
        </sql>
    </changeSet>

	<changeSet id="jwr-db-Add-withdrawal-flags-entries-in-cfg" author="Nidhi">
    	<comment>Setting withdrawal config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip1.user.gamewon.limit.for.flag', '60', 1, 'number:1:1000:1', 'Withdrawal vip1 user game won limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip2.user.gamewon.limit.for.flag', '50', 1, 'number:1:1000:1', 'Withdrawal vip2 user game won limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip3.user.gamewon.limit.for.flag', '45', 1, 'number:1:1000:1', 'Withdrawal vip3 user game won limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip4.user.gamewon.limit.for.flag', '40', 1, 'number:1:1000:1', 'Withdrawal vip4 user game won limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip5.user.gamewon.limit.for.flag', '35', 1, 'number:1:1000:1', 'Withdrawal vip5 user game won limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip6.user.gamewon.limit.for.flag', '30', 1, 'number:1:1000:1', 'Withdrawal vip6 user game won limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip0.user.gamewon.limit.for.flag', '20', 1, 'number:1:1000:1', 'Withdrawal vip0 user game won limit')
    		
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip1.user.gamelost.limit.for.flag', '90', 1, 'number:1:1000:1', 'Withdrawal vip1 user game lost limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip2.user.gamelost.limit.for.flag', '65', 1, 'number:1:1000:1', 'Withdrawal vip2 user game lost limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip3.user.gamelost.limit.for.flag', '55', 1, 'number:1:1000:1', 'Withdrawal vip3 user game lost limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip4.user.gamelost.limit.for.flag', '45', 1, 'number:1:1000:1', 'Withdrawal vip4 user game lost limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip5.user.gamelost.limit.for.flag', '40', 1, 'number:1:1000:1', 'Withdrawal vip5 user game lost limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip6.user.gamelost.limit.for.flag', '35', 1, 'number:1:1000:1', 'Withdrawal vip6 user game lost limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.vip0.user.gamelost.limit.for.flag', '25', 1, 'number:1:1000:1', 'Withdrawal vip0 user game lost limit')
    		
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.bad.declare.won.games.limit', '3', 1, 'number:1:1000:1', 'Withdrawal bad declare won game limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.bad.declare.loss.games.limit', '3', 1, 'number:1:1000:1', 'Withdrawal bad declare loss game limit')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.dropped.mid.or.early.percentage', '40', 1, 'number:1:100:1', 'Withdrawal dropped mid or early percentage')
    		
    		
    	</sql>
    </changeSet>
    
	<changeSet id="jwr-cfg-kyc-aws" author="Mirek">
		<sql>
			INSERT INTO cfg VALUES ('kyc', 'kyc.upload.aws.enabled', 'false', '1', 'bool', 'Enable have KYC documents to be uploaded to AWS S3 bucket');
			INSERT INTO cfg VALUES ('kyc', 'kyc.upload.azure.enabled', 'true', '1', 'bool', 'Enable have KYC documents to be uploaded to Azure blob stoarge');
			INSERT INTO cfg VALUES ('kyc', 'kyc.upload.local.enabled', 'false', '1', 'bool', 'Enable have KYC documents to be saved to local disk');
			
			INSERT INTO cfg VALUES ('aws-kyc', 'aws-kyc.bucket-name', '', '1', 'text', 'AWS S3 bucket name for storing kyc documents');
			INSERT INTO cfg VALUES ('aws-kyc', 'aws-kyc.access-key', '', '1', 'text', 'access key with read/write access to AWS S3 bucket for kyc documents');
			INSERT INTO cfg VALUES ('aws-kyc', 'aws-kyc.secret-key', '', '1', 'text', 'secret key with read/write access to AWS S3 bucket for kyc documents');
			INSERT INTO cfg VALUES ('aws-kyc', 'aws-kyc.threadpoolsize', '2', '1', 'number:1:20', 'Size of the threadpool used to upload documents to AWS S3 bucket');
			
			INSERT INTO cfg VALUES ('kyc', 'kyc.read.source', 'azure', '1', 'text', 'Specifies source from which kyc documents will be loaded. Possible values: aws or azure');
			INSERT INTO cfg VALUES ('kyc', 'kyc.container.id-proof', 'idproof', '1', 'text', 'Name of the container where id-proof documents will be uploaded');
			INSERT INTO cfg VALUES ('kyc', 'kyc.container.address-proof', 'addressproof', '1', 'text', 'Name of the container where address-proof documents will be uploaded');
			INSERT INTO cfg VALUES ('kyc', 'kyc.container.pan-card', 'pancard', '1', 'text', 'Name of the container where pan-card documents will be uploaded');
			
			DELETE FROM cfg WHERE [id] = 'azure' AND [key] = 'azure.addressproof.container.name';
			DELETE FROM cfg WHERE [id] = 'azure' AND [key] = 'azure.pancard.container.name';
			DELETE FROM cfg WHERE [id] = 'azure' AND [key] = 'azure.idproof.container.name';
		</sql>
	</changeSet>
	
	<changeSet id="jwr-cfg-kyc-aws-expiry-time" author="Gourav">
		<sql>
			INSERT INTO cfg VALUES ('aws-kyc', 'aws-kyc.url-expiry-time-in-mins', '', '1', 'text', 'Expiry time for signed URL');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-cfg-kyc-aws-build" author="Gourav">
		<sql>
			INSERT INTO cfg VALUES ('aws-kyc', 'aws-kyc.build', '', '1', 'text', 'Build type for aws');
		</sql>
	</changeSet>

	
    <changeSet id="jwr-add-user-last-trans-table-1" author="ShashankSingh">
		<comment>UserLastDepositTransaction Table</comment>
		<sql>
			IF OBJECT_ID('UserLastDepositTransaction') IS NULL
			BEGIN
            CREATE TABLE [dbo].[UserLastDepositTransaction](
				[userid] [int] NOT NULL,
				[Amount] [money] NULL,
				[BankID] [int] NULL,
				[cardToken] [varchar](100) NOT NULL default(''),
			PRIMARY KEY CLUSTERED 
			(
				[userid] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]
            END 
			
			insert into UserLastDepositTransaction
			 select userid, amount, bankId, cardToken from (
			select userid , amount, bankID, cardToken , ROW_NUMBER() over (partition by userid order by internalTransactionID desc ) rownum
			from Deposittransactions with(nolock) where pointOfExit>= 4
			) t where rownum =1 
		</sql>
	</changeSet>
	
	<changeSet id="jwr-alterTournamentTicket-addIsRedeemable " author="Ritika">
	<comment>Adding column isRedeemable to TournamentTicket</comment>
	<sql>ALTER TABLE [dbo].[TournamentTickets]
			ADD isRedeemable bit</sql>
	</changeSet>
	
	<changeSet id="jwr-db-cashfree-cfg-threadpool" author="Nidhi">
    	<comment>Adding cashfree processing threadpool size</comment>
    	<sql>
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'cashfreeProcessingThreadPool', '20', 1, 'number:1:200:1', 'cashfree processing thread pool size')
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-transactiontype-loyaltypointredemtion" author="Rohan">
		<comment>Add transaction type for Loyalty point redemption</comment>
		<sql>
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'LP_INSTANT_CASH_DISBURSE', 68)
		</sql>
	</changeSet>

	<changeSet id="jwr-Add-loyalty-point-segment-table" author="rohan">
		<comment>Add Loyalty Point Segments Table</comment>
		<sql>
			IF OBJECT_ID('LoyaltyPointSegments') IS NULL
			BEGIN
				CREATE TABLE [dbo].[LoyaltyPointSegments](
				  [id] [int] NOT NULL PRIMARY KEY,
				  [Title] [varchar] (100) NOT NULL,
				  [wagerPercentile] [float] NOT NULL,
				  [accumulationFactor] [float] NOT NULL,
				  [expiryDays] [int] NOT NULL,
				  [redemptionPerDay] [int] not null default((1)),
				  [enabled] [bit] not null default ((0)),
				  [avgWager] [money] NULL,
				  [numberOfUsers] [int] NULL,
				  [avglast10PUserPoints] [int] NULL
				) ON [PRIMARY]
			End
			else
			begin
				delete from LoyaltyPointSegments
			end
			INSERT INTO LoyaltyPointSegments
			(id, Title, wagerPercentile, accumulationFactor, expiryDays, enabled, redemptionPerDay)
			VALUES (0, 'NA', 0, 1, 90, 1, 5);
			INSERT INTO LoyaltyPointSegments
			(id, Title, wagerPercentile, accumulationFactor, expiryDays, enabled, redemptionPerDay)
			VALUES (1, 'platinum', 99, 3, 90, 1, 5 );
			INSERT INTO LoyaltyPointSegments
			(id, Title, wagerPercentile, accumulationFactor, expiryDays, enabled, redemptionPerDay)
			VALUES (2, 'diamond', 96, 2.5, 90, 1, 5);
			INSERT INTO LoyaltyPointSegments
			(id, Title, wagerPercentile, accumulationFactor, expiryDays, enabled, redemptionPerDay)
			VALUES (3, 'gold', 90, 2, 90, 1, 5);
			INSERT INTO LoyaltyPointSegments
			(id, Title, wagerPercentile, accumulationFactor, expiryDays, enabled, redemptionPerDay)
			VALUES (4, 'silver', 85 , 1.5, 90, 1, 5);
			INSERT INTO LoyaltyPointSegments
			(id, Title, wagerPercentile, accumulationFactor, expiryDays, enabled, redemptionPerDay)
			VALUES (5, 'bronze', 50, 1, 90, 1, 5);
		</sql>
	</changeSet>
	
	<changeSet id="jwr-Add-loyalty-point-redemption-packages" author="rohan">
		<comment>Add Loyalty Point Instant cash packages</comment>
		<sql>
			IF OBJECT_ID('LoyaltyPointCashRedemptionPackages') IS NULL
			BEGIN
			    CREATE TABLE [dbo].[LoyaltyPointCashRedemptionPackages](
			        [id] [int] NOT NULL IDENTITY(1,1),
			        [segmentId] [int] NOT NULL,
			        [requiredLoyaltyPoints] [int] NOT NULL,
			        [cashValue] [Money] NOT NULL,
			        [enabled] [bit] not null default ((0)),
			        CONSTRAINT pk_tbl  PRIMARY KEY (id, segmentId))
			End
		</sql>
	</changeSet>
	
	<changeSet id="jwr-Add-unique-constraints-to-loyalty-point-redemption-packages" author="rohan">
		<sql>
			ALTER TABLE LoyaltyPointCashRedemptionPackages
				  ADD CONSTRAINT LPCRP_Unique_Constraint_requiredPoints UNIQUE (segmentId, requiredLoyaltyPoints);
			ALTER TABLE LoyaltyPointCashRedemptionPackages
				  ADD CONSTRAINT LPCRP_Unique_Constraint_cashValue UNIQUE (segmentId, cashValue);				  
		</sql>
	</changeSet>
	
	<changeSet id="jwr-Add-loyalty-point-redemption-limits" author="rohan">
		<comment>Add Loyalty Point redemption limits</comment>
		<sql>
		    IF OBJECT_ID('UserLoyaltyPointsRedemptionCount') IS NULL
	        BEGIN
	            CREATE TABLE [dbo].[UserLoyaltyPointsRedemptionCount](
	                [id] [int] NOT NULL PRIMARY KEY IDENTITY(1,1),
	                [userid] [int] NOT NULL,
	                [count] [int] NOT NULL,
	                [redemptionDate] [datetime] NOT NULL
	            ) ON [PRIMARY]
	        End
		</sql>
	</changeSet>
	
	<changeSet id="jwr-Add-loyalty-point-redemption-limit-index" author="rohan">
		<sql>
		    Create NonClustered Index IX_Userloyaltypointsredemptioncount On Userloyaltypointsredemptioncount
            (redemptionDate Desc)
		</sql>
	</changeSet>
	
	<changeSet id="jwr-Add-loyalty-point-rupee-value" author="rohan">
		<comment>Add Loyalty Point rupee value</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('loyaltypointsconfig', 'loyalty.points.wager.value', '50', '0', 'number', 'rupee value of one loyalty point')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('loyaltypointsconfig', 'loyalty.points.recency.days', '90', '0', 'number', 'recency for loyalty point calculation')
		</sql>
	</changeSet>
	<changeSet id="jwr-Add-loyalty-point-email-warning-days" author="rohan">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('loyaltypointsconfig', 'loyalty.points.email.warning.days', '2', '0', 'number', 'rupee value of one loyalty point')
		</sql>
	</changeSet>
	<changeSet id="jwr-add-user-wager-table" author="rohan">
		<comment>Add user Wager Table</comment>
		<sql>
			IF OBJECT_ID('DaywiseUserWager') IS NULL
			BEGIN
				CREATE TABLE DaywiseUserWager
				(
				    date date NOT NULL,
				    userid int NOT NULL,
				    wagedamount money,
				    PRIMARY KEY (date, userid)
				)
			end
		</sql>
	</changeSet>
	
	<changeSet id="add-userid-index" author="Rohan">
		<sql>
			IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'indx_userlpcounttable_userid' AND object_id = OBJECT_ID('UserLoyaltyPointsRedemptionCount'))
			BEGIN
				CREATE NONCLUSTERED INDEX [indx_userlpcounttable_userid] ON [dbo].[UserLoyaltyPointsRedemptionCount]
				(
					[userid] DESC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			END
		</sql>
	</changeSet>
	
	 <changeSet id="jwr-db-kafka-loyalty-pubsub" author="Rohan">
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaloyaltysubscriber', 'enableloyaltypointssubscription', 'false', 1, 'bool', 'Enable/Disable loyalty points subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaloyaltysubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaloyaltysubscriber', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaloyaltysubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaloyaltysubscriber', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:8:2', 'partitions count')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaloyaltysubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')

   	     	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaloyaltypublisher', 'enableloyaltypointspublishing', 'false', 1, 'bool', 'Enable/Disable loyalty points publishing')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaloyaltypublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaloyaltypublisher', 'pubsub.namespace', '', 1, 'text', 'Azure service bus account name')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafkaloyaltypublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-add-user-loyalty-info-table" author="Rohan">
	     <sql>
		     IF OBJECT_ID('userLoyaltyInfo') IS NULL
			  BEGIN
			    create table userLoyaltyInfo (
			      id            bigint            identity (1, 1),
			      userid        bigint   not null primary key,
			      loyaltypoints int               default ((0)),
			      segment       int               default ((0)),
			      lastupdatedon datetime not null default ((getDate()))
			    )
			  end
	     </sql>
     </changeSet>
	
	<changeSet id="jwr-db-alter-userloyaltyinfo-table-for-rolling-wager" author="Rohan">
	     <sql>
		     Alter table userLoyaltyInfo add rollingWager money default ((0)) not null
	     </sql>
    </changeSet>
	
	<changeSet id="jwr-db-alter-loyaltpointsegment-table-for-rolling-wager" author="Rohan">
	     <sql>
		     ALTER TABLE LoyaltyPointSegments
			  DROP COLUMN avglast10PUserPoints;
			
			ALTER TABLE LoyaltyPointSegments
			  add avglast10PAvgWager money default((0)) not null;
	     </sql>
    </changeSet>
	
	<changeSet id="jwr-db-rename-table-adKeySourceCSVMapping-to-adKeySourceMappingTable" author="Arjun">
    	<comment>Rename table from adKeySourceCSVMapping to adKeySourceMappingTable</comment>
    	<sql>
    		IF OBJECT_ID('adKeySourceMappingTable') IS NULL
				BEGIN
					EXEC sp_rename adKeySourceCSVMapping , adKeySourceMappingTable
				END
    	</sql>
    </changeSet>

    <changeSet id="jwr-add-birthday-bonus-log-table-alter-2" author="ShashankSingh">
		<comment>Birthday Bonus log Table alter 2</comment>
		<sql>
			ALTER TABLE [dbo].[BirthdayBonusLog] ADD [revertedForCurrentYear] [bit] NOT NULL DEFAULT ((0));
		</sql>
	 </changeSet>

    
    <changeSet id="jwr-db-table-configurations-tctnewlogic" author="Mirek">
		<sql>
			ALTER TABLE [dbo].[TableConfigurations] ADD TctEnabled [bit] NOT NULL DEFAULT ((1));
		</sql>
	</changeSet>

    <changeSet id="jwr-db-alter-winnings-leaderboard" author="Ritika">
    	<comment>alter column</comment>
    	<sql>
			ALTER TABLE Leaderboard ADD isDepositBalance bit NOT NULL DEFAULT ((1));
 		</sql>
    </changeSet>
    
    <changeSet id="jwr-googleClientId-configs-prod" author="Khushal" context="prod">
	  	<comment>Set config of googleClientId for prod</comment>
	  	<sql>
			update cfg set [value] = '1082641265580-tl3rvqcuf7qushdlrehvjahpbqp29atc' where id='registration' and [key] = 'google.client.id'
		</sql>
	</changeSet>
	<changeSet id="jwr-google-id-index" author="Khushal">
	  	   <comment>Index on GoogleId Column of Users Table	</comment>
	  	   <sql>
			CREATE NONCLUSTERED INDEX [IDX_Users_GoogleId]
			ON [dbo].[Users] ([GoogleId])
			INCLUDE ([userID])
		</sql>
	</changeSet>
    <changeSet id="jwr-rename-MachineUID-Table" author="Nidhi">
		<comment>Rename table MachineUID to MachineUID_New table</comment>
	   <sql>
    		IF OBJECT_ID('MachineUID_Old') IS NULL
				BEGIN
					EXEC sp_rename MachineUID , MachineUID_Old
				END
    	</sql>
	</changeSet>
	
	 <changeSet id="jwr-create-new_MachineUID-Table" author="Nidhi">
		<comment>Rename MachineUID table</comment>
	    <sql>IF OBJECT_ID('MachineUID_New') IS NULL
	         BEGIN
	         CREATE TABLE [dbo].[MachineUID_New](
	         [sno] [bigint] PRIMARY KEY IDENTITY(1,1) NOT NULL,
	         [playerId] [int] NULL,
	         [machineID] [varchar](40) NULL,
	         [generatedDate] [datetime] NULL)
	         END
             </sql>
	</changeSet>
	
	<changeSet id="jwr-add-index-to-MachineUID_New_1" author="Nidhi">
		<comment>Indexes for MachineUID_New</comment>
		<sql>
			IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'generatedDateIndex' AND object_id = OBJECT_ID('MachineUID_New'))
            BEGIN
            CREATE NONCLUSTERED INDEX [generatedDateIndex] ON [dbo].[MachineUID_New]([generatedDate] ASC)
            END
    	</sql>
	</changeSet>
	
	<changeSet id="jwr-add-index-to-MachineUID_New_2" author="Nidhi">
		<comment>Indexes for MachineUID_New</comment>
		<sql>
			IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'MachineUID_New_machineID_generatedDateIndex' AND object_id = OBJECT_ID('MachineUID_New'))
            BEGIN
             CREATE NONCLUSTERED INDEX [MachineUID_New_machineID_generatedDate] ON [dbo].[MachineUID_New]([machineID] ASC, [generatedDate] ASC)
            END
    	</sql>
	</changeSet>
	
	<changeSet id="jwr-add-index-to-MachineUID_New_3" author="Nidhi">
		<comment>Indexes for MachineUID_New</comment>
		<sql>
			IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'MachineUID_New_playerId_generatedDateIndex' AND object_id = OBJECT_ID('MachineUID_New'))
            BEGIN
            CREATE NONCLUSTERED INDEX [MachineUID_New_playerId_generatedDateIndex] ON [dbo].[MachineUID_New]([playerId] ASC,[generatedDate] ASC)
            END
    	</sql>
	</changeSet>
	
	<changeSet id="jwr-add-index-to-MachineUID_New_4" author="Nidhi">
		<comment>Indexes for MachineUID_New</comment>
		<sql>
			IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'PlayerIDIndex' AND object_id = OBJECT_ID('MachineUID_New'))
            BEGIN
            CREATE NONCLUSTERED INDEX [PlayerIDIndex] ON [dbo].[MachineUID_New]([playerId] ASC)
            END
    	</sql>
	</changeSet>
    
    <changeSet id="jwr-add-MachineUIDView" author="Nidhi">
		<comment>Adding view to read data from Union of 2 MachineUID tables</comment>
		<sqlFile path="views/MachineUIDView.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
	</changeSet>

	<changeSet id="jwr-rename-MachineUID-View" author="Nidhi">
		<comment>Rename view MachineUID_View to MachineUID</comment>
	   <sql>
    		IF OBJECT_ID('MachineUID_View') IS NULL
				BEGIN
					EXEC sp_rename MachineUID , MachineUID_View
				END
    	</sql>
	</changeSet>
	
	<changeSet id="jwr-rename-MachineUID-Table-Again" author="Nidhi">
		<comment>Rename table MachineUID to MachineUID_Old</comment>
	   <sql>
    		IF OBJECT_ID('MachineUID_Old') IS NULL
				BEGIN
					EXEC sp_rename MachineUID , MachineUID_Old
				END
    	</sql>
	</changeSet>
	<changeSet id="jwr-rename-MachineUID-View-Again" author="Nidhi">
		<comment>Rename MachineUID_View to MachineUID</comment>
	   <sql>
    		IF OBJECT_ID('MachineUID') IS NULL
				BEGIN
					EXEC sp_rename MachineUID_View , MachineUID
				END
    	</sql>
	</changeSet>
	
	<changeSet id="jwr-db-Add-withdrawal-mobileVerification-in-cfg" author="Yugantar">
    	<comment>Adding mobile verification in withdrawal </comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.mobile.verification.flag', 'false', 1, 'bool', 'enable/disable mobile verification flag')
    	</sql>
    </changeSet>
	
		<changeSet id="jwr-leaderboard-isDepositBalanceValueUpdate" author="Ritika">
		<comment>Updating isDepositBalance value for existing configs</comment>
	  	 <sql>
    			UPDATE Leaderboard set isDepositBalance=0;
    	</sql>
	</changeSet>

	 <changeSet id="jwr-db-gamestats-publisher-cfg" author="AmitB">
         <comment>Setting gamestats Publsiher config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatspublisher', 'enablegamestats', 'false', 1, 'bool', 'Enable/Disable game stats')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatspublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatspublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatspublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
             </sql>
      </changeSet>

     <changeSet id="jwr-db-gamestats-subscriber-cfg" author="AmitB">
     	<comment>Setting gamestats Subscriber config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatssubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable game stats subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatssubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatssubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatssubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatssubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatssubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gamestatssubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	</sql>
     </changeSet>

	<changeSet id="jwr-add-desc-to-promocodes" author="Akshit">
	   <sql>
    		ALter Table PROMOCODES add  
    			description varchar(100) default((''))
    	</sql>
	</changeSet>

	 <changeSet id="sp-GetPlayerFirstDepositAmount" author="khushal" runOnChange="true">
        <sqlFile path="storedprocedures/GetPlayerFirstDepositAmount.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
	<changeSet id="jwr-datetime-of-raf-firstdepostlimit-live" author="khushal">
    	<comment>datetime of raf firstdepostlimit live</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description])  VALUES ('registration', 'friendreferral.firstdepost.limit.time', FORMAT(GETDATE(),'yyyy-MM-dd hh:mm:ss.fff'), 1, 'text', 'datetime in "yyyy-MM-dd hh:mm:ss.fff" format when raf first deposit limit was live')
  		</sql>
    </changeSet>
    
    <changeSet id="jwr-tableconfigurations-actualSeats" author="Nilesh">
		<comment>Adding actualSeats column to TableConfigurations</comment>
		<sql>
			ALTER TABLE [dbo].[TableConfigurations] ADD [actualSeats] [tinyint] NOT NULL DEFAULT ((0));
			UPDATE [dbo].[TableConfigurations] set actualSeats = seats;
		</sql>
  	</changeSet>

    <changeSet id="jwr-alter-UserLastDepositTransaction table" author="Nidhi">
    	<comment>Add userDeviceType in in UserLastDepositTransaction</comment>
    	<sql>
    		ALTER TABLE UserLastDepositTransaction ADD userDeviceType varchar(20) NOT NULL DEFAULT((''))
  		</sql>
  	</changeSet>
  	
    <changeSet id="jwr-db-table-configs-eligibility" author="Mirek">
    	<comment>Adding eligibility to table configurations</comment>
		<sql>ALTER TABLE [TableConfigurations] ADD eligibility [text] NOT NULL DEFAULT '{"categories":["ALL"],"users":[]}'</sql>
	</changeSet>
	
    <changeSet id="jwr-db-whiteListedUsers-whiteListedBy-only" author="Ritika">
    	<comment>Add whiteListedBy column and renaming disabledDate column</comment>
    	<sql>
    		  ALTER TABLE whitelistedUsers ADD whiteListedBy varchar(50) NOT NULL DEFAULT(('NA'));
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-add-LeaderboardRegistrations" author="Ritika">
    	<comment>Add optin and entryfee column</comment>
    	<sql>
    		CREATE TABLE [dbo].[LeaderboardRegistrations](
			[leaderboardID] [bigint] NOT NULL,
			[userId] [int] NOT NULL,
			[registrationTime] [datetime] NOT NULL,
			[deviceType] [varchar](25) NOT NULL
		) 
    	
 		</sql>
    </changeSet>
    
    <changeSet id="jwr-db-add-optIn-entryfee-leaderboard" author="Ritika">
    	<comment>Add optin and entryfee column</comment>
    	<sql>
    		ALTER TABLE Leaderboard ADD isOptIn bit NOT NULL DEFAULT ((0));
			ALTER TABLE Leaderboard ADD EntryFee MONEY NOT NULL DEFAULT ((0));
    	
 		</sql>
    </changeSet>
    
    <changeSet id="jwr-db-add-TransactionType" author="Ritika">
    	<comment>Add leaderboard entry fee transation type</comment>
    	<sql>
    		INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('LEADERBOARD_ENTRY_FEE', '69')
		</sql>
    </changeSet>
		

    <changeSet id="jwr-add-rebuy-to-tournaments" author="Rohan">
    	<comment>add rebuy information to tournamentregistrations</comment>
    	<sql>
    		  alter table TournamentRegistrations add totalRebuyFeePaid money not null default((0))
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-open-native-app-config" author="khushal">
    	<comment>Add config value to enable/disable open native app banner</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'is.open.native.app.enable', 'true', 1, 'bool', 'to enable/disable open native app banner')
		</sql>
    </changeSet>
    
    <changeSet id="jwr-extnernal-api-table-creation" author="rohan">
    	<comment>Add config value to enable/disable open native app banner</comment>
    	<sql>
   		   create table externel_api_credentials(
			    id int IDENTITY PRIMARY KEY,
			    username varchar(30) UNIQUE not null,
			    [password] varchar(10) not null,
			    token varchar(256) not null default(('')),
			    last_login_timestamp datetime null,
			    last_token_generation_timestamp datetime null
			)
			
			create table externel_api_request_history(
			    request_id int IDENTITY PRIMARY KEY,
			    username varchar(30) not null,
			    request_type tinyint not null,
			    input_params text not null,
			    request_timestamp datetime not null,
			)
		</sql>
    </changeSet>
    
    <changeSet id="jwr-db-addUniqueConstraint" author="Ritika">
    	<comment> Add unique constraint in LeaderboardRegistration table</comment>
    	<sql>
    	IF OBJECT_ID('dbo.LeaderboardRegistrations_unique') IS NULL
    		BEGIN
 	   			ALTER TABLE LeaderboardRegistrations ADD CONSTRAINT LeaderboardRegistrations_unique UNIQUE (leaderboardId, userId)
    		END
		</sql>
	</changeSet>

	<changeSet id="jwr-failed-deposit-config" author="ShashankSingh">
		<comment>birthday-bonus-automation-1</comment>
		<sql>
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('failed-deposit-config','service.attempts','10','0','number:1:10000:100','Number of attempts to count to block'),
				('failed-deposit-config','service.duration','30','0','number:1:10000:100','Duration to conisder the number of attempts in mins'),
				('failed-deposit-config','service.blockduration','10','0','number:1:10000:100','Time to block in mins');
		</sql>
	 </changeSet>
	 
	 <changeSet id="jwr-failed-deposit-config-1" author="ShashankSingh">
		<comment>birthday-bonus-automation-1</comment>
		<sql>
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('failed-deposit-config','service.message','You have maxed out on Payment attempts. Please try a different Payment Method or try after some time','0','text','Message to be displayed on UI'),
				('failed-deposit-config','faileddeposit.user.nonvip.enabled','false','0','bool','Enables/Disables for NonVIP'),
				('failed-deposit-config','faileddeposit.user.vip1.enabled','false','0','bool','Enables/Disables for VIP1'),
				('failed-deposit-config','faileddeposit.user.vip2.enabled','false','0','bool','Enables/Disables for VIP2'),
				('failed-deposit-config','faileddeposit.user.vip3.enabled','false','0','bool','Enables/Disables for VIP3'),
				('failed-deposit-config','faileddeposit.user.vip4.enabled','false','0','bool','Enables/Disables for VIP4'),
				('failed-deposit-config','faileddeposit.user.vip5.enabled','false','0','bool','Enables/Disables for VIP5'),
				('failed-deposit-config','faileddeposit.user.vip6.enabled','false','0','bool','Enables/Disables for VIP6');
		</sql>
	 </changeSet>

	<changeSet id="jwr-create-raf-lb-db-tables" author="Rohan" runOnChange="true">
        <sqlFile path="modules/raf_leaderboard/db_structures.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>

 	<changeSet id="jwr-db-TournamentStats" author="Arjun">
    	<comment> Add TournamentStats table</comment>
    	<sql>
    	CREATE TABLE [dbo].[TournamentStats](
			[playerType] [varchar](50) NULL,
			[tournamentID] [int] NULL,
			[statValue] [int] NULL
			)
		</sql>
	</changeSet>
	
	<changeSet id="jwr-cashback-promotion-table" author="Arjun">
		<comment>Cashback-Promotion table</comment>
		<sql>
			IF OBJECT_ID('CashbackPromotion') IS NULL
			BEGIN
				CREATE TABLE [dbo].[CashbackPromotion](
					[CashbackId] [bigint] IDENTITY(1,1) NOT NULL,
					[PromotionName] [nvarchar](100) NOT NULL,
					[StartDate] [datetime] NOT NULL,
					[EndDate] [datetime] NOT NULL,
					[PromotionType] [int] NOT NULL,
					[MinDepositAmount] [money] NULL,
					[PercentLostAmount] [float] NULL,
					[MaxCashbackAmount] [money] NULL,
					[PromotionWillRunCount] [int] NULL,
					[PromotionRunCount] [int] NULL,
					[CreatedDate] [datetime] NULL,
					[UpdatedDate] [datetime] NULL,
					[CreatedBy] [varchar](50) NULL,
					[UpdateBy] [varchar](50) NULL,
					[IsEnabled] [bit] NULL,
					[MonthDays] [VARCHAR](50) NULL,
					[StartTime] [VARCHAR](20) NULL,
					[EndTime] [VARCHAR](20) NULL,
				 CONSTRAINT [PK_CashbackPromotion] PRIMARY KEY CLUSTERED 
				(
					[CashbackId] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY]
			END
		</sql>
	 </changeSet>
	  <changeSet id="jwr-transaction-type-promotions-cashback" author="Arjun">
		<comment>currency-lock-alert</comment>
		<sql>
			INSERT INTO [TransactionTypes]([txnName],[ttype]) VALUES ('PROMOTIONSCASHBACK','75');	
			INSERT INTO [TransactionTypes]([txnName],[ttype]) VALUES ('PROMOTIONSCONTEXTUAL','76');
			INSERT INTO [TransactionTypes]([txnName],[ttype]) VALUES ('WINNERBONUS','77');				
		</sql>
	 </changeSet>
	 <changeSet id="jwr-add-table-cashback-run-history" author="Arjun">
		<comment>add-table-cashback-run-history</comment>
		<sql>
			IF OBJECT_ID('CashbackRunHistory') IS NULL
			BEGIN
				CREATE TABLE [dbo].[CashbackRunHistory](
					[Id] [bigint] IDENTITY(1,1) NOT NULL,
					[CashbackId] [bigint] NULL,
					[LastRunDate] [date] NULL,
				 CONSTRAINT [PK_CashbackRunHistory] PRIMARY KEY CLUSTERED 
				(
					[Id] ASC
				)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY]
			END			
		</sql>
	 </changeSet>
	<changeSet id="jwr-db-alter-withdrawalStatus" author="Ritika">
    	<comment> Alter WithdrawalStatus add column agentName</comment>
    	<sql>
    	
		  ALTER TABLE WithdrawalStatus ADD AgentName VARCHAR(20) NOT NULL DEFAULT ((''));
    		
		</sql>
	</changeSet>
 
 	<changeSet id="jwr-db-ipGeoRestriction" author="Ritika">
    	<comment>Adding Restricted IP config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'gameplayIPsnotallowed', '', 1, 'text', 'IPs we are excluding to play cash games | separated')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'IPsnotallowed', '', 1, 'text', 'IPs we are excluding to allow cash related things | separated')
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-tour-gs" author="Mirek">
    	<sql>ALTER TABLE [TournamentTemplates] ADD tgs [bit] NOT NULL DEFAULT ((0))</sql>
    </changeSet>
    
	<changeSet id="jwr-db-payment-juspay-for-ccdc-cfg" author="khushal">
		<comment>Enable Disable juspay</comment>
		<sql>
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payments', 'deposit.juspay.ccdc.enabled', 'true', 1, 'bool', 'Enable/Disable juspay flow for creditcard and debitcard')
		</sql>

	</changeSet>
	<changeSet id="jwr-db-new-table-UsersWinningByGamevariant" author="Arjun">
		<comment>New Table UsersWinningByGamevariant</comment>
		<sql>
		    IF OBJECT_ID('UsersWinningByGamevariant') IS NULL
			BEGIN
				CREATE TABLE UsersWinningByGamevariant(UserId BIGINT,Pool101 MONEY,Pool201 MONEY,Points MONEY,Points21 MONEY,Deal MONEY , [Pool] MONEY,lastUpdatedDate DATETIME)
			END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-access-geolocation-flag-config" author="khushal">
    	<comment>Add config value to enable/disable access geoLocation permission</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'enable.geolocation.lat-long', 'true', 1, 'bool', 'to enable/disable (latitude-longitude) based access geolocation permission')
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'mandatory.geo.lat-long.platform', 'ipa', 1, 'text', 'add platform with comma separater')
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'enable.comparision.log', 'true', 1, 'bool', 'enable/disable comparision log')
		</sql>
    </changeSet>
    <changeSet id="jwr-db-create-GeoComparisionlog" author="khushal">
    	<comment>create table to log geo-location-log</comment>
    	<sql>
    		  IF  NOT EXISTS (SELECT * FROM sys.objects 
				WHERE object_id = OBJECT_ID(N'[dbo].[GeoComparisionlog]') AND type in (N'U'))
				BEGIN
					create table GeoComparisionlog
					(
							 ID bigint IDENTITY(1,1) NOT NULL PRIMARY KEY,
							 userID int NOT NULL,
							 gameID bigint NOT NULL DEFAULT ((0)),
							 actionAt varchar(500),
							 geoLat float,
							 geoLong float,
							 geoState varchar(50),
							 geoCity varchar(50),
							 ipState varchar(50),
							 deviceType varchar(20),
							 timestamp datetime NOT NULL default getdate()
					) 
				END

		</sql>
    </changeSet>
    <changeSet id="jwr-db-rename-GeoComparisionlog.gameID-tableInstanceID" author="khushal">
    	<comment>rename column name gameID to tableInstanceID</comment>
    	<sql>
    		  sp_rename 'GeoComparisionlog.gameID', 'tableInstanceID', 'COLUMN';
		</sql>
    </changeSet>

	<changeSet id="jwr-db-alter-table-CashfreeTransactions" author="Arjun">
    	<comment> Alter CashfreeTransactions add column acknowledged</comment>
    	<sql>    	
		  ALTER TABLE CashfreeTransactions ADD acknowledged INT;    		
		</sql>
	</changeSet>

	<changeSet id="jwr-db-alter-table-UserDepositLimitsChangeLog" author="Kunal">
    	<comment>Alter table UserDepositLimitsChangeLog, Add Column deviceType</comment>
		<sql>
			ALTER TABLE UserDepositLimitsChangeLog ADD 
			[userDeviceType] [varchar](30) NULL 
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-alter-table-KycHistory" author="Ritika">
    	<comment> Alter KycHistory add column deviceType</comment>
    	<sql>    	
		  ALTER TABLE KycHistory ADD deviceType varchar(25) NOT NULL DEFAULT((''));
		  ALTER TABLE KycHistory ADD modifiedBy varchar(25) NOT NULL DEFAULT((''));    		
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-add-VerificationStatus" author="Ritika">
    	<comment> Alter Verification status for 2 level check</comment>
    	<sql>    	
		  INSERT INTO verificationstatus VALUES ('First Approved', 4);
		  INSERT INTO verificationstatus VALUES ('Final Approved',5);    		
		</sql>
	</changeSet>
		
	<changeSet id="jwr-add-admin-mfa-config" author="Rohan">
		<sql>
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
		    	VALUES ('adminaccount', 'mfa.enabled', 'false', 0, 'bool', 'Enable/Disable Multy Factor OTP based login mechanism')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-alter-UserTournamentTickets" author="Ritika">
    	<comment> Alter UserTournamentTickets add column isBought and amount</comment>
    	<sql>   	
			ALTER TABLE UserTournamentTickets ADD isBought bit NOT NULL DEFAULT ((0));
			ALTER TABLE UserTournamentTickets ADD ticketValue MONEY NOT NULL DEFAULT ((0));
			ALTER TABLE UserTournamentTickets ADD amountFromDepositBalance MONEY NOT NULL DEFAULT ((0));
			ALTER TABLE UserTournamentTickets ADD amountFromWithdrawableBalance MONEY NOT NULL DEFAULT ((0));
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-add-TournamentTicketsConfig" author="Ritika">
    	<comment> Add TournamentTicketsConfig table</comment>
    	<sql>   	
    	 	create table TournamentTicketsConfig
			([key] varchar(100) NOT NULL PRIMARY KEY,
			[value] varchar(100));
		</sql>
	</changeSet>
	
		
	<changeSet id="jwr-db-add-TournamentTicketsSummary" author="Ritika">
    	<comment> Add TournamentTicketsSummary table</comment>
    	<sql>   	
			CREATE TABLE [dbo].[TournamentTicketsSummary](
			[tournamentId] [int] NOT NULL,
			[ticketId] [int] NOT NULL,
			[date] [date] NOT NULL,
			[baseValue] [money] NOT NULL,
			[discount] [int] NOT NULL,
			[currentValue] [money] NOT NULL
			)
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-insert-TournamentTicketsConfig" author="Nilesh">
    	<comment> Insert into TournamentTicketsConfig config</comment>
    	<sql>   	
    	 	INSERT [dbo].[TournamentTicketsConfig] ([key], [value]) VALUES (N'isEnabled', N'false')
			INSERT [dbo].[TournamentTicketsConfig] ([key], [value]) VALUES (N'tournamentId', N'')
			INSERT [dbo].[TournamentTicketsConfig] ([key], [value]) VALUES (N'timestampFrom', N'')
			INSERT [dbo].[TournamentTicketsConfig] ([key], [value]) VALUES (N'timestampTo', N'')
			INSERT [dbo].[TournamentTicketsConfig] ([key], [value]) VALUES (N'text', N'');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-TransactionType_Buy_Ticket" author="Nilesh">
    	<comment>Adding transaction types for buy Tournament ticket option</comment>
    	<sql>
    		INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('TOURNAMENT_TICKET_FEE', 70);
    		INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('TOURNAMENT_TICKET_FEE_REFUND', 71);
    	</sql>
    </changeSet>
	
	<changeSet id="jwr-db-alter-TournamentRegistrations_BuyTicket" author="Nilesh">
    	<comment> Alter TournamentRegistrations add column ticketBuyAmount</comment>
    	<sql>   	
			ALTER TABLE TournamentRegistrations ADD ticketBuyAmount MONEY NOT NULL DEFAULT ((0));
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-TransactionType_TicketPremium" author="Nilesh">
    	<comment>Adding transaction types for buy Tournament ticket option</comment>
    	<sql>
    		INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('TOURNAMENT_TICKET_PREMIUM', 72);
    		INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('TOURNAMENT_TICKET_PREMIUM_REFUND', 73);
    	</sql>
    </changeSet>
	
	<changeSet id="add-geoTable1" author="khushal">
		<sql>
		    IF  NOT EXISTS (SELECT * FROM sys.objects 
			WHERE object_id = OBJECT_ID(N'[dbo].[location_IPv4block]') AND type in (N'U'))
			
			BEGIN
			  CREATE TABLE [dbo].[location_IPv4block](
				[network] [nvarchar](500) NOT NULL,
				[geoname_id] [int] NULL,
				[registered_country_geoname_id] [int] NULL,
				[represented_country_geoname_id] [nvarchar](100) NULL,
				[is_anonymous_proxy] [int] NOT NULL,
				[is_satellite_provider] [int] NOT NULL,
				[postal_code] [nvarchar](500) NULL,
				[latitude] [float] NULL,
				[longitude] [float] NULL,
				[accuracy_radius] [int] NULL
			) ON [PRIMARY]
			END
		</sql>
	</changeSet>
	<changeSet id="add-geoTable2" author="khushal">
		<sql>
		    IF  NOT EXISTS (SELECT * FROM sys.objects 
			WHERE object_id = OBJECT_ID(N'[dbo].[locations_name]') AND type in (N'U'))
			
			BEGIN
				CREATE TABLE [dbo].[locations_name](
					[geoname_id] [int] NOT NULL,
					[locale_code] [nvarchar](50) NULL,
					[continent_code] [nvarchar](50) NULL,
					[continent_name] [nvarchar](50) NULL,
					[country_iso_code] [nvarchar](50) NULL,
					[country_name] [nvarchar](50) NULL,
					[subdivision_1_iso_code] [nvarchar](50) NULL,
					[subdivision_1_name] [nvarchar](50) NULL,
					[subdivision_2_iso_code] [nvarchar](50) NULL,
					[subdivision_2_name] [nvarchar](50) NULL,
					[city_name] [nvarchar](50) NULL,
					[metro_code] [nvarchar](1) NULL,
					[time_zone] [nvarchar](50) NULL,
					[is_in_european_union] [int] NULL
				) ON [PRIMARY]
			
			END
		</sql>
	</changeSet>
	<changeSet id="add-geoTable3" author="khushal">
		<sql>
		    IF  NOT EXISTS (SELECT * FROM sys.objects 
			WHERE object_id = OBJECT_ID(N'[dbo].[IPv6_block]') AND type in (N'U'))
			
			BEGIN
				CREATE TABLE [dbo].[IPv6_block](
					[network] [nvarchar](50) NOT NULL,
					[geoname_id] [int] NOT NULL,
					[registered_country_geoname_id] [nvarchar](50) NULL,
					[represented_country_geoname_id] [nvarchar](1) NULL,
					[is_anonymous_proxy] [int] NULL,
					[is_satellite_provider] [int] NULL,
					[postal_code] [nvarchar](50) NULL,
					[latitude] [nvarchar](50) NULL,
					[longitude] [nvarchar](50) NULL,
					[accuracy_radius] [nvarchar](50) NULL
				) ON [PRIMARY]
			
			END
		</sql>
	</changeSet>
	<changeSet id="add-index-on-geoTable" author="khushal">
		<sql>
		    IF NOT EXISTS (SELECT * FROM sys.indexes WHERE  name = 'INDX_IPv4block_geoname_id_latitude_longitude')
				BEGIN
					CREATE NONCLUSTERED INDEX [INDX_IPv4block_geoname_id_latitude_longitude] ON [dbo].[location_IPv4block]
					(
						[geoname_id] ASC,
						[latitude] ASC,
						[longitude] ASC
					)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
				END
		</sql>
	</changeSet>
	<changeSet id="add-index-on-geoTable1" author="khushal">
		<sql>
		    IF NOT EXISTS (SELECT * FROM sys.indexes WHERE  name = 'idx_location_IPv4block_latitude_longitude_geoname_id')
				BEGIN
					CREATE NONCLUSTERED INDEX [idx_location_IPv4block_latitude_longitude_geoname_id] ON [dbo].[location_IPv4block]
					(
						[latitude] ASC,
						[longitude] ASC
					)
					INCLUDE ( 	[geoname_id]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			END
		</sql>
	</changeSet>
	<changeSet id="add-index-on-geoTable2" author="khushal">
		<sql>
		    IF NOT EXISTS (SELECT * FROM sys.indexes WHERE  name = 'idx_locations_name_geoname_id_subdivision_1_name_city_name')
				BEGIN
					CREATE NONCLUSTERED INDEX [idx_locations_name_geoname_id_subdivision_1_name_city_name] ON [dbo].[locations_name]
					(
						[geoname_id] ASC
					)
					INCLUDE ( 	[subdivision_1_name],
						[city_name]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			END
		</sql>
	</changeSet>
	<changeSet id="add-index-on-geoTable3" author="khushal">
		<sql>
		    IF NOT EXISTS (SELECT * FROM sys.indexes WHERE  name = 'idx_locations_name_country_name_geoname_id')
				BEGIN
					CREATE NONCLUSTERED INDEX [idx_locations_name_country_name_geoname_id] ON [dbo].[locations_name]
					(
						[country_name] ASC
					)
					INCLUDE ( 	[geoname_id]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			END
		</sql>
	</changeSet>
	<changeSet id="jwr-db-alter-admin-user-2" author="Rohan">
    	<comment>adding password expiry to admin users</comment>
    	<sql>    	
			IF OBJECT_ID('admin_users') IS NOT NULL and 
			NOT EXISTS( SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'admin_users' AND COLUMN_NAME = 'verficationCode')
			begin
			    alter table admin_users add 
			        verficationCode VARCHAR(20) not null default(('')),
			        verficationCodeTimeStamp datetime not null default(('1970-01-01')),
			        loginOTP VARCHAR(6) not null default(('')),
			        mobilenumber VARCHAR(10) not null default((''))
			end
		</sql>
	</changeSet>
	<changeSet id="jwr-db-new-table-gamebyvariant" author="Arjun">
		<comment>New Table gamebyvariant</comment>
		<sql>
		    IF OBJECT_ID('gamebyvariant') IS NULL
			BEGIN
				CREATE TABLE gamebyvariant (userid BIGINT,entryfee MONEY,gamevariant VARCHAR(10),createdDate DATETIME DEFAULT(GETDATE()))   
			END
		</sql>
	</changeSet>
	<changeSet id="jwr-db-tournament-tab-config" author="Khushal">
		<comment>Tournament Tab Config</comment>
		<sql>
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournamenttab', 'tournamenttab.enable', 'true', 1, 'bool', 'enable/disable custom-tournament-tab-name')
		</sql>
	</changeSet>
	<changeSet id="jwr-db-tournament-tab-table" author="Khushal">
		<comment>Create Tournament Tab Table</comment>
		<sql>
		IF OBJECT_ID('TournamentsTabs') IS NULL
		BEGIN
		    Create Table TournamentsTabs(
				ID int IDENTITY(1,1) NOT NULL PRIMARY KEY,
				tabName varchar(50),
				tabOrder int,
				applicationFor varchar(60),
				isEditable bit,
				createdDate datetime default getdate()
			)
		END
		</sql>
	</changeSet>
	<changeSet id="jwr-db-tournament-tab-table-insert-default-value0" author="Khushal">
		<comment>insert-default-value</comment>
		<sql>
		    INSERT INTO [dbo].[TournamentsTabs] ([tabName],[tabOrder],[applicationFor],[isEditable],[createdDate]) VALUES ('All',0,'web,mob,pwaa,pwai,apk,psapp,ipa',0,getdate()) 
			INSERT INTO [dbo].[TournamentsTabs] ([tabName],[tabOrder],[applicationFor],[isEditable],[createdDate]) VALUES ('Cash',1,'web,mob,pwaa,pwai,apk,psapp,ipa',0,getdate()) 
			INSERT INTO [dbo].[TournamentsTabs] ([tabName],[tabOrder],[applicationFor],[isEditable],[createdDate]) VALUES ('Free',2,'web,mob,pwaa,pwai,apk,psapp,ipa',0,getdate())
 
		</sql>
	</changeSet>

	<changeSet id="jwr-db-new-table-WinnerCashbackRunHistory" author="Arjun">
		<comment>New Table WinnerCashbackRunHistory</comment>
		<sql>		   
		IF OBJECT_ID('WinnerCashbackRunHistory') IS NULL
		BEGIN
			CREATE TABLE [dbo].[WinnerCashbackRunHistory](
				[Id] [bigint] IDENTITY(1,1) NOT NULL,
				[CashbackId] [bigint] NULL,
				[LastRunDate] [date] NULL,
			 CONSTRAINT [PK_WinnerCashbackRunHistory] PRIMARY KEY CLUSTERED 
			(
				[Id] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]
		END
	</sql>
	</changeSet>
	<changeSet id="jwr-gameScoreIndicatorConfiguration" author="Chirag">
		<comment>Adding ScoreIndicator table and its default values</comment>
		<sql>
			IF OBJECT_ID('dbo.gameScoreIndicator') IS NULL
    		BEGIN		
				CREATE TABLE GameScoreIndicator (
					ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
					Category varchar(15) not null DEFAULT '',
					Type varchar(15) not null DEFAULT '',
					IsEnabled bit not null DEFAULT (0),
				)
				insert into GameScoreIndicator values ('platform', 'all', 0)
				insert into GameScoreIndicator values ('platform', 'h5', 0)
				insert into GameScoreIndicator values ('platform', 'webh5', 0)
				insert into GameScoreIndicator values ('platform', 'pwaa', 0)
				insert into GameScoreIndicator values ('platform', 'pwai', 0)
				insert into GameScoreIndicator values ('platform', 'apk', 0)
				insert into GameScoreIndicator values ('platform', 'ipa', 0)
				insert into GameScoreIndicator values ('gameType', 'points', 0)
				insert into GameScoreIndicator values ('gameType', 'pool', 0)
				insert into GameScoreIndicator values ('gameType', 'deal', 0)
				insert into GameScoreIndicator values ('gameType', 'tournament', 0)
				insert into GameScoreIndicator values ('gameVariant', 'cash', 0)
				insert into GameScoreIndicator values ('gameVariant', 'practice', 0)
			END;
		</sql>
	</changeSet>

	<changeSet id="jwr-db-tournament-schedule-config-cron" author="Mirek">
		<comment>Adding cron column to TournamentSchedules table</comment>
		<sql>ALTER TABLE TournamentSchedules ADD cron [varchar](250) NULL</sql>
	</changeSet>
	<changeSet id="jwr-db-tournament-schedule-config-start-end-dt" author="Mirek">
		<sql>
			ALTER TABLE TournamentSchedules ADD scheduleStartDateTime [datetime] NULL
			ALTER TABLE TournamentSchedules ADD scheduleEndDateTime [datetime] NULL
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-tournament-schedule-config-update-se-dates" author="Mirek">
		<sql>
			UPDATE TournamentSchedules SET scheduleStartDateTime = CAST(scheduleStartDate as datetime)
			UPDATE TournamentSchedules SET scheduleEndDateTime = CAST(scheduleEndDate as datetime) + CONVERT(datetime, '23:59:59.000')

		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-setting-to insert-gameactionlog-in-cfg" author="Nidhi">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'allowGameActionLog', 'false', 1, 'bool', 'Enable/Disable GameActionLog insertion')
    	</sql>
    </changeSet>
    
     <changeSet id="jwr-db-useraccounthistory-cfg" author="Ritika">
     	<comment>Setting useraccounthistory pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorysubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable user account history subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorysubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorysubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorysubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorysubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorysubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorysubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorypublisher', 'enableuseraccounthistory', 'false', 1, 'bool', 'Enable/Disable user account history')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorypublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorypublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorypublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
            
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-insertAllowed-useracccounthistory-cfg" author="Ritika">
    	 <comment> Allow insert in userAccountHistory table</comment>
    	 	<sql>
    	 	 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'insertInUserAccountHistory', 'true', 1, 'bool', 'Enable/Disable insert in user account history')
	  	 	</sql>
     </changeSet>

    <changeSet id="jwr-db-whitelistedUsers-addUniqueConstraint" author="Ritika">
    	<comment> Add unique constraint in Whitelisted Users table</comment>
    	<sql>
    	IF OBJECT_ID('dbo.WhitelistedUsers_unique') IS NULL
    		BEGIN
 	   			ALTER TABLE WhitelistedUsers ADD CONSTRAINT WhitelistedUsers_unique UNIQUE (userId)
    		END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-user-balanceVersion" author="Nilesh">
		<comment>add column balanceVersion to UsersTable</comment>
		<sql>
			alter table users add balanceVersion bigint not null default((0));
		</sql>
	</changeSet>
	
	<changeSet id="jwr-RupeeTrans-BalanceVersion" author="Nilesh">
		<comment>add column BalanceVersion in RupeeTransactions</comment>
		<sql>
			DECLARE @RupeeTransactionTable VARCHAR(50)
			DECLARE @SQL NVARCHAR(MAX)
			DECLARE db_cursor CURSOR
			FOR SELECT DISTINCT
					   'RupeeTransactions_'+CAST(DATEPART(year, thedate) AS VARCHAR)+'_'+RIGHT('00'+CONVERT(NVARCHAR(2), DATEPART(Month, thedate)), 2) AS datw
				FROM ExplodeDates('2018-11-01', '2020-12-01')
			OPEN db_cursor
			FETCH NEXT FROM db_cursor INTO @RupeeTransactionTable
			WHILE @@FETCH_STATUS = 0
				BEGIN
					SET @SQL = N'ALTER TABLE '+@RupeeTransactionTable+' ADD BalanceVersion BIGINT not null default((0)) '
					EXEC sp_executesql
						 @SQL
					FETCH NEXT FROM db_cursor INTO @RupeeTransactionTable
				END
			CLOSE db_cursor
			DEALLOCATE db_cursor
		</sql>
	</changeSet>

	 <changeSet id="jwr-db-geoComaprisonLog-cfg" author="Ritika">
     	<comment>Setting geoComparisonLog pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogsubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable geoComparisonLog subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogpublisher', 'enablegeocomparisonlog', 'false', 1, 'bool', 'Enable/Disable geoComparisonLog')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geocomparisonlogpublisher', 'pubsub.topic', '', 1, 'text', 'topic to subscribe')
            
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'insertInGeoComparisonLog', 'true', 1, 'bool', 'Enable/Disable insert in geoComparisonLog')
                   
     	</sql>
     </changeSet>

	 <changeSet id="jwr-db-useracticitylog-cfg" author="Nidhi">
     	<comment>Setting useractivitylog pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogsubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable user activity log subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogpublisher', 'enableuseractivitylog', 'false', 1, 'bool', 'Enable/Disable user activity log publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
            
     	</sql>
     </changeSet>
     
      <changeSet id="jwr-db-insertAllowed-useractivitylog-cfg" author="Nidhi">
    	 <comment> Allow insert in userActivityLog table</comment>
    	 	<sql>
    	 	 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'insertInUserActivityLog', 'true', 1, 'bool', 'Enable/Disable insert in user activity log')
	  	 	</sql>
     </changeSet>

	<changeSet id="jwr-db-alter-table-withdrawals" author="Ritika">
    	<comment>Adding nameMismatch column in Withdrawals</comment>
		<sql>
			ALTER TABLE [dbo].[Withdrawals] add [nameMismatch]  [bit] NULL
		</sql>
	</changeSet>

	<changeSet id="jwr-db-enable-disable-transfer-to-withdrawal-ordeposit-balance" author="Arjun">
		<comment>enable disable transfer to withdrawal ordeposit balance</comment>
		<sql>
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'enabledisabletransfertowithdrawalordepositbalance', 'true', 1, 'bool', 'enable disable transfer to withdrawal or deposit balance')
		</sql>

	</changeSet>
	

	<changeSet id="jwr-db-gameevent-cfg" author="Nilesh">
     	<comment>Setting gameevent pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventsubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable game event subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventpublisher', 'enablegameevent', 'false', 1, 'bool', 'Enable/Disable game event publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameeventpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')         
     	</sql>
    </changeSet>
 
	<changeSet id="jwr-db-UserClaimsTable-addUniqueConstraint" author="Nidhi">
    	<comment> Add unique constraint in UserClaims table</comment>
    	<sql>
    	IF OBJECT_ID('dbo.UserClaims_unique') IS NULL
    		BEGIN
 	   			ALTER TABLE UserClaims ADD CONSTRAINT UserClaims_unique UNIQUE (claimtype,claimvalue)
    		END
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-threadDelay-batchSize-cfg" author="Ritika">
    	<comment>Adding utilConfig threadDelay and batchSize</comment>
		<sql>
	    	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'threaddelay', '1000', 1, 'number:1:1000:1', 'GeoComparisonLog thread delay in ms')
	    	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'batchsize', '100', 1, 'number:1:1000:1', 'GeoComparisonLog batch size')	    
		</sql>
	</changeSet>
	
	<changeSet id="jwr-game10CardConfiguration" author="Chirag">
		<comment>Adding 10 Card config on table and its default values</comment>
		<sql>
			IF OBJECT_ID('dbo.game10CardConfiguration') IS NULL
    		BEGIN		
				CREATE TABLE Game10CardConfiguration (
					ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
					category varchar(15) not null DEFAULT '',
					type varchar(20) not null DEFAULT '',
					isEnabled bit not null DEFAULT (0),
				)
				insert into Game10CardConfiguration values ('platform', 'h5', 0)
				insert into Game10CardConfiguration values ('platform', 'webh5', 0)
				insert into Game10CardConfiguration values ('platform', 'pwaa', 0)
				insert into Game10CardConfiguration values ('platform', 'pwai', 0)
				insert into Game10CardConfiguration values ('platform', 'apk', 0)
				insert into Game10CardConfiguration values ('platform', 'ipa', 0)
				insert into Game10CardConfiguration values ('platform', 'psapp', 0)
				insert into Game10CardConfiguration values ('userType', 'vip_1', 0)
				insert into Game10CardConfiguration values ('userType', 'vip_2', 0)
				insert into Game10CardConfiguration values ('userType', 'vip_3', 0)
				insert into Game10CardConfiguration values ('userType', 'vip_4', 0)
				insert into Game10CardConfiguration values ('userType', 'vip_5', 0)
				insert into Game10CardConfiguration values ('userType', 'vip_6', 0)
				insert into Game10CardConfiguration values ('userType', 'non_vip_cash_user', 0)
				insert into Game10CardConfiguration values ('userType', 'free_cash_user', 0)
				insert into Game10CardConfiguration values ('userType', 'free_user', 0)
			END;
		</sql>
	</changeSet>

	<changeSet id="jwr-UserLoginDetails" author="ShashankSingh">
		<comment>Adding UserLoginDetails table</comment>
		<sql>
			IF OBJECT_ID('dbo.UserLoginDetails') IS NULL
    		BEGIN		
				CREATE TABLE UserLoginDetails (
					userID INT NOT NULL PRIMARY KEY,
					lastLoginDate datetime NULL,
					totalLoginCount int NOT NULL DEFAULT (0),
					lastLoginIP varchar(50) NULL,
					lastOnlineTime datetime NULL,
					loginAttempts tinyint NOT NULL DEFAULT (0)
				)
			END;
		</sql>
	</changeSet>
	<changeSet id="jwr-UserVerificationDetails" author="ShashankSingh">
		<comment>Adding UserVerificationDetails table</comment>
		<sql>
			IF OBJECT_ID('dbo.UserVerificationDetails') IS NULL
    		BEGIN		
				CREATE TABLE UserVerificationDetails (
					userID INT NOT NULL PRIMARY KEY,
					passwordResetCode varchar(40) NULL,
					emailverificationlink varchar(100) NULL, 
					emailverified bit NOT NULL DEFAULT(0), 
					verificationCodeTimeStamp datetime NULL,
					unverifiedLogins tinyint NOT NULL DEFAULT(0)
				)
			END;
		</sql>
	</changeSet>
	<changeSet id="jwr-db-alter-table-userLoyaltyInfo" author="Arjun">
    	<comment>Adding previousSegment</comment>
		<sql>
			ALTER TABLE userLoyaltyInfo 
			ADD previousSegment INT DEFAULT(0)
		</sql>
	</changeSet>
	<changeSet id="jwr-db-Adding-New-Table-ConfigureLoyaltyCommunication" author="Arjun">
    	<comment>Adding New Table ConfigureLoyaltyCommunication</comment>
		<sql>
			
			IF OBJECT_ID('dbo.ConfigureLoyaltyCommunication') IS NULL
    		BEGIN		
				CREATE TABLE ConfigureLoyaltyCommunication (
					ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
					CommunicationType varchar(15) not null DEFAULT '',
					CommunicationDay varchar(20) not null DEFAULT '',
					CommunicationTime VARCHAR(10) not null DEFAULT '',
					isEnabled bit not null DEFAULT (0),
					CreatedDate DateTime NOT NULL
				)
				
			END;
		</sql>
	</changeSet>
	<changeSet id="jwr-db-Adding-New-Table-ConfigureLoyaltyCommunicationRunHistory" author="Arjun">
    	<comment>Adding New Table ConfigureLoyaltyCommunicationRunHistory</comment>
		<sql>
			
			IF OBJECT_ID('dbo.ConfigureLoyaltyCommunicationRunHistory') IS NULL
    		BEGIN		
				CREATE TABLE ConfigureLoyaltyCommunicationRunHistory (
					ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,	
					ConfigureLoyaltyCommunicationId	INT,						
					CreatedDate Date NOT NULL,
					IsDaily int
				)
				
			END;

		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-alter-table-users" author="Ritika">
    	<comment>Adding column to gender</comment>
		<sql>
			ALTER TABLE Users add gender int NOT NULL DEFAULT((0));
		</sql>
    </changeSet>

	<changeSet id="jwr-add-gender-enum-to-db" author="Ritika">
  	<comment>add gender enum to db</comment>
  	<sql>
	  	IF OBJECT_ID('dbo.gender') IS NULL -- Check if Table Exists
			 EXEC(N' CREATE TABLE dbo.gender
				 (Gender  VARCHAR(10) NOT NULL,
				 [Value] INT NOT NULL
			  );
		')
		INSERT INTO gender VALUES ('UNDEFINED', 0);
		INSERT INTO gender VALUES ('MALE',1);
		INSERT INTO gender VALUES ('FEMALE',2);
		INSERT INTO gender VALUES ('OTHER',3);
  	</sql>
  	</changeSet>
  	
	<changeSet id="jwr-db-add-column-sharechatid" author="khushal">
    	<comment>Add Column ShareChatId</comment>
		<sql>
		IF OBJECT_ID('dbo.UserRegistrationInfo') IS NULL -- Check if Table Exists
			 EXEC(N' CREATE TABLE [dbo].[UserRegistrationInfo](
						[userId] [int] NOT NULL,
						[registerWith] [varchar](50) NOT NULL default '''',
					 CONSTRAINT [PK_UserRegistrationInfo] PRIMARY KEY CLUSTERED 
					(
						[userId] ASC
					)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
					) ON [PRIMARY];')

					alter table UserRegistrationInfo 
					add ShareChatId varchar(100) default '';
	    </sql>
	</changeSet>

	<changeSet id="jwr-web-messages-type" author="Mirek">
		<sql>
				CREATE TYPE WebMessages AS TABLE (
					[MessageTemplateId] [int],
					[ToUserId] [int],
					[FromUserId] [int],
					[MessageSubject] [varchar](100),
					[MessageContent] [varchar](1000),
					[IsMessageViewed] [tinyint],
					[TimestampCreated] [datetime],
					[TimestampViewed] [datetime],
					[validityStarts] [datetime],
					[validityEnds] [datetime],
					[IsMessageDeleted] [tinyint],
					[TimestampDeleted] [datetime]
                );
		</sql>
	 </changeSet>
	
	<changeSet id="jwr-create-raf-campaign" author="Rohan" runOnChange="true">
        <sqlFile path="modules/rafBonusCampaign/db_structures.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>

	 <changeSet id="jwr-insert-AddCashDepositLimits-vip7" author="Nilesh">
     	<comment>Inserting into AddCashDepositLimits for vip7 Responsile Gaming</comment>
		<sql>
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.NEWBIE.daily', N'25000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.NEWBIE.monthly', N'75000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.NEWBIE.oneTimeMax', N'5000')
			INSERT [dbo].[AddCashDepositLimits] ([key], [value]) VALUES (N'cat.NEWBIE.oneTimeMin', N'25')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-add-NewbieConfig" author="Nilesh">
    	<comment>Add NewbieConfig table</comment>
    	<sql>   	
    	 	create table NewbieConfig
			([key] varchar(100) NOT NULL PRIMARY KEY,
			[value] varchar(100));
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-insert-NewbieConfig" author="Nilesh">
    	<comment>Insert into NewbieConfig config</comment>
    	<sql>   	
			INSERT [dbo].[NewbieConfig] ([key], [value]) VALUES (N'noOfDays', N'7')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-DefaultEntryFees-vip7" author="Nilesh">
		<comment>Adding DefaultEntryFees for vip7</comment>
		<sql>
			insert into DefaultEntryFees values ('VIP7', '80', '0', '0', '50','50', '10', '0', 'web')
			insert into DefaultEntryFees values ('VIP7', '80', '50', '50', '0', '50','0', '0', 'mob')
		</sql>
	</changeSet>
		
	<changeSet id="jwr-db-Altertable-promocodes" author="Ritika">
    	<comment>add column ticketId in promocodes table</comment>
    	<sql>
		       ALTER TABLE Promocodes ADD [ticketId] int not null default((0));
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-alter-table-tournament-template" author="Nidhi">
    	<comment>Adding column to hold custom message for tournament</comment>
		<sql>
			ALTER TABLE TournamentTemplates add message varchar(500) NOT NULL DEFAULT((''));
		</sql>
	</changeSet>
	
	<changeSet id="jwr-create-config-for-loyalty-communication-inbox-templates" author="Arjun">
    	<comment>Create config for loyalty communication inbox templates</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('inbox', 'loyalty.welcome.messages', 'WELCOMEMESSAGE:0,EXPIRY:0,UPGRADE:0,DOWNGRADE:0,PERCENTILE:0,WEEKLY:0,EXPIRY7DAYS:0,EXPIRY1DAYS:0', 1, 'text', 'loyalty inbox templates')
		</sql>
	</changeSet>
	
	<changeSet id="Adding TP Checkout Flow config" author="Mayank">
		<comment>Inserting values for TP Checkout Flow config</comment>
		<sql>
			INSERT INTO cfg VALUES ('payments','deposit.enable.tpcheckoutflow','false','0','bool','To enable/disable checkout flow');
		</sql>
	</changeSet>
	
	<changeSet id="adding-table-fields-to-save-bankname-from-response" author="Mayank">
		<comment>Adding columns to the tables to save the bankname coming in response</comment>
		<sql>
			ALTER TABLE DepositTransactions ADD IssuerBank VARCHAR(50) NULL
			ALTER TABLE SavedCardsDetails ADD IssuerBank VARCHAR(50) NULL
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-enable-disable-cash-restricted-feature-in-freeapp" author="Khushal">
    	<comment>Adding Config to enable/disable cash restricted feature in freeApp</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'is.cash.restricted.feature.in.psapp', 'true', 1, 'bool', 'to enable/disable Cash Restricted Features in FreeApp')</sql>
	</changeSet>

	<changeSet id="jwr-db-config-for-geolocation-service" author="Nidhi">
		<comment>Configuration to hold geolcation service parameters</comment>
		<sql>
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'geoLocationAuthToken', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuYW1lIjoidGVzdHRva2VuIn0.HMSyQaWWuT64aCD5U98ii-2B3oQXwpQFEV6qrfHM9LY', 1, 'text', 'geolocation service Auth token')
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'geoLocationServiceUrl', 'https://geo.poolking.in/geolocation/search?lat=', 1, 'text', 'Geolocation service Url')
		</sql>

	</changeSet>
	<changeSet id="jwr-db-TournamentTemplates-add-tournamentTabId" author="Khushal">
		<comment>add-column-tournamentTabId</comment>
		<sql>
		    alter table TournamentTemplates
		    add tournamentTabId int not null default 0
		</sql>
	</changeSet>

	<changeSet id="jwr-add-new-entrypoints-enum-to-db" author="Chirag">
  		<comment>Adding new entrypoints enum to db</comment>
	  	<sql>
			INSERT INTO entrypoints (Status, Value) VALUES ('GAME_TABLE_CASH_GAME', 6),('GAME_TABLE_PRACTICE_GAME', 7),('GAME_TABLE_LOW_CASH', 8);
	  	</sql>
  	</changeSet>
    <changeSet id="jwr-db-add-deposit-amount-configuration-table" author="Yugantar">
        <comment>Stores deposit amount configuration</comment>
        <sqlFile path="depositAmountConfiguration.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
  	
	<changeSet id="jwr-db-add-deposit-amount-configuration-VIP7"
		author="Pushpender">
		<comment>Stores deposit amount configuration VIP7</comment>
		<sql>
			INSERT INTO DepositAmountConfiguration ( [userSegment],
			[socialNetwork],
			[amount], [bonusCodeOption], [bonusCode],
			[bonusCodeAmount],
			[instantCashbackOption], [instantCashbackAmount],
			[mostPopularTag])
			VALUES ('NEWBIE', 'JUNGLEERUMMY', 1000, 0, '', 0, 0,
			0, 1);
			INSERT INTO DepositAmountConfiguration ( [userSegment],
			[socialNetwork],
			[amount], [bonusCodeOption], [bonusCode],
			[bonusCodeAmount],
			[instantCashbackOption], [instantCashbackAmount],
			[mostPopularTag])
			VALUES ('NEWBIE', 'JUNGLEERUMMY', 200, 0, '', 0, 0, 0,
			0);
			INSERT INTO DepositAmountConfiguration ( [userSegment],
			[socialNetwork],
			[amount], [bonusCodeOption], [bonusCode],
			[bonusCodeAmount],
			[instantCashbackOption], [instantCashbackAmount],
			[mostPopularTag])
			VALUES ('NEWBIE', 'JUNGLEERUMMY', 100, 0, '', 0, 0, 0,
			0);
			INSERT INTO DepositAmountConfiguration ( [userSegment],
			[socialNetwork],
			[amount], [bonusCodeOption], [bonusCode],
			[bonusCodeAmount],
			[instantCashbackOption], [instantCashbackAmount],
			[mostPopularTag])
			VALUES ('NEWBIE', 'JUNGLEERUMMY', 50, 0, '', 0, 0, 0,
			0);

		</sql>
	</changeSet>
	
    <changeSet id="jwr-db-alter-deposit-amount-configuration-table" author="Mayank" runOnChange="false">
        <comment>Stores deposit amount configuration Source wise</comment>
        <sqlFile path="depositAmountConfigurationAlter.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
  	
  	
  	<changeSet id="jwr-add-userId-table-type" author="Nidhi">
		<comment>Adding table type for Inserting userIds</comment>
		<sql>
				CREATE TYPE UserIdTable AS TABLE
                (
                  [UserId] [bigint]
                );
		</sql>
	 </changeSet>
  	
  	<changeSet id="jwr-db-add-webengageattributes-leaderboard" author="Ritika">
    	<comment>Add webengage attributes in leaderboard table</comment>
    	<sql>
    		ALTER TABLE Leaderboard ADD enableWebengageCommunication bit NOT NULL DEFAULT ((0));
			ALTER TABLE Leaderboard ADD WebengageScheduler INT NOT NULL DEFAULT ((0));
 		</sql>
    </changeSet>
    
    <changeSet id="jwr-db-webengage-leaderboard-cfg" author="Ritika">
     	<comment>Setting leaderboardevents pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultsubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable leaderboard events subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultpublisher', 'enableleaderboardevents', 'false', 1, 'bool', 'Enable/Disable leaderboard events')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardresultpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
            
     	</sql>
     </changeSet>

  	<changeSet id="jwr-add-new-wallet-configs-vip7" author="Nilesh">
     	<comment>Add new wallet config newbie to DB</comment>
        <sql>
			INSERT INTO dbo.UserBalanceConfigs (UserCategory, Enabled, CutOffDate) VALUES('NEWBIE', 0, NULL);
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-newbie-scheduler-cfg" author="Nilesh">
    	<comment>Setting newbie scheduler config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('newbiescheduler', 'newbiescheduler.starthour', '0', 1, 'number:0:23:1', 'Newbie Scheduler Start Hour. Takes values from 0 to 23')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('newbiescheduler', 'newbiescheduler.startminutes', '5', 1, 'number:0:59:1', 'Newbie Scheduler Start Minutes. Takes values from 0 to 59')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('newbiescheduler', 'newbiescheduler.repeatintervalminutes', '1440', 1, 'number:1:1440:1', 'Repeat Interval for the scheduled task in minutes')
    	</sql>
    </changeSet>
    <changeSet id="jwr-failed-deposit-newbie" author="Nilesh">
		<comment>failedeposit-user-newbie</comment>
		<sql>
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('failed-deposit-config','faileddeposit.user.newbie.enabled','false','0','bool','Enables/Disables for VIP7');
		</sql>
	 </changeSet>
	<changeSet id="jwr-multi-table-support-newbie" author="Nilesh">
		<comment>Config for enabling/disabling multiple table support for newbie on mobile</comment>
		<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.user.newbie.enabled','false','0','bool', 'Enables/Disables multiple table support for newbie users');
		</sql>
	</changeSet>
	<changeSet id="jwr-h5visibility-newbie" author="Nilesh">
		<comment>Config for enabling/disabling h5 visibility for newbie on mobile</comment>
		<sql>
			insert into H5TableVisibilityOnWeb([key], [all], [onflashdetectionfailed]) values ('Newbie Cash Users', 0 ,0);
		</sql>
	</changeSet>
	<changeSet id="jwr-game10CardConfiguration-newbie" author="Nilesh">
		<comment>Adding 10 Card config on table for newbie</comment>
		<sql>
			 insert into Game10CardConfiguration(category, type, isEnabled) values ('userType', 'newbie_cash_user', 0);
		</sql>
	</changeSet>

    <changeSet id="jwr-db-alter-deposit-transactions-add-express-checkout" author="Yugantar">
    	<comment>Alter depositTransactions add column expressCheckout</comment>
		<sql>
			ALTER TABLE [dbo].[DepositTransactions]
			ADD ExpressCheckout bit NOT NULL DEFAULT(0);
		</sql>
    </changeSet>  
    	
  	<changeSet id="jwr-cfg-gamestartreduced" author="Nilesh">
       	<sql>
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.13c.6s.gamestartreduced',	'10000', '1', 'number:1000:120000:1000','Reduced Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.reducedGameTableStartTime','10000', '1', 'number:1000:150000:500','Default value of Reduced Game Start time');
		</sql>
     </changeSet>
     <changeSet id="jwr-increase-configParameters-gateway" author="Khushal">
       	<sql>
			ALTER TABLE Gateway ALTER COLUMN ConfigParameters VARCHAR (500);	
		</sql>
     </changeSet>
     <changeSet id="jwr-db-bonusconfig-added-wagermultiplier" author="Mayank">
     	<comment>Create table WagerMultipliersForBonus for wager multiplied Bonus calculation</comment>
     	<sql>
			CREATE TABLE WagerMultipliersForBonus (
				promoCodeID INT,
				entryFee FLOAT,
				wagerMultiplier FLOAT
			);
        </sql>
     </changeSet>
     <changeSet id="jwr-db-add-table-PromoCodeAttemptLog" author="ShashankSingh">
    	<comment>Add Table PromoCodeAttemptLog</comment>
		<sql>
			IF OBJECT_ID('dbo.PromoCodeAttemptLog') IS NULL
    		BEGIN		
				CREATE TABLE PromoCodeAttemptLog (
					ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY,
					userID INT NOT NULL DEFAULT(0),
					promoCodeID INT NOT NULL DEFAULT(0),
					vipCategory INT NOT NULL DEFAULT(0),
					attemptedTime datetime NOT NULL DEFAULT '',
					message varchar(50) not null DEFAULT '',
					code varchar(25) not null DEFAULT '',
					isApplied bit not null DEFAULT (0),
				)
			END;
	    </sql>
	</changeSet>
 	
 	<changeSet id="jwr-create-index-on-coupons" author="Mayank">
       	<sql>
			CREATE NONCLUSTERED INDEX [NonClusteredIndex-Code-UserSegment] ON [dbo].[Coupons]
			(
				[code] ASC,
				[userSegment] ASC
			)WITH (ONLINE=ON)
		</sql>
     </changeSet>	
  	
     <changeSet id="jwr-cfg-widgetConfiguration" author="Khushal">
       	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('WidgetConfiguration', 'widget.baseFolder', '/version4/promotion_', 1, 'text', 'Base CDN Folder For Widgets')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('WidgetConfiguration', 'widget.webFolder', 'widget_web', 1, 'text', 'Web App Widget Folder')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('WidgetConfiguration', 'widget.mobFolder', 'widget_mob', 1, 'text', 'Mob App Widget Folder')
    	</sql>
    </changeSet>
    <changeSet id="jwr-create-widgetConfiguration-table" author="Khushal">
       	<sql>
			IF OBJECT_ID('dbo.WidgetConfiguration') IS NULL
    		BEGIN		
				CREATE TABLE [dbo].[WidgetConfiguration](
					[Id] [int] IDENTITY(1,1) NOT NULL,
					[Name] [varchar](100) NOT NULL,
					[ImageUrl] [varchar](1000) NULL,
					[RedirectionUrl] [varchar](1000) NOT NULL,
					[TargetWindow] [varchar](10) NOT NULL,
					[Platforms] [varchar](100) NOT NULL,
					[UserSegment] [varchar](100) NOT NULL,
					[StartDate] [datetime] NOT NULL,
					[EndDate] [datetime] NOT NULL,
					[Enabled] [bit] NOT NULL,
					[Details] [varchar](500) NOT NULL,
				PRIMARY KEY CLUSTERED 
				(
					[Id] ASC
				)
				) ON [PRIMARY]
			END;
		</sql>
     </changeSet>
  	<changeSet id="jwr-alter-column-lastusedchunk" author="Mayank">
       	<sql>
       		ALTER TABLE PromoCodeUses DROP CONSTRAINT DF_PromoCodeUses_lastUsedChunk
     		ALTER TABLE PromoCodeUses ALTER COLUMN lastUsedChunk INT NOT NULL
     		ALTER TABLE PromoCodeUses ADD CONSTRAINT DF_PromoCodeUses_lastUsedChunk DEFAULT ((0)) FOR lastUsedChunk
  		</sql>
 	</changeSet>
  	<changeSet id="jwr-cfg-exp-checkout-configs" author="Mayank">
       	<sql>
			INSERT INTO cfg VALUES ('express-checkout-config', 'express.checkout.enabled.methods', '', '0', 'text', 'To store the value of enabled methods for express checkout');
			INSERT INTO cfg VALUES ('express-checkout-config', 'express.checkout.default.checked', 'false', '0', 'bool', 'To make checkbox on UI default checked');
		</sql>
    </changeSet>
    
     <changeSet id="jwr-create-index-on-whitelistedusers-enabled" author="Nidhi">
	<comment>Add Index on whitelsitedUsers-enabled-column</comment>
       	<sql>
       	IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.whitelistedUsers') AND NAME ='NonClusteredIndex_Whitelistedusers_Enabled')
        DROP INDEX NonClusteredIndex_Whitelistedusers_Enabled ON dbo.whitelistedUsers;

	    CREATE NONCLUSTERED INDEX [NonClusteredIndex_Whitelistedusers_Enabled] ON [dbo].[whitelistedUsers]
		(
				[enabled]
		)WITH (ONLINE=ON)

		</sql>
     </changeSet>
     
	<changeSet id="jwr-db-alter-UserTournamentTickets-issued" author="Nemesiss">
    	<comment> Alter UserTournamentTickets add column isIssued and amount</comment>
    	<sql>   	
			ALTER TABLE UserTournamentTickets ADD isIssued bit NOT NULL DEFAULT ((0));
		</sql>
	</changeSet>
      <changeSet id="jwr-add-TechProWithdrawals-Table" author="Nidhi">
		<comment>Table to hold TechPro transactions</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[TechProWithdrawals]') AND type in (N'U'))
            BEGIN
            CREATE TABLE [dbo].[TechProWithdrawals](
	        [TransferId] [bigint] PRIMARY KEY IDENTITY(1,1) NOT NULL,
	        [Status] [int],
	        [Description] varchar(200),
	        [TXNReferenceNo] varchar(50),
	        [WithdrawalId] [int] NOT NULL FOREIGN KEY REFERENCES Withdrawals(withdrawalID),
	        [UpdatedDate] [datetime] NOT NULL DEFAULT(GETDATE()),
	        [CreatedDate] [datetime] NOT NULL DEFAULT(GETDATE()),
			[ProcessedBy] [varchar](50) NOT NULL DEFAULT(''),
			)
			END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-withdrawal-config-enable/disable-cashfree/techpro" author="Ritika">
		<comment>Adding config in cfg to enable/disable techpro and cashfree for withdrawal</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'enable.cashfree', 'true', 1, 'bool', 'Enable/Disable cashfree for withdrawals.')
   		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'enable.techpro', 'false', 1, 'bool', 'Enable/Disable Techpro for withdrawals.')
		</sql>
	</changeSet>
	
      <changeSet id="jwr-add-TechProWithdrawalsHistory-Table" author="Ritika">
		<comment>Table to hold TechPro withdrawal hostory</comment>
		<sql>
			
            CREATE TABLE [dbo].[TechProWithdrawalsHistory](
           	[id] [bigint] PRIMARY KEY IDENTITY(1,1) NOT NULL,
	        [TransferId] [bigint] NOT NULL,
	        [Status] [int],
	        [TXNReferenceNo] varchar(50),
	        [Description] varchar(200),
	        [CreatedDate] [datetime] NOT NULL DEFAULT(GETDATE()),
			)
			
		</sql>
	</changeSet>
	
	<changeSet id="jwr-withdrawal-techpro-config" author="Ritika">
		<comment>Adding techpro config</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('techpro', 'bulkapi', 'https://www.techprocesssolutions.co.in/P2MCoreAPIGateway/PushMoneyBulk/BulkRequest', 1, 'text', 'URL for Bulk api techpro')
   		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('techpro', 'merchantId', '210952', 1, 'text', 'Merchant key for techpro')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-techpro-withdrawal-status" author="Ritika">
		<comment>Adding table to hold techpro withdrawal status</comment>
		<sql>
			IF OBJECT_ID('dbo.TechproWithdrawalStatus') IS NULL -- Check if Table Exists
			 EXEC(N' CREATE TABLE dbo.TechproWithdrawalStatus
				 (Status  VARCHAR(10) NOT NULL,
				  Description VARCHAR(50) NOT NULL,
				 [Value] INT NOT NULL
			  );
			')
			INSERT INTO TechproWithdrawalStatus VALUES ('INITIATED', 'Initiated', 0);
			INSERT INTO TechproWithdrawalStatus VALUES ('NOTDEFINED', 'N/A', 1);
			INSERT INTO TechproWithdrawalStatus VALUES ('PNYERR000', 'Upload successfull', 2);
			INSERT INTO TechproWithdrawalStatus VALUES ('PNYERR001', 'Root entity validation', 3);
			INSERT INTO TechproWithdrawalStatus VALUES ('PNYERR002', 'Data validation', 4);
			INSERT INTO TechproWithdrawalStatus VALUES ('PNYERR003', 'Insert data into DB', 5);
			INSERT INTO TechproWithdrawalStatus VALUES ('PNYERR004', 'Controller level model/Input JSON Validation', 6);
			INSERT INTO TechproWithdrawalStatus VALUES ('PNYERR005', 'Catch exception', 7);
			INSERT INTO TechproWithdrawalStatus VALUES ('PNYERR111', 'Upload Fail', 8);
			INSERT INTO TechproWithdrawalStatus VALUES ('P', 'Pending', 9);
			INSERT INTO TechproWithdrawalStatus VALUES ('S', 'Success', 10);
			INSERT INTO TechproWithdrawalStatus VALUES ('F', 'Fail', 11);
		
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-contact-invitaions" author="Ritika">
	<comment> Adding table contactInvitations</comment>
	<sql>
	
	CREATE TABLE [dbo].[ContactInvitations](
	[inviteID] [bigint] PRIMARY KEY IDENTITY(1,1) NOT NULL,
	[userID] [int] NOT NULL,
	[mobileNumber] [varchar](20) NOT NULL,
	[timestamp] [datetime] NOT NULL,
	[referredName] [varchar](255) NULL,
	[reminderEmails] [int] NOT NULL,
	[joined] [bigint] NULL,
	[paymentMade] [bigint] NULL,
	[userDeviceType] [varchar](10) NOT NULL
	)
	
	</sql>
	</changeSet>
	
	<changeSet id="jwr-db-user-contact-invitations-cfg" author="Ritika">
     	<comment>Setting usercontactinvitations pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationspublisher', 'enableusercontactinvitations', 'false', 1, 'bool', 'Enable/Disable usercontactinvitations events publishing')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationspublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationspublisher', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationspublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationssubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationssubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationssubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationssubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable usercontactinvitations events subscription')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationssubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationssubscriber', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('usercontactinvitationssubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
            
     	</sql>
     </changeSet>
     
    <changeSet id="jwr-withdrawal-flags-2.0" author="Nilesh">
		<comment>New configs for withdrawal flags 2.0</comment>
		<sql>
			create table WithdrawalFlagConfigs
			([key] varchar(100) NOT NULL PRIMARY KEY,
			[value] varchar(100));
		</sql>
	</changeSet>
	
	 <changeSet id="jwr-withdrawal-flag-2.0-configs" author="Nilesh">
	 <comment>Insert configs for withdrawal flags 2.0</comment>
		<sql>
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.BadDeclareLossDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.BadDeclareLossFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.BadDeclareWinDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.BadDeclareWinFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.DropDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.DropFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.SameUserPlayDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.SameUserPlayFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.BadDeclareLossDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.BadDeclareLossFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.BadDeclareWinDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.BadDeclareWinFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.DropDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.DropFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.SameUserPlayDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.SameUserPlayFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.BadDeclareLossDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.BadDeclareLossFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.BadDeclareWinDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.BadDeclareWinFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.DropDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.DropFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.SameUserPlayDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.SameUserPlayFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.BadDeclareLossDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.BadDeclareLossFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.BadDeclareWinDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.BadDeclareWinFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.DropDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.DropFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.SameUserPlayDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.SameUserPlayFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.BadDeclareLossDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.BadDeclareLossFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.BadDeclareWinDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.BadDeclareWinFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.DropDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.DropFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.SameUserPlayDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.SameUserPlayFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.BadDeclareLossDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.BadDeclareLossFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.BadDeclareWinDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.BadDeclareWinFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.DropDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.DropFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.SameUserPlayDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.SameUserPlayFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.BadDeclareLossDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.BadDeclareLossFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.BadDeclareWinDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.BadDeclareWinFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.DropDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.DropFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.SameUserPlayDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.SameUserPlayFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.BadDeclareLossDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.BadDeclareLossFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.BadDeclareWinDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.BadDeclareWinFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.DropDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.DropFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.SameUserPlayDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.SameUserPlayFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('LosingStreakDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('LosingStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('WinningStreakDefaultThreshold','10');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('WinningStreakFlagEnabled','false');
		</sql>
	 </changeSet>
	
	<changeSet id="jwr-db-withdrawalflags-events-cfg" author="Nilesh">
     	<comment>Setting gameevent pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventsubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable game event subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventpublisher', 'enableflagevent', 'false', 1, 'bool', 'Enable/Disable game event publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('flageventpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')         
     	</sql>
    </changeSet>
	
 	<changeSet id="netcore-api-key" author="ShashankSingh">
		<comment>Adding netcore api config</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES 
			('email', 'netcore.api.key', '3b215fd52f34eabb7e27202aa691c175', 1, 'text', 'API key for netcore');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES 
			('email', 'netcore.post.url', 'http://api.falconide.com/v4/sendEmail', 1, 'text', 'Post URL for netcore');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES 
			('email', 'netcore.use.forgotpassword', 'false', 1, 'bool', 'Post URL for netcore');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES 
			('email', 'netcore.enabled', 'false', 1, 'bool', 'Post URL for netcore')
		</sql>
	</changeSet>

  <changeSet id="jwr-create-auto-kyc-db-tables" author="Rohan" runOnChange="true">
        <sqlFile path="modules/auto_kyc/db_structures.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet> 
 
	<changeSet id="jwr-db-user-entryFee-publisher-cfg" author="Nidhi">
         <comment>Setting user entry fee publisher config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userentryfeepublisher', 'enableuserentryfee', 'false', 1, 'bool', 'Enable/Disable user entry fee publisher')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userentryfeepublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userentryfeepublisher', 'pubsub.namespace', '', 1, 'text', 'Broker details')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userentryfeepublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
             </sql>
     </changeSet>

  	<changeSet id="jwr-db-alter-loyaltpointsegment-table-for-tournaments" author="Nemesiss">
		<sql>
			ALTER TABLE LoyaltyPointSegments add tournamentRedemptionPerDay int default((5)) not null
			ALTER TABLE LoyaltyPointSegments add tournamentMultiplicationFactor float default((1)) not null
		</sql>
    </changeSet>

	<changeSet id="jwr-Add-loyalty-point-tournament-redemption-limits" author="Nemesiss">
		<comment>Add Loyalty Point redemption limits</comment>
		<sql>
		    ALTER TABLE UserLoyaltyPointsRedemptionCount
			  add tournament_count [int] default((0)) not null;
		</sql>
	</changeSet>

     <changeSet id="jwr-db-webengage-attributes-cfg" author="Ritika">
     	<comment>Setting webengage attributes subscriber config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengageuserattributessubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable webengage attributes subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengageuserattributessubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengageuserattributessubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengageuserattributessubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengageuserattributessubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengageuserattributessubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengageuserattributessubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	</sql>
     </changeSet>

    <changeSet id="jwr-db-tour-lp-cash-eqv" author="Nemesiss">
    	<sql>ALTER TABLE [TournamentTemplates] ADD lpCashEqvMod [int] NOT NULL DEFAULT ((0))</sql>
    </changeSet>

     <changeSet id="jwr-create-bot-index-users-table" author="Rohan">
     	<comment>Creating bot index in users table</comment>
     	<sql>
     	    IF 0 = (SELECT COUNT(*) as index_count FROM sys.indexes WHERE name='INDX_Users_IsBot_UserID')
			Begin
			    print 'Creating Index !!'
			    CREATE NONCLUSTERED INDEX [INDX_Users_IsBot_UserID]
			    ON [dbo].[Users] ([isBot],[userID])
			    INCLUDE ([username],[email],[stateID],[emailOptIn],[registerDate],[lastLoginDate],[emailVerified],[locked],[socialNetwork],
			    [mobileNumber],[totalRake],[firstDepositDate],[adKey],[lastCashGamePlayed],[lastFreeGamePlayed],[userDeviceType],[smsOptIn],[FirstName],[isFraud],[vipcategory])
			    WITH(ONLINE=ON)
			END
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-geo-proximity-constraint-cfg" author="Mirek">
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geo-proximity-restriction', 'enabled', 'false', 1, 'bool', 'Enable/Disable geo distance proximity constraint')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geo-proximity-restriction', 'mindistance', '20', 1, 'number:1:1000000:1', 'Distance in meters that players must be apart so that they can play on the same table')
     	</sql>
     </changeSet>
     <changeSet id="jwr-geo-proximity-constraint-cfg" author="Mirek">
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geo-proximity-restriction', 'enabled', 'false', 1, 'bool', 'Enable/Disable geo distance proximity constraint')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geo-proximity-restriction', 'mindistance', '20', 1, 'number:1:1000000:1', 'Distance in meters that players must be apart so that they can play on the same table')
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-bulksms-cfg" author="Nidhi">
     	<comment>Setting bulk sms cfg values</comment>
     	<sql>
     	    INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('sms','bulk.sms.url','https://web.jungleerummyqa.com/sms/bulk/generic','1','text', 'Bulk SMS Url');
     	    INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('sms','bulk.sms.token','','1','text', 'Bulk SMS Url Token');
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-add-invitations-table-type" author="Nidhi">
		<comment>Adding table type for Invitation SP</comment>
		<sql>
		
				IF TYPE_ID(N'EmailTable') IS NULL
				BEGIN
				CREATE TYPE [dbo].[EmailTable] AS TABLE
                (
                   [email] [varchar] (128) NULL
                )
                END

				IF TYPE_ID(N'EmailByNameTable') IS NULL
				BEGIN
                CREATE TYPE [dbo].[EmailByNameTable] AS TABLE
                (
                	[email] [varchar] (128) NULL,
                	[name] [varchar] (128) NULL
                )
                END

				IF TYPE_ID(N'MobileTable') IS NULL
				BEGIN
                CREATE TYPE [dbo].[MobileTable] AS TABLE
				(
   					[mobile] [varchar] (128) NULL
				)
				END

				IF TYPE_ID(N'MobileByNameTable') IS NULL
				BEGIN
				CREATE TYPE [dbo].[MobileByNameTable] AS TABLE
    			(
   					[mobile] [varchar] (128) NULL,
   					[name] [varchar] (128) NULL
				)
				END
				
				IF TYPE_ID(N'InvitationsTable') IS NULL
				BEGIN
				CREATE TYPE [dbo].[InvitationsTable] AS TABLE
				(
            		[userID] [bigint] NOT NULL,
					[emailAddress] [varchar](255) NULL,
					[timeStamp] [datetime] NOT NULL DEFAULT (getdate()),
					[referredName] [varchar](255) NULL,
					[reminderEmails] [int] NOT NULL DEFAULT (0),
					[joined] [int] NOT NULL,
					[paymenMade] [int] not null,
					[userDeviceType] [varchar](10) NULL
				)
				END

				IF TYPE_ID(N'ContactInvitationsTable') IS NULL
				BEGIN
				CREATE TYPE [dbo].[ContactInvitationsTable] AS TABLE
				(
            		[userID] [bigint] NOT NULL,
					[mobileNumber] [varchar](255) NULL,
					[timeStamp] [datetime] NOT NULL DEFAULT (getdate()),
					[referredName] [varchar](255) NULL,
			    	[reminderEmails] [int] NOT NULL DEFAULT (0),
					[joined] [int] NOT NULL,
					[paymentMade] [int] not null,
					[userDeviceType] [varchar](10) NULL
				)
				END
				
		</sql>
	 </changeSet>
	 
	 <changeSet id="jwr-db-contact-reminder" author="Ritika">
     	<comment>Setting remind friend sms body</comment>
     	<sql>
     	    INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('sms','remind.friend.sms','','1','text', 'Remind friend sms body');
     	</sql>
     </changeSet>
     
      <changeSet id="jwr-db-registered-users-details" author="Ritika">
     	<comment>Tables to store already registered mobile numbers and emails</comment>
     	<sql>
     		CREATE TABLE [dbo].[RegisteredEmails](
			[userID] [int] NOT NULL,
			[email] [varchar](255) NOT NULL
			)
			
			CREATE TABLE [dbo].[RegisteredNumbers](
			[userID] [int] NOT NULL,
			[mobileNumber] [varchar](15) NOT NULL
			)
		</sql>
		</changeSet>
			
      <changeSet id="jwr-db-branch-pubsub-cfg" author="Nidhi">
     	<comment>Setting branchevents pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable branch events subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'branchkey', '', 1, 'text', 'branch key')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'branchurl', '', 1, 'text', 'branch url')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventspublisher', 'enablebranchevents', 'false', 1, 'bool', 'Enable/Disable branch events')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventspublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventspublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventspublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
       </sql>
       </changeSet>
            
    <changeSet id="jwr-db-add-configurable-deal-finish-time" author="Nidhi">
    	<comment>Setting util values</comment>
    	<sql>
    		INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'dealfinishtime', '4', 1, 'number:1:20:1', 'Approx. deal finish time in a game')
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-game-timer-config-next-tournament-round" author="Mirek">
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-timer', 'tournament.nextround.timer.enabled', 'true', 1, 'bool', 'Controls whether timer to start next tournament round is to be sent')
    	</sql>
    </changeSet>
  
    <changeSet id="jwr-adding-columns-withdrawalFlags-2.0" author="Nilesh">
     	<comment>Adding new columns to WithdrawalFlags table</comment>
     	<sql>
     	    alter table WithdrawalFlags add
     	    userId int null,
			vipCategory int null,
			flagName varchar(200) null,
			productConfigValue int null,
			thresholdValue int null,
			userValueWhileFlagging int null;
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-tournament-highlight-start-end-dt" author="Ritika">
		<sql>
			ALTER TABLE TournamentSchedules ADD highlightStartTime varchar(25) NULL,highlightEndTime varchar(25) NULL;
			ALTER TABLE tournaments ADD highlightStartTime varchar(25) NULL,highlightEndTime varchar(25) NULL;
		</sql>
	</changeSet>
     
     
     <changeSet id="jwr-withdrawal-flag-2.1-configs-v1" author="Nilesh">
	 	<comment>Configs for withdrawal flags 2.1</comment>
		<sql>
			delete from WithdrawalFlagConfigs where [key] = 'LosingStreakDefaultThreshold';
			delete from WithdrawalFlagConfigs where [key] = 'LosingStreakFlagEnabled';
			delete from WithdrawalFlagConfigs where [key] = 'WinningStreakDefaultThreshold';
			delete from WithdrawalFlagConfigs where [key] = 'WinningStreakFlagEnabled';
			delete from WithdrawalFlagConfigs where [key] = 'cat.NEWBIE.DropDefaultThreshold';
			delete from WithdrawalFlagConfigs where [key] = 'cat.NEWBIE.DropFlagEnabled';
			delete from WithdrawalFlagConfigs where [key] = 'cat.NON VIP.DropDefaultThreshold';
			delete from WithdrawalFlagConfigs where [key] = 'cat.NON VIP.DropFlagEnabled';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 1.DropDefaultThreshold';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 1.DropFlagEnabled';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 2.DropDefaultThreshold';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 2.DropFlagEnabled';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 3.DropDefaultThreshold';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 3.DropFlagEnabled';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 4.DropDefaultThreshold';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 4.DropFlagEnabled';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 5.DropDefaultThreshold';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 5.DropFlagEnabled';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 6.DropDefaultThreshold';
			delete from WithdrawalFlagConfigs where [key] = 'cat.VIP 6.DropFlagEnabled';
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.LosingStreakDefaultThreshold','12');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.LosingStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.WinningStreakDefaultThreshold','8');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.WinningStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.LosingStreakDefaultThreshold','12');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.LosingStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.WinningStreakDefaultThreshold','8');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.WinningStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.LosingStreakDefaultThreshold','12');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.LosingStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.WinningStreakDefaultThreshold','8');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.WinningStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.LosingStreakDefaultThreshold','12');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.LosingStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.WinningStreakDefaultThreshold','8');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.WinningStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.LosingStreakDefaultThreshold','12');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.LosingStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.WinningStreakDefaultThreshold','8');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.WinningStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.LosingStreakDefaultThreshold','12');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.LosingStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.WinningStreakDefaultThreshold','8');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.WinningStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.LosingStreakDefaultThreshold','12');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.LosingStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.WinningStreakDefaultThreshold','8');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.WinningStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.LosingStreakDefaultThreshold','12');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.LosingStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.WinningStreakDefaultThreshold','8');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.WinningStreakFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('MultipleUidFlagEnabled','false');
		</sql>
	 </changeSet>
     <changeSet id="jwr-generate-guest-id" author="Khushal">
     	<comment>Generate Guest user - guest id</comment>
     	<sql>
     	 create sequence guestUserIdGen  as bigint  start with 1 increment by 1
     	</sql>
     </changeSet>
     <changeSet id="jwr-add-guestAuthToken-guestRegistrationDate" author="Khushal">
     	<comment>Add new column in userregistrationinfo</comment>
     	<sql>
     	 	alter table userregistrationinfo 
			add guestAuthToken varchar(100);
			
			alter table userregistrationinfo 
			add guestRegistrationDate datetime;
     	</sql>
     </changeSet>
    <changeSet id="jwr-db-facebook-pixel-config" author="Ritika">
    	<sql>
    	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('facebookpixelconfig', 'url', '', 1, 'text', 'Facebook pixel server event API')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('facebookpixelconfig', 'pixelId', '', 1, 'text', 'Facebook pixelId')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('facebookpixelconfig', 'accessToken', '', 1, 'text', 'Facebook access token')
    	</sql>
    </changeSet>
     <changeSet id="jwr-adding-columns-utmparams" author="Nidhi">
     	<comment>Adding new columns to utmparams table</comment>
     	<sql>
     	    alter table UtmParams add
     	    fbclid varchar(500) null,
	        fbp varchar(500) null,
	        fbc varchar(500) null,
	        gclid varchar(500) null;
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-table-configurations-skill-score" author="Nemesiss">
		<sql>
			ALTER TABLE [dbo].[TableConfigurations] ADD SkillScoreMatchingEnabled [bit] NOT NULL DEFAULT ((0));
		</sql>
	</changeSet>

    <changeSet id="jwr-db-skill-score-configs" author="Nemesiss">
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('skill-score-config', 'param.net.ve.weight', 10, 1, 'number:-100:100:1', 'Net Ve parameter weight')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'param.entry.fee.weight', 5, 1, 'number:-100:100:1', 'Entry Fee parameter weight')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'param.points.saved.weight', 7, 1, 'number:-100:100:1', 'Points Saved parameter weight')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'param.win.ratio.weight', 5, 1, 'number:-100:100:1', 'Win Ratio parameter weight')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'param.drop.perc.weight', 3, 1, 'number:-100:100:1', 'Drop Perc parameter weight')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'param.game.freq.weight', 1, 1, 'number:-100:100:1', 'Game Freq parameter weight')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'param.bad.dec.weight', -1, 1, 'number:-100:100:1', 'Bad Dec parameter weight')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'param.activity.weight', 1, 1, 'number:-100:100:1', 'Activity parameter weight')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'limit.array.compute', 8000, 1, 'number:100:20000:100', 'Number of last games used for skill score calculation')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'limit.array.store', 16000, 1, 'number:100:20000:100', 'Number of last games that are actually stored')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'limit.percentile.compute.days', 180, 1, 'number:30:2000:1', 'Number of days after which inactive players scores would be excluded from percentile table calculations')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'mongo.db.threads', 50, 1, 'number:1:500:1', 'Number of mongo db threads')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('skill-score-config', 'enabled', 'false', 1, 'bool', 'Enable or disable Skill Score feature')
    	</sql>
    </changeSet>

     <changeSet id="jwr-db-Add-Index-in-ContactInvitations-Table" author="Nidhi">
		<sql>
			IF EXISTS(SELECT * FROM sys.indexes WHERE object_id = object_id('dbo.ContactInvitations') AND NAME ='IX_ContactInvitations')
            DROP INDEX IX_ContactInvitations ON dbo.ContactInvitations;
            Create NonClustered Index IX_ContactInvitations On ContactInvitations (userId Asc)
		</sql>
	</changeSet>
	<changeSet id="jwr-db-new-Users-Extension-table-UserGameStats" author="Ashutosh">
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UserGameStats]') AND type in (N'U'))
            BEGIN
				CREATE TABLE dbo.UserGameStats (
					userID int NOT NULL PRIMARY KEY,
					xpCash int NOT NULL,
					xpSocial int NOT NULL,
					xpBonusTimeCash datetime NULL,
					xpBonusTimeSocial datetime NULL,
					totalCashGamesWon int NOT NULL,
					totalFreeGamesWon int NOT NULL,
					totalCashGamesLost int NOT NULL,
					totalFreeGamesLost int NOT NULL,
					totalCashAmountWon money NOT NULL,
					totalCashAmountLost money NOT NULL,
					lastCashGamePlayed datetime NULL,
					firstCashGamePlayed datetime NULL,
					firstFreeGamePlayed datetime NULL,
					lastFreeGamePlayed datetime NULL,
					createdAt datetime NOT NULL default GETDATE(),
					updatedAt datetime NULL
				)
				
				ALTER TABLE [dbo].[UserGameStats] ADD CONSTRAINT [PK_UserGameStats] PRIMARY KEY CLUSTERED 
				(
					[userID] ASC
				)
			END
		</sql>
	</changeSet>

    <changeSet id="jwr-db-leaderboardsEligibilityAndPreviewMsg" author="Nemesiss">
		<comment>Adding eligibility and previewMsg to Leaderboard table</comment>
		<sql>
			ALTER TABLE [Leaderboard] ADD
			eligibility [text] NOT NULL DEFAULT '{"categories":["ALL"]}',
			previewMsg [text] NOT NULL DEFAULT '';
		</sql>
	</changeSet>
	
	<changeSet id="alter-tableconfigurations-add-newMM" author="Ritika">
	 <comment>Adding column new MM to TableConfigurations</comment>
	  <sql>
	   ALTER TABLE [dbo].[TableConfigurations] ADD newMM  bit NOT NULL DEFAULT ((0));
	  </sql>
	 </changeSet>
	 
	<changeSet id="jwr-cfg-gamestartreduced-points" author="Nilesh">
       	<sql>
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.6s.gamestartreduced',	'10000', '1', 'number:1000:120000:1000','Reduced Game Start time for 13 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.6s.gamestartreduced',	'10000', '1', 'number:1000:120000:1000','Reduced Game Start time for 10 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.6s.gamestartreduced',	'10000', '1', 'number:1000:120000:1000','Reduced Game Start time for 21 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.reduceTimer.enabled', 'false', 1, 'bool', 'Controls whether reduce timer is to be activated for 13 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.reduceTimer.enabled', 'false', 1, 'bool', 'Controls whether reduce timer is to be activated for 10 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.reduceTimer.enabled', 'false', 1, 'bool', 'Controls whether reduce timer is to be activated for 21 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.pool.reduceTimer.enabled', 'false', 1, 'bool', 'Controls whether reduce timer is to be activated for Pool variant');
		</sql>
	</changeSet>

	<changeSet id="jwr-add-columns-tournamnettickets" author="Avneet">
     	<comment>Adding columns to table TournamentTickets</comment>
     	<sql>
     			ALTER TABLE [dbo].[TournamentTickets]
     			ADD validFrom datetime NULL,
     			validTo datetime NULL;
     	</sql>	
    </changeSet>	
     			
	<changeSet id="jwr-add-columns-createdDate-updatedDate" author="Avneet">
		<comment>Adding columns createdDate and updatedDate</comment>
		<sql>
			ALTER TABLE Tournaments 
			ADD createdDate datetime default null,updatedDate datetime null;
			
			ALTER TABLE PromoCodes 
			ADD updatedDate datetime null;
			
			ALTER TABLE PromoCodeUses 
			ADD createdDate datetime default null,updatedDate datetime null;
			
			ALTER TABLE UserRegistrationInfo 
			ADD createdDate datetime default null,updatedDate datetime null;
			
			ALTER TABLE Withdrawals 
			ADD createdDate datetime default null,updatedDate datetime null;
			
			ALTER TABLE TournamentResults
			ADD createdDate datetime default null;
		</sql>
	</changeSet>
	
     <changeSet id="jwr-enteramount-configurations" author="Khushal">
		<comment>Enter amount configuraion</comment>
		<sql>
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('enter-amount-grid-config',
				 'user-category:0',
				 '0',
				 '0',
				 'number:1:1000000:1',
				 'Txn Size of Category id 0'
				),
				('enter-amount-grid-config',
				 'user-category:1',
				 '0',
				 '0',
				 'number:1:1000000:1',
				 'Txn Size of Category id 1'
				),
				
				('enter-amount-grid-config',
				 'user-category:2',
				 '0',
				 '0',
				 'number:1:1000000:1',
				 'Txn Size of Category id 2'
				),
				
				('enter-amount-grid-config',
				 'user-category:3',
				 '0',
				 '0',
				 'number:1:1000000:1',
				 'Txn Size of Category id 3'
				),
				
				('enter-amount-grid-config',
				 'user-category:4',
				 '0',
				 '0',
				 'number:1:1000000:1',
				 'Txn Size of Category id 4'
				),
				
				('enter-amount-grid-config',
				 'user-category:5',
				 '0',
				 '0',
				 'number:1:1000000:1',
				 'Txn Size of Category id 5'
				),
				('enter-amount-grid-config',
				 'user-category:6',
				 '0',
				 '0',
				 'number:1:1000000:1',
				 'Txn Size of Category id 6'
				),
				('enter-amount-grid-config',
				 'user-category:7',
				 '0',
				 '0',
				 'number:1:1000000:1',
				 'Txn Size of Category id 7'
				)
				
		</sql>
	 </changeSet>	
	<changeSet id="jwr-withdrawal-config-enable/disable-instant-withdrawal" author="Nidhi">
		<comment>Adding config in cfg to enable/disable instant withdrawal</comment>
		<sql>
   		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'enable.instant.withdrawal', 'false', 1, 'bool', 'Enable/Disable Instant withdrawals.')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-adding-table-userchallenge7daytxn" author="Khushal">
     	<comment>Table to store the user based challenge7day related txn</comment>
     	<sql>
     	    IF OBJECT_ID('dbo.UserChallenge7DayTxn') IS NULL
			begin
				create table UserChallenge7DayTxn
				(
				Id int identity(1,1),
				UserId int not null,
				DayNo tinyint not null,
				CurrencyTxnId bigint not null,
				Amount int not null,
				IsReversed bit default 0,
				CreatedDate datetime default getdate(),
				UpdatedDate datetime default getdate()
				)
			end

     	</sql>
     </changeSet>
     <changeSet id="jwr-adding-column-is7DayFinalReverse" author="Khushal">
     	<comment>Add new column is7DayFinalReverse in UserRegistrationInfo</comment>
     	<sql>
     	    alter table UserRegistrationInfo 
			Add is7DayFinalReverse bit not null default 0
     	</sql>
     </changeSet>
     <changeSet id="jwr-create-proc-getUserChallenge7DayTxnOfUser" runOnChange="true" author="Khushal">
        <comment>Get login challenge data of user.</comment>
        <sqlFile path="storedprocedures/loginchallenge/getUserChallenge7DayTxnOfUser.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
    <changeSet id="jwr-create-proc-insertUserChallenge7DayTxn" runOnChange="true" author="Khushal">
        <comment>Insert login challenge data of user.</comment>
        <sqlFile path="storedprocedures/loginchallenge/insertUserChallenge7DayTxn.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
    <changeSet id="jwr-create-proc-getUsersToReverseChallenge7Day" runOnChange="true" author="Khushal">
        <comment>Get user data to reverse daily.</comment>
        <sqlFile path="storedprocedures/loginchallenge/getUsersToReverseChallenge7Day.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
    <changeSet id="jwr-create-proc-getUserTotalGameEntryFee" runOnChange="true" author="Khushal">
        <comment>Get total entry fee of user.</comment>
        <sqlFile path="storedprocedures/loginchallenge/getUserTotalGameEntryFee.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
    <changeSet id="jwr-create-proc-getUsersToReverseChallenge7DayFinal" runOnChange="true" author="Khushal">
        <comment>Get Final users to revert amount.</comment>
        <sqlFile path="storedprocedures/loginchallenge/getUsersToReverseChallenge7DayFinal.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
    <changeSet id="jwr-create-proc-setUser7DayFinalReverse" runOnChange="true" author="Khushal">
        <comment>Set Final users to revert amount.</comment>
        <sqlFile path="storedprocedures/loginchallenge/setUser7DayFinalReverse.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
    <changeSet id="jwr-create-proc-hasuserPlayedCashGames" runOnChange="true" author="Khushal">
        <comment>Get is cash game played on yesterday.</comment>
        <sqlFile path="storedprocedures/loginchallenge/hasuserPlayedCashGames.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
    <changeSet id="jwr-create-proc-removeOldDataUserChallenge7DayTxn" runOnChange="true" author="Khushal">
        <comment>to delete data more than 30 days.</comment>
        <sqlFile path="storedprocedures/loginchallenge/removeOldDataUserChallenge7DayTxn.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
    <changeSet id="jwr-adding-adkeys-loginchallenge" author="Khushal">
     	<comment>ad keys of login challenge</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('loginchallenge', 'loginchallenge.adkeys', 'ggm-7daychallange-01,ggm-7daychallange-02,ggm-7daychallange-03,ggm-7daychallange-04,ggm-7daychallange-05,ggm-7daychallange-06,ggm-7daychallange-07,ggm-7daychallange-08,ggm-7daychallange-09,ggm-7daychallange-10,,fb-7daychallange-01,fb-7daychallange-02,fb-7daychallange-03,fb-7daychallange-04,fb-7daychallange-05,fb-7daychallange-06,fb-7daychallange-07,fb-7daychallange-08,fb-7daychallange-09,fb-7daychallange-10', 1, 'text', 'login challenge adkeys')
     	</sql>
     </changeSet>
     <changeSet id="jwr-adding-index-UserChallenge7DayTxn" author="Khushal">
     	<comment>idx_Challenge7DayTxn_userid_createddate</comment>
     	<sql>
     	         CREATE INDEX idx_Challenge7DayTxn_userid_createddate
				ON UserChallenge7DayTxn (userId, createddate)
		</sql>
     </changeSet>
     <changeSet id="jwr-adding-transactiontype-UserChallenge7DayTxn" author="Khushal">
     	<comment>Challenge7Day transaction types</comment>
     	<sql>
     	            insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAY0','82')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAY1','83')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAY2','84')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAY3','85')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAY4','86')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAY5','87')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAY6','88')
					
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAYREVERSAL0','89')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAYREVERSAL1','90')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAYREVERSAL2','91')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAYREVERSAL3','92')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAYREVERSAL4','93')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAYREVERSAL5','94')
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAYREVERSAL6','95')
					
					insert into TransactionTypes(txnName,ttype) values('CHALLENGE7DAYREVERSALFINAL','96')
		</sql>
     </changeSet>
	<changeSet id="jwr-utmparams-add-timestamp" author="Ritika">
     	<comment>Adding timestamp column to utmparams table</comment>
     	<sql>
     	    alter table UtmParams add timestamp datetime null
     	</sql>
    </changeSet>
    <changeSet id="jwr-googleadwords-add-config" author="Ritika">
     	<comment>Adding configs for google adwords</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('googleadwords', 'container-name', '', 1, 'text', 'Container Name for Google Adwords files')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('googleadwords', 'bucket-name', '', 1, 'text', 'Bucket Name for Google Adwords files')
     	</sql>
     </changeSet>
     <changeSet id="tournament-lobby-start-timer-config" author="Utkarsh">
     	<comment>Adding configs for lobby timer</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament', 'tournament.lobby.startTimer', '0', 1, 'number:0:100:0', 'The value has to be in minutes. This is when the toournament start timer starts.')
     	</sql>
     </changeSet>
     <changeSet id="jwr-coupons-add-adconfig" author="Utkarsh">
     	<comment>Adding ad-config to coupons</comment>
     	<sql>
     	    ALTER TABLE [dbo].[Coupons] ADD
     	    	[adKeyExclusion] [varchar](1000) NULL,
				[adKey] [varchar](1000) NULL,
				[adNetwork] [varchar](100) NULL;
     	</sql>
     </changeSet>
     <changeSet id="jwr-coupons-edit-adnetwork" author="Utkarsh">
     	<comment>Adding ad-config to coupons</comment>
     	<sql>
     	    ALTER TABLE [dbo].[Coupons] ALTER COLUMN [adNetwork] [varchar](50) NULL;
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-create-table-emailexclutionlist" author="Khushal">
     	<comment>Create table emailexclutionlist</comment>
     	<sql>
     	    IF OBJECT_ID('dbo.EmailExclutionWords') IS NULL
			begin
				    Create Table EmailExclutionWords(
					id int identity(1,1) not null,
					word varchar(50) not null
					)
			end
     	</sql>
     </changeSet>
     <changeSet id="jwr-insert-emailexclutionlist" author="Khushal">
     	<comment>Create list of emailexclutionlist</comment>
     	<sql>
     		insert into EmailExclutionWords
			SELECT value FROM STRING_SPLIT('rummycircle,rummypassion,ace2three,playruumy,playrummy,deccanrummy,rummyculture,adda52rummy,classicrummy,gullyrummy,rummybaazi,poker,teenpatti,info,customer,customercare,customerservice,support,contact,contactus,help,mail,mailus,advice,wecare,sales,enquiry,inquiry,helpdesk,service,reachus,care,ask,assist,biz,business,advise,care,reach,enterprise,trade,marketing,accounting,finance,human,resource,tech,engineering',',')
		</sql>
    </changeSet>
    
  <changeSet id="jwr-withdrawalflag-pc-switch" author="Nilesh">
	 <comment>Insert switch to enable ProductConfig/DynamicThreshold</comment>
		<sql>
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('ProductConfigValueEnabled','true');
		</sql>
	</changeSet>
     
  <changeSet id="jwr-Add-indexes-in-TechProWitrhdrawals-table" author="Nidhi">
     	<comment>Adding Index for TechPro Withdrawals table</comment>
        <sql>
             IF NOT EXISTS (SELECT * FROM sys.indexes WHERE name = 'INDX_TechProWithdrawals_Status_TXNReferenceNo' AND object_id = OBJECT_ID('[dbo].[TechProWithdrawals]'))
             BEGIN
               CREATE NONCLUSTERED INDEX [INDX_TechProWithdrawals_Status_TXNReferenceNo]
               ON [dbo].[TechProWithdrawals] ([Status],[TXNReferenceNo])
               INCLUDE ([TransferId],[Description],[WithdrawalId],[UpdatedDate],[CreatedDate],[ProcessedBy])
               WITH(ONLINE=ON)
             END
         </sql>
     </changeSet>
     <changeSet id="jwr-tournament-start-notice-configs" author="Mayank">
       	<sql>
			INSERT INTO cfg VALUES ('tournament-start-notice', 'tournament.notice.enabled', 'false', '0', 'bool', 'To store if the tournament start notice is enabled');
			INSERT INTO cfg VALUES ('tournament-start-notice', 'tournament.notice.timeoffset', '', '0', 'text', 'To store the value of time offset to start of the tournament');
			INSERT INTO cfg VALUES ('tournament-start-notice', 'tournament.notice.message', '', '0', 'text', 'To store the template of the message of start notice');
		</sql>
    </changeSet>
     
     <changeSet id="jwr-add-infobean-transaction-sms-api-and-sms-priority" author="Khushal">
		<comment>Adding generic tranaction service api of infobean</comment>
		<sql>
   		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('sms', 'infobean.transaction.api', 'https://webengage.jgamesengine.com/sms/bulk/generic/transactional', 1, 'text', 'infobean generic tranactional sms api')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('sms', 'vendor.priority.order', 'GUPSHUP,INFOBEAN', 1, 'text', 'priority vendor order to send transactional sms')
		</sql>
	</changeSet>
  <changeSet id="jwr-add-UserRafFriendsTable-type" author="Ritika">
  	<comment>Adding Table type for user raf friends</comment>
        <sql>
			 IF TYPE_ID(N'UserRafFriendsTable') IS NULL
				BEGIN
				CREATE TYPE [dbo].[UserRafFriendsTable] AS TABLE
				(
            		[userID] [bigint] NOT NULL,
					[emailAddress] [varchar](255) NULL,
					[name] [varchar](255) NULL
				)
				END
         </sql>
  </changeSet>
     
     <changeSet id="jwr-UserCurrencies" author="Mirek">
     	<sql>

			CREATE TABLE [dbo].[UserCurrencies](
				[userID] [int] NOT NULL,
				[currencyRupees] [money] NOT NULL,
				[currencyCoins] [int] NOT NULL,
				[currencyGold] [int] NOT NULL,
				[depositBalanceRupees] [money] NOT NULL,
				[inplayBalanceRupees] [money] NOT NULL,
				[inplayBalanceCoins] [int] NOT NULL,
				[balanceVersion] [bigint] NOT NULL,
			    [CreatedDateTime] [datetime] NOT NULL,
			    [LastUpdatedTime] [datetime] NULL,
			
			) ON [PRIMARY];
			
			ALTER TABLE [dbo].[UserCurrencies] ADD  CONSTRAINT [PK_UserCurrencies] PRIMARY KEY CLUSTERED 
			(
				[userID] ASC
			) ON [PRIMARY];
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-UserCurrencies-populate" author="Mirek" context="local">
     	<sql>
     		INSERT INTO [dbo].[UserCurrencies] (userID, currencyRupees, currencyCoins, currencyGold, depositBalanceRupees, inplayBalanceRupees, inplayBalanceCoins, balanceVersion, CreatedDateTime, LastUpdatedTime)
			SELECT userID, currencyRupees, currencyCoins, currencyGold, depositBalanceRupees, inplayBalanceRupees, inplayBalanceCoins, balanceVersion, registerDate, LastUpdateTimestamp
			FROM [dbo].[Users]
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-drop-old-currency-SPs" author="Mirek">
     	<sql>
     		DROP PROCEDURE IF EXISTS dbo.AddToWithdrawableBalance
			DROP PROCEDURE IF EXISTS dbo.MoveBalanceToDeposit
			DROP PROCEDURE IF EXISTS dbo.MoveBalanceToInPlay
			DROP PROCEDURE IF EXISTS dbo.MoveBalanceToWithdrawable
			DROP PROCEDURE IF EXISTS dbo.TransferFromDepositBalanceNew
			DROP PROCEDURE IF EXISTS dbo.TransferFromInPlayBalance
			DROP PROCEDURE IF EXISTS dbo.TransferFromInPlayBalanceNew
			DROP PROCEDURE IF EXISTS dbo.TransferFromWithdrawableBalance
			DROP PROCEDURE IF EXISTS dbo.TransferFromWithdrawableBalanceNew
			DROP PROCEDURE IF EXISTS dbo.TransferTournamentTDSFromPlayer
			DROP PROCEDURE IF EXISTS dbo.TransferToWithdrawableBalanceNew
			DROP PROCEDURE IF EXISTS DeductTournamentFee
			DROP PROCEDURE IF EXISTS LockCurrency
			DROP PROCEDURE IF EXISTS ModifyCurrency
			DROP PROCEDURE IF EXISTS TransferCurrency
			DROP PROCEDURE IF EXISTS ProcessBulkCurrencyTransfers
			DROP PROCEDURE IF EXISTS MonthlyLeaderboardPrizeDistribution
			DROP PROCEDURE IF EXISTS TransferTournamentTDSFromPlayerUpdateV1
			DROP PROCEDURE IF EXISTS UnlockCurrency
			DROP PROCEDURE IF EXISTS MonthlyDailyReport
			
			DROP VIEW IF EXISTS AdReferredUsersView
			DROP VIEW IF EXISTS InvitedUsersWithBonusesView
			DROP VIEW IF EXISTS UserFriendInvitesView
     	</sql>
     </changeSet>
  
      <changeSet id="jwr-raf-invites-limit" author="Ritika">
     	<comment>Adding configs for max number of invites</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'max.one.time.invites', '10000', 1, 'number:100:10000:1', 'Max number of invites that can be sent at a time.')
     	</sql>
    </changeSet>
    
        <changeSet id="jwr-raf-invites-insert-batchSize" author="Ritika">
     	<comment>Adding configs for batch size of inserts</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'batch.size', '1000', 1, 'number:100:10000:1', 'Batch size for inserts')
     	</sql>
    </changeSet>
     
     <changeSet id="jwr-db-raf-params" author="Ashutosh">
     	<sql>
     		IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RafParams]') AND type in (N'U'))
            BEGIN
		     	CREATE TABLE dbo.RafParams (
					userId int PRIMARY KEY,
					referrerId int NOT NULL,
					referrerSrc varchar(50) NULL,
					referralMedium varchar(50) NULL,
					referralSubMedium varchar(50) NULL,
					timestamp datetime NOT NULL DEFAULT (GETDATE())
				)
			END
		</sql>
     </changeSet>
     
     <changeSet id="jwr-db-inviteid-type" author="Ashutosh">
     	<sql>
     		CREATE TYPE InviteIdTable AS TABLE
                (
                  [InviteID] [bigint]
                );
		</sql>
     </changeSet>
     
     <changeSet id="jwr-db-rafparams-index" author="Ashutosh">
     	<sql>
     	IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'INDX_RAFParams' AND object_id = OBJECT_ID('RafParams'))
	    BEGIN
	    	CREATE NONCLUSTERED INDEX INDX_RAFParams ON
     			RafParams(userId, referrerId, referrerSrc, referralMedium, referralSubMedium, timestamp)
	    END
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-adding-column-Invitations" author="Ashutosh">
     	<comment>Adding new columns to Invitations table</comment>
     	<sql>
     	    alter table Invitations add
	        firstReminderSentOn datetime null,
	        referrerSrc varchar(50) NULL,
			referralMedium varchar(50) NULL,
			referralSubMedium varchar(50) NULL;
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-adding-column-ContactInvitations" author="Ashutosh">
     	<comment>Adding new columns to Contact Invitations table</comment>
     	<sql>
     	    alter table ContactInvitations add
	        firstReminderSentOn datetime null,
	        referrerSrc varchar(50) NULL,
			referralMedium varchar(50) NULL,
			referralSubMedium varchar(50) NULL;
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-useractivity-useraccountistory-batchhssize-cfg" author="Nidhi">
     	<comment>Setting useractivity and useraccounthistory batchsize config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useractivitylogsubscriber', 'logbatchsize', '100', 1, 'number:1:5000:1', 'Logs batch size for user activity log messages')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccounthistorysubscriber', 'logbatchsize', '25', 1, 'number:1:100:1', 'Logs batch size for user account history log messages')
     	</sql>
     </changeSet>
    <changeSet id="jwr-db-appinstall-inactive-dormant-cfg" author="Utkarsh">
     	<comment>Setting appinstall status basis last active date config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'appinstall.define.inactive', '7', 1, 'number:7:100:1', 'Days of inactivity, after which the user is marked as inactive')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'appinstall.define.dormant', '10', 1, 'number:7:365:1', 'Days of inactivity, after which the user is marked as dormant')
     	</sql>
    </changeSet>
     
   	<changeSet id="jwr-add-leaderboard-prizes-table-type" author="Nemesiss">
		<comment>Adding table type for Inserting Leaderboard Prizes</comment>
		<sql>
				CREATE TYPE LeaderboardPrizesTable AS TABLE
                (
                  [rank] [bigint],
                  [amount] [money]
                );
		</sql>
	 </changeSet>

  	<changeSet id="jwr-eligibility-history" author="Nemesiss">
		<comment>Adding Eligibility History tables</comment>
		<sql>
			CREATE TABLE [dbo].[UserEligibilityHistoryLoyalty](
				[userID] [int] NOT NULL,
				[timestamp] [datetime] NOT NULL,
				[prev] [int] NOT NULL,
			) ON [PRIMARY];
			
			CREATE TABLE [dbo].[UserEligibilityHistoryVip](
				[userID] [int] NOT NULL,
				[timestamp] [datetime] NOT NULL,
				[prev] [int] NOT NULL,
			) ON [PRIMARY];

	    	CREATE CLUSTERED INDEX INDX_UserEligibilityHistoryLoyalty ON
     			UserEligibilityHistoryLoyalty(userID, timestamp);
     			
	    	CREATE CLUSTERED INDEX INDX_UserEligibilityHistoryVip ON
     			UserEligibilityHistoryVip(userID, timestamp);
		</sql>
	 </changeSet>
	  
     <changeSet id="jwr-db-add-InvitationsWithRafTable-type" author="Ashutosh">
     	<comment>Creating a new one to add new columns</comment>
     	<sql>
     		IF NOT EXISTS (SELECT * FROM sys.types WHERE is_table_type = 1 AND name = 'InvitationsWithRafTable')
			BEGIN
				CREATE TYPE [dbo].[InvitationsWithRafTable] AS TABLE
				(
		            [userID] [bigint] NOT NULL,
					[emailAddress] [varchar](255) NULL,
					[timeStamp] [datetime] NOT NULL DEFAULT (getdate()),
					[referredName] [varchar](255) NULL,
					[reminderEmails] [int] NOT NULL DEFAULT (0),
					[joined] [int] NOT NULL,
					[paymentMade] [int] not null,
					[userDeviceType] [varchar](10) NULL,
					[referrerSrc] varchar(50) NULL,
					[referralMedium] varchar(50) NULL,
					[referralSubMedium] varchar(50) NULL
				) 
			END
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-add-ContactInvitationsWithRafTable-type" author="Ashutosh">
     	<comment>Creating a new one to add new columns</comment>
     	<sql>
     		IF NOT EXISTS (SELECT * FROM sys.types WHERE is_table_type = 1 AND name = 'ContactInvitationsWithRafTable')
			BEGIN
				CREATE TYPE [dbo].[ContactInvitationsWithRafTable] AS TABLE
				(
		            [userID] [bigint] NOT NULL,
					[emailAddress] [varchar](255) NULL,
					[timeStamp] [datetime] NOT NULL DEFAULT (getdate()),
					[referredName] [varchar](255) NULL,
					[reminderEmails] [int] NOT NULL DEFAULT (0),
					[joined] [int] NOT NULL,
					[paymentMade] [int] not null,
					[userDeviceType] [varchar](10) NULL,
					[referrerSrc] varchar(50) NULL,
					[referralMedium] varchar(50) NULL,
					[referralSubMedium] varchar(50) NULL
				)
			END
     	</sql>
     </changeSet>
 
     <changeSet id="jwr-autocapture-otp-enable-disable-config" author="Kunal">
		<comment>Adding config in cfg to enable/disable Auto Capture Otp</comment>
		<sql>
   		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('OTP', 'enable.autocapture.otp', 'false', 1, 'bool', 'Enable/Disable Auto capturing OTP.')
   		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('OTP', 'enable.mobilenumber.hint', 'false', 1, 'bool', 'Enable/Disable Mobile Number Hint.')
		</sql>
	</changeSet>
 
   <changeSet id="jwr-switchTableTimer-add-config" author="Chirag">
		<comment>Adding switch table button visiblity delay time</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('switchTable', 'switchTableInitiationTime', '0', 0, 'number', 'time after that switch Table button will be visible on game table');
		</sql>
   </changeSet>
   
   <changeSet id="jwr-tournament-lobby-listing-desing" author="Khushal">
		<comment>Adding tournament list AB test UI config</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('tournament', 'lobbylistingdesign', '3',1, 'number:1:10:1', '"1": "Even/Odd New/Existing UI","2": "all new UI","3": "all existing UI"');
		</sql>
   </changeSet>
   
   <changeSet id="jwr-no-tournament-lobby-listing-desing" author="Rohit">
		<comment>Add no tournament listing text and cta</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('tournament', 'noTounament.native.text', 'Tournaments are only available on the latest version of Junglee Rummy app.',1, 'text', 'Add in following format. Text | CTA Text | CTA Link');
		</sql>
   </changeSet>
   
      <changeSet id="jwr-loyalty-communication-percentile" author="Ritika">
     	<comment> Top percentile users for loyalty communication</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('loyaltycommunication', 'percentile', '10', 1, 'number:1:100:1', 'Percentile users for loyalty communication')
     	</sql>
    </changeSet>
    
   <changeSet id="jwr-db-add-bannerconfig-mobilepopup" author="Avneet">
   	<comment>Add mobile popup folder config</comment>
   	<sql>
   			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.lobbyPopupMobileFolder', '/mobile_lobby_popup/', 1, 'text', 'Lobby Popup Folder For Mobile Banners');
   	</sql>
   </changeSet>
   
   <changeSet id ="jwr-db-add-delaytime" author="Avneet">
   	<sql>
   			ALTER TABLE BannerConfiguration
   			ADD [delay] VARCHAR(10) NULL
   	</sql>
   </changeSet>
   
   <changeSet id="jwr-db-raf-milestones" author="Nemesiss">
    	<comment>Adding collumns for raf milestones</comment>
    	<sql>
			ALTER TABLE RAFBonusCampaign ADD rr_id_check bit NOT NULL DEFAULT ((0));
			ALTER TABLE RAFBonusCampaign ADD rr_address_check bit NOT NULL DEFAULT ((0));
			ALTER TABLE RAFBonusCampaign ADD re_id_check bit NOT NULL DEFAULT ((0));
			ALTER TABLE RAFBonusCampaign ADD re_address_check bit NOT NULL DEFAULT ((0));
			ALTER TABLE RAFBonusCampaign ADD rr_bonus_slab varchar(max) DEFAULT NULL;
			ALTER TABLE RAFCampaignUses ADD locked_bonus_rr money DEFAULT NULL;
		</sql>
	</changeSet>
   <changeSet id="jwr-db-raf-extra-milestones" author="Nemesiss">
    	<comment>Adding collumns for raf extra milestones and new transaction type</comment>
    	<sql>
    		ALTER TABLE RAFExtraBonusCampaign ADD milestones varchar(max) NOT NULL DEFAULT '';
    		UPDATE RAFExtraBonusCampaign set milestones = Concat('[{"id":1,"cnt":',required_users,',"value":',rr_bonus_amount,'}]');

    		ALTER TABLE RAFExtraBonusCampaign ADD locked_bonus bit NOT NULL DEFAULT ((0));
    		ALTER TABLE RAFExtraBonusCampaign ADD disbursal_criteria tinyint NOT NULL DEFAULT ((0));
    		ALTER TABLE RAFExtraBonusCampaign ADD disburse_percent tinyint NOT NULL DEFAULT ((0));

    		ALTER TABLE ExtraRAFCampaignClaims ADD locked_bonus money NOT NULL DEFAULT ((0));
			ALTER TABLE ExtraRAFCampaignClaims ADD total_disbursed money NOT NULL DEFAULT ((0));

			INSERT INTO TransactionTypes(txnName,ttype) values('RAF_CAMPAIGN_EXTRA_LOCKED_BONUS','97');
		</sql>
	</changeSet>
   <changeSet id="jwr-adding-columns-promocodes" author="Ritika">
     	<comment>Adding new columns to promocodes table</comment>
     	<sql>
     	    alter table promocodes add
     	    minimumWageringAmount [money] NOT NULL DEFAULT ((0)),
	        chunkAmount [money] NOT NULL DEFAULT ((0)),
	        maxNumberOfChunks [float] NOT NULL DEFAULT ((0));
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-adding-columns-promocodeuses" author="Ritika">
     	<comment>Adding new columns to promocodeuses table</comment>
     	<sql>
     	    alter table PromoCodeUses add
     	    currentWagerAmount [money] NOT NULL DEFAULT ((0)),
     	    chunksUsed [int] NOT NULL DEFAULT ((0));
     	</sql>
     </changeSet>
   
    <changeSet id="jwr-Add-indexes-in-RegisteredEmails-RegisteredNumbers-table" author="Nidhi">
     	<comment>Adding Index for RegisteredEmails-RegisteredNumbers table</comment>
        <sql>
             IF NOT EXISTS (SELECT * FROM sys.indexes WHERE name = 'INDX_RegisteredEmails_userID_Email' AND object_id = OBJECT_ID('[dbo].[RegisteredEmails]'))
             BEGIN
               CREATE NONCLUSTERED INDEX INDX_RegisteredEmails_userID_Email ON RegisteredEmails(userid,email) WITH (ONLINE=ON)
             END
             IF NOT EXISTS (SELECT * FROM sys.indexes WHERE name = 'INDX_RegisteredNumbers_userID_MobileNumber' AND object_id = OBJECT_ID('[dbo].[RegisteredNumbers]'))
             BEGIN
              CREATE NONCLUSTERED INDEX INDX_RegisteredNumbers_userID_MobileNumber ON RegisteredNumbers(userid,MobileNumber) WITH (ONLINE=ON)
             END
             IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'INDX_Withdrawals_AccountNumber_SocialNetwork_userID' AND object_id = OBJECT_ID('[dbo].[Withdrawals]'))
             BEGIN
             CREATE NONCLUSTERED INDEX INDX_Withdrawals_AccountNumber_SocialNetwork_userID ON Withdrawals ([AccountNumber],[SocialNetwork],[userID]) WITH (ONLINE=ON)
             END
         </sql>
     </changeSet>
   <changeSet id="jwr-db-isAddPasswordNewConfig" author="Khushal">
    	<comment>isAddPasswordNewConfig to show the new flow the add password popup</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'isAddPasswordNewConfig', 'true', 1, 'bool', 'enable for the new add password flow. Disable for old flow')
    	</sql>
   	</changeSet>
  	
  	<changeSet id="jwr-db-vipchange-pubsub-cfg" author="Nilesh">
     	<comment>Setting Vip Cahnge Request pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipconfigchangesubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable withdrawal subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipconfigchangesubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipconfigchangesubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipconfigchangesubscriber', 'pubsub.topic', '', 1, 'text', 'withdrawal request')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipconfigchangesubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipconfigchangesubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipconfigchangesubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipchangepublisher', 'enablevipchangeevent', 'false', 1, 'bool', 'Enable/Disable withdrawal publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipchangepublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipchangepublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('vipchangepublisher', 'pubsub.topic', '', 1, 'text', 'withdrawal request')         
     	</sql>
    </changeSet>

    <changeSet id="jwr-db-add-reg-enable-disable-config" author="Ashutosh">
    	<comment>Add config to enable/disable user registrations</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'enabled', 'true', 1, 'bool', 'Enable/Disable user registrations');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'disabled.till', '', 1, 'text', 'Disable User registration till. 19 May 2020 19:10:35 GMT+05:30');
    	</sql>
    </changeSet>

     <changeSet id="jwr-db-create-table-DopamineQuestionairre" author="Khushal">
    	<comment>Create table DopamineQuestionairre in JWR database</comment>
    	<sql>
    			create table DopamineQuestionairre(
				id int identity (1,1) PRIMARY KEY,
				name varchar(100) not null,
				priority int not null,
				startDate datetime not null default getdate(),
				endDate datetime not null default getdate(),
				status bit not null default 1,
				windowPeriod varchar(100),
				triggerCountType varchar(15) not null,
				triggerCount int not null default 1,
				triggerPoint varchar(1000),
				gameVariant varchar(500),
				userSegment varchar(500),
				platform varchar(500),
				targetCommunicationTitle varchar(50) not null,
				targetPopupLimit int not null default 0,
				targetPopupCTA1   varchar(50) not null,
				targetPopupCTA2  varchar(50) not null,
				targetPopupDetail  varchar(500) not null,
				createdDate  datetime not null default getdate(),
				updateDate  datetime not null default getdate(),
				isActive  bit  not null default 1,
				targetPopupCTAAction varchar(25) not null,
				)
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-gametTableAnnouncements4" author="Pushpender">
		<comment>update loyaltyIntegration in GameTableAnnouncements </comment>
		<sql>
			ALTER TABLE [dbo].[GameTableAnnouncements]
			ADD vipCategory [varchar](250) NOT NULL  DEFAULT ('ALL'), 
			loyaltyClub  [varchar](250) NOT NULL  DEFAULT ('ALL') ,
			platform [int] NOT NULL  DEFAULT ((0)),
			tournamentType [int] NULL;
		</sql>
	</changeSet>
	

	 <changeSet id="jwr-db-create-index-DopamineQuestionairre" author="khushal">
     	<comment>Adding Index for DopamineQuestionairre table</comment>
        <sql>
             IF NOT EXISTS (SELECT * FROM sys.indexes WHERE name = 'INDX_DopamineQuestionairre' AND object_id = OBJECT_ID('[dbo].[DopamineQuestionairre]'))
             BEGIN
               CREATE NONCLUSTERED INDEX [INDX_DopamineQuestionairre]
               ON [dbo].[DopamineQuestionairre] ([status],[isActive],[endDate])
             END
         </sql>
     </changeSet>
    
    <changeSet id="jwr-db-max-table-threshold-email" author="Ritika">
    	<comment>Send email when max threshold is reached</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('maxtablethreshold', 'email', '', 1, 'text', 'Email recipients | separated')
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-enable-disable-email-verification" author="Ashutosh">
    	<comment>Add config to enable/disable email verification action</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES 
				('email', 'email.verification.enabled', 'true', 1, 'bool', 'Enable/Disable email verification');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES 
				('email', 'email.verification.disabled.till', '', 1, 'text', 'Disable Email Verification till. 19 May 2020 19:10:35 GMT+05:30');
    	</sql>
    </changeSet>

    <changeSet id="jwr-db-add-last-name-in-users-table" author="Yugantar" context="local">
    	<comment>Adding lastname column in users table</comment>
    	<sql>
    		alter table Users add
    		[MiddleName] [varchar](50) NULL
    	</sql>
    </changeSet>
    
     <changeSet id="jwr-db-enable-contact-invitations" author="Ritika">
    	<comment>Enable/Disable contact invitations feature</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'sendContactInvitations', 'true', 1, 'bool', 'Enable/Disable contact invitations feature')
    	</sql>
    </changeSet>
	<changeSet id="jwr-db-user-invites-count-limit" author="Ritika">
     	<comment>Config to set daily and lifetime number of user invites limit</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'dailyLimit', '10000', 1, 'number:1000:10000:1', 'Number of invites a user can send in one day.')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'lifetimeLimit', '100000', 1, 'number:1000:100000:1', 'Lifetime invites a user can send.')
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-add-column-udpatedat-UserLoginDetails" author="Ashutosh">
     	<comment>Adding new columns to UserLoginDetails table</comment>
     	<sql>
     	    ALTER TABLE UserLoginDetails add
	        updatedAt DATETIME DEFAULT GETDATE();
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-add-column-authtoken-UserLoginDetails" author="Ashutosh">
     	<comment>Adding new columns to UserLoginDetails table</comment>
     	<sql>
     	    ALTER TABLE UserLoginDetails add
	        authToken varchar(40) NULL;
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-add-column-udpatedat-UserVerificationDetails" author="Ashutosh">
     	<comment>Adding new columns to UserVerificationDetails table</comment>
     	<sql>
     	    ALTER TABLE UserVerificationDetails add
	        updatedAt DATETIME DEFAULT GETDATE();
     	</sql>
     </changeSet>

     <changeSet id="jwr-db-app-roll-out-strategy" author="Utkarsh">
     	<comment>Config to set App roll-out strategy</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-roll-out', 'currentVersion', '1.22.20', 1, 'text', 'Current version of APK')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-roll-out', 'latestVersion', '1.22.20', 1, 'text', 'Latest version of APK')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-roll-out', 'minVersion', '1.22.16', 1, 'text', 'Minimum version of APK')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-roll-out', 'updateUrl', 'https://m.jungleerummy.com/downloads/apk/', 1, 'text', 'URL of the download URL')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-roll-out', 'forceUpdate', '1.22.17', 1, 'text', 'Enter app versions which need force update')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-roll-out', 'newrollout.distribution', '100', 1, 'number:0:100:1', 'Percentage of new users, to recieve new app download.')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-roll-out', 'updaterollout.distribution', '100', 1, 'number:0:100:1', 'Percentage of app users, to recieve this update')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-roll-out', 'updatePopup.header', 'Upgrade App', 1, 'text', 'Header text of the update pop-up')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-roll-out', 'updatePopup.message', 'A better, faster version of the app (NEW_APK_VER) is available NOW.', 1, 'text', 'Description text of the update pop-up')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-roll-out', 'updatePopup.cta', 'UPDATE NOW', 1, 'text', 'CTA for the update pop-up')
			
     	</sql>
     </changeSet>

      <changeSet id="jwr-db-userloginlog-cfg" author="Nidhi">
     	<comment>Setting userloginlog pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogsubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable user login log subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogpublisher', 'enableuserloginlog', 'false', 1, 'bool', 'Enable/Disable user login log publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     	</sql>
     </changeSet>
    
     <changeSet id="jwr-db-payment-gateway-razorpay-entry" author="Udbhav">
     	<comment>Gateway configuration for Razorpay payment</comment>
     	<sql>
			INSERT into GATEWAY values('Razorpay','https://checkout.razorpay.com/v1/checkout.js','merchantId:rzp_test_LJeM0QYXHnNxxY;secretKey:xGLFSDdlcYl2F6ettERdGVbY;domain:api.razorpay.com','https://www.jungleegames.com/paymentcallback/razorpayresponse','',1,1,'',1);
     	</sql>
     </changeSet>
     

 	<changeSet id="jwr-cash-restricted-popup-content-configurations" author="Kunal">
		<comment>Adding config to configure cash restricted popup content in PSAPP</comment>
		<sql>
   		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cash-restricted-popup', 'cashRestrictedTitle', 'Feature Locked', 1, 'text', 'Configure cash restricted popup title.')
   		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cash-restricted-popup', 'cashRestrictedDescription', 'As per the agreed TnCs, please visit jungleerummy.com to access this and other premium features', 1, 'text', 'Configure cash restricted popup description.')
   		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cash-restricted-popup', 'withdrawalCashRestrictedTitle', 'You Won!', 1, 'text', 'Configure cash restricted popup title for withdrawing money PSAPP.')
   		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cash-restricted-popup', 'withdrawalCashRestrictedDescription', 'To claim your winnings and win big, visit jungleerummy.com ', 1, 'text', 'Configure cash restricted popup description for withdrawing money psapp.')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-update-levels-title" author="Pushpender">
		<comment>Update levels title</comment>
		<sql>
			UPDATE [dbo].[Levels] SET [dbo].[Levels].[title] = 'Novice 1' WHERE [dbo].[Levels].[title] = 'Underdog 1';
			UPDATE [dbo].[Levels] SET [dbo].[Levels].[title] = 'Novice 2' WHERE [dbo].[Levels].[title] = 'Underdog 2';
			UPDATE [dbo].[Levels] SET [dbo].[Levels].[title] = 'Novice 3' WHERE [dbo].[Levels].[title] = 'Underdog 3';
			UPDATE [dbo].[Levels] SET [dbo].[Levels].[title] = 'Big Gun 1' WHERE [dbo].[Levels].[title] = 'Big Dog 1';
			UPDATE [dbo].[Levels] SET [dbo].[Levels].[title] = 'Big Gun 2' WHERE [dbo].[Levels].[title] = 'Big Dog 2';
			UPDATE [dbo].[Levels] SET [dbo].[Levels].[title] = 'Big Gun 3' WHERE [dbo].[Levels].[title] = 'Big Dog 3';
		</sql>
	</changeSet>

    
      <changeSet id="jwr-Add-indexes-in-ConfigureLoyaltyCommunicationRunHistory-table" author="Ritika">
     	<comment>Adding Index for ConfigureLoyaltyCommunicationRunHistory table</comment>
        <sql>
             IF NOT EXISTS (SELECT * FROM sys.indexes WHERE name = 'INDX_ConfigureLoyaltyCommunicationRunHistory' AND object_id = OBJECT_ID('[dbo].[ConfigureLoyaltyCommunicationRunHistory]'))
             BEGIN
               CREATE NONCLUSTERED INDEX [INDX_ConfigureLoyaltyCommunicationRunHistory]
               ON [dbo].[ConfigureLoyaltyCommunicationRunHistory] ([CreatedDate],[IsDaily])
               WITH(ONLINE=ON)
             END
         </sql>
     </changeSet>

     <changeSet id="jwr-lastgame-config" author="Chirag">
		<comment>Configs for last game</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('lastGame', 'lastGame.platforms', 'all', 0, 'text', 'Comma separated Platforms for which Last game is to be enabled')	
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('lastGame', 'lastGame.gameType.free13Cards.bool', 'false', 0, 'bool', 'Set Last Game enabled for free13Cards');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('lastGame', 'lastGame.gameType.cash13Cards.bool', 'false', 0, 'bool', 'Set Last Game enabled for cash13Cards');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('lastGame', 'lastGame.gameType.free10Cards.bool', 'false', 0, 'bool', 'Set Last Game enabled for free10Cards');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('lastGame', 'lastGame.gameType.cash10Cards.bool', 'false', 0, 'bool', 'Set Last Game enabled for cash10Cards');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('lastGame', 'lastGame.popup.initiationTime.second.int', '5', 0, 'number', 'Time after that last Game Popup will be visible on game table');
		</sql>
     </changeSet>
     <changeSet id="jwr-db-ALTER-Withdrawal-Flags-Config" author="Bharat">
     <sql>
     		 ALTER TABLE WithdrawalFlagConfigs ALTER COLUMN value VARCHAR (1000);
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('DisproportionateAssetsValues','[{"ONGDepositeRatio":2.0,"ONG":2000},{"ONGDepositeRatio":3.0,"ONG":5000}]');
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('DisproportionateAssetsEnabled','false');
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('HistoryCheckEnabled','false');
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('LowLiquidityCollusionEnabled','false');
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('LastWithdrawalVIPCategory','0');
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('HistoryCheckWithdrawalAmount','250');
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('LowLiquidityCollusionTotalNetWinning','250'); 
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('HistoryCheckWithdrawalRatio','60.0');
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('LowLiquidityCollusionRatio','80.0'); 
		     
		     
		</sql>
     </changeSet>
     <changeSet id="jwr-db-ALTER-Withdrawal-Flags-Enable" author="Bharat">
		<comment>adding description column in withdrawal flag</comment>
		<sql>
			ALTER TABLE WITHDRAWALFLAGS ADD description VARCHAR (1000);
			ALTER TABLE WITHDRAWALFLAGS ADD isFlagEnable BIT NOT NULL default 'TRUE' ;
		</sql>
	</changeSet>    
     
     <changeSet id="jwr-add-userloginlog-table-type" author="Nidhi">
		<comment>Adding table type for userLogin log SP</comment>
		<sql>
				IF TYPE_ID('UserLoginLogTableType') IS NULL
				BEGIN
				CREATE TYPE [dbo].[UserLoginLogTableType] AS TABLE
				(
            		timestamp varchar(128),
                    userID bigint NOT NULL,
                    remoteHost varchar(255),
                    activityType varchar(50),
    				details varchar(300),
				    userDeviceType varchar(300),
				    userAgentType varchar(300),
				    osName varchar(300),
				    osVersion varchar(300),
				    browserName varchar(300),
				    browserVersion varchar(300),
				    engineName varchar(300),
				    engineVersion varchar(300),
				    appVersion varchar(300),
				    deviceName varchar(300),
				    userAgent varchar(300),
				    imei bigint,
				    uuid varchar(300)
				)
				END
				
		</sql>
	 </changeSet>
  
	<changeSet id="jwr-processed-instant-withdrawals" author="Nilesh">
		<comment>Keeps track of all processed instant withdrawal requests</comment>
		<sql>
			create table ProcessedInstantWithdrawals(
			withdrawalId INT NOT NULL PRIMARY KEY)
		</sql>
	</changeSet>
	
	<changeSet id="jwr-resposibleplay-config" author="Ritika">
		<comment>Configs for Responsible Play</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('ResponsiblePlay', 'responsibleplay.gamecount.int', '10', 1, 'number', 'Threshold game count')	
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('ResponsiblePlay', 'responsibleplay.popupcount.int', '1', 1, 'number', 'Number of times popup is to shown to user');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('ResponsiblePlay', 'responsibleplay.time.int', '24', 1, 'number:1:48:1', 'System to check the count for the last X hours');
		</sql>
	</changeSet>
	<changeSet id="jwr-best-declare-config" author="Nilesh">
		<comment>Configs for best declare</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('bestDeclare', 'bestDeclare.platforms', '', 0, 'text', 'Comma separated Platforms for which Best Declare is to be enabled');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('bestDeclare', 'bestDeclare.gameType.points.13c.bool', 'false', 0, 'bool', 'Set Best Declare enabled for 13c points variant');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('bestDeclare', 'bestDeclare.gameType.points.10c.bool', 'false', 0, 'bool', 'Set Best Declare enabled for 10c Points variant');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('bestDeclare', 'bestDeclare.gameType.pool.13c.bool', 'false', 0, 'bool', 'Set Best Declare enabled for 13c pool variant');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('bestDeclare', 'bestDeclare.gameType.deal.13c.bool', 'false', 0, 'bool', 'Set Best Declare enabled for 13c deal variant');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('bestDeclare', 'bestDeclare.gameType.tournament.13c.bool', 'false', 0, 'bool', 'Set Best Declare enabled for tournaments');
		</sql>
     </changeSet>
	  
	<changeSet id="jwr-table-NewCoinTransactions" author="Ritika" context="local">
		<comment>Adding new table New_CoinTransactions</comment>
		<sql>
		IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[New_CoinTransactions_2020_06]') AND type in (N'U'))
		BEGIN
			CREATE TABLE New_CoinTransactions_2020_06 (
			 [transactionID] [bigint] NOT NULL PRIMARY KEY,
			 [userID] [int] NOT NULL,
			 [delta] [money] NOT NULL DEFAULT ((0)),
			 [newBalance] [money] NOT NULL DEFAULT ((0)),
			 [timestamp] [datetime] NOT NULL,
			 [memo] [varchar](255) NULL,
			 [transactionType] [tinyint] NOT NULL DEFAULT ((0)),
			 [fromUserID] [int] NOT NULL DEFAULT ((0)),
			 [TableConfigId] [int] NOT NULL DEFAULT ((-1)),
			 [GameId] [bigint] NULL,
			 [DepositBalance] [money] NOT NULL DEFAULT ((0)),
		     [WithdrawableBalance] [money] NOT NULL DEFAULT ((0)),
			 [isInconsistent] [bit] NOT NULL DEFAULT ((0))
			 )
		END
		</sql>
	</changeSet>
	<changeSet id="jwr-withdrawal-flag-config-FDA" author="Bharat">
		<comment>Configs for first deposit amount</comment>
		<sql>
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('FirstDepositAmount','2000');
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('FirstDepositAmountEnabled','true');
		     INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('FirstDepositAmountVIPCategory','0');
		</sql>
     </changeSet>
     
	<changeSet id="jwr-db-tsp" author="Mirek">
		<comment>Creates TournamentsSuspensionPeriods table</comment>
		<sql>
			CREATE TABLE [dbo].[TournamentsSuspensionPeriods](
				[id] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
				[startTime] [datetime] NOT NULL,
				[endTime] [datetime] NOT NULL,
				[enabled] [bit] NOT NULL,
				[filter] [varchar](120) NULL,
		
				CONSTRAINT [PK_TournamentsSuspensionPeriods] PRIMARY KEY CLUSTERED(
						[id] ASC
				)ON [PRIMARY]
			) ON [PRIMARY]
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-table-configurations-mmo" author="Mirek">
		<sql>
			ALTER TABLE [dbo].[TableConfigurations] ADD mmPlayersOrder [varchar](16) NULL
		</sql>
	</changeSet>

	<changeSet id="jwr-db-banner-configuration-loyalty-addition" author="Niraj">
    	<comment>Loyalty Segment Added into Banner Configuration</comment>
    	<sql>
		ALTER TABLE [dbo].[BannerConfiguration] ADD LoyaltySegment [int] NULL
    	</sql>
    </changeSet>
    <changeSet id="jwr-AutoKYCUserData-add-provider" author="Souvik">
		<comment>Adding auto kyc provider name in AutoKYCUserData table</comment>
		<sql>
		  ALTER TABLE [dbo].[AutoKYCUserData]
			ADD Provider varchar(30) NOT NULL DEFAULT 'OCR_SERVICE'
		</sql>
   </changeSet> 
   
   <changeSet id="jwr-db-add-audience-publisher-cfg" author="Avneet">
     	<comment>Adding publisher configs</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencepublisher', 'enableaudienceevents', 'false', 1, 'bool', 'Enable/Disable audience events')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencepublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencepublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencepublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencepublisher', 'oid', 'jwrqa', 1, 'text', 'Organisation id - jwr + suffix with dev,qa or uat')

     	</sql>
     </changeSet>
    <changeSet id="jwr-db-gamestats-publisher-cfg" author="Nidhi">
         <comment>Setting gamestats Publsiher config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatspublisher', 'enablegamestats', 'false', 1, 'bool', 'Enable/Disable game stats')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatspublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatspublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatspublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
             </sql>
      </changeSet>
      
    <changeSet id="jwr-db-gamestats-subscriber-cfg" author="Ritika">
     	<comment>Setting gamestats subscriber config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatssubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable practice game stats')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatssubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatssubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatssubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatssubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatssubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('practicegamestatssubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	</sql>
     </changeSet>
     <changeSet id="jwr-gdb-muid-config-cfg" author="Ashish">
     	<comment>Setting MUID config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'muid.isActive', 'false', 1, 'bool', 'Enable/Disable muid')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'api.url', 'http://172.25.2.21:8080/user/getOneUser', 1, 'text', 'api end point')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'score.imei', '60', 1, 'text', 'IMEI match score')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'score.fullname', '60', 1, 'text', 'fullname match score')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'score.partialname', '30', 1, 'text', 'partial match score')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'score.dob', '50', 1, 'text', 'partial match score')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'score.ip', '0', 1, 'text', 'partial match score')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'score.mobile', '40', 1, 'text', 'partial match score')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'score.email', '10', 1, 'text', 'partial match score')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'threshold.fraud', '110', 1, 'text', 'threshold score for fraud activity')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'score.clean', '90', 1, 'text', 'threshold score for clean activity')     

		</sql>
   	 </changeSet>		     		 
			 
     <changeSet id="jwr-db-WithdrawalFlags-change-column" author="Ashutosh">
     	<comment>Change column data type</comment>
     	<sql>
     	    ALTER TABLE WithdrawalFlags
			  ALTER COLUMN uservaluewhileflagging DECIMAL(14, 4)
			
			ALTER TABLE WithdrawalFlags
			  ALTER COLUMN thresholdvalue DECIMAL(14, 4)
			
			ALTER TABLE WithdrawalFlags
			  ALTER COLUMN productconfigvalue DECIMAL(14, 4)
     	</sql>
   	 </changeSet>
     
     <changeSet id="jwr-db-DepositWithdrawalRatioFlag-cfg" author="Ashutosh">
     	<comment>DepositWithdrawalRatioFlag config for all VIP segments</comment>
     	<sql>
     	    INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.DepositWithdrawalRatioThreshold','1.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.DepositWithdrawalRatioFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.DepositWithdrawalRatioThreshold','1.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.DepositWithdrawalRatioFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.DepositWithdrawalRatioThreshold','1.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.DepositWithdrawalRatioFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.DepositWithdrawalRatioThreshold','1.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.DepositWithdrawalRatioFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.DepositWithdrawalRatioThreshold','1.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.DepositWithdrawalRatioFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.DepositWithdrawalRatioThreshold','1.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.DepositWithdrawalRatioFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.DepositWithdrawalRatioThreshold','1.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NEWBIE.DepositWithdrawalRatioFlagEnabled','false');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.DepositWithdrawalRatioThreshold','1.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.DepositWithdrawalRatioFlagEnabled','false');
     	</sql>
     </changeSet>

      <changeSet id="jwr-db-userloginlog--batchhssize-cfg" author="Nidhi">
     	<comment>Setting userloginlog batchsize config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogsubscriber', 'logbatchsize', '1', 1, 'number:1:5000:1', 'Logs batch size for user login log messages')
     	</sql>
     </changeSet>
     <changeSet id="jwr-db-webengage-webclient-cfg" author="Nidhi">
		<comment>Adding webengage api configurable values</comment>
		<sql>
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'maxconnections', '100', 1, 'number:100:10000:10', 'webengage http client max onnectiona')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('webengage', 'timeout', '5000', 1, 'number:5000:500000:100', 'webengage API timeout')
		</sql>
	</changeSet>
	<changeSet id="jwr-Add-loyalty-point-tournament-rupee-value" author="Nemesiss">
		<comment>Add Loyalty Point Tournament rupee value</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('loyaltypointsconfig', 'loyalty.points.tour.cash.wager.value', '50', '0', 'number', 'tournament cash rupee value of one loyalty point')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('loyaltypointsconfig', 'loyalty.points.tour.ticket.wager.value', '50', '0', 'number', 'tournament ticket rupee value of one loyalty point')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-responsibleplay-cfg" author="Ritika">
     	<comment>Setting responsibleplay pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaysubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable user login log subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaysubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaysubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaysubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaysubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaysubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaysubscriber', 'pubsub.subscriber.consumercount', '1', 1, 'number:1:10:1', 'Subscriber consumer count')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaypublisher', 'enablepublisher', 'false', 1, 'bool', 'Enable/Disable user login log publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaypublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaypublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsibleplaypublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
   	     </sql>
     </changeSet>
	   <changeSet id="jwr-cfg-resultscreen-reduced-timer" author="Nilesh">
       	<sql>
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.6s.viewresultsreduced',	'10000', '1', 'number:1000:120000:1000','Reduced Result time for 13 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.6s.viewresultsreduced',	'10000', '1', 'number:1000:120000:1000','Reduced Result time for 10 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.6s.viewresultsreduced',	'10000', '1', 'number:1000:120000:1000','Reduced Result time for 21 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.13c.resultreducetimer.enabled', 'false', 1, 'bool', 'Controls whether result reduce timer is to be activated for 13 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.10c.resultreducetimer.enabled', 'false', 1, 'bool', 'Controls whether result reduce timer is to be activated for 10 card Points variant');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.points.21c.resultreducetimer.enabled', 'false', 1, 'bool', 'Controls whether result reduce timer is to be activated for 21 card Points variant');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-user-self-exclusion-enddate" author="Deepak">
		<comment>Adding self exclusion end date</comment>
		<sql>
			ALTER TABLE [dbo].[Users] ADD [selfExclusionEndDate] [datetime] NULL;
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-tournament-batchhssize-cfg" author="Bharat">
     	<comment>Setting tournament withdrawal event batchsize config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'tournamentEventBatchSize', '100', 1, 'number:1:5000:1', 'Withdrawal event batch size for tournament eliminated player')
	     	</sql>
     </changeSet>

	<changeSet id="jwr-db-userloginlog-cfg-consumer-count" author="Nidhi">
     	<comment>Setting userloginlog consumer count config</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userloginlogsubscriber', 'pubsub.subscriber.consumercount', '4', 1, 'number:2:10:2', 'consumer count')
     	</sql>
     </changeSet>
   
   <changeSet id="jwr-db-app-install-download-log-cfg" author="Khushal">
     	<comment>Setting App Install-Download Data pubsub config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallsubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable user account history subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallsubscriber', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:8:2', 'Subscriber consumer count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallsubscriber', 'logbatchsize', '1', 1, 'number:1:5000:1', 'Logs batch size for user activity log messages')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallpublisher', 'enableuseraccounthistory', 'false', 1, 'bool', 'Enable/Disable user account history')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstallpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
			
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadappsubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable user account history subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadappsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadappsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadappsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadappsubscriber', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:8:2', 'Subscriber consumer count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadappsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadappsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadappsubscriber', 'logbatchsize', '1', 1, 'number:1:5000:1', 'Logs batch size for user activity log messages')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadapppublisher', 'enableuseraccounthistory', 'false', 1, 'bool', 'Enable/Disable user account history')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadapppublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadapppublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('downloadapppublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
            
     	</sql>
     </changeSet>
     
    <changeSet id="jwr-db-game-master-player-auth-cfg" author="Mirek">
		<sql>
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameplayerauth', 'enabled', 'false', 1, 'bool', 'If enabled then game server will allow client to connect only if master server authorized that player for given table')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gameplayerauth', 'expire.time.seconds', '15', 1, 'number:5:300:1', 'For how long authorization allowance is granted (after matchmaking) in seconds')
		</sql>
	</changeSet>
	<changeSet id="jwr-touranment-highlighting" author="Nilesh">
     	<comment>Adding ability to highlight tournament over multiple days</comment>
     	<sql>
     	    ALTER TABLE Tournaments ADD [HighlightStartDateTime] [datetime] NULL;
     	    ALTER TABLE Tournaments ADD [HighlightEndDateTime] [datetime] NULL;
     	    ALTER TABLE TournamentSchedules ADD [HighlightStartMinutes] [int] NULL;
 			ALTER TABLE TournamentSchedules ADD [HighlightEndMinutes] [int] NULL;
	     </sql>
     </changeSet>
	<changeSet id="jwr-db-mm-guard-cfg" author="Mirek">
		<sql>
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-guard', 'mongodb.connectionstring', 'mongodb://localhost:27017', 1, 'text', 'MongoDB connection string as specified in https://docs.mongodb.com/manual/reference/connection-string/ (restart mm-guard after change)')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-guard', 'kafka.bootstrap.servers', 'localhost:9092', 1, 'text', 'Coma separated list of kafka brokers (restart mm-guard after change)')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-guard', 'kafka.topic', 'rcd', 1, 'text', 'Kafka topic that MM Guard will subscribe to (restart mm-guard after change)')
		
		</sql>
	</changeSet>

	<changeSet id="jwr-db-remind-friend-limit" author="Ritika">
		<sql>
			ALTER TABLE [dbo].[Invitations] ADD lastReminderWeek [int] NOT NULL DEFAULT ((0));
			ALTER TABLE [dbo].[ContactInvitations] ADD lastReminderWeek [int] NOT NULL DEFAULT ((0));
			
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'reminder.weeklyLimit', '1', 1, 'text', 'Number of reminders to be sent in a week.')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-appinstall-blacklist-drm-cfg" author="Utkarsh">
     	<comment>Setting blacklist DRM ids in appinstall</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstall', 'appinstall.blacklist.cashapp', '', 1, 'text', 'Blacklist DRM ids for cashapp')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('appinstall', 'appinstall.blacklist.psapp', '', 1, 'text', 'Blacklist DRM ids for psapp')
     	</sql>
    </changeSet>

	<changeSet id="jwr-alter-tournament-promoted-players" author="Ritika">
		<comment>Increasing the length of username column</comment>
		<sql>
			ALTER TABLE tournamentPromotedPlayers ALTER COLUMN username VARCHAR(30) NOT NULL
		</sql>
	</changeSet>
	
	  <changeSet id="jwr-db-add-audience(jwr)-publisher-cfg" author="Avneet">
     	<comment>Adding publisher and susbcriber configs for audience</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalpublisher', 'enableaudienceevents', 'false', 1, 'bool', 'Enable/Disable audience events')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
            
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalsubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable game stats subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audienceinternalsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')

     	</sql>
     </changeSet>
	
	<changeSet id="jwr-db-insert-restricted-state" author="Pushpender">
     	<comment>Add Restricted State</comment>
     	<sql>
     	SET IDENTITY_INSERT States ON; 	
     	    INSERT INTO [States]
				([stateID],
				 [name],
				 [GSTCode]
				)
				VALUES
				(40,
				 'Restricted State',
				 NULL
				);
		SET IDENTITY_INSERT States OFF 		
		</sql>
    </changeSet>
	<changeSet id="jwr-moengage-kafka-config" author="Utkarsh">
     	<comment>Moengage Kafka Config</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable user subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:8:2', 'Subscriber consumer count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'logbatchsize', '1', 1, 'number:1:5000:1', 'Logs batch size for user activity log messages')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagepublisher', 'enablepublisher', 'false', 1, 'bool', 'Enable/Disable publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagepublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagepublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagepublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
	    </sql>
    </changeSet>
    
   <changeSet id="jwr-moengage-API-config" author="Utkarsh">
     	<comment>Moengage API Config</comment>
     	<sql> 
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'moengage.api', 'https://api-serv3.moengage.com/v1/event', 1, 'text', 'Moengage API URL')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'moengage.data.api', '', 1, 'text', 'Moengage Data API (username)')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('moengagesubscriber', 'moengage.data.api.key', '', 1, 'text', 'Moengage Data API Key (password)')
     </sql>
    </changeSet>
    
 <changeSet id="jwr-clevertap-kafka-and-api-config" author="Khushal">
     	<comment>Moengage Kafka Config</comment>
     	<sql>   
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable user subscription')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:8:2', 'Subscriber consumer count')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'logbatchsize', '1', 1, 'number:1:5000:1', 'Logs batch size for user activity log messages')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertappublisher', 'enableubsilsher', 'false', 1, 'bool', 'Enable/Disable publisher')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertappublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertappublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertappublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
			
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'clevertap.api', 'https://api.clevertap.com/1/upload', 1, 'text', 'CleverTap API URL')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'clevertap.account.id', '', 1, 'text', 'CleverTap Account Id')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clevertapsubscriber', 'clevertap.account.passcode', '', 1, 'text', 'CleverTap Account Passcode')
     </sql>
    </changeSet>
    
     <changeSet id="jwr-http-API-client-config" author="khushal">
     	<comment>Moengage API Config</comment>
     	<sql> 
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('http.api.client', 'maxconnections', '100', 1, 'number:1:5000:1', 'maximum no of connection of http call')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('http.api.client', 'timeout', '2000', 1, 'number:1:5000:1', 'timeout of api call')
     </sql>
    </changeSet>

	<changeSet id="jwr-db-mm-guard2-cfg" author="Mirek">
		<sql>
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-guard', 'collude.window.minutes', '60', 1, 'number:1:10080:1', 'How long time window (in minutes) is checked for collusion events to pass threshold')
			INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-guard', 'collude.threshold', '3', 1, 'number:1:1000:1', 'How many times (within time window) rcd event for a pair of players must be received to mark them as excluded from matchmaking')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-bankdetails-utks" author="Udbhav">
		<comment>Adding UTKS bank in the BankDetails</comment>
		<sql>
			INSERT INTO [dbo].[BankDetails] VALUES ('UTKS' , 'Utkarsh Small Finance Bank');
		</sql>
	</changeSet>
	
     <changeSet id="jwr-db-tournament-update-turn-time" author="Mirek">
     	<sql>UPDATE [dbo].[TournamentTemplates] SET [turnTime] = 30;</sql>
     </changeSet>
    
	<changeSet id="jwr-db-config-for-geolocation-api-timeout" author="Ritika">
		<comment>Configuration to hold geolcation API timeout</comment>
		<sql>
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'proip.timeout', '5000', 1, 'number:1000:10000:1000', 'Geolocation service API timeout')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-alter-tournament-registrations-table" author="Nidhi">
		<comment>Increasing the length of username column</comment>
		<sql>
			ALTER TABLE TournamentRegistrations ALTER COLUMN username VARCHAR(30) NOT NULL
		</sql>
	</changeSet>
	<changeSet id="jwr-alter-increase-columnlength-Gateway" author="Khushal">
		<comment>Increasing the length of username column</comment>
		<sql>
			Alter table Gateway
			ALTER COLUMN ConfigParameters varchar(1000);
			
			Alter table Gateway
			ALTER COLUMN ReturnURL varchar(500);
	</sql>
	</changeSet>
	

	<changeSet id="jwr-add-sub-gateway-in-deposittransaction-table" author="Khushal">
		<comment>Add new column in deposittransaction</comment>
		<sql>
			alter table DEPOSITTRANSACTIONS 
			add subGateway varchar(20) default('')
	</sql>
	</changeSet>
	<changeSet id="jwr-db-add-ozontal-api-token" author="Deepak">
     	<comment>Add token for OZONTAL API in admin panel used for (Outbound dialling)</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('obd', 'api_key', '', 1, 'text', 'API key for OZONETEL API in admin panel used for (Outbound dialling)')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('obd', 'url', '', 1, 'text', 'API URL for OZONETEL in admin panel used for (Outbound dialling)')
 			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('obd', 'timeout', '10', 1, 'number:10:100:1', 'The timeout of OZONETEL API')
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-http-API-client-config-update" author="Ritika">
     	<comment>Removing . from config id</comment>
     	<sql> 
			update cfg set id = 'http-api-client' where id = 'http.api.client'    
		 </sql>
    </changeSet>

     <changeSet id="jwr-alter-type-responsibleplay-cfg" author="Ritika">
		<comment>Updating type</comment>
		<sql>
	    	update cfg set type= 'number:0:10:1' where [key] = 'responsibleplay.popupcount.int'; 
			update cfg set type= 'number:1:2000:1' where [key] = 'responsibleplay.gamecount.int';
		</sql>
	</changeSet>
	<changeSet id="jwr-alter-user-reg-info-add-apkVersion" author="Yugantar">
		<comment>Add new column apkVersion in UserRegistrationInfo table</comment>
		<sql>
			alter table UserRegistrationInfo 
				Add appVersion VARCHAR(15) NULL
		</sql>
	</changeSet>
	 <changeSet id="jwr-withdrawal-techpro-payout-statusapi-enable/disable" author="Niraj">
		<comment>Adding config in cfg to enable/disable techpropayout staus api call</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('techpro', 'enable.techprostausapicall', 'false', 1, 'bool', 'Enable/Disable techpro payout status api call.');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('techpro', 'clientsecret', '19b179da-ae62-4768-9a31-d889ae908408', 1, 'text', 'techpro clientSecret')
		</sql>
	</changeSet>

	 <changeSet id="jwr-enable/disable-paytm-appinvoke" author="Khushal">
		<comment>Enable/Disable appinvoke flow</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payments', 'deposit.enable.paytminvoke', 'false', 0, 'bool', 'Enable/Disable Paytm Appinvoke flow.');
			
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-clientemulator-cfg-rework" author="Mirek">
		<sql>
			DELETE FROM [dbo].[cfg] WHERE [id] = 'clientEmulator'
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientEmulator', 'main.server.url', 'ws://localhost:8080/ws', 1, 'text', 'Main Server websocket full URL');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientEmulator', 'lobby.server.url', 'ws://localhost:8081/wslobby', 1, 'text', 'Loby Server websocket full URL');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientEmulator', 'game.server.gateway.url', '', 1, 'text', 'ws URI of gameserver gateway. For non-localhost env it should be wss://gateway-address');
		</sql>
	</changeSet>
	<changeSet id="add-restricted-state-column-users-table" author="Pushpender">
     	<comment>Add new column restrictedStateId in Users table</comment>
     	<sql>
     		ALTER TABLE [dbo].[Users] ADD  [restrictedStateId] [smallint] NOT NULL DEFAULT ((0));
     	</sql>
  </changeSet>
	<changeSet id="jwr-registration-allowed-per-device" author="Utkarsh">
		<comment>Adding config in cfg to allow number of registrations on a device for Cash apk</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'perdevice.cashapp.registrations', '5', 1, 'number:1:100:1', 'Number of cash app registrations allowed on a device.');
		</sql>
	</changeSet>
	 <changeSet id="jwr-ipl-scoreboard-settings" author="Mayank">
		<comment>Adding configs for IPL scoreboard on game table</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cricket-scoreboard', 'cricket.scoreboard.enable', 'false', 0, 'bool', 'Enable/Disable scoreboard.');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cricket-scoreboard', 'cricket.scoreboard.timeoffset.match-1', '3600', 0, 'number', 'Time in secs for scoreboard to show before Match-1 starts');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cricket-scoreboard', 'cricket.scoreboard.timeoffset.match-2', '1200', 0, 'number', 'Time in secs for scoreboard to show before Match-2 starts');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cricket-scoreboard', 'cricket.scoreboard.match.priority', '2', 0, 'number:1:2:1', 'Priority of the match to show score, in case of time conflict');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cricket-scoreboard', 'cricket.scoreboard.enable.usercategories', '', 0, 'text', 'User categories for which the scoreboard in enabled');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cricket-scoreboard', 'cricket.scoreboard.widgetautofoldtimeout', '10', 0, 'number', 'The timeout in secs in which the scoreboard widget will auto fold');
		</sql>
	</changeSet>
	<changeSet id="jwr-enable/disable-haptik-sdk" author="Khushal">
		<comment>Enable/Disable Haptik SDK config</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'haptik.sdk', 'false', 1, 'bool', 'Enable/Disable haptik.sdk.');
		</sql>
	</changeSet>
	<changeSet id="jwr-db-test-Login-Mobile-entries-in-cfg" author="Bharat">
    	<comment>Config test mobile number for login </comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'testLoginMobileNumber', '7976608280', 1, 'text:109', 'This number can be use for login test, add max 10 number seprated with comma')
    		UPDATE [dbo].[cfg] set type='text:109' where [id]='utils' and [key]='testmobileNumber'
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-alter-mobile-device-info" author="Utkarsh">
    	<comment>Altering Mobile device info add column cashDeviceDRMId</comment>
		  <sql>
		  	ALTER TABLE MobileDeviceInfo ADD cashDeviceDRMId [varchar](100) NULL;
		</sql>
	</changeSet>
	
    <changeSet id="jwr-db-sitAndGoTournaments" author="Nemesiss">
    	<comment>adding reg end when full column in tournaments table</comment>
		<sql>
			ALTER TABLE tournaments ADD regEndWhenFull bit NOT NULL default(0);
			ALTER TABLE TournamentSchedules ADD sitAndGoScheduleGapSeconds int NOT NULL default(0);
		</sql>
	</changeSet>
	
    <changeSet id="jwr-db-dlt-infobip" author="Nilesh">
    	<comment>Infobip DLT Entity </comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('sms', 'infobip.indiadlt.principalentityid', '110100001845', 1, 'text', 'Infobip sms Distributed Ledger Technology entity id')
    	</sql>
    </changeSet>
    <changeSet id="jwr-adminapi-config-values " author="Niraj">
		<comment>Adding config in cfg for admin api uses</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('salesforceapi', 'salesforce.starthours', '04:00', 1, 'text', 'Start time for salesforce admin api requests');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('salesforceapi', 'salesforce.endhours', '05:00', 1, 'text', 'End time for salesforce admin api requests');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('salesforceapi', 'salesforce.userlimit', '100', 1, 'number:1:100:1', 'Users Limit for API requests');
		</sql>
	</changeSet>
	 <changeSet id="jwr-add-userId-useremail-table-type" author="Niraj">
		<comment>Adding table type for Inserting userIds for salesforce</comment>
	<sql>
		IF TYPE_ID(N'UserEmailTableForSalesforce') IS NULL
		BEGIN
		CREATE TYPE UserEmailTableForSalesforce AS TABLE
		(
			[email] [varchar](50)
		)
		END
		
		IF TYPE_ID(N'UserIdTableForSalesforce') IS NULL
		BEGIN
		CREATE TYPE UserIdTableForSalesforce AS TABLE
		(
			[UserId] [bigint]
		)
		END
	</sql>
	 </changeSet>
    
    <changeSet id="jwr-ipl-match-eventbonus-subcriber" author="Udbhav">
		<comment>Adding config in cfg to enable/disable Ipl match event subcriber</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('matcheventsubscriber', 'enablesubscription', 'true', 1, 'bool', 'Enable/Disable game stats subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('matcheventsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('matcheventsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('matcheventsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('matcheventsubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('matcheventsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('matcheventsubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
		</sql>
	</changeSet>
	<changeSet id="jwr-ipl-transaction-types" author="Udbhav">
		<comment>Adding IPL prizes transaction types</comment>
		<sql>
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'IPL_PRIZES', N'100')
		</sql>
	</changeSet>
    <changeSet id="jwr-add-payment-flag-config" author="Niraj">
		<comment>Adding payment flagging configuration</comment>
		<sql>
		   	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payments', 'enable.payment.flag', 'false', 0, 'bool', 'Enable/Disable Payment Method Display.')
		</sql>
   </changeSet>
   <changeSet id="jwr-db-payment-log-flagging-pubsub-cfg" author="Niraj">
		<comment>Adding publisher subsriber config for payment flag logging</comment>
		<sql>
	     	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('paymentflagpublisher', 'payment.flagging.enable', 'false', 1, 'bool', 'Enable/Disable payment flag kafka publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('paymentflagpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('paymentflagpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('paymentflagpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
		</sql>
	</changeSet>
     <changeSet id="jwr-google-geo-api" author="Khushal">
    	<comment>Wrapper google geo api </comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'enableGeoLocationServiceUrlGoogle', 'false', 1, 'bool', 'if checked then geoLocationServiceUrlGoogle will be enable else geoLocationServiceUrl will be enable')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'geoLocationServiceUrlGoogle', 'http://grs-geolocation.howzatfantasy.com/state/', 1, 'text', 'Google reverse geo coder API')
    	</sql>
    </changeSet>

    <changeSet id="jwr-user-disconnection-settings" author="Nemesiss">
		<comment>Adding User Disconnection Settings table</comment>
		<sql>
			CREATE TABLE [dbo].[UserDisconnectionSettings](
				[userID] [int] NOT NULL,
				[dropPointsC10] [tinyint] NULL,
				[dropPointsC13] [tinyint] NULL,
				[dropPointsC21] [tinyint] NULL,
				[dropPoolC10] [tinyint] NULL,
				[dropPoolC13] [tinyint] NULL,
				[dropPoolC21] [tinyint] NULL,
				[dropDealsC10] [tinyint] NULL,
				[dropDealsC13] [tinyint] NULL,
				[dropDealsC21] [tinyint] NULL,
			) ON [PRIMARY];

	    	ALTER TABLE [dbo].[UserDisconnectionSettings] ADD  CONSTRAINT [PK_UserDisconnectionSettings] PRIMARY KEY CLUSTERED 
			(
				[userID] ASC
			) ON [PRIMARY];
		</sql>
	 </changeSet>

  	<changeSet id="jwr-user-disconnection-configs" author="Nemesiss">
		<comment>Adding User Disconnection Settings table</comment>
		<sql>
			INSERT INTO cfg VALUES ('dcsettings', 'dcsettings.enabled', 'true', '1', 'bool', 'Enable DC Settings Feature');
			INSERT INTO cfg VALUES ('dcsettings', 'dcsettings.default.drop.after.missed.turns', '3', '1', 'number:0:10', 'Default drop after missed turns value');
			INSERT INTO cfg VALUES ('dcsettings', 'dcsettings.allowed.missed.turns', '0,1,2,3', '1', 'text', 'Comma separated list of allowed missed turns values');
			INSERT INTO cfg VALUES ('dcsettings', 'dcsettings.allowed.game.types', 'DEAL_13_CARDS,POINTS_13_CARDS,POOL_13_CARDS', '1', 'text', 'Comma separated list of allowed game types');
		</sql>
	 </changeSet>
    
    <changeSet id="jwr-adding-transactiontype-raf-instant_bonus" author="Bharat">
      	<comment>RAF Instant bonus transaction types</comment>
      	<sql>
      	    insert into TransactionTypes(txnName,ttype) values('REFEREE_RAF_INSTANT_CASH','98')
 		    insert into TransactionTypes(txnName,ttype) values('REFERRER_RAF_INSTANT_CASH','99')
 		</sql>
      </changeSet>
      
      <changeSet id="jwr-UserLoginDetails-populate" author="Ashutosh" context="local">
     	<sql>
     		INSERT INTO dbo.UserLoginDetails
     		SELECT userID,
				lastLoginDate,
				totalLoginCount,
				lastLoginIP,
				lastOnlineTime,
				loginAttempts,
				null as updatedAt,
				authToken FROM dbo.Users;
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-UserVerificationDetails-populate" author="Ashutosh" context="local">
     	<sql>
     		INSERT INTO dbo.UserVerificationDetails
     		SELECT userID,
				passwordResetCode,
				emailverificationlink,
				emailverified,
				verificationCodeTimeStamp,
				unverifiedLogins,
				null as updatedAt FROM dbo.Users;
     	</sql>
     </changeSet>
     
      <changeSet id="jwr-alter-usertpe" author="Khushal">
      	<comment>increase length of userType in BANNERCONFIGURATION</comment>
      	<sql>
      	    alter table BANNERCONFIGURATION
			alter column TypeUser varchar(100)
			
			
			DECLARE @ConstraintName nvarchar(200)
			SELECT @ConstraintName = 
			Name 
			FROM SYS.DEFAULT_CONSTRAINTS 
			WHERE PARENT_OBJECT_ID = OBJECT_ID('PromoCodes') AND PARENT_COLUMN_ID = 
			(SELECT column_id FROM sys.columns WHERE NAME = N'usersegment' AND object_id = OBJECT_ID(N'PromoCodes'))
			
			IF @ConstraintName IS NOT NULL
			EXEC('ALTER TABLE PromoCodes DROP CONSTRAINT ' + @ConstraintName)
			
			
			alter table PROMOCODES
			alter column userSegment varchar(50) not null 
			
			ALTER TABLE  [PromoCodes] ADD  DEFAULT (('-1')) FOR [userSegment]
 		</sql>
      </changeSet>
      
    <changeSet id="jwr-db-pardon" author= "Nilesh">
	    <comment>Withdrawal State Pardon </comment>
	    <sql>
	    	INSERT INTO WithdrawalStatusTypes VALUES ('Pardon',18);
	    </sql>
    </changeSet>

      <changeSet id="jwr-cfg-dynamicbonus-newlogic-toggle" author="udbhav">
       	<sql>
			INSERT INTO cfg VALUES ('enter-amount-grid-config', 'enable.dynamicbonus.newlogic', 'false', '1', 'bool', 'To make new dynamic bonus logic feature enabled/disabled');
		</sql>
    </changeSet>
    
	<changeSet id="jwr-convert-play-now-to-add-cash" author="Yugantar">
	  	   <comment>Enable/Disable conversion of play now button to add cash</comment>
	  	   <sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'payNowAddCash', 'false', 1, 'bool', 'to enable/disable conversion of play now button to add cash')
		</sql>
	</changeSet>
      
    <changeSet id="jwr-new-entrypoints-enum-to-db" author="Akshit">
  		<comment>Add new enum to entrypoints</comment>
  		
  		<sql>
			INSERT INTO entrypoints (Status, Value) VALUES ('LOBBY_GAMESELECTOR_ADDCASH', 9),('LOBBY_BOTTOMTRAY_ADDCASH', 10);
	  	</sql>
  	</changeSet>
	<changeSet id="tournament-lobby-entryfee-filter-config" author="Khushal">
     	<comment>Adding configs for lobby timer</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament', 'tournament.lobby.entryfee.low', '0-750', 1, 'text', 'This the range value of lower entry fee filter of tournaments')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament', 'tournament.lobby.entryfee.medium', '751-2000', 1, 'text', 'This the range value of medium entry fee filter of tournaments')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament', 'tournament.lobby.entryfee.high', '2001', 1, 'text', 'This or greater then this value is the high entry fee filter of tournaments')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament', 'tournament.lobby.filterEnabled', 'false', '1', 'bool', 'Enables/Disables tournament filter');
     	</sql>
     </changeSet>
     
	<changeSet id="jwr-db-add-username-change-max-lifetime" author="Yugantar">
		<comment>Add configurable value for username change possible max lifetime</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('useraccount', 'username_change_max_lifetime', '2', 1, 'number:1:50:2', 'max number of times username can be changed in lifetime')	
		</sql>
	</changeSet>

	 <changeSet id="jwr-adding-transactiontype-USERJOURNEYS" author="Khushal">
     	<comment>userjourney transaction types</comment>
     	<sql>
     	            insert into TransactionTypes(txnName,ttype) values('USERJOURNEYS_CASHCREDIT','106')
					insert into TransactionTypes(txnName,ttype) values('USERJOURNEYS_CASHREVERSAL','107')
		</sql>
    </changeSet>
   <changeSet id="jwr-adding-userjourney-table" author="Khushal">
     	<comment>userjourney-tables</comment>
     	<sql>
		IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UserJourney]') AND type in (N'U'))
		BEGIN
			CREATE TABLE [dbo].[UserJourney](
				[id] [int] IDENTITY(1,1) NOT NULL,
				[name] [varchar](50) NOT NULL,
				[startDate] [datetime] NOT NULL,
				[endDate] [datetime] NOT NULL,
				[adKeys] [varchar](4000) NOT NULL,
				[source] [varchar](500) NOT NULL,
				[platforms] [varchar](100) NOT NULL,
				[journeyPeriod] [varchar](50) NOT NULL,
				[bannerPeriod] [varchar](50) NOT NULL,
				[isEnable] [bit] NOT NULL,
				[hardDisable] [bit] NOT NULL,
				[expiryDays] [int] NOT NULL,
				[createdDate] [datetime] NOT NULL,
			PRIMARY KEY CLUSTERED 
			(
				[id] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]
		END
		</sql>
    </changeSet>
    <changeSet id="jwr-adding-userjourneyMileStone-table" author="Khushal">
     	<comment>userjourneyMileStone-tables</comment>
     	<sql>
     	IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[UserJourneyMilestone]') AND type in (N'U'))
		BEGIN
			CREATE TABLE [dbo].[UserJourneyMilestone](
				[id] [int] IDENTITY(1,1) NOT NULL,
				[userJourneyId] [int] NOT NULL,
				[dayNo] [tinyint] NOT NULL,
				[disbursementCondition] [varchar](15) NOT NULL,
				[disbursementConditionNo] [int] NOT NULL,
				[amount] [int] NOT NULL,
			PRIMARY KEY CLUSTERED 
			(
				[id] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]
		END
		</sql>
    </changeSet>
	
	
	<changeSet id="jwr-userjourney-kafka-config" author="Khushal">
     	<comment>Moengage Kafka Config</comment>
     	<sql>   
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourneysubscriber', 'enable', 'false', 1, 'bool', 'Enable/Disable user subscription')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourneysubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourneysubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourneysubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourneysubscriber', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:8:2', 'Subscriber consumer count')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourneysubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourneypublisher', 'enable', 'false', 1, 'bool', 'Enable/Disable publisher')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourneypublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourneypublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourneypublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')

 		</sql>
    </changeSet>
	
	     <changeSet id="jwr-userJourneyMileStoneType-table-type" author="Khushal">
		<comment>Adding table type for UserJourneyMileStoneTableType</comment>
		<sql>
				IF TYPE_ID('UserJourneyMileStoneTableType') IS NULL
				BEGIN
				CREATE TYPE [dbo].[UserJourneyMileStoneTableType] AS TABLE
				(
            		 	userJourneyId int  
			           ,dayNo tinyint  
			           ,disbursementCondition varchar(15)  
			           ,disbursementConditionNo int  
			           ,amount int 
				)
				END
				
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-jump-start-composition" author="Ritika">
		<comment>Adding Game start reduced values, Game start reduced Composition and enable/diable flag for game start jump timer</comment>
		<sql>
		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-timer','reduced.timer.enable.points','true','1','bool', 'Enables/Disables Game start jump timer for points');
		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-timer','reduced.timer.enable.pool','false','1','bool', 'Enables/Disables Game start jump timer for pool');
		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-timer','game.start.reduced.composition','6','1','text', 'Game start reduced Composition');
		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-timer','game.start.reduced.values','7000','1','text', 'Game start reduced values');
		</sql>
	</changeSet>
	
	<changeSet id="alter-tableconfigurations-add-jumptimer" author="Ritika">
	 <comment>Adding column Game start reduced values and Game start reduced Composition to TableConfigurations</comment>
	  <sql>
		   ALTER TABLE [dbo].[TableConfigurations] ADD reducedTimeValue  varchar(25) NOT NULL DEFAULT '';
		   ALTER TABLE [dbo].[TableConfigurations] ADD reducedTimeComposition  varchar(25) NOT NULL DEFAULT '';
		   
		   UPDATE TableConfigurations set reducedTimeValue = 7000 WHERE gameVariant IN (0,1) AND actualSeats > 2;
		   UPDATE TableConfigurations set reducedTimeComposition = 6 WHERE gameVariant IN (0,1) AND actualSeats > 2;
	   </sql>
	 </changeSet>
	 
	<changeSet id="jwr-tournament-details-page-notice-message-settings" author="Mayank">
		<comment>Adding configs for notice message in tournament details page</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament', 'tournament.details.notice.broadcastto', '0', 0, 'number', 'Config to show none/location-wise-restricted/all users');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament', 'tournament.details.notice.message', '', 0, 'text', 'The message to appear in tournament details page');
		</sql>
	</changeSet>
	<changeSet id="jwr-db-ExcludedDRMID" author="PramatmaRam">
    	<comment>Table for Exclusive DRMIDs for PsApp/CashApp</comment>
    	<sql>
		CREATE TABLE [dbo].[ExcludedDRMID](
			[ID] [int] IDENTITY(1,1),
			[drmidType] [varchar](30) NOT NULL,
			[drmid] [varchar](255) NOT NULL,
			[addedTimeDate] [varchar](30) NULL,
			PRIMARY KEY([drmidType],[drmid])
			)
    	</sql>
    </changeSet>
	<changeSet id="jwr-config-express-chekout-editable" author="Akshit">
		<comment>Make default checkout option editable</comment>
		<sql>
			UPDATE [dbo].[cfg] set editable=1 where [id]='express-checkout-config' and [key]='express.checkout.default.checked'
		</sql>
	</changeSet>
	<changeSet id="jwr-razorpay-app-version-config" author="udbhav">
		<comment>Adding app version from which APK has razorpay</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payments', 'razorpay.upi.enabled.app', '0', 1, 'text', 'Config to add apk version ');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-UserGameStats-populate" author="Ashutosh" context="onlylocal">
     	<sql>
     		INSERT INTO dbo.UserGameStats
     		SELECT userID,
     			xpCash,
				xpSocial,
				xpBonusTimeCash,
				xpBonusTimeSocial,
				totalCashGamesWon,
				totalFreeGamesWon,
				totalCashGamesLost,
				totalFreeGamesLost,
				totalCashAmountWon,
				totalCashAmountLost,
				lastCashGamePlayed,
				firstCashGamePlayed,
				firstFreeGamePlayed,
				lastFreeGamePlayed,
				getdate() as createdAt,
				null as updatedAt FROM Users;
				
     	</sql>
    </changeSet>
	
	<changeSet id="jwr-db-add-unrestricted-state-reason-" author="Pushpender">
    	<comment>Add column unrestricted state reason in users table  </comment>
		  <sql>
		  	ALTER TABLE Users ADD unRestrictedStateReason [varchar](256) NULL;
		</sql>
	</changeSet>

    <changeSet id="jwr-gdb-muid-cfg-url" author="Souvik">
		<comment>Updating MUID api url to v2</comment>
			<sql>
				UPDATE [dbo].[cfg] SET [value] = 'http://172.25.2.21:8080/user/v2/getOneUser' WHERE [id] = 'muid' AND [key] = 'api.url'
				INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'multiplier.threshold', '1', 1, 'number:1:1000:1', 'Maximum value for muid multiplier match frequency')
				INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'multiplier.isActive.email', 'true', 1, 'bool', 'is muid multiplier active for matching email')
				INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'multiplier.isActive.ip', 'false', 1, 'bool', 'is muid multiplier active for matching ip')
				INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'multiplier.isActive.partialName', 'true', 1, 'bool', 'is muid multiplier active for matching partialName')
				INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'multiplier.isActive.fullName', 'true', 1, 'bool', 'is muid multiplier active for matching fullName')
				INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'multiplier.isActive.mobile', 'true', 1, 'bool', 'is muid multiplier active for matching mobile')
				INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'multiplier.isActive.dob', 'true', 1, 'bool', 'is muid multiplier active for matching dob')
				INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'multiplier.isActive.device', 'true', 1, 'bool', 'is muid multiplier active for matching device')       
				UPDATE [dbo].[cfg] SET [description] = 'User considered clean when totalScore less than or equal to this threshold value' WHERE [key] = 'score.clean' and [id] = 'muid';
				UPDATE [dbo].[cfg] SET [description] = 'User considered fraud when totalScore greater than or equal to this threshold value' WHERE [key] = 'threshold.fraud' and [id] = 'muid';
			</sql>
   </changeSet>

	<changeSet id="alter-tableconfigurations-add-result-jumptimer" author="Ritika">
	 <comment>Adding column Result Screen reduced values and Result Screen reduced Composition to TableConfigurations</comment>
	  <sql>
		   ALTER TABLE [dbo].[TableConfigurations] ADD resultReducedTimeValue  varchar(25) NOT NULL DEFAULT '';
		   ALTER TABLE [dbo].[TableConfigurations] ADD resultReducedTimeComposition  varchar(25) NOT NULL DEFAULT '';

		   UPDATE TableConfigurations set resultReducedTimeValue = 7000 WHERE gameVariant IN (0) AND actualSeats > 2;
		   UPDATE TableConfigurations set resultReducedTimeComposition = 6 WHERE gameVariant IN (0) AND actualSeats > 2;
	   </sql>
	 </changeSet>
   
   <changeSet id="jwr-db-tournaments-bonustime" author="Ritika">
    	<comment>Adding bonus time in tournament templates</comment>
		<sql>
			ALTER TABLE [TournamentTemplates] ADD bonusTime [int] NOT NULL DEFAULT ((30));
		</sql>
	</changeSet>

   <changeSet id="jwr-email-reegister-stop-config" author="Khushal">
     <comment>Email registration stop. config</comment>
     <sql>
       INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'disable.email.registration', 'true', 1, 'bool', 'Enable/Disable registration with email id.')
      </sql>
   </changeSet>

	<changeSet id="jwr-db-add-ozontal-batch-size" author="Deepak">
     	<comment>Add batchsize for OZONTAL API in admin panel used for (Outbound dialling) (old value 200, new 500)</comment>
     	<sql>
 			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('obd', 'batchSize', '200', 1, 'number:200:10000:1', 'The batchSize of mob numbers accepted by OZONETEL API')
     	</sql>
     </changeSet>

   
   <changeSet id="jwr-table-NewPlayerTransactions" author="Dilip" context="local">
		<comment>Adding new table to store transactions viewed by player on UI</comment>
		<sql>
		 IF NOT EXISTS (SELECT * FROM   sys.objects WHERE  object_id = Object_id(N'JwrTransactions.dbo.PlayerTransactions') AND type IN ( N'U' ))
		  BEGIN
		      CREATE TABLE JwrTransactions.dbo.PlayerTransactions
		        (
					id bigint IDENTITY(1,1) NOT NULL,
					userID bigint,
					txnAmt money,
					transactionType int,
					sourceID bigint,
					transactionRefId bigint,
					transactionRefIdType int,
					depositBalance money,
					withdrawableBalance money,
					premiumbonusBalance money,
					bonusBucket money,
					createdAt datetime,
					MonthNumber smallint DEFAULT MONTH(GETDATE())
		        )
		  END  
		</sql>
	</changeSet>
	
	<changeSet id="jwr-table-NewSystemTransactions" author="Dilip" context="local">
		<comment>Adding new table to store transactions related to bonus</comment>
		<sql>
		 IF NOT EXISTS (SELECT * FROM   sys.objects WHERE  object_id = Object_id(N'JwrTransactions.dbo.SystemTransactions') AND type IN ( N'U' ))
		  BEGIN
		  	CREATE TABLE JwrTransactions.dbo.SystemTransactions
			(
			    id bigint IDENTITY(1,1) NOT NULL,
				userID bigint,
				txnAmt money,
				transactionType int,
				sourceID bigint,
				transactionRefId bigint,
				transactionRefIdType int,
				createdAt datetime,
				MonthNumber smallint DEFAULT MONTH(GETDATE())
			)
		  END  
		</sql>
	</changeSet>
	
	<changeSet id="jwr-table-NewRevenueTransactions" author="Dilip" context="local">
		<comment>Adding new table to store transactions related to rake</comment>
		<sql>
		 IF NOT EXISTS (SELECT * FROM   sys.objects WHERE  object_id = Object_id(N'JwrTransactions.dbo.RevenueTransactions') AND type IN ( N'U' ))
		  BEGIN
		  	CREATE TABLE JwrTransactions.dbo.RevenueTransactions
			(
			    id bigint IDENTITY(1,1) NOT NULL,
				userID bigint,
				sourceID bigint,
				sourceType int,
				netRevenue money,
				txnAmt money,
				createdAt datetime,
				MonthNumber smallint DEFAULT MONTH(GETDATE())
			)
		  END  
		</sql>
	</changeSet>
	
	<changeSet id="jwr-table-NewInplayTransactions" author="Dilip" context="local">
		<comment>Adding new table to store transactions before game end settlement</comment>
		<sql>
		 IF NOT EXISTS (SELECT * FROM   sys.objects WHERE  object_id = Object_id(N'JwrTransactions.dbo.InplayTransactions') AND type IN ( N'U' ))
		  BEGIN
		  	CREATE TABLE JwrTransactions.dbo.InplayTransactions
			(
			    id bigint IDENTITY(1,1) NOT NULL,
				userID bigint,
				txnAmt money,
				transactionType int,
				tableInstanceId bigint,
				gameId bigint,
				createdAt datetime,
				updatedBal money,
				withdrawableBalance money,
				premiumBonus money,
				tableConfigId int,
				MonthNumber smallint DEFAULT MONTH(GETDATE())
				
			)
		  END  
		</sql>
	</changeSet>
	
	<changeSet id="jwr-ALTER-UserCurrencies" author="Dilip">
		<comment>Adding new table to store transactions before game end settlement</comment>
		<sql>
			ALTER TABLE UserCurrencies
				ADD premiumBonusRupees money;
			ALTER TABLE UserCurrencies
				ADD bonusRupees money;
		</sql>
	</changeSet>

	<changeSet id="jwr-db-ticket-and-redemption" author="Nilesh">
		<comment>adding newly introduced ticket redemption and reversal transaction types</comment>
		<sql>
			insert into TransactionTypes(txnName,ttype) values('MTTENTFEES_ACTUALIZATION','101');
			insert into TransactionTypes(txnName,ttype) values('MTTENTFEES_ACTUALIZATION_REVERSAL','102');
			insert into TransactionTypes(txnName,ttype) values('MTTRAKE_ACTUALIZATION','103');
			insert into TransactionTypes(txnName,ttype) values('MTTRAKE_ACTUALIZATION_REVERSAL','104');
		</sql>
	</changeSet>
	<changeSet id="jwr-login-captcha-settings" author="Mayank">
		<comment>The reCAPTCHA v3 configs</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('login', 'login.gcaptcha.enabled', 'false', 1, 'bool', 'Config to enable/disable reCAPTCHA v3');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('login', 'login.gcaptcha.eligible.score', '0', 1, 'text', 'The reCAPTCHA v3 score above which request should be considered valid');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('login', 'login.gcaptcha.secretkey', '', 1, 'text', 'The secret key for using reCAPTCHA v3');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('login', 'login.gcaptcha.clientid', '', 1, 'text', 'The client ID for using reCAPTCHA v3');
		</sql>
	</changeSet>

	<changeSet id="jwr-db-ozontel-timeout-limit-change" author="Deepak">
		<comment>Increase timeout limit for ozonetel</comment>
		<sql>
			update [dbo].[cfg] set type = 'number:10:300:1' where  [Id] = 'obd' and [Key] = 'timeout';
		</sql>
	</changeSet>
		 <changeSet id="jwr-db-serverconfig-publisher-cfg" author="Deepak">
     	<comment>Setting server config update publisher config</comment>
     	<sql>
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('serverconfigupdatepublisher', 'enable', 'false', 1, 'bool', 'Enable/Disable server config update publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('serverconfigupdatepublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('serverconfigupdatepublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('serverconfigupdatepublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     	</sql>
     </changeSet>

	<changeSet id="jwr-db-userjourney-config" author="Khushal">
		<comment>UserJourney Configs</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourney', 'build.live.time', cast(DATEDIFF(SECOND,'1970-01-01', GETUTCDATE()) as bigint) * 1000, 1, 'text', 'PSAPP User registered after this time will be eligible userJourney');
		</sql>
	</changeSet>
	<changeSet id="jwr-db-userjourney-payment-entrypoint" author="Khushal">
		<comment>UserJourney Payment init entry point</comment>
		<sql>
			INSERT INTO entrypoints (Status, Value) VALUES ('USER_JOURNEY_POPUP', 11);
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-add-abtest-comumns-in-coupons-table" author="Khushal">
		<comment>Add abTest column in coupons table</comment>
		<sql>
			Alter Table COUPONS
			Add abTestType varchar(50) default('ALL')
			
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-set-default-value-abtest-coupons" author="Khushal">
		<comment>Add abTest column in coupons table</comment>
		<sql>
			update COUPONS set abTestType = 'ALL'
		</sql>
	</changeSet>
	<changeSet id="adding-driving-licence-in-addressProofTypes" author="">
		<sql>
			INSERT INTO addressProofTypes VALUES ('Driving License', 8);
		</sql>
	</changeSet>
	<changeSet id="kyc-Upload-type" author="Parv">
	<comment> Adding column kycUpload </comment>
      <sql>
      		ALTER TABLE USERS ADD KycUploadType SMALLINT NOT NULL DEFAULT ((-1));
      		
      </sql>
      </changeSet>
	
	<changeSet id="jwr-db-alter-kychistory-autokyc-data" author="Niraj">
    	<comment>Alter kychistory add columns from autokyc table</comment>
		  <sql>
		  ALTER TABLE KycHistory ADD [Provider] varchar(30)  NOT NULL DEFAULT ((''));
		  ALTER TABLE KycHistory ADD [DocumentContent] [varchar](max)  NOT NULL DEFAULT ((''));    		
          ALTER TABLE KycHistory ADD [AutoKYCStatus] [bit] NULL DEFAULT (('0'));
		</sql>
    </changeSet>
	
	<changeSet id="jwr-problem-gamer-cfg" author="Ritika">
		<comment>Configs for Prob gamer solutioning</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('ResponsiblePlay', 'responsibleplay.cooldown.period.int', '24', 1, 'number', 'Cooldown period in hrs')	
		</sql>
	</changeSet>
	
	<changeSet id="jwr-problem-gamer-amber-zone-cfg" author="Ritika">
		<comment>Configs for Prob gamer solutioning</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('ResponsiblePlay', 'responsibleplay.amber.percent.int', '90', 1, 'number', 'Amber threshold')	
		</sql>
	</changeSet>
	<changeSet id="jwr-vertx-properties" author="Nilesh">
		<comment>Properties for Vertx</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
			VALUES ('vertx', 'vertx.options', '{}', 1, 'text', 'Json having the vertx properties');
		</sql>
	</changeSet>
	<changeSet id="jwr-withdrawal-vpa-alter" author="Udbhav">
		<comment>Alter Withdrawals add columns for vpa token</comment>
		<sql>
			ALTER TABLE Withdrawals ADD vpaTokenId varchar(200) NULL;
		</sql>
	</changeSet>
	<changeSet id="jwr-razorpaypout-config" author="Udbhav">
		<comment>Payout config for razorpay</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('razorpayx', 'razorpayx.accountnumber', '', 1, 'text', 'Razorpay withdrawal account number');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('razorpayx', 'razorpayx.key', '', 1, 'text', 'Razorpay key');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('razorpayx', 'razorpayx.secret', '', 1, 'text', 'Razorpay secret');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('razorpayx', 'razorpayx.validateapi', 'https://api.razorpay.com/v1/payments/validate/vpa', 1, 'text', 'Razorpay Validate vpa api');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('razorpayx', 'razorpayx.fundapi', 'https://api.razorpay.com/v1/fund_accounts', 1, 'text', 'Razorpay fund api');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('razorpayx', 'razorpayx.contactapi', 'https://api.razorpay.com/v1/contacts', 1, 'text', 'Razorpay contact api');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('razorpayx', 'razorpayx.payoutapi', 'https://api.razorpay.com/v1/payout', 1, 'text', 'Razorpay contact api');
		</sql>
	</changeSet>
	<changeSet id="jwr-withdrawal-upi" author="Udbhav">
		<comment>Withdrawals UPI config</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.enable.withdrawalupi', 'true', 1, 'bool', 'Config to enable/disable upi withdrawals');
		</sql>
	</changeSet>
	<changeSet id="jwr-available-registration-options" author="Utkarsh">
		<comment>This config can be used to show all the available Registration options on a platform</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('registration', 'registration.available.options', 'google|facebook', 1, 'text', 'Seperate the options by pipe (|). Order of options will also be decided by this configuration ')	

		</sql>
	</changeSet>
	 <changeSet id="jwr-add-userId-userstaus-table-type" author="Niraj">
		<comment>Adding table type for Inserting userIds for userstaus</comment>
		<sql>
			IF TYPE_ID(N'UserIdTableForUserStatusService') IS NULL
			BEGIN
			CREATE TYPE UserIdTableForUserStatusService AS TABLE
			(
				[UserId] [bigint]
			)
			END
		</sql>
	 </changeSet>
	<changeSet id="jwr-add-details-userAccountHistory-table" author="Pushpender">
		<comment>Add Details column in useraccountHistory</comment>
		<sql>
			ALTER TABLE [dbo].[UserAccountHistory] ADD [details] [varchar](500) NULL;
		</sql>
	</changeSet>
	<changeSet id="jwr-razorpay-to-techpro-nonapk-platforms" author="udbhav">
		<comment>Adding app version from which APK has razorpay</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payments', 'razorpay.to.techpro.nonapk.platforms', 'web', 1, 'text', 'Add platforms fallback to techpro, should be comma seperated');
		</sql>
	</changeSet>
	<changeSet id="jwr-db-transactiontypes" author="Suraj">
		<comment>Adding one enum in table</comment>
		<sql>
			INSERT INTO dbo.TransactionTypes( txnName, ttype )
			VALUES( N'MANUAL_REFUND', N'105' );
		</sql>
	</changeSet>

	<changeSet id="jwr-add-location-column-depositTransactions" author="Khushal">
		<comment>Add location columns in DepositTransactions</comment>
		<sql>
			alter table DEPOSITTRANSACTIONS Add latitude float not null default 0;
			alter table DEPOSITTRANSACTIONS Add longitude float not null default 0;
			alter table DEPOSITTRANSACTIONS Add ipAddress varchar(50) not null default '';
		</sql>
	</changeSet>
	
	<changeSet id="jwr-table-TdsDeduction" author="Dilip" >
		<comment>Adding new table to store TdsDeduction transactions at game end settlement</comment>
		<sql>
		 IF NOT EXISTS (SELECT * FROM   sys.objects WHERE  object_id = Object_id(N'[dbo].[TdsDeductionDetails]') AND type IN ( N'U' ))
		  BEGIN
		  	create table TdsDeductionDetails(
		  		id bigint IDENTITY(1,1) NOT NULL,
				userID bigint,
				sourceID bigint,
				txnAmt money,
				gameType int,
				createdAt datetime)
		  END  
		</sql>
	</changeSet>
	
	<changeSet id="jwr-premiumbonus-source-columns-for-tournament-EntryFee" author="Nilesh">
		<comment>add premiumbonus Source for Tournament Registrations</comment>
		<sql>
			ALTER TABLE [dbo].[TournamentRegistrations]
			ADD [entryFeeValueFromPremiumBonusBalance] [MONEY] NOT NULL DEFAULT((0));
		</sql>
	</changeSet>
	
	<changeSet id="jwr-truecaller-config-cfg" author="Khushal">
		<comment>Configs for Prob gamer solutioning</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'isTrueCallerEnable', 'false', 1, 'bool', 'enable/disable truecaller login/registration.');	
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'trueCallerValidateURL', 'https://tc.jungleerummyuat.com/request', 1, 'text', 'truecaller validation url');	
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'trueCallerPartnerName', '', 1, 'text', 'truecaller partner name');	
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'trueCallerPartnerKey', '', 1, 'text', 'truecaller partner key');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-truecaller-config-of-internal-url" author="Khushal">
		<comment>Configs for internal truecaller service url</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'trueCallerInternalURL', 'https://tc.jungleerummyuat.com/request', 1, 'text', 'truecaller Internal url');	
		</sql>
	</changeSet>

	<changeSet id="jwr-tournamentRakeType" author="Nilesh">
		<comment>add type TournamentRakeType</comment>
		<sql>
			CREATE TYPE TournamentRakeType AS TABLE
			(userID INT,
			txnAmt Money,
			TournamentId BIGINT
			)
		</sql>
	</changeSet>
	
	<changeSet id="jwr-ALTER-UserTournamentTickets" author="Ashutosh">
		<comment>Adding new Column for ticket expiry</comment>
		<sql>
			ALTER TABLE UserTournamentTickets
				ADD isExpired BIT;
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-ticket-expiry-job-threshold" author="Ashutosh">
		<comment>Adding config to set threshold for ticket expiry job</comment>
		<sql>
		   	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TournamentTicket', 'expiration.job.threshold', '2020-12-31 23:59:59', 1, 'text', 'Threshold timestamp to fetch only records after this time.')
		</sql>
   </changeSet>
   
   <changeSet id="jwr-add-ticket-expiry-job-delay-New" author="Ashutosh">
		<comment>Adding config to set delay for ticket expiry job</comment>
		<sql>
		   	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TournamentTicket', 'expiration.job.delay', '1440', 1, 'number:1:100000:1', 'Interval in minutes.')
		</sql>
   </changeSet>
	

	<changeSet id="jwr-add-rag-cards-control-flag" author="Udbhav">
		<comment>Control all rag flags</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payments', 'rag.control.flag', '1', 1, 'number:0:2:1', 'RAG control flags , 0- disable,1-only display msg,2-msg and stop payment')
		</sql>
	</changeSet>
  <changeSet id="jwr-db-savedvpadetails-table" author="SurajTamgale" runOnChange="true">
    	<comment>Create savedvpadetails table if required</comment>
    	<sql>
    		IF OBJECT_ID('dbo.SavedVpaDetails') IS NULL
    		BEGIN
    			CREATE TABLE [dbo].[SavedVpaDetails](
					[ID] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
					[UserId] [int]  NOT NULL,
					[VpaId] [varchar](250) NULL,
					[VpaName] [varchar](250) NULL,
					[Enabled] [bit] NULL,
					[Timestampcreated] [datetime] NOT NULL DEFAULT (getdate()),
					[Timestampupdated] [datetime] NOT NULL DEFAULT (getdate()),
					[GatewayId] [int]  NULL,
 					CONSTRAINT PK_SavedVpa_vpaId PRIMARY KEY CLUSTERED
					(
						[ID] ASC
					)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
				) ON [PRIMARY]

			END
    	</sql>
    </changeSet>
	<changeSet id="jwr-table-GameStatus" author="Dilip" context="local">
		<comment>Adding new table to store GameStatus</comment>
		<sql>
		    create table JWRTransactions.dbo.GameStatusDetails(
			id bigint IDENTITY(1,1) NOT NULL,
			gameId BIGINT,
			tableInstanceId BIGINT,
			tableConfigId INT,
			status INT,
			createdAt datetime,
			MonthNumber smallint DEFAULT MONTH(GETDATE()))
		</sql>
	</changeSet>
	<changeSet id="jwr-kyc-fraudcheck" author="Deepak">
		<comment>Config for fraud check using hyperverge</comment>
		<sql>
			INSERT INTO cfg VALUES ('kyc_fraudcheck', 'hyperverge.fraudcheck', 'false', '1', 'bool', 'Enable/Disable Auto Fraud Check of documents [AUTOMATED]');
			INSERT INTO cfg VALUES ('kyc_fraudcheck', 'hyperverge.fraudcheck.url', 'https://ind-verify.hyperverge.co/api', '1', 'text', 'Hyperverge FRAUD API Base URL');
			INSERT INTO cfg VALUES ('kyc_fraudcheck', 'hyperverge.fraudcheck.docs', 'pan, voter, passport, bank_statement', '1', 'text', 'Comma seperated list of document types supported, pan, voter, passport, aadhar, driving, bank_statement');	
		</sql>
	</changeSet>

	<changeSet id="jwr-Alter-Transactions-InPlay-NewlyUpdated" author="Dilip" context="local">
		<comment>Adding new Column in Inplay to indicate Credit/Debit Transactions</comment>
		<sql>
			alter table JWRTransactions.dbo.InplayTransactions add txnType bit
			alter table JWRTransactions.dbo.InplayTransactions add gameNo int
		</sql>
	</changeSet>
	<changeSet id="jwr-Alter-Transactions-Revenue" author="Dilip" context="local">
		<comment>Adding new Column in Revenue to indicate Credit/Debit Transactions</comment>
		<sql>
			alter table JWRTransactions.dbo.RevenueTransactions add txnType bit
		</sql>
	</changeSet>
		<changeSet id="jwr-Alter-Transactions-Play" author="Dilip" context="local">
		<comment>Adding new Column in PlayTran to indicate Credit/Debit Transactions</comment>
		<sql>
			alter table JWRTransactions.dbo.PlayerTransactions add txnType bit
		</sql>
	</changeSet>
		<changeSet id="jwr-Alter-Transactions-System" author="Dilip" context="local">
		<comment>Adding new Column in System to indicate Credit/Debit Transactions</comment>
		<sql>
			alter table JWRTransactions.dbo.SystemTransactions add txnType bit
		</sql>
	</changeSet>
    <changeSet id="jwr-AutoKYCUserData-add-fraudcheck" author="Deepak">
		<comment>Adding auto kyc fraud check status in AutoKYCUserData table</comment>
		<sql>
		  ALTER TABLE [dbo].[AutoKYCUserData]
			ADD GovernmentValidationStatus varchar(10) NOT NULL DEFAULT 'Pending';
					  ALTER TABLE [dbo].[AutoKYCUserData]
			ADD GovernmentValidationMessage varchar(80) NOT NULL DEFAULT 'There is no govt. db validation done on this user';
		</sql>
   </changeSet> 
   <changeSet id="jwr-kyc-fraudcheck-keys" author="Deepak">
		<comment>Adding auto kyc fraud check app keys</comment>
		<sql>
   			 INSERT INTO cfg VALUES ('kyc_fraudcheck', 'hyperverge.fraudcheck.appId', '123456', '1', 'text', 'Hyperverge fraudcheck appId');
			 INSERT INTO cfg VALUES ('kyc_fraudcheck', 'hyperverge.fraudcheck.timeout', '10', '1', 'text', 'Hyperverge fraudcheck HTTP timeout in seconds');
			 INSERT INTO cfg VALUES ('kyc_fraudcheck', 'hyperverge.fraudcheck.appKey', 'abcd123', '1', 'text', 'Hyperverge fraudcheck appKey');
	  </sql>
   </changeSet>  

   <changeSet id="jwr-old-coupons-currency-update" author="PramatmaRam">
		<comment>old coid currency updated to rupees</comment>
		<sql>
   			UPDATE [Coupons] SET [currencyType] = 'RUPEES' WHERE [currencyType] != 'RUPEES';
	   </sql>
   </changeSet>

   <changeSet id="jwr-payment-ab-config" author="Akshit">
		<comment>Adding config for payment enteramount AB</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payment-ab-config', 'enteramount.testimonial.ab.checked', 'true', 1, 'bool', 'Enteramount page testimonial AB switch');
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payment-ab-config', 'enteramount.bonus.ab.checked', 'true', 1, 'bool', 'Enteramount page Bonus description AB switch');
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payment-ab-config', 'enteramount.tile500.ab.checked', 'true', 1, 'bool', 'Enteramount page tile selection AB switch');
	  </sql>
   </changeSet>  

	<changeSet id="jwr-savedcardbanks" author="Suraj">
		<comment>Create New Table SavedCardBanks</comment>
		<sqlFile path="new-schema/tables/SavedCardBanks.sql"
		relativeToChangelogFile="true" endDelimiter="\nGO" />
	</changeSet>

	<changeSet id="jwr-add-index-savedcardbanks" author="Suraj">
     	<comment>idx_SavedCardBanks_bankname</comment>
     	<sql>
     	         CREATE INDEX idx_SavedCardBanks_bankname_enabled
				ON SavedCardBanks (BankName,Enabled)
		</sql>
   </changeSet>
   <changeSet id="jwr-tournament-leaderboard" author="Nemesiss">
		<comment>Adding TournamentLeaderboard table</comment>
		<sql>
			CREATE TABLE [dbo].[TournamentLeaderboard](
				[LeaderboardId] [bigint] IDENTITY(1,1) PRIMARY KEY,
				[LeaderboardName] [varchar](250) NOT NULL,
				[CreatedTime] [datetime] NOT NULL,
				[UpdatedTime] [datetime] NOT NULL,
				[State] [varchar](64) NOT NULL,
				[StartTime] [datetime] NOT NULL,
				[EndTime] [datetime] NOT NULL,
				[ShowInLobbyBeforeStart] [int] NOT NULL,
				[StayInLobbyAfterEnd] [int] NOT NULL,
				[RankingDisplayLimit] [int] NOT NULL,
				[IncludedTournaments] [text] NOT NULL,
				[ScoreCalcConfig] [text] NOT NULL,
				[Prizes] [text] NOT NULL
			);
		</sql>
   </changeSet>
  <changeSet id="jwr-raf-service-url" author="Niraj">
		<comment>Adding JAPI RAF User service</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type],
			[description]) VALUES ('RAF', 'japi.raf-service.user.url',
			'http://localhost:8080/v1/users', 1, 'text', 'JAPI RAF User service
			url');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type],
			[description]) VALUES ('RAF', 'japi.raf-service.track.bonus',
			'false', 1, 'bool', 'Enable/Disable RAF Bonus Tracking from new RAF
			Service .');
		</sql>
	</changeSet>
	<changeSet id="jwr-add-invitations-temp-table" author="Deepak">
     	<comment>This table is used to hold invites of active lb for calculating winners purpose. The records are deleted as soon "CalculateWinnersForOngoingRAFLeaderboards" finishes </comment>
     	<sql>
				IF TYPE_ID(N'InvitationsForLBType') IS NULL
				BEGIN
				CREATE TYPE [dbo].[InvitationsForLBType] AS TABLE
				(
            		[userID] [bigint] NOT NULL,
					[contactAt] [varchar](255) NOT NULL,
					[invitedOn] [date] NOT NULL DEFAULT (getdate())
				)
				END

			IF OBJECT_ID('dbo.InvitationsForLBTable', 'U') IS NULL
			begin
			create table [dbo].[InvitationsForLBTable](
				[userID] [int],
				[contactAt] [varchar](255) NOT NULL,
				[invitedOn] [date] NOT NULL)
				CREATE INDEX idx_InvitationsForLBTable_invitedOn
				ON InvitationsForLBTable (invitedOn)
			end

			IF OBJECT_ID('dbo.InvitationsForSavedLBTable', 'U') IS NULL
			begin
			create table [dbo].[InvitationsForSavedLBTable](
				[userID] [int],
				[contactAt] [varchar](255) NOT NULL,
				[invitedOn] [date] NOT NULL)
				CREATE INDEX idx_InvitationsForSavedLBTable_invitedOn
				ON InvitationsForSavedLBTable (invitedOn)
			end
		</sql>
     </changeSet>
	<changeSet id="jwr-create-case-management-table" author="Pushpender">
		<comment>Create Case Management Table</comment>
		<sql>
			IF OBJECT_ID('CaseManagement') IS NULL
			BEGIN
            CREATE TABLE CaseManagement
            (
              [ID] [int] IDENTITY(1,1) NOT NULL,
              [CategoryLevel]  [varchar](200) NOT NULL,
              [SubCategoryLevel] [varchar](200) NOT NULL,
              [FeedbackEnable]  [bit] NOT NULL DEFAULT ((0)) ,
              [ReopenEnable]  [bit] NOT NULL DEFAULT ((0)),
            )
            END 
		</sql>	
	</changeSet>
	<changeSet id="add-cfg-for-show-case-management" author="Pushpender">
		<comment>Enable Show Case Management Button </comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('case-management', 'enable.showCaseManagement', 'false', 1, 'bool', 'Enable/Disable Show Case Management Button')
    	</sql>
	</changeSet>
			
	<changeSet id="jwr-db-ticker-message-config" author="Rohit">
		<comment>Configs for showing ticker message on login screen</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'tickerMessage', 'Residents of Tamil Nadu cannot play our cash games and tournaments.', 1, 'text', 'Ticker message');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-abtesttype-column" author="Khushal">
     	<comment>added abTestType column</comment>
     	<sql>
     	        Alter Table UserJourney
				Add abTestType varchar(50) default('ALL');


				update UserJourney set abTestType = 'ALL' where ISNULL(abTestType, '') = '';
		</sql>
    </changeSet>
    <changeSet id="jwr-raf-service-url" author="Deepak">
		<comment>Adding JAPI RAF service</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'japi.raf-service.url', 'http://localhost:8080/v1', 1, 'text', 'JAPI RAF service url');
		</sql>
   </changeSet>

	<changeSet id="jwr-api-sign-key-s3-cfg" author="Mirek">
		<comment>Configs for Prob gamer solutioning</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('api-sign-key-s3', 'enabled', 'false', 1, 'bool', 'enable/disable upload of RSA public key (for api signature)');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('api-sign-key-s3', 'bucket', '', 1, 'text', 's3 bucket name');
		</sql>
	</changeSet>

	 <changeSet id="jwr-db-invitationreferrals-publisher-cfg" author="Deepak">
     	<comment>Setting server config update publisher config</comment>
     	<sql>
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('invitationreferralspublisher', 'enable', 'false', 1, 'bool', 'Enable/Disable invitationreferrals publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('invitationreferralspublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('invitationreferralspublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('invitationreferralspublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
     	</sql>
     </changeSet>

	<changeSet id="jwr-db-japi-raf-service-timeout" author="Deepak">
     	<comment>Setting server config for japi raf service timeout</comment>
     	<sql>
           	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'japi.raf-service.timeout', '5', 1, 'text', 'JAPI RAF service timeout in seconds');</sql>
     </changeSet>
	
	<changeSet id="jwr-api-access-token-expity-time" author="Niraj">
		<comment>Configs for API access token expiry time</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('api-access-token', 'expiry.time', '10', 1, 'number:1:200:1', 'Expiry time for access token in minutes');
		</sql>
	</changeSet>
	
    <changeSet id="jwr-add-index-on-savedvpadetails-table" author="Suraj">
    	<comment>Adding index on savedvpadetails uses table</comment>
    	<sql>
    		CREATE NONCLUSTERED INDEX VpaId_UserId ON savedvpadetails (VpaId ASC, UserId ASC)
    	</sql>
    </changeSet>
   <changeSet id="jwr-main-ws-rate-limit" author="Mirek">
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('main-ws-request-limit', 'limit', '-1', 1, 'number:-1:100000:1', 'limit of incomming requests within 10s');
	  </sql>
   </changeSet>
   <changeSet id="jwr-defaultmethod-ab-config" author="Madan">
		<comment>Adding config for default payment method AB</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payment-ab-config', 'selectmethod.defaultmethod.ab', 0, 1, 'number:0:3:1', '0-> Off ,1-> All Control, 2-> AB Test, 3-> All Test');
	  </sql>
   </changeSet>
   <changeSet id="jwr-defaultmethod-mod-ab-config" author="Madan">
		<comment>Adding config for default payment method AB Mod</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payment-ab-config', 'selectmethod.defaultmethod.ab.mod', '512', 1, 'number:2:2048:1', 'Mod value for new user default method AB experiment');
	  </sql>
   </changeSet>
	<changeSet id="jwr-db-geolocation-skip-mandatory-config" author="khushal">
    	<comment>Add config value to slip madatory platorm on server</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'mandatory.skip.platform', '', 1, 'text', 'add platform with comma separater to skip the mandatory check on server side')
		</sql>
    </changeSet>

    <changeSet id="jwr-enable-disable-audience-generic-popup-widget" author="Pramatma">
     <comment>Enable/Disable Audience generic pop up widget. config</comment>
     <sql>
      INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'disable.audiencepopup.widget', 'true', 1, 'bool', 'Enable/Disable Audience generic pop up widget')
     </sql>
   </changeSet>

    <changeSet id="jwr-db-add-promocode-group-table"
	author="suraj">
	<comment>Create New Table PromocodeGroup</comment>
	<sqlFile path="new-schema/tables/BonusGroup.sql"
		relativeToChangelogFile="true" endDelimiter="\nGO" />
</changeSet>
	<changeSet id="jwr-db-add-default-In-promocodegroup-table"
		author="suraj">
		<comment>Add Default Entries In Table</comment>
		<sql>
			INSERT [dbo].[PromocodeGroup]
			([Name],[usesPerPlayer],[UsesPerDay],[StartDate],[EndDate],[Enabled],[NewPlayers],[OldPlayers],[Priority],[TimeStampCreated],[TimeStampUpdated])
			VALUES ('DEFAULT',99999999,9999999,'2010-02-02T12:00:00.000','2050-02-02T12:00:00.000',1,1,1,'MEDIUM','2021-02-02T16:59:05.087','2021-02-02T16:59:05.087');
			INSERT [dbo].[PromocodeGroup]
			([Name],[usesPerPlayer],[UsesPerDay],[StartDate],[EndDate],[Enabled],[NewPlayers],[OldPlayers],[Priority],[TimeStampCreated],[TimeStampUpdated])
			VALUES ('SEQUENTIAL',99999999,9999999,'2010-02-02T12:00:00.000','2050-02-02T12:00:00.000',1,1,1,'VERY_HIGH','2021-02-02T16:59:05.087','2021-02-02T16:59:05.087');

		</sql>
	</changeSet>
	<changeSet id="jwr-db-add-new-column-in-promocodes-table"
		author="suraj">
		<comment>Add new Column Entries In Promocodes Table</comment>
		<sql>
			ALTER TABLE PROMOCODES ADD PromocodeGroup VARCHAR(40) NOT NULL DEFAULT
			'DEFAULT';
		</sql>
	</changeSet>
	<changeSet
		id="jwr-db-add-new-stored-procedure-for-promocodes" runOnChange="true"
		author="Suraj">
		<comment>Get login challenge data of user</comment>
		<sqlFile path="storedprocedures/USP_GetUsedPromocodes.sql"
			relativeToChangelogFile="true" endDelimiter="\nGO" />
	</changeSet>

    <changeSet id="jwr-db-skip-avatar-config" author="Utkarsh">
    	<comment>Add config value to skip avatars</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('avatars', 'skip.avatars', '31,39,55,59,61,10,20,30,40,50,60,49', 1, 'text', 'Add config value to skip avatars. Seperated by ,')
		</sql>
    </changeSet>
    
    <changeSet id="jwr-db-abtest-configs" author="Utkarsh">
    	<comment>Add abtest flows in Native APP</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'psapp.flow1', 'true', 1, 'bool', 'Enable/Disable h5 view of psapp.')
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'psapp.flow2', 'false', 1, 'bool', 'Enable/Disable new potrait of psapp.')
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'psapp.flow3', 'false', 1, 'bool', 'Enable/Disable Landscape mode of psapp.')
		</sql>
    </changeSet>

	<changeSet id="jwr-phonepe-ab-config" author="Madan">
		<comment>Adding config for phonepe wallet visibility for new users AB</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payment-ab-config', 'selectmethod.phonepe.ab', 0, 1, 'number:0:3:1', '0-> Off ,1-> All Control, 2-> AB Test, 3-> All Test');
	  </sql>
   </changeSet>
   <changeSet id="jwr-phonepe-mod-ab-config" author="Madan">
		<comment>Adding config for phonepe wallet visibility for new users AB Mod</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payment-ab-config', 'selectmethod.phonepe.ab.mod', '128', 1, 'number:2:2048:1', 'Mod value for new user phonepe wallet AB experiment');
	  </sql>
   </changeSet>
	
	<changeSet id="jwr-db-add-audience-subscriber-config" author="Avneet">
     	<comment>Adding subscriber configs</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencesubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable game stats subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencesubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencesubscriber', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers IP')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencesubscriber', 'pubsub.topic', '', 1, 'text', 'Topic to publish')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencesubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencesubscriber', 'pubsub.subscriber.consumercount', '', 1, 'text', 'No. of consumers in a consumer group')
       	</sql>
    </changeSet>


	<changeSet id="jwr-db-Financial-OverHaul-Combined" author="Dilip">
		<comment>adding newly introduced for Financial OverHaul transaction types</comment>
		<sql>
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('REMAINING_INPLAY_TO_WITHDRAWABLE', '108');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('LOCK_AMT_TABLE_SEAT', '109');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('LEAVE_TABLE', '110');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('LOCK_AMT_POOL_TABLE_SEAT', '111');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('LOCK_AMT_DEAL_TABLE_SEAT', '112');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('LEAVE_TABLE_POOL', '113');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('LEAVE_TABLE_DEAL', '114');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('TOURNAMENT_TICKET_GRANT', '115');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('DEBIT_TICKET_REDEEM', '116');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('POOL_LOST', '117');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('DEAL_LOST', '118');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('TOURNAMENT_TICKET_JOIN', '119');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('TOURNAMENT_TICKET_EXPIRY', '120');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('TOURNAMENT_DEFICIT', '121');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('TOURNAMENT_SURPLUS', '122');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('CRASH_REFUND_POINTS_RUMMY', '123');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('CRASH_REFUND_POOL_RUMMY', '124');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('CRASH_REFUND_DEAL_RUMMY', '125');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('CRASH_TOURNAMENT_SYSTEM_TRAN', '126');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-add-type-ExpireTicketLogs-New" author="Ashutosh">
		<comment>adding new table type for ExpireTicketLogs</comment>
		<sql>
			CREATE TYPE [dbo].[ExpireTicketLogs] AS TABLE
			(
			            PlayerID BIGINT
						,TicketInstanceId BIGINT
						,TxnAmt MONEY
						,OriginalPrice MONEY
						,TransactionType INT
						,SourceId BIGINT
						,TransactionRefId BIGINT
						,TransactionRefType INT
						,IsBought BIT
						,IsGst BIT
			)
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-add-type-GrantTournamentTicketLogs-New" author="Ashutosh">
		<comment>adding new table type for GrantTournamentTicketLogs</comment>
		<sql>
			CREATE TYPE [dbo].[GrantTournamentTicketLogs] AS TABLE
			(
			            PlayerID BIGINT
						,TicketInstanceId BIGINT
						,TxnAmt MONEY
						,TransactionType INT
						,InitialState INT
						,SourceId INT
						,TransactionRefId INT
						,TransactionRefType INT
						,ValidUntil DATETIME
						,isGst BIT
						,isIssued BIT
			)
			</sql>
	</changeSet>
	<changeSet id="jwr-db-CancelWithdrawal" author="Dilip">
		<comment>adding newly introduced for Financial OverHaul CancelWithdrawal</comment>
		<sql>
		INSERT INTO TransactionTypes(txnName,ttype) VALUES('CANCEL_WITHDRAW', '127');
		</sql>
	</changeSet>
	<changeSet id="jwr-db-WithdrawalLog" author="Dilip">
		<comment>adding New table for WithdrawalLog</comment>
		<sql>
		 IF NOT EXISTS (SELECT * FROM   sys.objects WHERE  object_id = Object_id(N'[dbo].[WithdrawTransactionLog]') AND type IN ( N'U' ))
		  BEGIN
		  	create table WithdrawTransactionLog(
			id bigint IDENTITY(1,1) NOT NULL,
			withdrawalId bigint,
			playerTransactionId bigint,
			rupeeTransactionId bigint,
			recorded datetime)
		  END  
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-add-transactionTypes-LB-Deficit" author="Dilip">
		<comment>adding newly introduced for Financial OverHaul transaction types</comment>
		<sql>
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('LeaderBoard_DEFICIT', '128');
		</sql>
	</changeSet>
			
	<changeSet id="jwr-db-useractivitylog-extraparameters" author="Pramatma">
		<sql>
			ALTER TABLE [dbo].[UserActivityLog] 
			ADD [userAgentType] [varchar] (255) NULL,
				[osName] [varchar] (255) NULL,
				[osVersion] [varchar] (255) NULL,
				[browserName] [varchar] (255) NULL,
				[browserVersion] [varchar] (255) NULL,
				[engineName] [varchar] (255) NULL,
				[engineVersion] [varchar] (255) NULL,
				[appVersion] [varchar] (255) NULL,
				[deviceName] [varchar] (255) NULL,
				[userAgent] [varchar] (255) NULL,
				[imei] [bigint] NULL,
				[uuid] [varchar](300) NULL;
		</sql>
   </changeSet>

	<changeSet id="jwr-techpro-pmi" author="Udbhav">
    	<comment>Add config value for techpro pmi </comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('techpropmi', 'pmiUrl', 'https://www.tpsl-india.in/PaymentGateway/PMIAPIService.jsp', 1, 'text', 'add pmi url')
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('techpropmi', 'pmiTokenUrl', 'https://www.paynimo.com/api/paynimoV2.req', 1, 'text', 'add pmi token url')
		</sql>
    </changeSet>

	<changeSet id="jwr-responsible-play-periods-config" author="Mirek">
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsible-play', 'period.short.length', '1440', 1, 'number:1:100000:1', 'Length of the short period (24h) used for tracking players stats. (in minutes!)');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('responsible-play', 'period.long.length', '10080', 1, 'number:1:100000:1', 'Length of the long period (7d) used for tracking players stats. (in minutes!)');
		</sql>
    </changeSet>
    
  	<changeSet id="jwr-resposibleplay-amber-popup-delay" author="Ritika">
		<comment>Configs for Responsible Play</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ResponsiblePlay', 'amber.delay.minutes', '1440', 1, 'number:1:100000:1', 'Delay (in minutes) between displaying amber popup.');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-responsible-play-config-fix" author="Mirek">
		<sql>
			UPDATE [dbo].[cfg] SET [type] = 'number:1:100:1' WHERE [key] = 'responsibleplay.amber.percent.int';
			UPDATE [dbo].[cfg] SET [type] = 'number:1:1000000:1' WHERE [key] = 'responsibleplay.cooldown.period.int';
			
		</sql>
	</changeSet>
	
 	<changeSet id="jwr-db-cashfree-remove-beneficiary" author="udbhav">
    	<comment>Add config value of cashfree's remove url</comment>
    	<sql>
    		   INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'removeBeneficiaryUrl', '/payout/v1/removeBeneficiary', 1, 'text', 'cashfree remove  beneficiary Url')
		</sql>
    </changeSet>

    <changeSet id="Techpro payout status api timeout" author="Udbhav">
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('techpro', 'statusapi.timeout', '10000', 1, 'number:0:100000:1', 'Timeout for status API check');
	  </sql>
   </changeSet> 
   <changeSet id="jwr-adding-group-to-sequential-promocodes" author="suraj">
		<sql>	
   			UPDATE [PromoCodes] SET [PromoCodeGroup] = 'SEQUENTIAL' where bonusType=0;
   </sql>
    </changeSet>
    <changeSet id="jwr-adding-index-promocodesgroup" author="suraj">
    	<comment>Adding index on PromoCodeGroup  table</comment>
    	<sql>
			CREATE NONCLUSTERED INDEX idx_name_enabled ON PromoCodeGroup (Name ASC,Enabled ASC)
			INCLUDE
			(
			[ID],[UsesPerPlayer],[UsesPerDay],[StartDate],[EndDate],[NewPlayers],[OldPlayers],[Priority],[TimeStampCreated],[TimeStampUpdated]
			)
		</sql>
    </changeSet>
   
   <changeSet id="Adding test path in promo field" author="Udbhav">
		<sql>
			 alter table dbo.PromoCodes  ADD promoTestPath varchar(20) NOT NULL default 'NONE'
	  </sql>
   </changeSet>
   
   <changeSet id="Adding promo test path configs" author="Udbhav">
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('promotestpath', 'promo.test.path.modvalue', '16', 1, 'number:0:100000:1', 'test path mod value');
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('promotestpath', 'promo.test.path.switch', 'false', 1, 'bool', 'Global Switch to validate test path');
	  </sql>
   </changeSet>
   
   <changeSet id="jwr-add-audience-configs" author="Avneet">
   		<sql>
   			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audience', 'orgId', 'JWR', 1, 'text', 'Organization Id');	
   		</sql>
   </changeSet>	
   		
   <changeSet id="jwr-instant-raf-disbursal-ipstate" author="Niraj">
		<comment>Adding config to allow instant raf disbursal based on IPState</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('RAF', 'raf.instant.disbursal.ipstate', 'false', '1', 'bool', 'Enable/Disable Instant RAF Disbursements based on restricted IP State');
		</sql>
   </changeSet>
			
	<changeSet id="jwr-cfg-table-masking" author="Chirag">
		<sql>
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.points.13c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Cash 6 seat 13 card Points variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.points.10c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Cash 6 seat 10 card Points variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.points.21c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Cash 6 seat 21 card Points variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.points.13c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Cash 2 seat 13 card Points variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.points.10c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Cash 2 seat 10 card Points variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.points.21c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Cash 2 seat 21 card Points variant');

			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.practice.points.13c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Practice 6 seat 13 card Points variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.practice.points.10c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Practice 6 seat 10 card Points variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.practice.points.21c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Practice 6 seat 21 card Points variant');

			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.practice.points.13c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Practice 2 seat 13 card Points variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.practice.points.10c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Practice 2 seat 10 card Points variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.practice.points.21c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Practice 2 seat 21 card Points variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.pool.13c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Cash 6 seat 13 card Pool variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.pool.13c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Cash 2 seat 13 card Pool variant');

			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.practice.pool.13c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Practice 6 seat 13 card Pool variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.practice.pool.13c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Practice 2 seat 13 card Pool variant');

			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.deal.13c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Cash 6 seat 13 card Deal variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.deal.13c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Cash 2 seat 13 card Deal variant');

			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.practice.deal.13c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Practice 6 seat 13 card Deal variant');
			INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.practice.deal.13c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Practice 2 seat 13 card Deal variant');
			
			INSERT INTO cfg VALUES ('gametable-masking','evenuser.enabled', 'false', 1, 'bool', 'Enable for even users');
			INSERT INTO cfg VALUES ('gametable-masking','odduser.enabled', 'false', 1, 'bool', 'Enable for odd users');
			INSERT INTO cfg VALUES ('gametable-masking','registerDate', '', 1, 'text', 'Register date for new user flag (Date Format: YYYY-MM-DD 00:00:00")');
		</sql>
	</changeSet>

	<changeSet id="jwr-db-add-MTT-TOURN" author="Dilip">
		<comment>adding newly introduced for Financial OverHaul transaction types</comment>
		<sql>
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('MTTENTFEESWITHDRAWAL_NEW', '129');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('MTTBUYINWITHDRAWAL_NEW', '130');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('MTTBUYINREFUND_NEW', '131');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('MTTENTFEESREFUND_NEW', '132');
		</sql>
	</changeSet>

	<changeSet id="jwr-db-add-PRIMARYKEY" author="Dilip">
		<comment>adding Primary Key</comment>
		<sql>
			ALTER TABLE TdsDeductionDetails ADD PRIMARY KEY (id);
			ALTER TABLE WithdrawTransactionLog ADD PRIMARY KEY (id);
		</sql>
	</changeSet>

	<changeSet id="jwr-ALTER-UserTournamentTickets-add-originalCashValue" author="Ashutosh">
		<comment>Adding new Column for ticket expiry</comment>
		<sql>
			ALTER TABLE UserTournamentTickets
				ADD originalTicketValue MONEY;
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-user-fraud-score-withdrawal" author="Niraj">
	<comment>Adding config to allow instant raf disbursal based on User Fraud Score</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('Withdrawals', 'instant.withdrawal.fraud-score', '50', '1', 'text', 'Fraud score for allowing instant withdrawal');
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('Withdrawals', 'enable.withdrawal.fraud-score', 'false', '1', 'bool', 'Enable/disable fraud score check for instant withdrawal');
		</sql>
   </changeSet>

   	 <changeSet id="jwr-db-userfraudscore-cfg" author="Niraj">
     	<comment>Setting user fraud score subscriber config</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userfraudscoresubscriber', 'enablesubscription', 'false', 1, 'bool', 'Enable/Disable UserFraudScore subscription')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userfraudscoresubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userfraudscoresubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userfraudscoresubscriber', 'pubsub.topic', '', 1, 'text', 'topic to subscribe')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userfraudscoresubscriber', 'pubsub.partitions.count', '2', 1, 'number:2:8:2', 'partitions count')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userfraudscoresubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userfraudscoresubscriber', 'pubsub.subscriber.commitinterval', '1', 1, 'number:1:20:1', 'commit interval to update reading offset')
	   </sql>
   </changeSet>
   <changeSet id="jwr-db-user-attribute-table" author="Niraj">
    <comment>Creating new table for Storing User Attributes</comment>
    	<sql>
    	CREATE TABLE [dbo].[user_fraud_score](
			[UserId] [int] NOT NULL,
			[FraudScore] [float] NOT NULL,
            [CreatedTimestamp] DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
            [UpdatedTimestamp] DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
		PRIMARY KEY CLUSTERED
		(
			[UserId] ASC
		)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
		) ON [PRIMARY]
    	</sql>
    </changeSet>
	<changeSet id="jwr-minimum-amount-ab-config" author="Akshit">
		<comment>Adding config for enteramount minimum amount popup AB</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payment-ab-config', 'enteramount.minamount200.ab.checked', 'false', 1, 'bool', 'Enteramount minimum amount popup ab config');
	  </sql>
   </changeSet>

   <changeSet id="jwr-alter-withdrawals-table-to-add-user-agent" author="Pramatma">
		<comment>ALTER Withdrawals table to add User Agent</comment>
		<sql>
		   ALTER TABLE Withdrawals ADD UserAgent varchar(50) NOT NULL default('');
    </sql>
	</changeSet>

   <changeSet id="jwr-howzat-auth-config" author="Khuhsal">
		<comment>Howzat access token</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('howzat-auth', 'token', newid(), 1, 'text', 'Howzat auth access token.');
	  </sql>
   </changeSet>
   
   <changeSet id="jwr-adding-new-column-in-promocodes-table" author="Suraj">
	<comment>Adding autoapply column in promocodes table</comment>
	<sql>
		ALTER TABLE [dbo].[Promocodes]
		ADD autoapply [bit] NOT NULL DEFAULT(0);
	</sql>
</changeSet>
   <changeSet id="jwr-ALTER-UserTournamentTickets-add-isGst" author="Ashutosh">
		<comment>Adding new Column for ticket gst/non-gst</comment>
		<sql>
			ALTER TABLE UserTournamentTickets
				ADD isGst BIT;
		</sql>
    </changeSet>


	<changeSet id="jwr-db-mm-guard-raf-cfg" author="Chirag">
		<sql>
			INSERT INTO cfg VALUES ('mm-guard','mm-guard.raf.enabled', 'false', 1, 'bool', 'Controls whether raf data needs to be punched into mm-guard or not');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-Add-Game-Table-Hints-Related-Configs" author="Mayank">
    	<comment>Adding values into cfg table and creating content table</comment>
    	<sql>
    		INSERT INTO cfg VALUES ('GameTableHints', 'GameTableHints.enabled', 'false', '0', 'bool', 'Enable/Disable hints on game table');
    		INSERT INTO cfg VALUES ('GameTableHints', 'GameTableHints.modValue', '0', '0', 'number:0:100000:1', 'To set the mod value for AB test on users');
    		INSERT INTO cfg VALUES ('GameTableHints', 'GameTableHints.signupdate.threshold', '1970-01-01 00:00:00', '0', 'text', 'Register date threshold for AB (Date Format: YYYY-MM-DD hh:mm:ss)');
    		
    		CREATE TABLE [dbo].[GameTableHints](
				[hintID] [bigint] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL,
				[hintText] [varchar](500) NOT NULL,
			    [gameType] [varchar](10) NOT NULL,
			    [gameVariant] [varchar](10) NOT NULL,
			    [gameSeats] [int] NOT NULL,
				[hintSequence] [int] NOT NULL,
			    [enabled] [bit] NOT NULL
			)
    	</sql>
    </changeSet>
	<changeSet id = "jwr-dropAndCreate-UsersByPromoCodes-with-PK" author="Avneet" context="local">
		<sql>
			DROP TABLE IF EXISTS [dbo].[UsersByPromoCodes]
			CREATE TABLE [dbo].[UsersByPromoCodes](
				[promoCodeID] [int] NOT NULL,
				[userID] [int] NOT NULL,
			PRIMARY KEY CLUSTERED 
			(
				[promoCodeID] ASC,
				[userID] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]			
		</sql>
	</changeSet>

<changeSet id="jwr-enterAmount-fivepath-AB"
	author="Madan">
	<comment>Adding config for enteramount 5 path AB experiment</comment>
	<sql>
		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payment-ab-config',
		'enteramount.fivepathab', 0, 1, 'number:0:1:1', '0-> Off ,1-> On');
	</sql>
</changeSet>
<changeSet id="jwr-enterAmount-fivepath-AB-mod"
	author="Madan">
	<comment>Adding config for enteramount 5 path AB experiment - Mod value</comment>
	<sql>
		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payment-ab-config',
		'enteramount.fivepathab.mod', '5', 1, 'number:2:1024:1', 'Mod value for new user enteramount 5 path AB experiment');
	</sql>
</changeSet>
<changeSet id="add-cfg-for-uxCAM" author="pushpender">
	<comment>Add uxCam  to enable </comment>
	<sql>
		INSERT 	[dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('uxcam', 'uxcamEnabled', 'false', 1, 'bool', 'To enable UxCAm');

	</sql>
</changeSet>

<changeSet id="jwr-create-non-cluster" author="Pushpender">
	<comment>Create Non-cluster for getInvestigationreport</comment>
	<sql>
		CREATE NONCLUSTERED INDEX [IDX_UserLoginLog_userID]
		ON [dbo].[UserLoginLog] ([userID])
		INCLUDE ([remoteHost])
	</sql>
</changeSet>

		<changeSet id="jwr-promo-reward-optin-feature" author="Udbhav">
		<comment>Adding new table to capture optin feature</comment>
		<sql>
			CREATE TABLE [dbo].[UserPromotionOptInDetails](
			[userId] [int] NOT NULL,
			[PromotionId] [varchar](100) NOT NULL,
			[OptedIn] [bit] NOT NULL,
			[TimeStampOpted] [datetime] NOT NULL,
			[TimeStampUpdated] [datetime] NOT NULL,
			PRIMARY KEY([userId],[PromotionId])
			)
		</sql>
	</changeSet>
	
	<changeSet id="add-cfg-for-aws-delay-time" author="parv">
		<comment>Add popup session timeout Time </comment>
		<sql>
		    INSERT 	[dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kyc', 'kyc.popup.session.timeout', '10', '1', 'number:0:100:1', 'Kyc processing Popup timeout in second');
    	
    	</sql>
	</changeSet>
  <changeSet id="jwr-db-cashfree-bank-validation" author="Niraj">
    	<comment>Add config value of cashfree's bank validation url</comment>
    	<sql>
    		   INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'bankVerificationUrl', '/payout/v1/asyncValidation/bankDetails', 1, 'text', 'cashfree bank detail validation Url')
		</sql>
    </changeSet>
	<changeSet id="jwr-withdrawal-account-validation-alter" author="Niraj">
		<comment>Alter Withdrawals add columns for Account API Validation Flag</comment>
		<sql>
			ALTER TABLE Withdrawals ADD accountValidated [bit] NOT NULL DEFAULT(0);
			UPDATE Withdrawals SET accountValidated = 1 WHERE status = 2;
	</sql>
  </changeSet>
	<changeSet id="add-techpro-withdrawals-retry-logic" author="udbhav">
		<comment>Add attempt count for techpro withdrawals</comment>
		<sql>
		    alter table [dbo].TechProWithdrawals ADD attemptCount int NOT NULL default 1;
    	</sql>
	</changeSet>
	<changeSet id="jwr-add-RazorpayWithdrawals-Table" author="Nidhi">
		<comment>Table to hold Razorpay Withdrawals</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RazorpayWithdrawals]') AND type in (N'U'))
            BEGIN
            CREATE TABLE [dbo].[RazorpayWithdrawals](
	        [TransferId] [bigint] PRIMARY KEY IDENTITY(1,1) NOT NULL,
	        [PayoutId] [varchar](50) NULL,
			[Mode] varchar(50) NULL,
			[Status] smallint NOT NULL,
	        [WithdrawalId] [int] NOT NULL FOREIGN KEY REFERENCES Withdrawals(withdrawalID),
	        [Memo] varchar(250) NULL,
	        [CreatedDate] [datetime] NOT NULL DEFAULT(GETDATE()),
			[UpdatedDate] [datetime] NOT NULL DEFAULT(GETDATE()),
			[ProcessedBy] [varchar](50) NOT NULL DEFAULT(''),
			)
			END
		</sql>
    </changeSet>
	<changeSet id="add-cfg-for-referral-seq-disbursement" author="Mayank">
		<comment>Add popup session timeout Time </comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'friendreferral.disbursement.exptype', 'CONTROL_PATH', 0, 'text', 'To choose the experiment path for RAF bonus disbursement');
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'friendreferral.disbursement.mod', '1', 0, 'number:1:100000:1', 'Mod value for the A/B test.');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'friendreferral.disbursement.changeddate', '2021-06-01  00:00:00', 0, 'text', 'Last modification date for AB (Date Format: YYYY-MM-DD hh:mm:ss).');
    	</sql>
	</changeSet>
	<changeSet id="jwr-db-userjourney-notification-config" author="Khushal">
		<comment>UserJourney Notification Configs</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourney', 'morning.notification.hour', '5', '1', 'number:0:24:1', 'Morning hour for notification');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourney', 'evening.notification.hour', '10', '1', 'number:0:24:1', 'Evening hour for notification');
		</sql>
	</changeSet>

	<changeSet id="add-path-for-depositamountconfiguration" author="udbhav">
		<comment>Add path in deposit amount configuration</comment>
		<sql>
		    alter table dbo.DepositAmountconfiguration ADD abtestpath varchar(20) NOT NULL default 'NONE';
		    update dbo.DepositAmountConfiguration set abtestpath = 'CONTROL' where userSegment  = 'FIRSTDEPOSITORS'
		    INSERT INTO DepositAmountConfiguration ( [userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag] , [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 5000, 1, 'KING5000', 5000, 1, 500, 0 , 'OTHERS' , 'TEST')
			INSERT INTO DepositAmountConfiguration ( [userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag] , [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 2000, 1, 'KING2000', 2000, 1, 200, 1 , 'OTHERS' , 'TEST')
			INSERT INTO DepositAmountConfiguration ( [userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag] , [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 500, 1, 'KING1000', 500, 0, 0, 0 ,'OTHERS' , 'TEST')
			INSERT INTO DepositAmountConfiguration ( [userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag] , [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 100, 1, 'KING5000', 100, 0, 0, 0 ,'OTHERS' , 'TEST')
			
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 5000, 1, 'KING5000', 5000, 1, 250, 0, 'GOOGLE','TEST')
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 2000, 1, 'KING2000', 2000, 1, 100, 1, 'GOOGLE' ,'TEST' )
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 500, 1, 'KING1000', 500, 1, 50, 0, 'GOOGLE','TEST')
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 200, 1, 'KING500', 200, 0, 100, 0, 'GOOGLE','TEST')
			
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 5000, 1, 'KING5000', 5000, 1, 250, 0, 'FACEBOOK','TEST')
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 2000, 1, 'KING2000', 2000, 1, 100, 1, 'FACEBOOK','TEST')
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 500, 1, 'KING1000', 500, 1, 50, 0, 'FACEBOOK','TEST')
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 200, 1, 'KING500', 200, 0, 100, 0, 'FACEBOOK','TEST')
			
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 5000, 1, 'KING5000', 5000, 1, 250, 0, 'MEDIABUYING','TEST')
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 2000, 1, 'KING2000', 2000, 1, 100, 1, 'MEDIABUYING','TEST')
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 500, 1, 'KING1000', 500, 1, 50, 0, 'MEDIABUYING','TEST')
			INSERT INTO DepositAmountConfiguration ([userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag], [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 200, 1, 'KING500', 200, 0, 100, 0, 'MEDIABUYING','TEST')
    	
    	</sql>
    </changeSet>
	<changeSet id="jwr-db-psapp-rollout-cfg" author="Utkarsh">
     	<comment>PSAPP Rollout options</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('psapp-roll-out', 'forceUpdate', '1.48.0', 1, 'text', 'Force update all versions of the app below this version')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('psapp-roll-out', 'latestVersion', '1.50.0', 1, 'text', 'Latest version available on the play store')
	   </sql>
   </changeSet>
   <changeSet id="jwr-db-psapp-rollout-cfg-titles" author="Utkarsh">
     	<comment>PSAPP Rollout options</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('psapp-roll-out', 'forceUpdateMessage', 'A better, faster version of the app {latestVersion} is available NOW.', 1, 'text', 'Force update message popup')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('psapp-roll-out', 'latestVersionMessage', 'A better, faster version of the app {latestVersion} is available NOW.', 1, 'text', 'Latest version message popup')
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('psapp-roll-out', 'forceUpdateTitle', 'Update Required', 1, 'text', 'Force update title popup')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('psapp-roll-out', 'latestVersionTitle', 'Update Required', 1, 'text', 'Latest version available update title popup')
	   </sql>
   </changeSet>
	<changeSet id="jwr-add-apkVersion-in-withdrawal" author="Pushpender">
		<comment>Adding ApkVersion column in Withdrawals table</comment>
		<sql>
		ALTER TABLE Withdrawals ADD apkVersion varchar(100) NULL; 
		</sql>
	</changeSet>
	<changeSet id="jwr-add-apkVersion-in-TournamentRegistrations" author="Pushpender">
		<comment>Adding ApkVersion column in TournamentRegistrations table</comment>
		<sql>
		ALTER TABLE TournamentRegistrations ADD apkVersion varchar(100) NULL; 
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-ico-api-config" author="Avneet">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('instantcashoffersconfig', 'ICO API ENDPOINT', 'http://localhost:8091/api/v1/ico', 1, 'text', 'API endpoint for ICO Service')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-transactionTypes-for-ico" author="Avneet">
		<sql>
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('IC_ACQ_CR', '135');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('IC_ACQ_DR', '136');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('IC_RET_CR', '137');
			INSERT INTO TransactionTypes(txnName,ttype) VALUES('IC_RET_DR', '138');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-rummy-rumble-config" author="Khushal">
     	<comment>Rummy Rumble Config</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummy-rumble-config', 'enableRumbleConfig', 'false', 0, 'bool', 'enable/disable rummy rumble config.')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummy-rumble-config', 'registerDateFrom', '0', 0, 'text', 'Register date from which rumble config will work.')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummy-rumble-config', 'modValue', '2', 0, 'number:0:100:1', 'mod value to get the userId based on the mod value')
	   </sql>
   </changeSet>
	

	<changeSet id="Alter Obd apiKey" author="Pushpender">
     	<comment>Alter Obd apikey name</comment>
     	<sql> 
     		UPDATE [dbo].[cfg] SET [key] = 'api_key_landline' WHERE [key] = 'api_key' and [id] ='obd';
	 		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('obd', 'api_key_mobile', '', 1, 'text', 'API key for OZONETEL API in admin panel used for (Outbound dialling) for mobile')
   	 </sql>
    </changeSet>
    <changeSet id="isNotificationSyncEnabled" author="Parv">
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('notification', 'enable_notification_settings', 'false', 1, 'bool', 'enable/disable notification consolidation with mongodb .');
    	</sql>
    </changeSet>
    <changeSet id="jwr-add-RazorpayStatusTypes-Table" author="Udbhav">
		<comment>Create table to hold Razorpay transactions status types</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[RazorpayWithdrawalStatusTypes]') AND type in (N'U'))
            BEGIN
            CREATE TABLE [dbo].[RazorpayWithdrawalStatusTypes](
              [Id] [int] IDENTITY(1,1) NOT NULL,
	          [Status] [varchar] (30) NOT NULL,
			  [Value] [smallint],
			  [CreatedDate] [datetime] NOT NULL)
			END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-insert-RazorpayStatusTypes" author="udbhav">
		<comment>Insert Razorpay transactions status types</comment>
		<sql>
		    INSERT into RazorpayWithdrawalStatusTypes VALUES('Initiated',0,GETDATE());
			INSERT into RazorpayWithdrawalStatusTypes VALUES('Processing',1,GETDATE());
			INSERT into RazorpayWithdrawalStatusTypes VALUES('Failed',2,GETDATE());
			INSERT into RazorpayWithdrawalStatusTypes VALUES('Processed',3,GETDATE());
			INSERT into RazorpayWithdrawalStatusTypes VALUES('Reversed',4,GETDATE());
			INSERT into RazorpayWithdrawalStatusTypes VALUES('N/A',5,GETDATE());
		</sql>
	</changeSet>
	
	<changeSet id="jwr-ab-test-path-tagging-table" author="Mayank">
     	<comment>Adding a table for AB test path tagging for users</comment>
     	<sql> 
     		CREATE TABLE [dbo].[UserExperimentPathTag](
				[userID] [int] NOT NULL,
				[ExperimentName] [varchar](100) NOT NULL,
				[Path] [varchar](50) NOT NULL,
				[TimeStampTagged] [datetime] NOT NULL,
				
			PRIMARY KEY CLUSTERED 
			(
				[userID] ASC,
				[ExperimentName] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
			) ON [PRIMARY]
   	 	</sql>
    </changeSet>
    <changeSet id="jwr-userjourney-exclude-drm-id" author="parv">
		<comment>Config for excluding drm id in user journey</comment>
		<sql>
			INSERT INTO cfg VALUES ('userjourney', 'excluded.drmid', '', '1', 'text', 'Comma seperated device ip(s) to skip the drm');	
			</sql>
	</changeSet>
    <changeSet id="jwr-db-userjourney-reversal-alert-config" author="Khushal">
		<comment>UserJourney reversal Email alert Configs</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourney', 'reversal.alert.email.to', '', '1', 'text', 'pipe separated(|) list of emailIds');
		</sql>
	</changeSet>
	
	 <changeSet id="jwr-db-userjourney-new-col-for-old-user" author="Khushal">
		<comment>UserJourney add new colum for old user</comment>
		<sql>
			Alter table UserJourney Add
			 journeyType varchar(10) not null default 'NEW',
			 userSegment varchar(500) not null default -1,
			 registrationDateFrom datetime not null default getdate(),
			 registrationDateTo datetime not null default getdate(),
			 modValue int not null default 0
		</sql>
	</changeSet>
	
 <changeSet id="jwr-adding-ttype-of-old-user" author="Khushal">
     	<comment>userjourney transaction types for old user</comment>
     	<sql>
     	            insert into TransactionTypes(txnName,ttype) values('USERJOURNEYS_OLD_CASHCREDIT','133')
					insert into TransactionTypes(txnName,ttype) values('USERJOURNEYS_OLD_CASHREVERSAL','134')
		</sql>
  </changeSet>

	<changeSet id="jwr-insert-WithdrawalVpadetails" author="udbhav">
		<comment>Create table to hold Withdrawal VPA details</comment>
		<sql>
		    IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[WithdrawalVPADetails]') AND type in (N'U'))
            BEGIN
            CREATE TABLE dbo.WithdrawalVPADetails
			(
			    id bigint IDENTITY(1,1) NOT NULL,
				userID int,
				vpaAddress varchar(200),
				vpaTokenId varchar(200),
				isLinked bit,
				createdAt datetime,
				updatedAt datetime
			)
			CREATE NONCLUSTERED INDEX [idx_userid_vpaAddress_isLinked] ON [dbo].[WithdrawalVPADetails](
			[userID] ASC,
			[vpaAddress] ASC,
			[isLinked] ASC
			)
			INCLUDE([id],[vpaTokenId],[createdAt],[updatedAt])
			END
		</sql>
	</changeSet>

	<changeSet id="Add table-type for ico users" author="Avneet">
		<comment>Add table type for ICO Uses</comment>
		<sql>
			IF OBJECT_ID('ICOUsersType') IS NULL
			CREATE TYPE [dbo].[ICOUsersType] AS TABLE(
				[id] [int] NOT NULL,
				[userId] [int] NOT NULL,
				[transactionType] [int] NOT NULL,
				[icoUsesId] [bigint] NULL
			)
		</sql>
	</changeSet>

	<changeSet id="jwr-notification-appKey" author="Parv">
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('notification', 'notification_centre_appKey', 'appKey', 1, 'text', 'appKey for CT integration.');
    	</sql>
    </changeSet>

	<changeSet id="jwr-techpro-withdrawal-status-update" author="Udbhav">
		<comment>Updating table to hold techpro withdrawal status</comment>
		<sql>
			DROP TABLE dbo.TechproWithdrawalStatus
			CREATE TABLE dbo.TechproWithdrawalStatus
				 (Status  VARCHAR(30) NOT NULL,
				  Description VARCHAR(50) NOT NULL,
				 [Value] INT NOT NULL
			  );
			Delete from TechproWithdrawalStatus;
			INSERT INTO TechproWithdrawalStatus VALUES ('NOTDEFINED', 'N/A', 0);
			INSERT INTO TechproWithdrawalStatus VALUES ('INITIATED', 'Initiated', 1);
			INSERT INTO TechproWithdrawalStatus VALUES ('SUCCESS', 'PNYERR000', 2);
			INSERT INTO TechproWithdrawalStatus VALUES ('FAILED', 'PNYERR001', 3);
			INSERT INTO TechproWithdrawalStatus VALUES ('PENDING', 'PNYERR002', 4);
			INSERT INTO TechproWithdrawalStatus VALUES ('STATUS_CHECK_PENDING', 'Withdrawal Status pending', 5);
			INSERT INTO TechproWithdrawalStatus VALUES ('STATUS_CHECK_SUCCESS', 'Withdrawal Status Success', 6);
			INSERT INTO TechproWithdrawalStatus VALUES ('FAILED_FINALLY', 'Withdrawal Status failed', 7);
		
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-create-table-GstLogs" author="Ashutosh" context="local">
		<comment>Table to hold all gst logs in JWRLogs database</comment>
		<sql>
			CREATE TABLE JWR_Logs.dbo.GstLogs (
				monthNumber smallint NOT NULL DEFAULT (DATEPART(MONTH, GETDATE())),
				id bigint IDENTITY (1, 1) NOT NULL,
				sourceId bigint NOT NULL,
				entryFee money NOT NULL,
				rakeAmt money NOT NULL,
				withdrawable money,
				deposit money,
				lockedBonus money,
				entryfeeType smallint NOT NULL, -- RealMoney/Ticket
				sourceType int NOT NULL,
				userId bigint NOT NULL,
				eventTime datetime NOT NULL,
				createdAt datetime NOT NULL,
				sourceEnv nvarchar(10),
                CONSTRAINT [PK_GstLogs] PRIMARY KEY CLUSTERED  (
                    id ASC,
                    monthNumber ASC)
			)
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-GstLogsPubSub-config" author="Ashutosh">
		<comment>Config for GstLogsPubSub</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('GstLogsPubSub', 'subscriber.enabled', 'false', 1, 'bool', 'Enable/Disable subscription')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('GstLogsPubSub', 'publisher.enabled', 'false', 1, 'bool', 'Enable/Disable publishing')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('GstLogsPubSub', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('GstLogsPubSub', 'pubsub.topic', '', 1, 'text', 'Topic to publish')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('GstLogsPubSub', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:1000:2', 'Subscriber consumer count')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('GstLogsPubSub', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('GstLogsPubSub', 'batch.size', '1000', 1, 'number:1:100000:1', 'Batch size to process')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-EnvironmentConfig" author="Ashutosh">
		<comment>Config for Environment</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('EnvironmentConfig', 'name', '', 1, 'text', 'Environment name')
		</sql>
	</changeSet>

	<changeSet id="jwr-expert-tips-cfg" author="Mirek">
		<sql>
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('expert-tips', 'enabled', 'false', 1, 'bool', 'Enable/Disable expert in-game tips feature')
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('expert-tips', 'abtest.enabled', 'true', 1, 'bool', 'If true then only half of players will have this feature available (based on abtest.mod)')
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('expert-tips', 'abtest.mod', '100', '1', 'number:2:1000000:1', 'example: mod=100, userId % 100 - if 0-49 - feature disabled, else - enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('expert-tips', 'display.time.seconds', '3', '1', 'number:1:20:1', 'Time in seconds to display tip to user');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('expert-tips', 'min.registration.datetime', '1620209793573', '1', 'datetime', 'Only players that registered after specified datetime will have the feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('expert-tips', 'force.enabled.forall', 'false', 1, 'bool', 'WARNING!!! If true then it will be automatically enabled for all users and both cash/practice game. USE ONLY for load testing')
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('expert-tips', 'debug.logging.enabled', 'false', 1, 'bool', 'If true then game-server will log many details into console log. Use it for testing only.')
		</sql>
	</changeSet>
	<changeSet id="jwr-db-userjourney-journey.completedTime.cleanup-config" author="Khushal">
		<comment>journey.completedTime.cleanup Config</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourney', 'journey.completedTime.cleanup', 'true', 1, 'bool', 'enable/disable journey.completedTime.cleanup');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-userjourney-env-name-config" author="Khushal">
		<comment>journey.env Config</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userjourney', 'journey.env', 'live', 1, 'text', 'environment name of user journey');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-Rummy-Rumble-Game-Related-Configs" author="Chirag">
        <comment>Adding Rummy Rumble configs values into cfg table</comment>
        <sql>
            INSERT INTO cfg VALUES ('RummyRumble', 'RummyRumble.enabled', 'false', '0', 'bool', 'Enable/Disable hints on game table');
            INSERT INTO cfg VALUES ('RummyRumble', 'RummyRumble.modValue', '0', '0', 'number:0:100000:1', 'To set the mod value for AB test on users');
            INSERT INTO cfg VALUES ('RummyRumble', 'RummyRumble.signupdate.threshold', '1970-01-01 00:00:00', '0', 'text', 'Register date threshold for AB (Date Format: YYYY-MM-DD hh:mm:ss)');
            INSERT INTO cfg VALUES ('RummyRumble', 'RummyRumble.autofoldValue', '0', '0', 'number:0:100000:1', 'To set autofold value to close widget');
        	INSERT INTO cfg VALUES ('RummyRumble', 'RummyRumble.leaderboardTypes', 'happy_hours', '0', 'text', 'Comma seperated leaderboardType for rumble');
        </sql>
    </changeSet>
		
    <changeSet id="jwr-db-tournament-series" author="Mirek">
    	<sql>
    		CREATE TABLE [TournamentSeries](
    			[id] [int] IDENTITY PRIMARY KEY,
    			[sid] [uniqueidentifier] NOT NULL,
    			[finaleTime] [datetime] NOT NULL,
                [finaleName] [varchar](250),
                [finaleId] [int],
    			[created_at] [datetime] NOT NULL
    		);

			CREATE NONCLUSTERED INDEX [IX_TournamentSeries_finaleStart] ON [TournamentSeries] ( [finaleTime] ASC );
    		
    		ALTER TABLE [Tournaments] ADD [seriesId] [int] NOT NULL DEFAULT (0);
    		ALTER TABLE [Tournaments] ADD [cashMovedFromChildren] [money] NOT NULL DEFAULT (0);
    		
    		ALTER TABLE [TournamentTemplates] ADD [version] [int] NOT NULL DEFAULT (1);
    		ALTER TABLE [TournamentTemplates] ADD [sid] [uniqueidentifier];
    		ALTER TABLE [TournamentTemplates] ADD [pid] [int];
    		ALTER TABLE [TournamentTemplates] ADD [maxPlayersLimit] [int] NOT NULL DEFAULT(0);
    		
    		ALTER TABLE [UserTournamentTickets] ADD [sourceType] [int] NULL;
    		ALTER TABLE [UserTournamentTickets] ADD [sourceDetails] [varchar] (30) NULL;
    		
    		CREATE TYPE [dbo].[GrantTournamentTicketLogsV2] AS TABLE(
				[PlayerID] [bigint] NULL,
				[TicketInstanceId] [bigint] NULL,
				[TxnAmt] [money] NULL,
				[TransactionType] [int] NULL,
				[InitialState] [int] NULL,
				[SourceId] [int] NULL,
				[TransactionRefId] [int] NULL,
				[TransactionRefType] [int] NULL,
				[ValidUntil] [datetime] NULL,
				[isGst] [bit] NULL,
				[isIssued] [bit] NULL,
				[sourceType] [int] NULL,
				[sourceDetails] [varchar](30) NULL
			);

			CREATE TABLE [TournamentSeriesPoolMovement](
				[sourceTournamentId] [int] PRIMARY KEY,
				[seriesId] [int] NOT NULL,
				[targetTournamentTemplateId] [int] NOT NULL,
				[claimed] [bit] NOT NULL,
				[cashMoved] [money] NOT NULL,
				[claimedTournamentId] [int] NULL,
				[claimedTime] [datetime] NULL,
    			[created_at] [datetime] NOT NULL,
    			[updated_at] [datetime] NOT NULL
    		);
    		
    		CREATE NONCLUSTERED INDEX [IX_TournamentSeriesPoolMovement_series_target_claimed] ON [TournamentSeriesPoolMovement] ( [seriesId], [targetTournamentTemplateId], [claimed] );
    		CREATE NONCLUSTERED INDEX [IX_TournamentSeriesPoolMovement_claimed] ON [TournamentSeriesPoolMovement] ([claimed] );
    		
    		CREATE TABLE [TournamentCostBalance](
				[tournamentId] [int] PRIMARY KEY,
				[seriesId] [int] NOT NULL,
				[cashPool] [int] NOT NULL,
				[totalPoolValue] [int] NOT NULL,
				[totalEntryFees] [int] NOT NULL,
				[cashMovedFromChildren] [int] NOT NULL,
				[rake] [int] NOT NULL,
				[costOfUsedIssuedTickets] [int] NOT NULL,
				[cashMovedToParent] [int] NOT NULL,
				[created_at] [datetime] NOT NULL DEFAULT GETDATE()
			);
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-tournament-series-part2" author="Mirek">
    	<sql>
    		ALTER TABLE [UserTournamentTickets] ADD [consumedByTournamentId] [int] NULL;
    	</sql>
    	
    </changeSet>
    	
 	<changeSet id="jwr-db-forceload-DRMID" author="Pushpender">
    	<comment>Add Force loadFlow DRMID Native APP</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'psapp.forceLoadFlow1', '', 1, 'text', 'DRMID 1 for psapp.forceLoadFlow1')
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'psapp.forceLoadFlow2', '', 1, 'text', 'DRMID 2 for psapp.forceLoadFlow2')
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'psapp.forceLoadFlow3', '', 1, 'text', 'DRMID 3 for psapp.forceLoadFlow3')
		</sql>
	 </changeSet>
	 
    <changeSet id="notificationSync-subscriber" author="Parv">
    	<comment>Adding Subcriber config for Project Audience Kafka Publisher</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('notificationsyncsubscriber', 'enable', 'false', 1, 'bool', 'Enable/Disable user subscription')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('notificationsyncsubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('notificationsyncsubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('notificationsyncsubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('notificationsyncsubscriber', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:8:2', 'Subscriber consumer count')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('notificationsyncsubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
    	</sql>
    </changeSet>
	<changeSet id="jwr-add-index-promocode-table" author="Niraj">
        <comment>Adding index on promocodegroup into promocode table</comment>
    	<sql>
    		CREATE NONCLUSTERED INDEX Promocodes_PromocodeGroup ON Promocodes (PromocodeGroup ASC) WITH (ONLINE = ON)

    	</sql>
    </changeSet>
    
    <changeSet id="jwr-add-cashGameVariable-col-UserJourneyMilestone" author="Khushal">
        <comment>Add new column cashGameVariable in UserJourneyMilestone</comment>
    	<sql>
    		Alter table UserJourneyMilestone 
			add cashGameVariable varchar(500) default ''
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-re-Create-UserJourneyMileStoneTableType-type-pre-fix" author="Mirek">
    	<sql>
    		IF OBJECT_ID('dbo.InsertUserJourneyMilestone') IS NULL
			 EXEC('CREATE PROCEDURE dbo.InsertUserJourneyMilestone AS SET NOCOUNT ON;');
    	</sql>
    </changeSet>
    
     <changeSet id="jwr-re-Create-UserJourneyMileStoneTableType-type" author="Khushal">
		<comment>Re-create table type for UserJourneyMileStoneTableType</comment>
		<sql>
				IF TYPE_ID('UserJourneyMileStoneTableType') IS not  NULL
				BEGIN
				    Drop proc InsertUserJourneyMilestone
					DROP TYPE [dbo].[UserJourneyMileStoneTableType]
				END
				
				CREATE TYPE [dbo].[UserJourneyMileStoneTableType] AS TABLE
				(
            		 	userJourneyId int  
			           ,dayNo tinyint  
			           ,disbursementCondition varchar(15)  
			           ,disbursementConditionNo int  
			           ,amount int 
			           ,cashGameVariable varchar(500)
				)
				
		</sql>
	</changeSet>
				
    
    <changeSet id="jwr-available-login-options" author="Khushal">
		<comment>This config can be used to show all the available Login options on a platform</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('registration', 'login.available.options', 'google|facebook', 1, 'text', 'Seperate the options by pipe (|). Order of options will also be decided by this configuration ')	
		</sql>
	</changeSet>

  <changeSet id="jwr-db-skill-score-configs-update" author="Nemesiss">
    	<sql>
     		update cfg set [value] = 1000, [type] = 'number:100:1000:10' where id = 'skill-score-config' and [key] = 'limit.array.compute';
     		update cfg set [value] = 1000, [type] = 'number:100:1000:10' where id = 'skill-score-config' and [key] = 'limit.array.store';
    	</sql>
    </changeSet>
	<changeSet id="jwr-db-mongo-db-skill-score-connection" author="Nemesiss">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mongo-skill-score', 'mongo.host.name', 'localhost', 1, 'text', 'mongo host server ip')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mongo-skill-score', 'mongo.host.port', 27017, 1, 'number:0:60000:20', 'mongo host server port')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mongo-skill-score', 'mongo.connection.ssl', 'false', 1, 'bool', 'enable disable ssl for mongo')
		</sql>
	</changeSet>
	
	<changeSet id="jwr-delete-restricted-state-from-db" author="Khushal">
		<comment>Delete Restricted state from db</comment>
		<sql>
			delete from States where name = 'Restricted State'

			
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-add-withdrawals-popup-column-in-Users-Table"
		author="Niraj">
		<comment>Add withdrawals popup column in users table</comment>
		<sql>
			ALTER TABLE USERS add  [withdrawal_popup_shown] BIT NOT NULL DEFAULT 0;
		</sql>
	</changeSet>
  <changeSet id="jwr-alter-column-type"  author="Khushal" context="local">
		<comment>This change column type varchar to nvarchar</comment>
		<sql>
			Alter table StaticPages ALTER COLUMN Title nvarchar(1000) not null;
			Alter table StaticPages ALTER COLUMN [Description] nvarchar(2000) not null;
			Alter table StaticPages ALTER COLUMN MetaTags nvarchar(max) not null;
		</sql>
	</changeSet>
	<changeSet id="jwr-create-table-for-sql-error-logs" author="Mayank">
		<comment>This error logs table will be used to log errors happenng in SP</comment>
		<sql>
			CREATE TABLE SqlErrorLogs (
			    [id] BIGINT IDENTITY(1,1) NOT NULL,
			    [sp_name] VARCHAR(100),
			    [userId] INT,
			    [gameId] BIGINT,
			    [errorLog] varchar (MAX),
			    [timestamp] DATETIME  DEFAULT GETDATE()
			)
			
			CREATE NONCLUSTERED INDEX timestamp_userid_gameid ON SqlErrorLogs (timestamp ASC, userId ASC, gameId ASC)
		</sql>
	</changeSet>
	
	<changeSet id="jwr-create-table-for-sql-error-logs-primarykey" author="Mayank">
		<comment>To add primary key into SqlErrorLogs</comment>
		<sql>
			ALTER TABLE SQLErrorLogs ADD PRIMARY KEY (id);
		</sql>
	</changeSet>
	
	<changeSet id="jwr-add-promocodegroup-table-tvp" author="Niraj">
		<comment>Adding table type for Inserting userIds for userstaus</comment>
		<sql>
			IF TYPE_ID(N'ProcodegroupTablePromocodes') IS NULL
			BEGIN
			CREATE
			TYPE ProcodegroupTablePromocodes AS TABLE
			(
			[PromocodeGroup] VARCHAR(40)
			)
			END
		</sql>
	</changeSet>
	<changeSet id="jwr-db-withdrawal-fuzzy-config" author="Udbhav">
     	<comment>Fuzzy logic for name check  withdrawals</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.name.fuzzy.exactscore', '50', 1, 'number:0:100:1', 'exact score for withdrawal name check')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.name.fuzzy.fuzzyscore', '66', 1, 'number:0:100:1', 'fuzzy score for withdrawal name check')
	   </sql>
   </changeSet>

	<changeSet id="jwr-db-X-Game-Related-Configs" author="Chirag">
        <comment>Adding X Game configs values into cfg table</comment>
        <sql>
            INSERT INTO cfg VALUES ('XGames', 'XGames.enabled', 'false', '0', 'bool', 'Enable/Disable X Games completely');
            INSERT INTO cfg VALUES ('XGames', 'XGames.isVisibleToUser', 'false', '0', 'bool', 'Shows X Game to users');
            INSERT INTO cfg VALUES ('XGames', 'XGames.maxGames', '0', '0', 'number:0:1000:1', 'To set max games data availability');    
  		</sql>
    </changeSet>
    <changeSet id="jwr-db-version-list-hash-Configs" author="Pushpender">
        <comment>Adding native app version list hash values into cfg table</comment>
        <sql>
  	         		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('nativeAppVersion', 'apk-cash', '{}', 1, 'text', 'Adding version  for cash APK');
					
					INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('nativeAppVersion', 'apk-free', '{}', 1, 'text', 'Adding version for free APK')	
					
					INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('nativeAppVersion', 'ipa-cash', '{}', 1, 'text', 'Adding version for cash IPA')	
					
					INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('nativeAppVersion', 'ipa-free', '{}', 1, 'text', 'Adding version  for free IPA')	

			</sql>
	</changeSet>	

    <changeSet id="jwr-control-PA-Pop-Up-config" author="Pushpender">
     	<comment>overall control at a cumulative level for all PA pop up</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
						VALUES ('registration', 'paLimit', '', 1, 'text', 'overall control at a cumulative level for all PA pop up')	
		</sql>
   	</changeSet>
    <changeSet id="jwr-create-table-registration-method" author="pushpender">
		<comment>This is update registration method from admin</comment>
		<sql>
			CREATE TABLE RegistrationMethod (
			    [id] SMALLINT IDENTITY(1,1) NOT NULL,
			    [source] VARCHAR(100)NOT NULL,
			    [method] VARCHAR(100)NOT NULL,
			    [platform] VARCHAR(100)NOT NULL,
			     PRIMARY KEY (id)
			  );
			
			delete from registrationmethod
			
			insert into registrationmethod (source, method, platform) values ('GOOGLE',	'["OTP","TRUECALLER","GOOGLE"]',	'["apk","ipa","mob","pwai","pwaa","web"]')
			insert into registrationmethod (source, method, platform) values ('ORGANIC',	'["OTP","TRUECALLER","GOOGLE"]',	'["apk","ipa","mob","pwai","pwaa","web"]')
			insert into registrationmethod (source, method, platform) values ('FACEBOOK',	'["OTP","TRUECALLER","GOOGLE","FACEBOOK"]',	'["apk","ipa","mob","pwai","pwaa","web"]')
			insert into registrationmethod (source, method, platform) values ('RAF',	'["OTP","TRUECALLER","GOOGLE"]',	'["apk","ipa","mob","pwai","pwaa","web"]')
			insert into registrationmethod (source, method, platform) values ('MEDIABUYING',	'["OTP","TRUECALLER","GOOGLE","FACEBOOK"]',	'["apk","ipa","mob","pwai","pwaa","web"]')
			insert into registrationmethod (source, method, platform) values ('DEFAULT',	'["OTP","TRUECALLER","GOOGLE"]',	'["apk","ipa","mob","pwai","pwaa","web"]')
		</sql>
	</changeSet>

     <changeSet id="jwr-db-abtest-psapp-flow4" author="Pushpender">
    	<comment>Add abtest flows 4 in Native APP</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'psapp.flow4', 'false', 1, 'bool', 'Enable / disable Landscape mode with Potrait registration in psapp')
		</sql>
    </changeSet>
    <changeSet id="jwr-mobile-registration-allowed-per-mobile-number" author="Pushpender">
		<comment>Adding config in cfg to allow number of registrations for Cash apk Mobile Registration</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'perday.testmobile.registration.limit', '5', 1, 'number:1:1000:1', 'Number of cash app registrations allowed from mobile number');
		</sql>
	</changeSet>
	 <changeSet id="jwr-add-LobbyConfiguration-Table" author="Pushpender">
		<comment>Create table to update configuration lobby</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[	]') AND type in (N'U'))
            BEGIN
            CREATE TABLE [dbo].[LobbyConfiguration](
              [Id] [int] IDENTITY(1,1) NOT NULL,
	          [LobbyType] [varchar] (50) NOT NULL,
			  [LobbySeq] [smallint] NOT NULL ,
			  [LobbyText] [varchar] (100) NOT NULL ,
			  [LobbyIcon] [varchar] (100)  NOT NULL,
			  [LobbyActiveIcon] [varchar] (100) NOT NULL,
			   PRIMARY KEY (Id)
			   )
			END
			INSERT into [dbo].[LobbyConfiguration] ([LobbyType], [LobbySeq], [LobbyText], [LobbyIcon],[LobbyActiveIcon])
			 VALUES ('PRACTICE',1,'OKK','PATH','ACTIVE PATH');
			INSERT into [dbo].[LobbyConfiguration] ([LobbyType], [LobbySeq], [LobbyText], [LobbyIcon],[LobbyActiveIcon])
			 VALUES ('CASH',2,'okk','PATH','ACTIVE PATH');
			 INSERT into [dbo].[LobbyConfiguration] ([LobbyType], [LobbySeq], [LobbyText], [LobbyIcon],[LobbyActiveIcon])
			 VALUES ('TOURNAMENT',3,'OKK','PATH','ACTIVE PATH');
		</sql>
		</changeSet>

	<changeSet id="jwr-create-sidebar-config-table" author="Pushpender">
		<comment>Create Sidebar config Table</comment>
		<sql>
			IF OBJECT_ID('SidebarConfig') IS NULL
			BEGIN
            CREATE TABLE SidebarConfig
            (
              [ID] [int] IDENTITY(1,1) NOT NULL,
              [seqNumber]  [smallInt] NOT NULL,
              [icon] [varchar](200) NOT NULL,
              [name]  [varchar](200) NOT NULL ,
              [visibility]  [bit] NOT NULL DEFAULT ((0)),
              [link]  [varchar](200) NOT NULL,
              PRIMARY KEY (ID)
            )
            END 
		</sql>	
	</changeSet>
    
    <changeSet id="jwr-add-modReminder-column" author="Khushal">
     	<comment>added modReminder column</comment>
     	<sql>
     	        Alter Table UserJourney
				Add modReminder varchar(50) default('');

		</sql>
     </changeSet>
     
     <changeSet id="jwr-db-deal-sit-and-go" author="Mrei">
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyTopTabs', 'deal_sng.13cardrummy.enabled', 'true', 1, 'bool', 'Enable/Disable Deal Spin and Go');
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-deal-sng-disable" author="Mirek">
    	<sql>
    		UPDATE [dbo].[cfg] SET [value] = 'false' WHERE [key] = 'deal_sng.13cardrummy.enabled';
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-deal-sng-table-configs" author="Mirek">
    	<sql>
    		ALTER TABLE [dbo].[TableConfigurations] ADD sngCycles int NULL;
    		ALTER TABLE [dbo].[TableConfigurations] ADD sngMultipliers varchar(250) NULL;
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-deal-sng-timers" author="Mirek">
	    <sql>
    		INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal_sng.finish',	 	'30000', '1', 'number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal_sng.bonus',		'30000', '1', 'number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal_sng.turn',		'30000', '1', 'number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal_sng.gamestart',	'5000', '1', 'number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.deal_sng.viewresults','10000', '1', 'number:1000:120000:1000','View Results time');
	    </sql>
    </changeSet>
    
    <changeSet id="jwr-db-sng-spinner-timers" author="Mirek">
	    <sql>
    		INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.sng.spinner.running',	 	'3000', '1', 'number:100:10000:100','For how long the spinner animation should be running');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.sng.spinner.result',		'1000', '1', 'number:100:10000:100','For how long the spinner result should be displayed');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.sng.spinner.finish',		'1000', '1', 'number:100:10000:100','Lenght of the final animation (moving prize from spinner to prize info)');
	    </sql>
    </changeSet>
    
    <changeSet id="jwr-db-sng-UsersWinningByGamevariant" author="Mirek">
    	<sql>
    		ALTER TABLE [dbo].[UsersWinningByGamevariant] ADD DealSNG Money NULL;
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-sng-default-entry-fees" author="Mirek">
    	<sql>
    		ALTER TABLE [dbo].[DefaultEntryFees] ADD DEALSNG varchar(10) not null DEFAULT '0';
    		UPDATE [dbo].[DefaultEntryFees] SET DEALSNG = DEAL;
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-sng-game-variant-types" author="Mirek">
    	<sql>
    		INSERT [dbo].[GameVariantTypes] ([Type], [Value]) VALUES (N'DealSNG', 3)
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-sng-transaction-types" author="Mirek">
    	<sql>
    		insert into TransactionTypes(txnName,ttype) values('DEALSNGPRIZES','140');
    		insert into TransactionTypes(txnName,ttype) values('DEALSNGBUYIN','141');
    		insert into TransactionTypes(txnName,ttype) values('DEALSNGRAKE','142');
    		insert into TransactionTypes(txnName,ttype) values('LEAVE_TABLE_DEAL_SNG','143');
    		insert into TransactionTypes(txnName,ttype) values('DEAL_SNG_LOST','144');
    		insert into TransactionTypes(txnName,ttype) values('CRASH_REFUND_DEAL_SNG_RUMMY','145');
    		insert into TransactionTypes(txnName,ttype) values('DEAL_SNG_WINNINGS_ADDED','146');
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-sng-TablesSngStatus" author="Mirek">
    	<sql>
    		CREATE TABLE [dbo].[TablesSngStatus](
    			[tableConfigId] [int] PRIMARY KEY,
    			[multipliers] [varchar](250),
    			[gamesPerMultiplier] [varchar](250),
    			[initialGamesPerMultiplier][varchar](250),
    			[curentCycle][int],
    			[maxCycles][int],
    			[gamesLeftInCurrentCycle][int],
    			[gamesPerCycle][int]
    		)
    	</sql>
    </changeSet>
     <changeSet id="jwr-add-tournament-series-ttypes" author="Mirek">
     	<sql>
     		INSERT INTO TransactionTypes(txnName,ttype) VALUES('TOURNAMENT_CHARGE_TRANSFERED_POOL','147');
     		INSERT INTO TransactionTypes(txnName,ttype) VALUES('TOURNAMENT_PARK_TRANSFERED_POOL','148');
     		INSERT INTO TransactionTypes(txnName,ttype) VALUES('TOURNAMENT_CLAIM_TRANSFERED_POOL','149');
     		INSERT INTO TransactionTypes(txnName,ttype) VALUES('TOURNAMENT_ADD_TRANSFERED_POOL','150');
     		INSERT INTO TransactionTypes(txnName,ttype) VALUES('TOURNAMENT_ISSUED_TICKET_COST_OF_USE','151');
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-add-ticket-ids-type" author="Mirek">
     	<sql>
     		CREATE TYPE [dbo].[TicketIds] AS TABLE(
					[TicketId] [bigint]
				)
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-add-type-GrantTournamentTicketLogsV22" author="Mirek">
     	<sql>
     		CREATE TYPE [dbo].[GrantTournamentTicketLogsV22] AS TABLE(
				[PlayerID] [bigint] NULL,
				[TicketInstanceId] [bigint] NULL,
				[TxnAmt] [money] NULL,
				[TransactionType] [int] NULL,
				[InitialState] [int] NULL,
				[SourceId] [bigint] NULL,
				[TransactionRefId] [int] NULL,
				[TransactionRefType] [int] NULL,
				[ValidUntil] [datetime] NULL,
				[isGst] [bit] NULL,
				[isIssued] [bit] NULL,
				[sourceType] [int] NULL,
				[sourceDetails] [varchar](30) NULL
			);
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-add-sharedwallet-config-UC" author="Ashutosh">
     	<comment>Add column for shared wallet config in UserCurrencies</comment>
     	<sql>
     		ALTER TABLE UserCurrencies
    			ADD isSharedWalletEnabled BIT NOT NULL DEFAULT 1;
		</sql>
     </changeSet>
	 
      <changeSet id="jwr-firebase-config" author="Khushal">
		<comment>Adding configs of firebase</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('firebase', 'api_secret', '', 1, 'text', 'Firebase api secret');
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('firebase', 'firebase_app_id', '', 1, 'text', 'Firebase app Id');
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('firebase', 'firebase_url', '', 1, 'text', 'Firebase URL');
		
		</sql>
	</changeSet>

      <changeSet id="jwr-signup-login-count" author="Khushal">
     	<comment>added modReminder column</comment>
     	<sql>
     	       INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'perdevice.login.signup.limit', '3', 1, 'number:1:1000:1', 'Limit to allow login + signup per device');
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'perdevice.login.signup.enabled', 'false', 1, 'bool', 'enable/disable Limit to allow login + signup per device');
		 
		</sql>
     </changeSet>
	 
      <changeSet id="jwr-add-isManualBonus-column" author="Khushal">
     	<comment>added isManualBonus column</comment>
     	<sql>
     	       Alter Table UserJourney
			   Add isManualBonus bit default(0);

		</sql>
     </changeSet>
     
     <changeSet id="jwr-puj-milestone-kafka-config" author="Khushal">
     	<comment>puj milestone Kafka Config</comment>
     	<sql>   
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pujmilestonecompletesubscriber', 'enable', 'false', 1, 'bool', 'Enable/Disable user subscription')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pujmilestonecompletesubscriber', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pujmilestonecompletesubscriber', 'pubsub.namespace', '', 1, 'text', 'kafka brokers')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pujmilestonecompletesubscriber', 'pubsub.topic', '', 1, 'text', 'topic to publish')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pujmilestonecompletesubscriber', 'pubsub.subscriber.consumercount', '2', 1, 'number:2:8:2', 'Subscriber consumer count')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pujmilestonecompletesubscriber', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pujmilestonecompletepublisher', 'enable', 'false', 1, 'bool', 'Enable/Disable publisher')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pujmilestonecompletepublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pujmilestonecompletepublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pujmilestonecompletepublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')

 		</sql>
    </changeSet>

	<changeSet id="jwr-db-drop-duplicate-row-TOURNAMENTTICKETSSUMMARY-table" author="Pushpender">
        <comment>Drop row having combine duplicate of date and ticketId in TOURNAMENTTICKETSSUMMARY</comment>
        <sql>
        	WITH CTE AS( SELECT tournamentId, ticketId, date, baseValue, discount, currentValue, 
        	RN = ROW_NUMBER()OVER(PARTITION BY tournamentId,ticketId,date,baseValue,discount,currentValue ORDER BY 
        	tournamentId,ticketId,date,baseValue,discount,currentValue ) FROM TOURNAMENTTICKETSSUMMARY ) 
        	Delete FROM CTE WHERE RN > 1
       </sql>
    </changeSet>

     <changeSet id="jwr-db-Add-Unique-key-TOURNAMENTTICKETSSUMMARY-table" author="Pushpender">
        <comment>Add Unique key on TOURNAMENTTICKETSSUMMARY</comment>
        <sql>
        	ALTER TABLE dbo.TOURNAMENTTICKETSSUMMARY
 			 ADD CONSTRAINT uq_TOURNAMENTTICKETSSUMMARY UNIQUE(ticketId, date)
       </sql>
    </changeSet>
	
	 <changeSet id="jwr-db-forceload-DRMID4" author="Pushpender">
    	<comment>Add Force loadFlow DRMID4 Native APP</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'psapp.forceLoadFlow4', '', 1, 'text', 'DRMID 4 for psapp.forceLoadFlow4');
		</sql>
	 </changeSet>
	 <changeSet id="jwr-gdb-muid-cfg-drmid" author="Pushpender">
     <comment>add muid drm id</comment>
	     <sql>
	       INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'multiplier.isActive.drmid', 'true', 1, 'bool', 'is muid multiplier active for matching drmid')
	  	   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'score.drmid', '10', 1, 'text', 'partial match score')
     	
	  	</sql>
  	</changeSet>
     
	<changeSet id="jwr-ipl-start-date" author="Pushpender">
		<comment>Adding configs for IPL start date on game table</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cricket-scoreboard', 'cricket.scoreboard.startdate', '', 1, 'text', 'IPL start date ');
		</sql>
	</changeSet>
    <changeSet id="jwr-transactiontype-rake-gst" author="Mayank">
		<comment>Add transaction type for Rake for GST</comment>
		<sql>
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES (N'RAKE_GST', 139)
		</sql>
	</changeSet>
	 
	 <changeSet id="jwr-db-es-config-for-new-service" author="Niraj">
    	<comment>ES Config for new services</comment>
		    	<comment>ES Config for new services</comment>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.withdrawal.history.index" />
			<column name="value" value="withdrawal_history" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="new es index for withdrawal history" />
		</insert>
		    	<comment>ES Config for new services</comment>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.withdrawal.index" />
			<column name="value" value="withdrawals" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="new es index for withdrawals" />
		</insert>
	 </changeSet>
	 <changeSet id="jwr-db-Create-Users_Balance_Reversal-table" author="Pushpender">
	 <comment>create table Users_Balance_Reversal</comment>
    	
	 	<sql>
			CREATE TABLE [dbo].[Users_Balance_Reversal](
			    [id] [bigint] IDENTITY(1,1) NOT NULL PRIMARY KEY,
				[UserID] [Int] NOT NULL,
				[ExistingDepositBalance] [money] NULL,
				[ExistingCurrencyRupees] [money] NULL,
				[UpdatedDepositBalance] [money] NULL,
				[UpdatedCurrencyRupees] [money] NULL,
				[LastUpdatedTime] [datetime] NULL,
				[Status] [varchar](100) NULL,
				[TransactionID] [bigint] NULL,
				[ProcessStartDate] [datetime] NULL,
				[ProcessEndDate] [datetime] NULL,
				[AdminUserID] [varchar](20) NULL
			) ON [PRIMARY]
			CREATE NONCLUSTERED INDEX UserID_ProcessStartDate ON Users_Balance_Reversal (UserID ASC,ProcessStartDate ASC)
		</sql>
	 
	 </changeSet>
	 
	 <changeSet id="jwr-db-create-RevenueSourceType-table" author="Pushpender">
    	<comment>create table RevenueSourceType table</comment>
    	<sql>
    		IF OBJECT_ID('dbo.RevenueSourceType', 'U') IS NULL
			BEGIN
    		CREATE TABLE [dbo].[RevenueSourceType](
				[txnName] [varchar](50) NOT NULL,
				[ttype] [tinyint] NOT NULL
			) ON [PRIMARY]
			ALTER TABLE [dbo].[RevenueSourceType] ADD PRIMARY KEY CLUSTERED 
			(
				[ttype] ASC
			)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
			END
		</sql>
	 </changeSet>
	 
	 <changeSet id="jwr-db-add-365confiscation-RevenueSourceType-table" author="Pushpender">
    	<comment>Add 365_day_balance_confiscation in RevenueSourceType table</comment>
    	<sql>
    		insert into RevenueSourceType (txnName,ttype)VALUES('365_day_balance_confiscation',9);
		</sql>
	 </changeSet>
	  <changeSet id="jwr-db-add-365_day_balance_confiscation-transactiontypes-table" author="Pushpender">
    	<comment>Add 365_day_balance_confiscation in transactiontypes table </comment>
    	<sql>
    		insert into TransactionTypes (txnName,ttype)VALUES('365_day_balance_confiscation',153);
    	</sql>
	</changeSet>
	 <changeSet id="jwr-db-user-attribution-publisher-cfg" author="Ashutosh">
     	<comment>Configuration for User attribution publisher</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('UserAttributionPublisher', 'enabled', 'false', 1, 'bool', 'Enable/Disable user attribution publisher')
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('UserAttributionPublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('UserAttributionPublisher', 'pubsub.topic', '', 1, 'text', 'Topic to publish')
     	    </sql>
     </changeSet>
	 
	 <changeSet id="jwr-db-use-dcsettings-sng" author="Mirek">
	 	<sql>
	 		ALTER TABLE [dbo].[UserDisconnectionSettings] ADD [dropDealSng][tinyint] NULL;
	 	</sql>
	 </changeSet>
	 <changeSet id="jwr-db-cfg-dcsettingstypes-add-sng" author="Mirek">
	 	<sql>
	 		UPDATE [dbo].[cfg] SET [value] = [value]+',DEAL_SNG' WHERE [id] = 'dcsettings' AND [key] = 'dcsettings.allowed.game.types'
	 	</sql>
	 </changeSet>
	 <changeSet id="jwr-db-gtmasking-dealsng" author="Mirek">
	 	<sql>
	 		INSERT INTO cfg VALUES ('gametable-masking','gametableMaskingConfig.cash.deal_sng.13c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for Deal Spin and Go');
	 	</sql>
	 </changeSet>
	 
	 <changeSet id="jwr-db-deal-sng-more-transactions" author="Mirek">
	 	<sql>
			insert into TransactionTypes(txnName,ttype) values('DEALSNG_ADDITIONAL_RAKE','152');
	 	</sql>
	 </changeSet>

	 <changeSet id="sharedwallet-table-CashOngoingTransfer" author="Dharesh">
	 	<comment></comment>
	 	<sql>
	 		CREATE TABLE CashOngoingTransfer
			(
			    Id bigint identity(1,1),
			    tid bigint not null,
			    subtid bigint not null,
			    withdrawable money not null,
			    depositbucket money not null,
			    recorded datetime not null,
			    CONSTRAINT PK_CashOngoingTransfer PRIMARY KEY (id),
			    CONSTRAINT UK_CashOngoingTransfer_tid UNIQUE (tid)
			) ON [PRIMARY];
	 	</sql>
	 </changeSet>
	 
	<changeSet id="jwr-db-add-sharedwallet-transaction-types" author="Ashutosh">
		<comment>Add coordinator (shared wallet) transaction types</comment>
		<sql>
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_HZ_CONTEST', 154);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_HZ_PAYOUT', 155);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_HZ_TICKET', 156);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_GR_GAME', 157);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_JR_TOURNEY', 158);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_JR_POINTS', 159);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_JR_DEAL', 160);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_JR_POOL', 161);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_JR_SNG', 162);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_JR_PAYOUT', 163);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_JR_TOURNEY_TICKET', 164);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_JR_LEADERBOARD_ENTRY', 165);
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-tournament-templates-archived" author="Mirek">
		<sql>
			ALTER TABLE [TournamentTemplates] ADD [archived] [bit] NOT NULL DEFAULT(0);
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-tournament-templates-archived-idx" author="Mirek">
		<sql>
			CREATE NONCLUSTERED INDEX [IX_TournamentTemplates_archived] ON [TournamentTemplates] ([archived] ) WITH(ONLINE=ON);
		</sql>
	</changeSet>

	<changeSet id="jwr-sng-abtest-cfg" author="Mirek">
		<sql>
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('spin-and-go', 'abtest.enabled', 'false', 1, 'bool', 'If true then only some players will have this feature available (whose id%mod > )');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('spin-and-go', 'abtest.mod', '128', '1', 'number:2:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('spin-and-go', 'abtest.threshold', '64', '1', 'number:0:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('spin-and-go', 'min.registration.datetime', '1633967894000', '1', 'datetime', 'Only players that registered after specified datetime will have the feature enabled');
		</sql>
	</changeSet>

	<changeSet id="jwr-ipl-match-eventbonus-subcriber-extension" author="Mayank">
		<comment>Adding config in cfg to configure team wise match event processing</comment>
		<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('matcheventsubscriber', 'processteamspecificdisbursement', '', 1, 'text', 'Team code (IND, SL etc) if want to process matches only if the team is playing, configure one at a time.')
		</sql>
	</changeSet>
  
     <changeSet id="jwr-db-internal-api-token" author="Deepak">
		<comment>JAPI access token</comment>
		<sql>
			 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'internal-api-token', '', 1, 'text', 'Internal API calls token for JAPI (should match japi-kyc-service-token)')
	  </sql>
   </changeSet>
	 <changeSet id="jwr-db-howzt-jg-wallet" author="Pushpender">
    	<comment>Add howat userid in userpop</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'jghowzat.api.url', '', 1, 'text', 'jghowzat Api url');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'jghowzat.balance.url', '', 1, 'text', 'jghowzat balance detail Api url');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'howzat.url', '', 1, 'text', 'howzat url');
		
		</sql>
	 </changeSet>
	 <changeSet id="jwr-add-sidebar-selfExcluded-column" author="Pushpender">
		<comment>Alter selfExcluded column in sidebar Table</comment>
		<sql>
			Alter TABLE SidebarConfig add  selfExcluded [bit] NOT NULL DEFAULT ((0));
		</sql>	
	</changeSet>
	<changeSet id="jwr-create-table-for-stuck-games-reversal-records" author="Mayank">
		<comment>This logs table will be used to have log entries for stuck game reversal</comment>
		<sql>
			CREATE TABLE StuckGamesReversalLogs (
			    [id] BIGINT IDENTITY(1,1) NOT NULL,
			    [adminActivityId] bigint,
			    [tableInstanceId] bigint,
			    [gameNo] INT,
			    [gameId] BIGINT,
			    [customLog] varchar (MAX),
			    [timestamp] DATETIME  DEFAULT GETDATE()
			)
			
			CREATE NONCLUSTERED INDEX timestamp_tableinstanceid_gameno ON StuckGamesReversalLogs (timestamp ASC, tableInstanceId ASC, gameNo ASC, adminActivityId ASC)
		</sql>
	</changeSet>
	
    <changeSet id="jwr-db-Add-mobile-drmid-flag" author="Akshat">
    	<comment>Add Mobile DRMID Flag</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'mobileDRMIDToggle', 'false', 1, 'bool', 'Mobile DRMID toggle feature')
    	
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-Add-web-drmid-flag" author="Akshat">
    	<comment>Add Web DRMID Flag</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'webDRMIDToggle', 'false', 1, 'bool', 'Web DRMID toggle feature')
    	
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-Add-drm-login-count-mob" author="Akshat">
     	<comment>Login Signup Limit Count Mob</comment>
     	<sql>
    	   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'perdevice.login.signup.limit.mobile', '3', 1, 'number:1:1000:1', 'Limit to allow login + signup per device Mobile');
		</sql>
     </changeSet>

    <changeSet id="jwr-db-Add-drm-login-count-web" author="Akshat">
     	<comment>Login Signup Limit Count Web</comment>
     	<sql>
     	   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'perdevice.login.signup.limit.web', '3', 1, 'number:1:1000:1', 'Limit to allow login + signup per device Web');
		</sql>
     </changeSet>
	
	<changeSet id="jwr-db-add-best-group-cfg" author="Chirag">
		<comment></comment>
	    <sql>
	    	INSERT INTO cfg VALUES ('bestGroup', 'bestGroupConfig.enabled', 'false', '0', 'bool', 'If true then only some players will have this feature available (whose id%mod >= threshold)');
			
			INSERT INTO cfg VALUES ('bestGroup','bestGroupConfig.practice.points.13c.enabled', 'false', '0', 'bool', 'Controls config activated for Practice Points Game variant');
			INSERT INTO cfg VALUES ('bestGroup','bestGroupConfig.practice.points.10c.enabled', 'false', '0', 'bool', 'Controls config activated for Practice 10 Card Game variant');
			INSERT INTO cfg VALUES ('bestGroup','bestGroupConfig.practice.pool.13c.enabled', 'false', '0', 'bool', 'Controls config activated for Practice Pool Game variant');
			INSERT INTO cfg VALUES ('bestGroup','bestGroupConfig.practice.deal.13c.enabled', 'false', '0', 'bool', 'Controls config activated for Practice Deal Game variant');
		
			INSERT INTO cfg VALUES ('bestGroup', 'bestGroupConfig.mod', '128', '0', 'number:2:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO cfg VALUES ('bestGroup', 'bestGroupConfig.threshold', '64', '0', 'number:0:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO cfg VALUES ('bestGroup', 'bestGroupConfig.registration.datetime', '0', '0', 'datetime', 'Only players that registered after specified datetime will have the feature enabled');
	    	INSERT INTO cfg VALUES ('bestGroup', 'bestGroupConfig.delay', '0', '0', 'number:0:100000:1', 'Start time of button shown: X secs post user turn');
	    	
	    </sql>
    </changeSet>
	<changeSet id="jwr-db-new-withdrawal-service-url" author="Niraj">
    	<comment>Adding withdrawal Service URL</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'new.withdrawal.url', '', 1, 'text', 'new withdrawal service url');
		</sql>
	 </changeSet>
	 <changeSet id="jwr-db-Add-whitelist-appType-config" author="Pushpender">
    	<comment>Add whitelist appType config</comment>
    	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'id.whitelist.faceboook', '', 1, 'text', 'Add whitelist appType config for facebook');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'id.whitelist.google', '', 1, 'text', 'Add whitelist appType config for google');
    	</sql>
    </changeSet>
    <changeSet id="jwr-db-Add-alert-mail-setting-for-PPRUMMY-in-cfg" author="Pushpender">
    	<comment>Setting Play RUMMY util values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'pprummyfromemail', 'info@pprummy.com', 1, 'text', 'pprummy sender mail')
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils','PrEmailFromName','www.playrummymobile.com', '1', 'text', 'Email address alias for all the PR alerts emails');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'pprummywebsitelink', 'www.playrummymobile.com', 1, 'text', 'Play Rummy Website Url')
    
		</sql>
	</changeSet>
      <changeSet id="jwr-db-Add-PPRUMMY-gusup-url-in-cfg" author="Pushpender">
    	<comment>Add Play RUMMY sms url values</comment>
    	<sql>
    		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('sms','sms.pprummy.url','http://103.250.30.4/SendSMS/sendmsg.php?send=PPRUMMY','1','text', 'Add pprummy gupsup service for sending SMS');
       	
    	</sql>
    </changeSet>
	
	<changeSet id="jwr-db-marketing-promotions-table" author="Ashutosh">
	 	<comment>Master table for all marketing campaigns</comment>
	 	<sql>
	 		CREATE TABLE [dbo].[MarketingCampaigns] (
			    [id] BIGINT IDENTITY(1, 1),
			    [name] VARCHAR(255) NOT NULL,
			    [owner] VARCHAR(50) NOT NULL,
			    [memo] VARCHAR(255) NOT NULL,
			    [isActive] BIT NOT NULL DEFAULT 0,
			    [createdAt] DATETIME NOT NULL DEFAULT GETDATE(),
			    [updatedAt] DATETIME,
			    CONSTRAINT PK_MarketingCampaigns PRIMARY KEY (id)
			);

			CREATE NONCLUSTERED INDEX [IX_MarketingCampaigns_createdAt]
				ON [dbo].[MarketingCampaigns] ([createdAt] DESC);
	 	</sql>
	 </changeSet>

	<changeSet id="jwr-db-profile-spec" author="Deepak">
    	<comment>Adding Config to set db based max length for profile</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'name.max.length', '50', 1, 'number:1:1000:1', 'db max length of profile')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'address.max.length', '50', 1, 'number:1:1000:1', 'db max length of profile')
		</sql>	
	</changeSet>
   <changeSet id="jwr-db-Naptive-app-roll-out-strategy" author="Pushpender">
     	<comment>Config to set Native App roll-out strategy</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-app-roll-out', 'nativeCurrentVersion', '1.22.20', 1, 'text', 'Current version of APK')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-app-roll-out', 'nativeLatestVersion', '1.22.20', 1, 'text', 'Latest version of APK')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-app-roll-out', 'nativeMinVersion', '1.22.16', 1, 'text', 'Minimum version of APK')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-app-roll-out', 'nativeUpdateUrl', 'https://m.jungleerummy.com/downloads/apk/', 1, 'text', 'URL of the download URL')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-app-roll-out', 'nativeForceUpdate', '1.22.17', 1, 'text', 'Enter app versions which need force update')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-app-roll-out', 'native.newrollout.distribution', '100', 1, 'number:0:100:1', 'Percentage of new users, to recieve new app download.')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-app-roll-out', 'native.updaterollout.distribution', '100', 1, 'number:0:100:1', 'Percentage of app users, to recieve this update')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-app-roll-out', 'nativeUpdatePopup.header', 'Upgrade App', 1, 'text', 'Header text of the update pop-up')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-app-roll-out', 'native.updatePopup.message', 'A better, faster version of the native app (NEW_APK_VER) is available NOW.', 1, 'text', 'Description text of the update pop-up')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-app-roll-out', 'native.updatePopup.cta', 'UPDATE NOW', 1, 'text', 'CTA for the update pop-up')
			
     	</sql>
     </changeSet>
	
	<changeSet id="jwr-admin-v2-url" author="Parv">
        <comment>Admin v2 Base Url</comment>
        <sql>
            INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils','admin.v2.url','http://localhost:3000','1','text', 'Admin v2 external url');
        </sql>
	</changeSet>
	 <changeSet id="moveInPlayFromCurrentGameToNextGame" author="Mayank" runOnChange="true">
	 	<comment>InPlay movement for waiting players to the new table </comment>
        <sqlFile path="storedprocedures/moveInPlayFromCurrentGameToNextGame.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>
	<changeSet id="jwr-db-add-hzwebview-in-tournament-tabs" author="Khushal">
    	<comment>Add hzwebview in all non editable tabs</comment>
		<sql>
			update TOURNAMENTSTABS set applicationFor = applicationFor + ',hzwebview' where isEditable = 0
		</sql>	
	</changeSet>
	
	<changeSet id="jwr-db-deposit-amount-tiles-config" author="Ashutosh">
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposit-amount-tiles', 'multiplicand', 'LastDepositAmount', 0, 'text', 'Amount multiplicand')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposit-amount-tiles', 'defaultthreshold', '100', 0, 'number:1:10', 'Threshold value to show default tiles')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'default.tile1', '100', 0, 'number:1:10', 'VIP1 tile1 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'default.tile2', '200', 0, 'number:1:10', 'VIP1 tile2 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'default.tile3', '300', 0, 'number:1:10', 'VIP1 tile3 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'default.tile4', '400', 0, 'number:1:10', 'VIP1 tile4 multiplier value');
    		        INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES     ('deposit-amount-tiles', 'abtestmod', '0', 0, 'number:0:100', 'Mod value for AB test')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'nonvip.tile1', '1.25', 0, 'number:0:10', 'NONVIP tile1 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'nonvip.tile2', '2.0', 0, 'number:0:10', 'NONVIP tile2 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'nonvip.tile3', '2.5', 0, 'number:0:10', 'NONVIP tile3 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'nonvip.tile4', '3.5', 0, 'number:0:10', 'NONVIP tile4 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip1.tile1', '1.25', 0, 'number:0:10', 'VIP1 tile1 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip1.tile2', '2.0', 0, 'number:0:10', 'VIP1 tile2 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip1.tile3', '2.5', 0, 'number:0:10', 'VIP1 tile3 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip1.tile4', '3.5', 0, 'number:0:10', 'VIP1 tile4 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip2.tile1', '1.25', 0, 'number:0:10', 'VIP2 tile1 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip2.tile2', '2.0', 0, 'number:0:10', 'VIP2 tile2 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip2.tile3', '2.5', 0, 'number:0:10', 'VIP2 tile3 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip2.tile4', '3.5', 0, 'number:0:10', 'VIP2 tile4 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip3.tile1', '1.25', 0, 'number:0:10', 'VIP3 tile1 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip3.tile2', '2.0', 0, 'number:0:10', 'VIP3 tile2 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip3.tile3', '2.5', 0, 'number:0:10', 'VIP3 tile3 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip3.tile4', '3.5', 0, 'number:0:10', 'VIP3 tile4 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip4.tile1', '1.25', 0, 'number:0:10', 'VIP4 tile1 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip4.tile2', '2.0', 0, 'number:0:10', 'VIP4 tile2 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip4.tile3', '2.5', 0, 'number:0:10', 'VIP4 tile3 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip4.tile4', '3.5', 0, 'number:0:10', 'VIP4 tile4 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip5.tile1', '1.25', 0, 'number:0:10', 'VIP5 tile1 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip5.tile2', '2.0', 0, 'number:0:10', 'VIP5 tile2 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip5.tile3', '2.5', 0, 'number:0:10', 'VIP5 tile3 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip5.tile4', '3.5', 0, 'number:0:10', 'VIP5 tile4 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip6.tile1', '1.25', 0, 'number:0:10', 'VIP6 tile1 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip6.tile2', '2.0', 0, 'number:0:10', 'VIP6 tile2 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip6.tile3', '2.5', 0, 'number:0:10', 'VIP6 tile3 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'vip6.tile4', '3.5', 0, 'number:0:10', 'VIP6 tile4 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'newbie.tile1', '1.25', 0, 'number:0:10', 'NEWBIE tile1 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'newbie.tile2', '2.0', 0, 'number:0:10', 'NEWBIE tile2 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'newbie.tile3', '2.5', 0, 'number:0:10', 'NEWBIE tile3 multiplier value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-tiles', 'newbie.tile4', '3.5', 0, 'number:0:10', 'NEWBIE tile4 multiplier value');
    	</sql>
    </changeSet>
	<changeSet id="jwr-db-add-language-preferrence" author="Rohan">
    	<comment>Altering table to add preferred language for each user</comment>
		<sql>
			ALTER TABLE Users ADD language varchar(50);
		</sql>	
	</changeSet>


	<changeSet id="jwr-db-es-config-for-kyc-service" author="Deepak">
    	<comment>ES Config for new services</comment>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.new.host" />
			<column name="value" value="http://kube-es.jungleerummyuat.com" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="new es instance for new micro services" />
		</insert>
		<insert tableName="cfg">
			<column name="id" value="kyc" />
			<column name="key" value="elasticsearch.kyc.index" />
			<column name="value" value="kyc_users" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="new es index for kyc users details page" />
		</insert>
	</changeSet>
	<changeSet id="jwr-kyc-svc-es-index-size" author="Deepak">
    	<comment>Add es index page size</comment>
		<insert tableName="cfg">
			<column name="id" value="kyc" />
			<column name="key" value="elasticsearch.kyc.index_size" />
			<column name="value" value="10000" />
			<column name="editable" value="1" />
			<column name="type" value="number" />
			<column name="description" value="page size of index result that can be queried by admin" />
		</insert>
	</changeSet>
	 <changeSet id="jwr-db-new-dms-service-config" author="Niraj">
    	<comment>New DMS Service Configs</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kyc', 'dms.upload.url', '', 1, 'text', 'DMS Service Document Upload URL');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kyc', 'kyc.direct.url', '', 1, 'text', 'Kyc Direct Url');
		</sql>
	 </changeSet>

	 <changeSet id="jwr-dms-els-index" author="Deepak">
    	<comment> DMS ELS index</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kyc', 'elasticsearch.dms.index', 'dms_users', 1, 'text', 'DMS ELS index name');
		</sql>
	 </changeSet>
	
	<changeSet id="jwr-kyc-history-els-index" author="Deepak">
    	<comment> DMS ELS index</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kyc', 'elasticsearch.kyc-history.index', 'kyc_history_users', 1, 'text', 'kyc history ELS index name');
		</sql>
	 </changeSet>
	<changeSet id="jwr-elasticsearch-timeout" author="Deepak">
    	<comment>Add es index page size</comment>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.new.index.timeout" />
			<column name="value" value="30" />
			<column name="editable" value="1" />
			<column name="type" value="number:1:600:1" />
			<column name="description" value="timeout index result that can be queried by admin" />
		</insert>
	</changeSet>
	<changeSet id="jwr-db-Add-Native-Register-BannerLocation-entries-in-cfg" author="Pushpender">
    	<comment>Native Register Landscape banner</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.register.native.landscape', '/version4/promotion_', 1, 'text', 'Native Register Landscape banner')
    	</sql>
    </changeSet>
	<changeSet id="jwr-add-App-type-column-in-bannerconfiguration" author="Pushpender">
		<comment>added App type column</comment>
		<sql>
				ALTER TABLE BannerConfiguration ADD appType  varchar(50) NOT NULL default 'CashApp';
		</sql>
	</changeSet>
	<changeSet id="jwr-db-Add-Lobby-Bar-pprummy-entries-in-cfg" author="Pushpender">
    	<comment>Native Lobby Bar PPrummy banner</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.lobbyFolder.pprummy', '/native_lobby_pprummy_1000x60/', 1, 'text', 'Native Lobby Bar PPrummy banner')
    	</sql>
    </changeSet>
	<changeSet id="jwr-db-add-practice-game-winner-popup-cfg" author="Chirag">
		<comment></comment>
	    <sql>
	    	INSERT INTO cfg VALUES ('practiceGameWinnerPopup', 'practiceGameWinnerPopup.enabled', 'false', '0', 'bool', 'If true then only some players will have this feature available (whose id%mod >= threshold)');
			INSERT INTO cfg VALUES ('practiceGameWinnerPopup', 'practiceGameWinnerPopup.mod', '128', '0', 'number:2:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO cfg VALUES ('practiceGameWinnerPopup', 'practiceGameWinnerPopup.threshold', '64', '0', 'number:0:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO cfg VALUES ('practiceGameWinnerPopup', 'practiceGameWinnerPopup.registration.datetime', '0', '0', 'datetime', 'Only players that registered after specified datetime will have the feature enabled');
	    </sql>
    </changeSet>
    
    <changeSet id="jwr-db-practice-game-winner-entrypoint" author="Chirag">
		<comment>Practice Game Winner entry point</comment>
		<sql>
			INSERT INTO entrypoints (Status, Value) VALUES ('GAME_TABLE_PRACTICE_GAME_WINNER', 12);
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-rummy-rumble" author="Khushal">
    	<comment>rummy rumble db changes</comment>
		<sql>
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('RUMBLE_ADDITIONAL_RAKE', 167);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('RUMBLE_PRIZE', 168);
			
			insert into RevenueSourceType (txnName,ttype)VALUES('RUMMY_RUMBLE',10);
			
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rumble-publisher', 'enable', 'false', 1, 'bool', 'Enable/Disable publisher')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rumble-publisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rumble-publisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rumble-publisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')

			
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rumble-leaderboard', 'rumble.api.additional.rake', '', 1, 'text', 'rumbleapi base url')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rumble-leaderboard', 'api.timeout', '5000', 1, 'number:1:50000:1', 'rumble api timeout in millisecond')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rumble-leaderboard', 'enabled', 'true', 1, 'bool', 'Enable/Disable rumble additional rake call')
			

		</sql>	
	</changeSet>

	<changeSet id="jwr-change-username-rumble" author="Khushal">
    	<comment>change username api</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rumble-leaderboard', 'rumble.api.username.change', '', 1, 'text', 'rumble change username url')
		</sql>
	</changeSet>

  	<changeSet id="jwr-db-rumbleRevenueTransactions" author="Khushal">
    	<comment>RumbleRevenueTransactions table</comment>
		<sql>

			IF OBJECT_ID('JWRTransactions.dbo.RumbleRevenueTransactions') IS  NULL
			BEGIN
			   	Create table JwrTransactions.dbo.RumbleRevenueTransactions(
							id bigint PRIMARY KEY IDENTITY(1,1),
							revenueTxnId  bigint not null,
							userId bigint not null,
							gameId bigint not null,
							lbId int not null,
							createdAt datetime default getdate()
				) 
				create NONCLUSTERED INDEX IDX_RumbleRevenueTransactions_userId ON JwrTransactions.dbo.RumbleRevenueTransactions (userId) INCLUDE (id, revenueTxnId, gameId, lbId, createdAt)

			End

		</sql>	
	</changeSet>

	 <changeSet id="jwr-segments-url" author="Pushpender">
    	<comment>segment URL</comment>
    	<sql>
   		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('segmentConfig', 'jwr.segment.url', '', 1, 'text', 'jwr segment url');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('segmentConfig', 'post.segment.url', '', 1, 'text', 'Post segment url');
	
		</sql>
	 </changeSet>
	
	 <changeSet id="create-ticket-segment-table" author="Pushpender">
    	<comment>Create table TicketSegment</comment>
    	<sql>
    			Create table TicketSegment(
    				ticketId [Int] NOT NULL PRIMARY KEY,
    				segment varchar(MAX),
    				version [Int],
    				paRequestId varchar(50),
    				createDate [dateTime] not null default getdate(),
    				updateDate [dateTime] null
    			);
    			CREATE NONCLUSTERED INDEX [IX_TicketSegment_paRequestId]
				ON [dbo].[TicketSegment] ([createDate] DESC);
		</sql>
	 </changeSet>
	<changeSet id="jwr-db-optsms-cfg" author="Parv">
     	<comment> OTP Message Via Gupshup Priority Account </comment>
     	<sql>
     	    INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('sms','sms.otp.url','https://web.jungleerummyqa.com/sms/bulk/generic','1','text', 'URL for sending OTP SMS');
     	    INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('sms','sms.otp.username','','1','text', 'Username for OTP SMS account');
     	    INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('sms','sms.otp.password','','1','text', 'Password for OTP SMS account');
     	</sql>
     </changeSet>
	<changeSet id="jwr-add-truecaller-key-url" author="Pushpender">
		<comment>Add truecaller Key and Url</comment>
	    <sql>
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils','truecaller.tcKeyURL','URL', '1', 'text', 'add truecaller key URL');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'truecaller.tcKeyValue', 'value', 1, 'text', 'add truecaller key Value')
        </sql>
    </changeSet>
	<changeSet id="jwr-db-new-pg-service-url" author="Niraj">
    	<comment>Add PG Service URL</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'new.pgservice.url', 'http://pg.uat.jungleerummyuat.com/v1/pg', 1, 'text', 'new payment gateway service url');
		</sql>
	 </changeSet>
	<changeSet id="jwr-db-new-kyc-service-url" author="Niraj">
    	<comment>Add KYC Service URL</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'new.kycservice.url', 'http://kyc.qa-1.jungleerummyqa.com/v1/kyc', 1, 'text', 'new KYC service url');
		</sql>
	 </changeSet>
    <changeSet id="jwr-add-ticket-award-subscriber-config" author="Pushpender">
		<comment>Add ticket award subscriber subscriber config</comment>
	    <sql>
	
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ticketawardsubscriber','pubsub.model','kafka', '1', 'text', 'add ticketawardsubscriber model name');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ticketawardsubscriber','pubsub.namespace','', '1', 'text', 'add ticketawardsubscriber namespace');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ticketawardsubscriber','pubsub.topic','', '1', 'text', 'add ticketawardsubscriber topic');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ticketawardsubscriber','pubsub.partitions.count','2', '1', 'text', 'add ticketawardsubscriber partition count');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ticketawardsubscriber','pubsub.subscriber.consumergroup','', '1', 'text', 'add consumergroup');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ticketawardsubscriber','pubsub.subscriber.commitinterval','1', '1', 'text', 'add commitIntervale');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ticketawardsubscriber','enablesubscription','false', '1', 'bool', 'enable subscription');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ticketawardsubscriber','pubsub.subscriber.consumercount','8', '1', 'text', 'add counsumer count');
	
	    </sql>
	</changeSet>
	<changeSet id="jwr-add-elasticsearch-token" author="Deepak">
		<comment>Add new token for new elasticsearch</comment>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.new.host.token" />
			<column name="value" value="" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="Auth token to make REST calls to elastic search" />
		</insert>
    </changeSet>
    
    <changeSet id="jwr-db-branch-pubsub-cfg-pprummy" author="Akshat">
    	<comment>Setting branchevents pubsub config for PPRummy</comment>
    	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'branchkey-pprummy', '', 1, 'text', 'branch key for pprummy')
    	</sql>
    </changeSet>
  <changeSet id="jwr-sng-vip-cfg" author="Mirek">
		<sql>
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('spin-and-go', 'enabled.vip', '-1', '1', 'vip', 'Feature will be available only to users from given VIP levels');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('spin-and-go', 'abtest.vip', '-1', '1', 'vip', 'AB test will be available only for users of specific VIP levels');
		</sql>
	</changeSet>
  <changeSet id="jwr-sng-best-declare-config" author="Mirek">
		<comment>Configs for best declare</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('bestDeclare', 'bestDeclare.gameType.sng.13c.bool', 'true', 0, 'bool', 'Set Best Declare enabled for 13c deal variant');
		</sql>
  </changeSet>
  <changeSet id="jwr-new-withdrawal-service-config" author="Niraj">
		<comment>Withdrawal Redirection Config for new service</comment>
		<sql>
 		 INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'enable.new.withdrawal.service', '2', 1, 'number:-1:1000:10', 'RAG control flags , Negative or zero to disable all user all other value to enable percentage of user')
		</sql>
  </changeSet>
  <changeSet id="jwr-db-pool61-default-entry-fees" author="Pushpender">
    	<sql>
    		ALTER TABLE [dbo].[DefaultEntryFees] ADD POOL61 varchar(10) not null DEFAULT '0';
    		UPDATE [dbo].[DefaultEntryFees] SET POOL61 = POOL101;
    	</sql>
    </changeSet>
    <changeSet id="jwr-pool61-abtest-cfg" author="Pushpender">
		<sql>
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pool61', 'abtest.enabled', 'false', 1, 'bool', 'If true then only some players will have this feature available (whose id%mod > )');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pool61', 'abtest.mod', '128', '1', 'number:2:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pool61', 'abtest.threshold', '64', '1', 'number:0:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('pool61', 'min.registration.datetime', '1633967894000', '1', 'datetime', 'Only players that registered after specified datetime will have the feature enabled');
			
		</sql>
    </changeSet>
  <changeSet id="jwr-db-tournament-batchhssize-cfg-delete" author="Udbhav">
     	<comment>Deleting tournament withdrawal event batchsize config</comment>
     	<sql>
     	    DELETE FROM  [dbo].[cfg] where [id] = 'withdrawals' and [key] = 'tournamentEventBatchSize'
	     </sql>
  </changeSet>
  <changeSet id="jwr-aws-app-static-bucketname" author="Pushpender">
    	<comment>App Static bucket Config</comment>
    	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('app-static', 'app-static.bucket-name', 'app-static-nonprod', 1, 'text', 'App Static bucket Config')
    	</sql>
    </changeSet>
	<changeSet id="add-RAF-segment-for-depositamountconfiguration" author="Mayank">
		<comment>Add RAF source in deposit amount configuration</comment>
		<sql>
			INSERT INTO DepositAmountConfiguration ( [userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag] , [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 5000, 1, '', '', 0, 0, 0 , 'RAF' , 'NONE')
			INSERT INTO DepositAmountConfiguration ( [userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag] , [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 2000, 1, '', '', 0, 0, 1 , 'RAF' , 'NONE')
			INSERT INTO DepositAmountConfiguration ( [userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag] , [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 500, 1, '', '', 0, 0, 0 ,'RAF' , 'NONE')
			INSERT INTO DepositAmountConfiguration ( [userSegment], [socialNetwork], [amount], [bonusCodeOption], [bonusCode], [bonusCodeAmount], [instantCashbackOption], [instantCashbackAmount], [mostPopularTag] , [source] ,[abtestpath]) VALUES ('FIRSTDEPOSITORS', 'JUNGLEERUMMY', 100, 1, '', '', 0, 0, 0 ,'RAF' , 'NONE')
		</sql>
     </changeSet>

	 <changeSet id="jwr-tiles-deposit-amount-configuration" author="Gourav">
    	<comment>Add abtest flow for first depositors</comment>
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposit-amount-configuration', 'first-depositor-ab-test-activated', '', 0, 'text', 'Is first depositor AB test activated')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposit-amount-configuration', 'deposit-amount-file.url', '', 0, 'text', 'Fileurl for deposit amount configuration')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposit-amount-configuration', 'deposit-amount-aws-bucket-name', '', 1, 'text', 'Bucket Name for deposit amount configuration')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposit-amount-configuration', 'deposit-amount-url-expiry-time-mins', '', 1, 'text', 'Signed url expiry time in mins')
		</sql>
     </changeSet>

	<changeSet id="jwr-tiles-deposit-amount-configuration-new-columns" author="Gourav">
    	<comment>add new columns in depositamountconfiguration</comment>
    	<sql>
			ALTER TABLE DepositAmountConfiguration
			ADD priority int NOT NULL DEFAULT(0);
			ALTER TABLE DepositAmountConfiguration
			ADD isActivated bit NOT NULL DEFAULT(1);
			update DepositAmountConfiguration set priority = ((id - 1) % 4) + 1
    	</sql>
    </changeSet>
	<changeSet id="jwr-tiles-deposit-amount-configuration-new-column-stateID" author="Gourav">
    	<comment>add stateID column in depositamountconfiguration</comment>
    	<sql>
			insert into states (name, GSTCode) values ('DEFAULT', null)
			ALTER TABLE DepositAmountConfiguration
            ADD stateID int NOT NULL DEFAULT(41);
    	</sql>
	</changeSet>
	
	<changeSet id="jwr-admin-client-Secret-config" author="Akshat">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('adminaccount', 'sso.clientId', '', 1, 'text', 'Admin SSO Google Client ID')
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('adminaccount', 'sso.clientSecret', '', 1, 'text', 'Admin SSO Google Client Secret')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('adminaccount', 'sso.redirectUrl', '', 1, 'text', 'Admin SSO Redirection Url')
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('adminaccount', 'usernamepassword.enabled', 'true', 1, 'bool', 'Enable/Disable Old login method')
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('adminaccount', 'default.permissiongroup', '-1', 1, 'number:-1:10000:1', 'Default Permission Group')
		</sql>
	</changeSet>
	
    <changeSet id="jwr-admin-sso-update" author="Akshat">
    	<comment>Update column for sso</comment>
    	<sql>
    		ALTER TABLE admin_users ALTER COLUMN password char(70) null;
			ALTER TABLE admin_users ALTER COLUMN username varchar(50);
			ALTER TABLE admin_activity_logs ALTER COLUMN username varchar(50);
		</sql>
    </changeSet>

    <changeSet id="jwr-add-user-winning-variant" author="Pushpender">
    	<comment>Add columnn Pool61 in UsersWinningByGamevariant </comment>
    	<sql>
    		Alter table UsersWinningByGamevariant add Pool61 MONEY;
		</sql>
    </changeSet>
     
     <changeSet id="jwr-db-registration-drmid-log-flag" author="Akshat">
    	<comment>Registration Logging Flag</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'registrationLogging', 'true', 1, 'bool', 'Registration Logging toggle feature')
    	</sql>
    </changeSet>
    
   	<changeSet id="jwr-login-drmid-log-flag" author="Akshat">
		<comment>Login Logging Flag</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('login', 'loginLogging', 'true', 1, 'bool', 'Login Logging toggle feature')
		</sql>
	</changeSet>
	
     <changeSet id="jwr-native-portarait banner-in-cfg" author="Pushpender">
    	<comment>Native add portrait login/register banner</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.register.native.portrait', '/native_portrait_register_400x190/', 1, 'text', 'Native add portrait register banner');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('BannerConfiguration', 'banner.login.native.portrait', '/native_portrait_login_400x190/', 1, 'text', 'Native add portrait login banner');
    	
    	</sql>
    </changeSet>
    
     <changeSet id="jwr-rich-abtest-configs" author="Pushpender">
	  	   <comment>Rich AB test configuration</comment>
	  	   <sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-table-config', 'enable.abrich.gametable', 'false', 1, 'bool', 'to enable/disable Ab rich Gamtable')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-table-config', 'rollout.rich.gametable', 'false', 1, 'bool', 'to enable/disable  Rollout rich Gamtable')
		</sql>
	</changeSet>
     
     <changeSet id="jwr-db-howzt-jg-wallet-attribution" author="Khushal">
    	<comment>Add howat userid in userpop</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'jghowzat.attribution.by.kafka','true', '1', 'bool', 'jghowzat Attribution sync by kafka');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'jghowzat.attribution.url', '', 1, 'text', 'jghowzat Attribution Api url');
    	</sql>
	 </changeSet>
	 
	 <changeSet id="jwr-add-tournament-tile-config" author="pushpender">
    	<comment>create Tournament Tile Config table</comment>
    	<sql>
    		  Create Table TournamentTileConfig(
    			id int IDENTITY(1, 1),
    			seqNum [int] NOT NULL,
    			title VARCHAR(100) NOT NULL,
                icon  VARCHAR(200) NOT NULL,
                subtitle VARCHAR(200) NOT NULL,
               	isEnable [bit] NOT NULL,
               	PRIMARY KEY (seqNum,id)
                );
            insert into TournamentTileConfig values(1,'Points', 'Points.png','subtitle1',0);
            insert into TournamentTileConfig values(2,'Pool', 'pool.png','subtitle2',0);
    		insert into TournamentTileConfig values(3,'Deals', 'deals.png','subtitle3',0);
    		insert into TournamentTileConfig values(4,'Tournaments', 'tournament.png','subtitle4',0);
    		insert into TournamentTileConfig values(5,'Share App', 'shareApp.png','subtitle5',0);
    		insert into TournamentTileConfig values(6,'new App', 'new.png','subtitle',0);
    			
    	</sql>
	 </changeSet>
	  <changeSet id="jwr-db-clickstream config" author="pushpender">
    	<comment>Add clickstream cofig for deviceType</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'clickstream.cashapp','true', '1', 'bool', 'clickstream cofig for cashAPP');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'clickstream.psapp', 'true', 1, 'bool', 'clickstream cofig for psAPP');
    	</sql>
	 </changeSet>

	<changeSet id="jwr-utp-cleanup" author="Ashutosh" context="local">
    	<comment>Remove unused SPs/views/configs after user table cleanup</comment>
    	<sql>
				DROP PROCEDURE IF EXISTS CheckUserDob;
				DROP PROCEDURE IF EXISTS DailyWinAndLosses;
				DROP PROCEDURE IF EXISTS DailyWinAndLossesExts;
				DROP PROCEDURE IF EXISTS GetAdReferredUser;
				DROP PROCEDURE IF EXISTS GetAdReferredUserExts;
				DROP PROCEDURE IF EXISTS GetFriendInvites;
				DROP PROCEDURE IF EXISTS GetFriendInvitesExts;
				DROP PROCEDURE IF EXISTS GetInvitedUsers;
				DROP PROCEDURE IF EXISTS GetInvitedUsersExts;
				DROP PROCEDURE IF EXISTS GetLeaderboardSummary;
				DROP PROCEDURE IF EXISTS GetLoyaltyPointExpiry;
				DROP PROCEDURE IF EXISTS GetLoyaltyWeeklyCommunication;
				DROP PROCEDURE IF EXISTS GetMultipleUIDScore;
				DROP PROCEDURE IF EXISTS GetRafLeaderboardResult;
				DROP PROCEDURE IF EXISTS GetUserBirthdayBonusCode;
				DROP PROCEDURE IF EXISTS GetUserCashAndGameStats;
				DROP PROCEDURE IF EXISTS GetUserGameCountPlayingWithSingleUserFlag;
				DROP PROCEDURE IF EXISTS GetUsersGeoStatusUsingUserIdTvp;
				DROP PROCEDURE IF EXISTS GetUserTransactions;
				DROP PROCEDURE IF EXISTS GetUserWithdrawals;
				DROP PROCEDURE IF EXISTS GetUserWithdrawalsExts;
				DROP PROCEDURE IF EXISTS LoadPlayer;
				DROP PROCEDURE IF EXISTS LoadPlayerExts;
				DROP PROCEDURE IF EXISTS LoadTournamentPlayersExtsUsingTvp;
				DROP PROCEDURE IF EXISTS LoadTournamentPlayers;
				DROP PROCEDURE IF EXISTS LoadUserById;
				DROP PROCEDURE IF EXISTS LoadUserByIdFromUsers;
				DROP PROCEDURE IF EXISTS ReferAndWinLeaderBoardResult;
				DROP PROCEDURE IF EXISTS UserAgingUGExt;
				DROP PROCEDURE IF EXISTS GetLastGamePlay;
				DROP PROCEDURE IF EXISTS RunLoyaltyPointExpiry;
				DROP PROCEDURE IF EXISTS CalculateWinnersForOngoingRAFLeaderboards;
				DROP PROCEDURE IF EXISTS CacheUserPropertiesForRAFCampaign;
				DROP PROCEDURE IF EXISTS CacheUserPropertiesForRAFCampaignExts;
				DROP PROCEDURE IF EXISTS ExpireInstantBonus;
				DROP PROCEDURE IF EXISTS ProcessExtraRAFBonus;

				DROP VIEW IF EXISTS FriendReferralsView;
				DROP VIEW IF EXISTS UserAgingViewExts;
				DROP VIEW IF EXISTS UserTransactions;

				DELETE FROM cfg WHERE id = 'UserExtTablesWRConfig';
				DELETE FROM liquibase_database_changelog WHERE id = 'jwr-db-Add-User-extension-tables-cfg-read-write';
    	</sql>
	</changeSet>

	<changeSet id="jwr-utp-cleanup-drop-sp-changesets" author="Ashutosh" context="local">
    	<comment>Remove unused SPs/views changeset ids</comment>
    	<sql>
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetUser-Transactions';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetAdReferredUSer';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-DailyWinAndLosses';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetRafLeaderboardResult';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-ReferAndWinLeaderBoardResult';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetFriendInvites';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetInvitedUsers';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetUserWithdrawals';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetMultipleUIDScore';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-CheckUserDob';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-LoadTournamentPlayers';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetLeaderboardSummary';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetUserGameCountPlayingWithSingleUserFlag';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-expire-user-loyalty-points';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetUserBirthdayBonusCode';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetLoyaltyPointExpiry';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetLoyaltyWeeklyCommunication';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-ExpireInstantBonus';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-CacheUserPropertiesForRAFCampaign';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-LoadUserById';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetAdReferredUSer-Exts';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetFriendInvites-Exts';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetInvitedUsers-Exts';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-LoadUserByIdFromUsers';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetUserWithdrawals-Exts';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-CacheUserPropertiesForRAFCampaign-Exts';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-CalculateWinnersForOngoingRAFLeaderboards-Exts';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-UserAging-UGExt';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-loadPlayer';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-LoadPlayerExts';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-LoadTournamentPlayersExtsUsingTvp';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetUsersGeoStatusUsingUserIdTvp';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-GetUserCashAndGameStats';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-get-user-lastgameplay-time';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-CalculateWinnersForOngoingRAFLeaderboards';
				DELETE FROM liquibase_database_changelog WHERE ID = 'sp-ProcessExtraRAFBonus.sql';
				DELETE FROM liquibase_database_changelog WHERE ID = 'create-view-FriendReferralsView';
				DELETE FROM liquibase_database_changelog WHERE ID = 'UserAgingViewExts';
				DELETE FROM liquibase_database_changelog WHERE ID = 'UserTransactions';
    	</sql>
	</changeSet>


	<changeSet id="jwr-db-admin-user-new-limits" author="Mayank">
    	<comment>Add admin_users_limit tables to make L1, L2 and L3 relation and approval flow</comment>
    	<sql>
			CREATE TABLE [dbo].[admin_users_limit](
				[id] [int] IDENTITY(1,1) NOT NULL,
				[userId] [INT] NOT NULL,
			    [level] [TINYINT] NOT NULL,
				[approverUserId] [INT] NOT NULL,
				[maxDailyLimit] [MONEY] NOT NULL,
				[maxMonthlyLimit] [MONEY] NOT NULL,
				[createdAt] [datetime] NOT NULL,
				[lastUpdatedAt] [datetime] NOT NULL,
				[limitForModule] [varchar](255) NOT NULL
			)
			ALTER TABLE [dbo].[admin_users_limit] ADD PRIMARY KEY CLUSTERED
			(
				[id] ASC
			)
			ALTER TABLE [dbo].[admin_users_limit] ADD UNIQUE NONCLUSTERED
			(
				[userId] ASC,
				[limitForModule] ASC
			)

			CREATE TABLE [dbo].[admin_user_transactions](
				[id] [int] IDENTITY(1,1) NOT NULL,
			    [AdminUserId] [int] NOT NULL,
			    [TransactionTimeStamp] [datetime] NOT NULL,
			    [Amount] [money] NOT NULL,
			    [Module] [varchar](255) NOT NULL
			)
			ALTER TABLE [dbo].[admin_user_transactions] ADD PRIMARY KEY CLUSTERED
			(
				[id] ASC
			)
			ALTER TABLE [dbo].[admin_user_transactions] ADD UNIQUE NONCLUSTERED
			(
				[AdminUserId] ASC,
				[TransactionTimeStamp] ASC
			)

			CREATE TABLE [dbo].[admin_approval_requests](
				[id] [int] IDENTITY(1,1) NOT NULL,
			    [AdminId] [int] NOT NULL,
			    [ApproverId] [int] NULL,
			    [InitiatedDate] [datetime] NOT NULL,
			    [ActionDate] [datetime] NULL,
			    [State] [varchar](255) NOT NULL,
			    [Module] [varchar](255) NOT NULL,
			    [Details] [nvarchar](max) NULL
			)
			ALTER TABLE [dbo].[admin_approval_requests] ADD PRIMARY KEY CLUSTERED
			(
				[id] ASC
			)

		</sql>
	</changeSet>

      <changeSet id="jwr-add-takeUserRightConfig-isReminderPopup-column" author="Pushpender">
     	<comment>added takeUserRightConfig and isReminderPopup column</comment>
     	<sql>
     	       Alter Table UserJourney Add takeUserRightConfig bit default(0);
			   Alter Table UserJourney Add isReminderPopup bit default(0);

		</sql>
     </changeSet>
	  <changeSet id="jwr-db-create-problem-category" author="pushpender">
    	<comment>Create problem category table</comment>
    	<sql>
    		IF OBJECT_ID('ProblemCategory') IS NULL
			BEGIN
            CREATE TABLE ProblemCategory
            (
              [id] [int] IDENTITY(1,1),
              [seqNumber] [smallInt],
			  [isGameType] [bit],
	          [category]  [varchar](200) NOT NULL default 'Category',
              [subIssues] [varchar](MAX) NOT NULL default '[Sub Category]',
              PRIMARY KEY (seqNumber,id)
            )
            END 
    	</sql>
	 </changeSet>

	<changeSet id="jwr-db-reports-memo-limit" author="Ashutosh">
    	<comment>Limit loading of memos in downloaded report</comment>
    	<sql>
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('reports', 'reports.analytics.memo.limit', '1000', 1, 'number:200:20000:1', 'Limit to fetch memos for records (Range 200-20000)')
    	</sql>
    </changeSet>

	  <changeSet id="jwr-new-withdrawal-publisher-config" author="niraj">
    	<comment>Publisher config for new withdrawal services</comment>
    	<sql>
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('newwithdrawalpublisher', 'enable.withdrawalevent', 'false', 1, 'bool', 'Enable/Disable new withdrawal event publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('newwithdrawalpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('newwithdrawalpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('newwithdrawalpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('newwithdrawalpublisher', 'publisher.active.date', '2022-03-31 00:00:00', '0', 'text', 'Active date threshold for old withdrawal services (Date Format: YYYY-MM-DD hh:mm:ss)')
    	</sql>
	  </changeSet>

	 <changeSet id="jwr-db-add-switch-feature" author="pushpender">
    	<comment>Add switch feature for google dependancy</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-google-config', 'enable.cash-cta','true', '1', 'bool', 'Enable cash CTA');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-google-config', 'enable.cash-game-tile', 'true', 1, 'bool', 'Enable cash Game tile');
    		   
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-google-config', 'enable.kyc-icon','true', '1', 'bool', 'Enable kyc icon ');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-google-config', 'enable.withdrawal-icon', 'true', 1, 'bool', 'Enable withdrawal icon');
    
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-google-config', 'enable.cash-tournament','true', '1', 'bool', 'Enable cash tournament');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('native-google-config', 'enable.promotions', 'true', 1, 'bool', 'Enable Promotions');
   		</sql>
	 </changeSet>
 	 <changeSet id="jwr-clickstream retrial  config" author="pushpender">
    	<comment>Add  clickstream retrial cofig for clicksream</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'clickstream.retry.timer','15', '1', 'number:1:600:1', 'clickstream config for retry timer');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'clickstream.max.retrial.count', '5', 1, 'number:1:600:1', 'clickstream config for retrial count');
   			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'clickstream.flush.queue', 'true', 1, 'bool', 'clickstream cofig for Flush Queue if retry counter is hit');
    	</sql>
	 </changeSet>
	 
	<changeSet id="jwr-db-add-userbypromocodestype" author="Avneet">
		<comment>Add UserByPromocodes Table Type</comment>
		<sql>
	 		create type UsersByPromocodesType as table(
				promocodeId int,
				userId bigint
			)
	 	</sql>
	</changeSet>

	<changeSet id="jwr-google-complete-address-geo-api" author="Pushpender">
		<comment>complete google geolocation api </comment>
		<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'completeGeoLocationServiceUrl', 'http://qa-grs-geolocation.howzatfantasy.com/state', 1, 'text', 'Google complete geo location API')
    	</sql>
	</changeSet>
       
	 <changeSet id="jwr-db-native-cashapp-abtest-configs" author="Pushpender">
    	<comment>Add abtest flows in cash Native APP</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'cashapp.flow1', 'true', 1, 'bool', 'Enable/Disable old portrait view of cash.')
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'cashapp.flow4', 'false', 1, 'bool', 'Enable/Disable hybrid landscape of cash.')
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'cashapp.forceLoadFlow1', '', 1, 'text', 'DRMID 1 for cashapp.forceLoadFlow1')
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'cashapp.forceLoadFlow2', '', 1, 'text', 'DRMID 2 for cashapp.forceLoadFlow2')
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'cashapp.forceLoadFlow3', '', 1, 'text', 'DRMID 3 for cashapp.forceLoadFlow3')
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('nativeappflowmanager', 'cashapp.forceLoadFlow4', '', 1, 'text', 'DRMID 4 for cashapp.forceLoadFlow4')
		</sql>
     </changeSet>
	 
 	 <changeSet id="jwr-withdrawal-service-test-config" author="niraj">
    	<comment>TestConfig for new withdrawal service</comment>
    	<sql>
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawals.testing.enable', 'true', 1, 'bool', 'Enable/Disable new withdrawal services testing')
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawals.testing.users', '', 1, 'text', 'Comma Separated UserIDs for withdrawal Services Testing')
		</sql>
	 </changeSet>

 	<changeSet id="jwr-ios-app-rating-config" author="khushal">
    	<comment>jwr app rating config</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('apprating', 'ios.weekly.limit','2', '1', 'number:1:100:1', 'weekly limit');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('apprating', 'ios.monthly.limit', '5', 1, 'number:1:100:1', 'monthly limit');
   			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('apprating', 'ios.lifetime.limit', '10', 1, 'number:1:100:1', 'yearly limit');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('apprating', 'android.weekly.limit','2', '1', 'number:1:100:1', 'weekly limit');
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('apprating', 'android.monthly.limit', '5', 1, 'number:1:100:1', 'monthly limit');
   			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('apprating', 'android.lifetime.limit', '10', 1, 'number:1:100:1', 'yearly limit');
    	</sql>
	 </changeSet>
     
     <changeSet id="jwr-db-table-configurations-mm-ss" author="Mirek">
		<sql>
			ALTER TABLE [dbo].[TableConfigurations] ADD mmSkillScoreSort [tinyint] NOT NULL DEFAULT 0;
			ALTER TABLE [dbo].[TableConfigurations] ADD mmSkillScorePrecision [smallint] NOT NULL DEFAULT 0;
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-mm-skillscore-cfg" author="Mirek">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-skillscore', 'debug.logging.enabled', 'false', 1, 'bool', 'Enables detail debug logging for this feature. Do not enable on PROD');
		</sql>
	</changeSet>
	
     <changeSet id="jwr-db-user-raf-ancestors" author="Mirek">
     	<sql>
     		ALTER TABLE Users ADD rafAncestors varchar(256);
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-user-ids-type" author="Mirek">
     	<sql>
     		CREATE TYPE [dbo].[UserIds] AS TABLE(
				[userID] [int] NULL
			);
     	</sql>
     </changeSet>
     
	<changeSet id="jwr-login-signup-raf-limit" author="Khushal">
     	<comment>added login signup raf limit</comment>
     	<sql>
     	       INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'perdevice.login.signup.raf.limit', '1', 0, 'number:1:1000:1', 'Limit to allow RAF users per device');
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'perdevice.login.signup.raf.limit.enabled', 'false', 1, 'bool', 'enable/disable Limit to allow RAF users per device');
		 
		</sql>
     </changeSet>

     <changeSet id="jwr-db-mm-raf-cfg" author="Mirek">
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-raf-constraints', 'indefinite.direct.depth', '2', 1, 'number:0:20:1', 'Number of levels for direct relation (always on constraint)');
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-raf-constraints', 'indefinite.indirect.depth', '0', 1, 'number:0:20:1', 'Number of levels for indirect relation (always on constraint)');

     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-raf-constraints', 'timelimited.direct.depth', '0', 1, 'number:0:20:1', 'Number of levels for direct relation (used only when players are within time constraint)');
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-raf-constraints', 'timelimited.indirect.depth', '0', 1, 'number:0:20:1', 'Number of levels for indirect relation (used only when players are within time constraint)');
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-raf-constraints', 'regtime.days', '0', 1, 'number:0:3650:1', 'Number of days after registration when constraint should be enabled');
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-raf-constraints', 'firstdeptime.days', '0', 1, 'number:0:3650:1', 'Number of days after first deposit when constraint should be enabled');
     		
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('mm-raf-constraints', 'debug.logging.enabled', 'false', 1, 'bool', 'Enables detail debug logging for this feature. Do not enable on PROD');
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-point-tournaments" author="Mirek">
     	<sql>
     		ALTER TABLE [TournamentTemplates] ADD format [tinyint] NOT NULL DEFAULT 0;
     	
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-timer', 'gameTimerConfig.tournamentDelayStartTimeNextGames', 5000, 1, 'number:1000:30000:1000', 'Start timer for tournament games other than first in round')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournaments', 'debug.logging.enabled', 'false', 1, 'bool', 'Enables detailed logging on tournament server');
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('MTTREJOIN_RAKE', 166);
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-point-tournaments2" author="Mirek">
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-timer', 'gameTimerConfig.tournamentDelayStartTimeNextGamesReduced', 2000, 1, 'number:0:30000:1', 'Reduced Start timer for tournament games other than first in round')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-ranking', 'page.size', 100, 1, 'number:3:1000:1', 'Size of the ranking page sent to game client')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-ranking', 'refresh.interval.seconds', 1, 1, 'number:1:60:1', 'Interval between tournament ranking recalculation')
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-point-tournaments3" author="Mirek">
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-matchmaking', 'queue.delay.drop', 2000, 1, 'number:0:20000:1', 'Delay (in ms) of adding player into matchmaking queue after he dropped from table');
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-matchmaking', 'queue.delay.game-end', 5000, 1, 'number:0:20000:1', 'Delay (in ms) of adding player into matchmaking queue after game ended');
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-matchmaking', 'queue.delay.rebuy', 3000, 1, 'number:0:20000:1', 'Delay (in ms) of adding player into matchmaking queue after he used a rebuy');
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-point-tournaments4" author="Mirek">
     	<sql>
     		ALTER TABLE TournamentRounds ADD rebuysUsed int NOT NULL DEFAULT 0;
     		ALTER TABLE TournamentRounds ADD dynamicCashPool money NOT NULL DEFAULT 0;
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-point-tournaments5" author="Mirek">
     	<sql>
     		ALTER TABLE TournamentResults ADD rank int NOT NULL DEFAULT 0;
     		UPDATE TournamentResults SET rank = tournamentPosition;
     	</sql>
     </changeSet>

	<changeSet id="jwr-db-withdrawal-newservice-cfg" author="Udbhav">
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'enable.new.withdrawal.usergreaterthan', '2147483647', 1, 'number:-1:2147483647:10', 'withdrawal users  control flags , Negative or zero to disable all user all other value to enable percentage of user')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'enable.new.withdrawal.newuser.mod', '-1', 1, 'number:-1:1000:10', 'RAG control flags , Negative or zero to disable all user all other value to enable percentage of user')
     	</sql>
     </changeSet>
	<changeSet id="jwr-truecaller-config-Native" author="pushpender">
		<comment>Configs for Native truecaller enable</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'isNativePsappTrueCallerEnable', 'false', 1, 'bool', 'enable/disable truecaller login/registration.');	
		</sql>
	</changeSet>

	<changeSet id="jwr-db-userjourney-version" author="Khushal">
     	<sql>
     		ALTER TABLE UserJourney ADD version int;
     	</sql>
     </changeSet>

	<changeSet id="jwr-tournament-tile-AB-config" author="pushpender">
		<comment>Configs for Native Tournament tille AB enable</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-tile-config', 'rollout.tournament.newdesign', 'false', 1, 'bool', 'enable/disable rollout newdesign.');	
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-tile-config', 'enable.abtournament.newdesign', 'false', 1, 'bool', 'enable/disable A/B  newdesign.');	

		</sql>
	</changeSet>

	<changeSet id="jwr-db-fingerprintjs-pro-config" author="Akshat">
		<comment>Configs for Fingerprint js paid licence</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'isFingerprintProEnabled', 'false', 1, 'bool', 'enable/disable fingerprintJS Pro');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'fingerprintApiKey', '', 1, 'text', 'fingerprintJS API Key');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-missions-and-achievement-config" author="Rohit">
		<comment>Configs for showing missions and achievements in sidemenu</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'showMissionAndAchievement', 'false', 1, 'bool', 'enable/disable mission and achievements');
		</sql>
	</changeSet>

	<changeSet id="jwr-add-users-kyc-table" author="Deepak">
     	<comment>This add kyc status columns to support CalculateWinnersForOngoingRAFLeaderboardsExtsMicroSvc Leaderboards using kyc status</comment>
    	<sql>
    		IF OBJECT_ID('dbo.UserKYCStatuses') IS NULL
    		BEGIN
			CREATE TABLE [dbo].[UserKYCStatuses](
			[userId] [int] NOT NULL PRIMARY KEY,
			[addressProofStatus] [int],
			[idProofStatus] [int],
			[panProofStatus] [int],
			[timestamp] Datetime NOT NULL DEFAULT(GetDate())
			)
			END
    	</sql>
     </changeSet>
	
	<changeSet id="jwr-db-tournament-limits-cfg" author="Mirek">
     	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-limits', 'players.max', '200000', 1, 'number:1000:10000000:1', 'Max number of players that can be configured for a tournament');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-limits', 'winners.max', '50000', 1, 'number:1:10000000:1', 'Max number of winners that can be configured for a tournament');
     	</sql>
  </changeSet>

	<changeSet id="jwr-add-excludedAdKeys-column" author="pushpender">
		<comment>added excludedAdKeys column</comment>
		<sql>
			Alter table UserJourney Add excludedAdKeys [varchar](4000) NULL 
		</sql>
	</changeSet>

	<changeSet id="jwr-db-add-hzpsapp-in-tournament-tabs" author="Pushpender">
    	<comment>Add hzpsapp in all non editable tabs</comment>
		<sql>
			update TOURNAMENTSTABS set applicationFor = applicationFor + ',hzpsapp' where isEditable = 0
		</sql>	
	</changeSet>
	
	<changeSet id="jwr-db-point-tournaments6" author="Mirek">
     	<sql>
     		ALTER TABLE [TournamentTemplates] ADD lobbyProperties text;
     	</sql>
     </changeSet>
     <changeSet id="jwr-db-client-emu-cfg" author="Mirek">
     	<sql>
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('clientEmulator', 'debug.log.enabled', 'false', 1, 'bool', 'Enable/Disable extra log on clientemu');
     	</sql>
     </changeSet>
     <changeSet id="jwr-db-point-tournaments7" author="Mirek">
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tour-game-misc', 'rebuy.fail.popup.duration.sec', 5, 1, 'number:1:60:1', 'For how long rebuy-failed popup should be visible (in seconds)');
     	</sql>
     </changeSet>
     <changeSet id="jwr-db-point-tournaments8" author="Mirek">
     	<sql>
			ALTER TABLE [TournamentCostBalance] ALTER COLUMN [cashPool] money NOT NULL;
			ALTER TABLE [TournamentCostBalance] ALTER COLUMN [totalPoolValue] money NOT NULL;
			ALTER TABLE [TournamentCostBalance] ALTER COLUMN [totalEntryFees] money NOT NULL;
			ALTER TABLE [TournamentCostBalance] ALTER COLUMN [cashMovedFromChildren] money NOT NULL;
			ALTER TABLE [TournamentCostBalance] ALTER COLUMN [rake] money NOT NULL;
			ALTER TABLE [TournamentCostBalance] ALTER COLUMN [costOfUsedIssuedTickets] money NOT NULL;
			ALTER TABLE [TournamentCostBalance] ALTER COLUMN [cashMovedToParent] money NOT NULL;

			ALTER TABLE [TournamentCostBalance] ADD [rebuyCashPool] money NOT NULL DEFAULT 0;
			ALTER TABLE [TournamentCostBalance] ADD [rebuyRake] money NOT NULL DEFAULT 0;
			
			ALTER TABLE [TournamentCostBalance] ADD [updated_at] [datetime];
			
			UPDATE [TournamentCostBalance] SET [updated_at] = [created_at];
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-point-tournaments9" author="Mirek">
     	<sql>
     		INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
     		VALUES ('tournament-events-kafka-config', 'bootstrap.servers', '', 1, 'text', 'Kafka cluster to use for publishing tournament domain events');
     	</sql>
     </changeSet>

	<changeSet id="alter-SavedCardsDetails-add-TokenStatus" author="Bharat">
	 <comment>Adding column tokenStatus to SavedCardsDetails</comment>
	  <sql>
	   ALTER TABLE [dbo].[SavedCardsDetails] ADD [TokenStatus] [varchar](50) NULL; 
	   
	  </sql>
	 </changeSet>


	<changeSet id="jwr-db-rumble-admin-api" author="Khushal">
    	<comment>Add hzpsapp in all non editable tabs</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rumble-leaderboard', 'rumble.admin.api', '', 1, 'text', 'rumbleapi base url')
		</sql>	
	</changeSet>

			
	<changeSet id="jwr-withdrawal-es-config" author="Niraj">
     	<comment>added config for withdrawal elastic search interaction</comment>
     	<sql>
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.es.sql.enable', 'true', 1, 'bool', 'enable/disable withdrawal report browsing for es and sql both');
		</sql>
  	</changeSet>
	<changeSet id="jwr-questionairre-config" author="pushpender">
		<comment>Configs for Questinairre </comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('apprating', 'iOS.Redirection.to.store.count', '0', 1, 'number:0:50:1', 'IOS store count config');	
		</sql>
	</changeSet>
  	<changeSet id="jwr-poolType-abtest-cfg" author="Pushpender">
		<sql>
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('PoolTypeAB', 'abtest.enabled', 'false', 1, 'bool', 'If true then only some players will have this feature available (whose id%mod > )');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('PoolTypeAB', 'abtest.mod', '128', '1', 'number:2:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('PoolTypeAB', 'abtest.threshold', '64', '1', 'number:0:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('PoolTypeAB', 'deafaultPoolType', '101', '1', 'number:1:999:1', 'default Pool type');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('PoolTypeAB', 'PoolType', '101', '1', 'number:1:999:1', 'selected Pool type');
			
		</sql>
    </changeSet>
    <changeSet id="jwr-Table-count-AB-config" author="pushpender">
		<comment>Configs for Table count AB </comment>
		<sql>
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableCount', 'abtest.enabled', 'false', 1, 'bool', 'If true then only check mod value');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableCount', 'abtest.mod', '128', '1', 'number:2:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableCount', 'abtest.threshold', '64', '1', 'number:0:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableCount', 'tablecount', '2', '1', 'number:2:3:1', 'selected table count from server');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableCount', 'default.tablecount', '2', '1', 'number:2:3:1', 'default if any case/issue');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableCount', 'min.registration.datetime', '1620209793573', '1', 'datetime', 'Only players that registered after specified datetime will have the feature enabled');

		</sql>
	</changeSet>
	<changeSet id="jwr-db-alter-marketing-promotions-table" author="Akshat">
	 	<comment>Alter table for marketing campaigns</comment>
	 	<sql>
			ALTER TABLE [dbo].[MarketingCampaigns] ADD [dbRestrictedState] [bit] NOT NULL DEFAULT ((1));
	 	</sql>
	 </changeSet>

 	<changeSet id="jwr-custom-displayName-on-gametable-configs" author="Khushal">
	  	   <comment>Custom display name on game table</comment>
	  	   <sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-table-config', 'enable.custom.displayname', 'false', 1, 'bool', 'to enable/disable Custom displayName on game table')
		</sql>
	</changeSet>


	<changeSet id="jwr-db-kafka-login-register-bootstrap-servers-cfg" author="pushpender">
         <comment>kafka login register msg bootstrap-servers config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('login-register-auth-config', 'bootstrap.servers', '', 1, 'text', 'Bootstrap servers IP')
         </sql>
     </changeSet>

	 <changeSet id="jwr-db-point-tournaments10" author="Mirek">
     	<sql>
     		INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
     		VALUES ('tournament', 'lobby.pointstournaments.visibility.restricted', 'true', 1, 'bool', 'If enabled then Point Tournaments will be sent only to clients that explicitly request it');
     	</sql>
     </changeSet>
     
	 <changeSet id="jwr-otp-log-cfg" author="Mirek">
    	<sql>
   			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kyc', 'otp.log.to.console', 'false', 1, 'bool', 'If set to true then generated OTP will be logged in server console log');
    	</sql>
	 </changeSet>

  <changeSet id="jwr-add-alternate-state-spell-mapping" author="Jaymin">
	  	<comment>create alternate state spellings table</comment>
	  	<sql>
			Create Table StateSpellMapping(
				ID int IDENTITY(1,1) PRIMARY KEY,
				StateName VARCHAR(100) NOT NULL,
				State VARCHAR(100) NOT NULL
			);

			insert into StateSpellMapping values('Andaman and Nicobar Islands', 'Andaman &amp; Nicobar');
			insert into StateSpellMapping values('Chattisgarh', 'Chhatisgarh');
			insert into StateSpellMapping values('Chhattisgarh', 'Chhatisgarh');
			insert into StateSpellMapping values('Daman and Diu', 'Daman &amp; Diu');
			insert into StateSpellMapping values('National Capital Territory', 'New Delhi');
			insert into StateSpellMapping values('NCT', 'New Delhi');
			insert into StateSpellMapping values('National Capital Territory Of Delhi', 'New Delhi');
			insert into StateSpellMapping values('Delhi', 'New Delhi');
			insert into StateSpellMapping values('Gujrat', 'Gujarat');
			insert into StateSpellMapping values('Jammu and Kashmir', 'Jammu &amp; Kashmir');
			insert into StateSpellMapping values('Odisha', 'Orissa');
			insert into StateSpellMapping values('Puducherry', 'Pondicherry');
			insert into StateSpellMapping values('Utarakhand','Uttarakhand');
	  	</sql>
	</changeSet>
	    
	 <changeSet id="jwr-db-point-tournaments11" author="Mirek">
     	<sql>
     		ALTER TABLE TournamentRounds ADD dynamicRake money NOT NULL DEFAULT 0;
     	</sql>
     </changeSet>
     
     <changeSet id="jwr-db-point-tournaments12" author="Mirek">
     	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-admin', 'pointsformat.newflag.enabled', 'true', 1, 'bool', 'If enabled then all new point format tournaments will have "new flag" enabled by default');
     	</sql>
  	</changeSet>
  	
 	<changeSet id="jwr-alter-utmparams-table-datatype" author="Pushpender">
		<comment>Alter utm_term column to nvarchar</comment>
    	<sql>
			ALTER TABLE UtmParams ALTER COLUMN utm_term nvarchar(500);
   		</sql>
	 </changeSet>
	<changeSet id="jwr-db-Add-gatewayUrl-in-cfg" author="Pushpender">
    	<comment>Add gateway url in config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'gateway.url', '', 1, 'text', 'Gateway Url')
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-deposit-tiles-bonus-selection" author="Udbhav">
    	<sql>
   			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposittilesbonusselection', 'NEWBIE', '0;0;0', 0, 'text', 'PATH;MOD;TILESCOMMASEPARATED');
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposittilesbonusselection', 'NON VIP', '0;0;0', 0, 'text', 'PATH;MOD;TILESCOMMASEPARATED');
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposittilesbonusselection', 'VIP 1', '0;0;0', 0, 'text', 'PATH;MOD;TILESCOMMASEPARATED');
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposittilesbonusselection', 'VIP 2', '0;0;0', 0, 'text', 'PATH;MOD;TILESCOMMASEPARATED');
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposittilesbonusselection', 'VIP 3', '0;0;0', 0, 'text', 'PATH;MOD;TILESCOMMASEPARATED');
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposittilesbonusselection', 'VIP 4', '0;0;0', 0, 'text', 'PATH;MOD;TILESCOMMASEPARATED');
               INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposittilesbonusselection', 'VIP 5', '0;0;0', 0, 'text', 'PATH;MOD;TILESCOMMASEPARATED');
			   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('deposittilesbonusselection', 'VIP 6', '0;0;0', 0, 'text', 'PATH;MOD;TILESCOMMASEPARATED');
    	</sql>
	 </changeSet>
	 <changeSet id="jwr-gdb-muid-cfg-browserFingerPrint" author="Bharat">
     <comment>add muid drm id</comment>
	     <sql>
	       INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'multiplier.isActive.browserFingerPrint', 'true', 1, 'bool', 'is muid multiplier active for matching browserFingerPrint')
	  	   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('muid', 'score.browserFingerPrint', '10', 1, 'text', 'match score for browserFingerPrint')

	  	</sql>
  	</changeSet>
	<changeSet id="Adding bonus cofiglimits" author="Mayank">
		<comment>Inserting values for Bonus config limits</comment>
		<sql>
		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('bonusconfiglimits', 'bonusconfiglimits.userspecific.userid.max.count', '100', 1, 'number:0:10000000:1', 'Max number of userids that can be configured for userspecific PromoCodes')
		</sql>
	</changeSet>
		<changeSet id="jwr-cfg-currency-lock-aws" author="Mirek">
		<sql>
			INSERT INTO cfg VALUES ('aws-currency-lock', 'aws-currency-lock.bucket-name', '', '1', 'text', 'AWS S3 bucket name for storing currency-lock documents');
			INSERT INTO cfg VALUES ('aws-currency-lock', 'aws-currency-lock.access-key', '', '1', 'text', 'access key with read/write access to AWS S3 bucket for currency-lock documents');
			INSERT INTO cfg VALUES ('aws-currency-lock', 'aws-currency-lock.secret-key', '', '1', 'text', 'secret key with read/write access to AWS S3 bucket for currency-lock documents');
			INSERT INTO cfg VALUES ('aws-currency-lock', 'aws-currency-lock.threadpoolsize', '2', '1', 'number:1:20', 'Size of the threadpool used to upload currency-lock documents to AWS S3 bucket');
			INSERT INTO cfg VALUES ('aws-currency-lock', 'aws-currency-lock.url', '', '1', 'text', 'AWS S3 bucket name for storing currency-lock documents');
			INSERT INTO cfg VALUES ('aws-currency-lock', 'aws-currency-lock.url-expiry-time-in-mins', '2', '1', 'number:1:100', 'Expiry time upload currency-lock documents to AWS S3 bucket');
			INSERT INTO cfg VALUES ('aws-currency-lock', 'aws-currency-lock.build', '', '1', 'text', 'Build type for aws-currency-lock');
		</sql>
		</changeSet>

	<changeSet id="jwr-add-column-deleted" author="Pushpender">
		<comment>For delete users profile data</comment>
		<sql>
			ALTER TABLE Users ADD deleted bit NOT NULL DEFAULT 0;
  		</sql>
	</changeSet>
	<changeSet id="jwr-add-rumble-api-url" author="Pushpender">
		<comment>For rumble api url</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummy-rumble-config', 'rumble.api.url', 'http://127.0.0.1:9011/private/v1/rumble/user/', 1, 'text', 'rumble-api-base-url')
		</sql>
	</changeSet>
	<changeSet id="jwr-db-add-user-relation-publisher-cfg" author="Bharat">
     	<comment>Adding user relation publisher configs</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userrelationpublisher', 'enableUserRelationEvent', 'false', 1, 'bool', 'Enable/Disable user relation events')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userrelationpublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userrelationpublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('userrelationpublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')

     	</sql>
     </changeSet>

	<changeSet id="jwr-db-minimum-deposit-amount-limits" author="Jaymin">
    <comment>Add abtest flow for minimum deposit amount limit</comment>
    <sql>
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('deposit-limits-configuration', 'minimum-ab-deposit-limits-activated', 'false', 0, 'bool', ' Enable A/B test for minimum deposit amount');

     	INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description])
     	VALUES ('deposit-limits-configuration', 'deposit-limits-file.url', '', 0, 'text', 'Fileurl for deposit limits configuration');

			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('deposit-limits-configuration', 'deposit-limits-key-aws-bucket-name', '', 1, 'text', 'Bucket Name for deposit limits configuration');

			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('deposit-limits-configuration', 'deposit-limits-url-expiry-time-mins', '', 1, 'text', 'Signed url expiry time in mins');

			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('deposit-limits-configuration', 'deposit-limits-mod-value', '0', 1, 'number:0:1000000:1', 'Mod value for minimum deposit amount');

			CREATE TABLE [dbo].[MinimumDepositAmountCfg](
			     [ID] int IDENTITY(1, 1),
			     [UserCategory] [varchar](200) NOT NULL,
			     [Path] SMALLINT,
			     [MinAmt] INT
			 )
    </sql>
  </changeSet>

	<changeSet id="jwr-db-tournament-lobby-tabs" author="Mirek">
		<sql>
			CREATE TABLE [dbo].[TournamentLobbyPlatforms](
				[id] int IDENTITY(0,1) NOT NULL,
				[name] varchar(30) NOT NULL,
				[description] varchar(50),
				[enabled] bit NOT NULL,
				[bridgedLegacy] bit NOT NULL,
				[deviceBased] bit NOT NULL,
				[tabConfigs] text NOT NULL,
				[createdAt] datetime NOT NULL,
				[updatedAt] datetime NOT NULL,
				CONSTRAINT PK_TournamentLobbyPlatforms PRIMARY KEY ([id])
			);

			CREATE TABLE [dbo].[TournamentLobbyTabs](
				[id] int IDENTITY(1,1) NOT NULL,
				[editable] bit NOT NULL,
				[name] varchar(30) NOT NULL,
				[hideIfEmpty] bit NOT NULL,
				[alwaysOn] bit NOT NULL,
				[highlights] int NOT NULL,
				[visibilityStart] datetime,
				[visibilityEnd] datetime,
				[eligibility] text NOT NULL,
				[filters] varchar(100) NOT NULL,
				[createdAt] datetime NOT NULL,
				[updatedAt] datetime NOT NULL,
				CONSTRAINT PK_TournamentLobbyTabs PRIMARY KEY ([id])
			);

			INSERT INTO [dbo].[TournamentLobbyTabs](editable, name, hideIfEmpty, alwaysOn, highlights, visibilityStart, visibilityEnd, eligibility, filters, createdAt, updatedAt) VALUES
				(0, 'All', 0, 1, -1, null, null, '{"categories":["ALL"],"users":[],"segments":[],"loyaltyClubs":[]}', '{}', current_timestamp,current_timestamp),
				(0, 'Cash', 0, 1, -1, null, null, '{"categories":["ALL"],"users":[],"segments":[],"loyaltyClubs":[]}', '{}', current_timestamp,current_timestamp),
				(0, 'Free', 0, 1, -1, null, null, '{"categories":["ALL"],"users":[],"segments":[],"loyaltyClubs":[]}', '{}', current_timestamp,current_timestamp);

			INSERT INTO [dbo].[TournamentLobbyPlatforms](name, description, enabled, bridgedLegacy, deviceBased, tabConfigs, createdAt, updatedAt) VALUES
				('default', 'default platform for all', 1, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp),
				('apk', 'based on DeviceType: APK', 0, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp),
				('mob', 'based on DeviceType: MOBILE', 0, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp),
				('web', 'based on DeviceType: WEB', 0, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp),
				('webh5', 'based on DeviceType: WEBH5', 0, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp),
				('pwaa', 'based on DeviceType: PWAANDROID', 0, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp),
				('pwai', 'based on DeviceType: PWAIOS', 0, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp),
				('ipa', 'based on DeviceType: IPA', 0, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp),
				('psapp', 'based on DeviceType: PSAPP', 0, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp),
				('hzwebview', 'based on DeviceType: HZWEBVIEW', 0, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp),
				('hzpsapp', 'based on DeviceType: HZPSAPP', 0, 0, 1, '[{"eligibility": {"categories":["ALL"]}, "tabs" : [1,2,3]}]', current_timestamp, current_timestamp);
		</sql>
	</changeSet>

	<changeSet id="jwr-db-tournament-lobby-config2" author="Mirek">
     	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-limits', 'lobby.tabsheet.maxtabs', '10', 1, 'number:3:20:1', 'How many tabs is allowed to be configured per tabsheet');
     	</sql>
  </changeSet>

	<changeSet id="jwr-db-game-variant-knockout-1" author="Mirek">
		<sql>
			INSERT [dbo].[GameVariantTypes] ([Type], [Value]) VALUES (N'KnockOut', 4);
			INSERT INTO RevenueSourceType (txnName,ttype) VALUES('KNOCK_OUT',12);
			
			ALTER TABLE [dbo].[DefaultEntryFees] ADD KNOCKOUT varchar(10) not null DEFAULT '0';
			UPDATE [dbo].[DefaultEntryFees] SET KNOCKOUT = DEAL;
			
			ALTER TABLE [dbo].[UsersWinningByGamevariant] ADD KnockOut Money NULL;
			ALTER TABLE [dbo].[UserDisconnectionSettings] ADD [dropKnockOut][tinyint] NULL;
			
			insert into TransactionTypes(txnName,ttype) values('KNOCKOUT_PRIZES','169');
			insert into TransactionTypes(txnName,ttype) values('KNOCKOUT_BUYIN','170');
			insert into TransactionTypes(txnName,ttype) values('KNOCKOUT_RAKE','171');
			insert into TransactionTypes(txnName,ttype) values('KNOCKOUT_LEAVE_TABLE','172');
			insert into TransactionTypes(txnName,ttype) values('KNOCKOUT_LOST','173');
			insert into TransactionTypes(txnName,ttype) values('CRASH_REFUND_KNOCKOUT_RUMMY','174');
			insert into TransactionTypes(txnName,ttype) values('COORDINATOR_JR_KNOCKOUT','175');    		
			
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-client-properties', 'dropButtonCaptionKnockOut', 'Drop', 1, 'text', 'Caption to be used for drop button for knockout games');
			
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('lobbyTopTabs', 'knockout.13cardrummy.enabled', 'false', 1, 'bool', 'Enable/Disable KnockOut');
			
			INSERT INTO cfg VALUES ('bestGroup','bestGroupConfig.practice.knock_out.13c.enabled', 'false', '0', 'bool', 'Controls config activated for Practice KnockOut Game variant');
			
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gametable-masking','gametableMaskingConfig.cash.knock_out.13c.2s.enabled', 'true', 1, 'bool', 'Controls whether table masking is to be activated for cash KnockOut');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gametable-masking','gametableMaskingConfig.cash.knock_out.13c.6s.enabled', 'true', 1, 'bool', 'Controls whether table masking is to be activated for cash KnockOut');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gametable-masking','gametableMaskingConfig.practice.knock_out.13c.2s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for practice KnockOut');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gametable-masking','gametableMaskingConfig.practice.knock_out.13c.6s.enabled', 'false', 1, 'bool', 'Controls whether table masking is to be activated for practice KnockOut');
			
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('knock-out', 'abtest.enabled', 'false', 1, 'bool', 'If true then only some players will have this feature available (whose id%mod > threshold)');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('knock-out', 'abtest.mod', '128', '1', 'number:2:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('knock-out', 'abtest.threshold', '64', '1', 'number:0:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('knock-out', 'min.registration.datetime', '1633967894000', '1', 'datetime', 'Only players that registered after specified datetime will have the feature enabled');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('knock-out', 'enabled.vip', '-1', '1', 'vip', 'Feature will be available only to users from given VIP levels');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('knock-out', 'abtest.vip', '-1', '1', 'vip', 'AB test will be available only for users of specific VIP levels');
			
			
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.13c.2s.bonus','30000','1','number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.13c.2s.finish','30000','1','number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.13c.2s.gamestart','5000','1','number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.13c.2s.turn','30000','1','number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.13c.2s.viewresults','10000','1','number:1000:120000:1000','View Results time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.13c.6s.bonus','30000','1','number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.13c.6s.finish','30000','1','number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.13c.6s.gamestart','30000','1','number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.13c.6s.turn','30000','1','number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.13c.6s.viewresults','10000','1','number:1000:120000:1000','View Results time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.2s.TableJoinFreeze','5000','1','number:3000:150000:500','Initial value of table entry freeze timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerConfig.knock_out.6s.TableJoinFreeze','5000','1','number:3000:150000:500','Initial value of table entry freeze timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.13c.2s.bonus','30000','1','number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.13c.2s.finish','35000','1','number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.13c.2s.gamestart','10000','1','number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.13c.2s.turn','25000','1','number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.13c.2s.viewresults','10000','1','number:1000:120000:1000','View Results time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.13c.6s.bonus','30000','1','number:1000:120000:1000','Initial value of player bonus time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.13c.6s.finish','35000','1','number:1000:120000:1000','Initial value of finish timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.13c.6s.gamestart','30000','1','number:1000:120000:1000','Game Start time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.13c.6s.turn','25000','1','number:1000:120000:1000','Initial value of turn timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.13c.6s.viewresults','10000','1','number:1000:120000:1000','View Results time');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.2s.TableJoinFreeze','5000','1','number:3000:150000:500','Initial value of table entry freeze timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.6s.TableJoinFreeze','5000','1','number:3000:150000:500','Initial value of table entry freeze timer');
			INSERT INTO cfg VALUES ('game-timer','gameTimerPracticeConfig.knock_out.override.using.cash.enabled','true','1','bool','Controls whether cash game timer config should be used for knockout practice games');
		</sql>
	</changeSet>

	<changeSet id="jwr-db-game-variant-knockout-2" author="Mirek">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-client-properties', 'dropButtonEnabledKnockOut', 'true', 1, 'bool', 'Whether or not a drop button  knockout games');
		</sql>
	</changeSet>
	
	 <changeSet id="jwr-knockout-best-declare-config" author="Mirek">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) 
					VALUES ('bestDeclare', 'bestDeclare.gameType.knockout.13c.bool', 'true', 0, 'bool', 'Set Best Declare enabled for KnockOut variant');
		</sql>
  	</changeSet>
  	<changeSet id="jwr-knockout-game-score-indicator" author="Mirek">
  		<sql>
  			insert into GameScoreIndicator values ('gameType', 'knock_out', 1)
  		</sql>
  	</changeSet>

	<changeSet id="BalanceReversalFraudUsers" author="Adhiraj" runOnChange="true">
	 	<comment>Get Fraud Users List for Balance Confiscation </comment>
        <sqlFile path="storedprocedures/BalanceReversalFraudUsers.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>

	<changeSet id="BalanceReversalNonFraudUsers" author="Adhiraj" runOnChange="true">
	 	<comment>Get Non Fraud Users List for Balance Confiscation </comment>
        <sqlFile path="storedprocedures/BalanceReversalNonFraudUsers.sql" relativeToChangelogFile="true" endDelimiter="\nGO"/>
    </changeSet>

	<changeSet id="jwr-db-add-poker-transaction-types" author="Ashutosh">
		<comment>Add coordinator Poker transaction types</comment>
		<sql>
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_PKR_GAME_BUYIN', 176);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('COORDINATOR_PKR_GAME_REBUY', 177);
		</sql>
	</changeSet>

	<changeSet id="jwr-db-deposit-amount-state-abTesting" author="Jaymin">
		<comment>Insert configuration for deposit amount ab testing</comment>
		<sql>
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('deposit-amount-configuration', 'ab-deposit-amount-enabled', 'false', 0, 'bool', 'Enable/Disable A/B test for deposit amount');

			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('deposit-amount-configuration', 'deposit-amount-mod-value', '0', 1, 'number:0:1000000:1', 'Mod value for deposit amount AB test');

			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('deposit-amount-configuration', 'deposit-amount-states', '', 1, 'text', 'Mod value for deposit amount AB test');

			ALTER TABLE [dbo].[depositAmountConfiguration] ADD [STATEMAP_ABTEST_PATH] [varchar](20) NOT NULL default 'NONE';
		</sql>
	</changeSet>

    <changeSet id="jwr-db-visitorId-logging-flag" author="Akshat">
    	<comment>Add VISITOR ID Logging Flag</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'visitorIDLoggingToggle', 'false', 1, 'bool', 'VISITOR ID Logging toggle feature')
    	</sql>
    </changeSet>
    
    <changeSet id="jwr-db-kafka-table-info-service-events-publisher-cfg" author="Naveen">
         <comment>Setting kafka table info events Publsiher config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableinfoserviceeventpublisher', 'enabletableinfoserviceevents', 'true', 1, 'bool', 'Enable/Disable table info service events')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableinfoserviceeventpublisher', 'kafka.bootstrap.servers', '127.0.0.1:9092', 1, 'text', 'kafka brokers url')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableinfoserviceeventpublisher', 'kafka.topic', 'tableinfo-game-events', 1, 'text', 'topic to publish')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableinfoserviceeventpublisher', 'kafka.provider', 'confluent', 1, 'text', 'kafka provider confluent or self')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableinfoserviceeventpublisher', 'kafka.key', '', 1, 'text', 'confluent key')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tableinfoserviceeventpublisher', 'kafka.secret', '', 1, 'text', 'confluent secret')
             </sql>
     </changeSet>
     
     <changeSet id="jwr-db-kafka-table-info-gs-shutdown-events-publisher-cfg" author="Naveen">
         <comment>Setting kafka table info gs shutdown events Publsiher config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gsshutdowneventpublisher', 'enablegsshutdownevents', 'true', 1, 'bool', 'Enable/Disable table info gs shutdown events')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gsshutdowneventpublisher', 'kafka.bootstrap.servers', '127.0.0.1:9092', 1, 'text', 'kafka brokers url')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gsshutdowneventpublisher', 'kafka.topic', 'tableinfo-gs-shutdown-events', 1, 'text', 'topic to publish')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gsshutdowneventpublisher', 'kafka.provider', 'confluent', 1, 'text', 'kafka provider confluent or self')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gsshutdowneventpublisher', 'kafka.key', '', 1, 'text', 'confluent key')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('gsshutdowneventpublisher', 'kafka.secret', '', 1, 'text', 'confluent secret')
             </sql>
     </changeSet>
     
     <changeSet id="jwr-db-table-summary-events-subscriber-cfg" author="Naveen">
         <comment>Setting  table summary events subscriber config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummaryeventsubscriber', 'legacytablesummaryflow', 'true', 1, 'bool', 'Enable/Disable table summary legacy flow')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummaryeventsubscriber', 'kafka.bootstrap.servers', '127.0.0.1:9092', 1, 'text', 'kafka brokers url')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummaryeventsubscriber', 'kafka.provider', 'confluent', 1, 'text', 'kafka provider confluent or self')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummaryeventsubscriber', 'kafka.key', '', 1, 'text', 'confluent key')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummaryeventsubscriber', 'kafka.secret', '', 1, 'text', 'confluent secret')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummaryeventsubscriber', 'kafka.topic', 'tableSummary-update-events', 1, 'text', 'topic to publish')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummaryeventsubscriber', 'tableinfo.tcg.values', '', 1, 'text', 'tcg using tableinfo service data')
             </sql>
     </changeSet>
     
     <changeSet id="jwr-db-table-summary-cache-cfg" author="Naveen">
         <comment>Setting table summary cache config</comment>
         <sql>
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummary-cache', 'tablesummary.redis.host', 'localhost', 1, 'text', 'table summary cache server url')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummary-cache', 'tablesummary.redis.port', '6379', 1, 'number:0:20000:1', 'table summary cache port')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummary-cache', 'tablesummary.redis.provider', '', 1, 'text', 'table summary cache provider redis-labs or elastic-cache')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummary-cache', 'tablesummary.redis.password', '', 1, 'text', 'table summary cache server password')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummary-cache', 'tablesummary.redis.username', '', 1, 'text', 'table summary cache server username')
             INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tablesummary-cache', 'tablesummary.redis.prefix', '', 1, 'text', 'table summary cache prefix')
             </sql>
     </changeSet>

	<changeSet id="jwr-add-ICOCreditType-tvp" author="Avneet">
		<comment>Add tvp for adding ico via SP</comment>
		<sql>
			IF OBJECT_ID('ICOCreditType') IS NULL
			  CREATE TYPE [dbo].[ICOCreditType] AS TABLE (
			  [id] [int] NOT NULL, [userId] [int] NOT NULL,
			  [transactionType] [int] NOT NULL,
			  [eventId] varchar(500) NULL
			);
		</sql>
	</changeSet>

	<changeSet id="jwr-create-cash-leaderboard-config-table" author="Pushpender">
		<comment>Create CashLeaderboard config Table</comment>
		<sql>
			IF OBJECT_ID('CashLeaderboardConfig') IS NULL
			BEGIN
            CREATE TABLE CashLeaderboardConfig
            (
              [ID] [int] IDENTITY(1,1) NOT NULL,
              [image] [varchar](200) NOT NULL,
              [tabName]  [varchar](200) NOT NULL ,
              [defaultTab]  [bit] NOT NULL DEFAULT ((0)),
              PRIMARY KEY (ID)
            )
            END

			insert into CashLeaderboardConfig values('abc.png', 'RAPID', 0);
        	insert into CashLeaderboardConfig values('abc.png', 'DAILY', 0);
        	insert into CashLeaderboardConfig values('abc.png', 'WEEKLY', 0);
        	insert into CashLeaderboardConfig values('abc.png', 'MONTHLY', 0);
			insert into CashLeaderboardConfig values('abc.png', 'RAF', 0);

		</sql>
	</changeSet>

	<changeSet id="jwr-add-final-settlement-table" author="Pushpender">
     	<comment>To add final settlement table config</comment>
    	<sql>
    		IF OBJECT_ID('dbo.FinalSettlement') IS NULL
    		BEGIN
			CREATE TABLE [dbo].[FinalSettlement](
				[userId] [int] NOT NULL PRIMARY KEY ,
				[withdrawalId] [int] ,
				[status][varchar](50),
				[reason] [varchar](500) NOT NULL,
				[bankAccountNo][varchar](50),
				[ifsc][varchar](50),
				[amount] [money] NOT NULL DEFAULT 0,
				[agentId] [int] NOT NULL,
		        [updatedDate] [datetime] NOT NULL DEFAULT(GETDATE()),
		        [createdDate] [datetime] NOT NULL DEFAULT(GETDATE()),
			)
			END


    	</sql>
     </changeSet>

    <changeSet id="jwr-db-game-variant-knockout-3" author="Mirek">
    	<sql>
    		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-timer','reduced.timer.enable.knockout','true','1','bool', 'Enables/Disables Game start jump timer for KnockOut game variant');
    	</sql>
    </changeSet>

	<changeSet id="jwr-promocodes-useridexpiry-alter" author="Adhiraj">
		<comment>Alter PromoCodes add column daysUserIdsActive, Alter UsersByPromoCodes add column expiryDate</comment>
		<sql>
			ALTER TABLE PromoCodes ADD daysUserIdsActive [smallint] NOT NULL DEFAULT ((0));
			ALTER TABLE UsersByPromoCodes ADD expiryDate [datetime],
				source [varchar](30) NULL,
				agentName [varchar](30) NULL;
		</sql>
	</changeSet>

	<changeSet id="jwr-useridexpiry-update" author="Adhiraj" context="local">
		<comment>Update userId expiry for existing Promocodes</comment>
		<sql>
			UPDATE [dbo].[UsersByPromoCodes]
			 SET
				[dbo].[UsersByPromoCodes].[expiryDate] = [dbo].[PromoCodes].[dateExpires]
			 FROM [dbo].[UsersByPromoCodes] INNER JOIN [dbo].[PromoCodes]
			 ON [dbo].[UsersByPromoCodes].[promoCodeID] = [dbo].[PromoCodes].[promoCodeID]
			 WHERE [dbo].[UsersByPromoCodes].[expiryDate] IS NULL;
		</sql> 
	</changeSet>

	<changeSet id="jwr-db-drop-add-userbypromocodestype" author="Adhiraj">
		<comment>Drop and Add UserByPromocodes Table Type</comment>
		<sql>
			CREATE TYPE UsersByPromocodesType_V2 AS TABLE
			    (
			        promocodeId int,
					userId bigint,
			        expiryDate [datetime],
			        source [varchar](30),
			        agentname [varchar](30)
			    );
	 	</sql>
	</changeSet>
	<changeSet id="jwr-db-ab-config" author="Pushpender">
		<comment>Common Ab config for client</comment>
		<sql>
			Create Table AbConfig(
				ID int IDENTITY(1,1) PRIMARY KEY,
				config varchar(100) NOT NULL,
				mod int NOT NULL,
				enable bit NOT NULL DEFAULT ((0)),
				threshold int NOT NULL,
				min_registration_datetime datetime NOT NULL DEFAULT '1633967894000'
			);

	 	</sql>
	</changeSet>

	<changeSet id="jwr-db-IpLocationApiUrl" author="Khushal">
    	<comment>Adding IP Location API url config</comment>
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'ipLocationApiUrl.enable', 'false', 1, 'bool', 'IPs location api enable/disable')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'ipLocationApiUrl', '', 1, 'text', 'IPs location api url')
    	</sql>
    </changeSet>

	<changeSet id="added-psapp-cash-config" author="Pushpender">
	 	<comment>Added psapp cash config </comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('PlaystoreCashApp', 'playstorecashapp.login.18consent', 'false', 1, 'bool', 'playstore cashapp login consent')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('PlaystoreCashApp', 'playstorecashapp.register.18consent', 'false', 1, 'bool', 'playstore cashapp login consent')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('PlaystoreCashApp', 'playstorecashapp.showlocationstate', 'false', 1, 'bool', 'playstore cashapp login consent')

	 	</sql>
    </changeSet>

	<changeSet id="jwr-adding-column-18consent" author="Akshat">
	 	<comment>Add new column 18consent in UserRegistrationInfo</comment>
		<sql>
			alter table UserRegistrationInfo add [18consent] bit default null
	 	</sql>
    </changeSet>

    <changeSet id="jwr-knockout-game-score-indicator" author="Akshat">
  		<sql>
  			insert into GameScoreIndicator values ('platform', 'psrmg', 0)
  		</sql>
  	</changeSet>

	<changeSet id="jwr-db-psrmg-config" author="Pushpender">
    	<comment>PSRMG config </comment>
    	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('brancheventssubscriber', 'branchkey-psrmg', '', 1, 'text', 'branch key for psrmg');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('facebookpixelconfig', 'psrmg-pixelId', '', 1, 'text', 'Facebook psrmg pixelId')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('facebookpixelconfig', 'psrmg-accessToken', '', 1, 'text', 'Facebook psrmg access token')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('firebase', 'psrmg_api_secret', '', 1, 'text', 'Firebase psrmg api secret');
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('firebase', 'psrmg_firebase_app_id', '', 1, 'text', 'Firebase psrmg app Id');

    	</sql>
    </changeSet>

	<changeSet id="jwr-db-psrmg-multitable-config" author="Khushal">
    	<comment>PSRMG config for multitable</comment>
    	<sql>

		INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.channel.psrmg.enabled','false','0','bool', 'Enables/Disables multiple table support on psrmg channel');
 		</sql>
    </changeSet>

    <changeSet id="jwr-db-add-hzpscash-in-tournament-tabs" author="Akshat">
    	<comment>Add hzpscash in all non editable tabs</comment>
		<sql>
			update TOURNAMENTSTABS set applicationFor = applicationFor + ',hzpscash' where isEditable = 0
		</sql>
	</changeSet>

	<changeSet id="jwr-db-promocodes-add-col-deposit-count-operation" author="Adhiraj">
		<comment>Add depositCountOperation column in PromoCodes Table</comment>
		<sql>
			ALTER TABLE PromoCodes ADD depositCountOperation [int] NOT NULL DEFAULT ((0));
		</sql>
	</changeSet>

	<changeSet id="jwr-db-promocodes-update-col-deposit-count-operation" author="Adhiraj">
		<comment>Update depositCountOperation column in PromoCodes Table</comment>
		<sql>
			UPDATE [dbo].[PromoCodes]
			 SET
				[dbo].[PromoCodes].[depositCountOperation] = 1
			 WHERE [dbo].[PromoCodes].[bonusType] = 2;
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-add-deduper-redis-config" author="AashishGoyal">
    	<comment>Add Transaction Deduper redis configurations</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'enabled', 'false', 1, 'bool', 'Enable/Disable deduper');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'redis.hosts', 'localhost:6000', 1, 'text', 'Comma Seperated Redis Hosts');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'pubsub.namespace', 'localhost:9092', 1, 'text', 'Kafka brokers');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'admin.api.root', 'localhost:8090', 1, 'text', 'New admin API root');

    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'txn.frequencies.set1', '{}', 0, 'text', 'Map of transactions and there frequencies');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'txn.frequencies.set2', '{}', 0, 'text', 'Map of transactions and there frequencies');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'txn.frequencies.set3', '{}', 0, 'text', 'Map of transactions and there frequencies');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'txn.frequencies.set4', '{}', 0, 'text', 'Map of transactions and there frequencies');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'txn.frequencies.set5', '{}', 0, 'text', 'Map of transactions and there frequencies');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'txn.frequencies.set6', '{}', 0, 'text', 'Map of transactions and there frequencies');
		</sql>
    </changeSet>
    
    <changeSet id="jwr-db-add-deduper-redis-timeout-config" author="Ashutosh">
    	<comment>Add Transaction Deduper redis configurations</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'redis.timeout.ms', '100', 1, 'number:0:5000:1', 'Timeout for Redis ops in miliseconds');
		</sql>
    </changeSet>
    
    <changeSet id="jwr-db-add-deduper-test-users-config" author="Ashutosh">
    	<comment>Add Transaction Deduper test users configurations</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('TransactionDeduperConfig', 'test.users', '', 1, 'text', 'Coma separated test users');
		</sql>
    </changeSet>
	
	<changeSet id="jwr-persistence-ab-config" author="Pushpender">
    	<comment>Persistence Ab config </comment>
    	<sql>
			IF OBJECT_ID('dbo.PersistenceAbConfig') IS NULL
    		BEGIN
			CREATE TABLE [dbo].[PersistenceAbConfig](
				[id] [tinyint] PRIMARY KEY IDENTITY(1,1) NOT NULL,
				[category] [varchar](100) NOT NULL,
				[post_gameplay_enable] [bit] NOT NULL default 0,
				[post_gameplay_default_cat] [varchar](100) NOT NULL,
				[new_session_enable] [bit] NOT NULL  default 0,
				[new_session_default_cat] [varchar](100) NOT NULL
			)
			END

			insert into PersistenceAbConfig values ('NON VIP', 0, 'CG', 0, 'CG');
			insert into PersistenceAbConfig values ('VIP 1', 0, 'CG', 0, 'CG');
  			insert into PersistenceAbConfig values ('VIP 2', 0, 'CG', 0, 'CG');
  			insert into PersistenceAbConfig values ('VIP 3', 0, 'CG', 0, 'CG');
  			insert into PersistenceAbConfig values ('VIP 4', 0, 'CG', 0, 'CG');
		  	insert into PersistenceAbConfig values ('VIP 5', 0, 'CG', 0, 'CG');
		  	insert into PersistenceAbConfig values ('VIP 6', 0, 'CG', 0, 'CG');
		  	insert into PersistenceAbConfig values ('NEWBIE', 0, 'CG', 0, 'CG');


			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('persistence-abconfig', 'persistence_post_gameplay_mod', '', 1, 'number:0:999:1', 'persistence_post_gameplay_mod');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('persistence-abconfig', 'persistence_post_gameplay_enable','false','0','bool', 'Enables/Disables persistence_post_gameplay_enable');
 	 	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('persistence-abconfig', 'persistence_new_session_mod', '', 1, 'number:0:999:1', 'persistence_new_session_mod');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('persistence-abconfig', 'persistence_new_session_enable','false','0','bool', 'Enables/Disables persistence_new_session_enable');
			</sql>
    </changeSet>

	 <changeSet id="jwr-db-es-fraud-flag-config-for-new-service" author="Niraj">
    	<comment>Fraud and Flag Config for new services</comment>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.withdrawal.flag.index" />
			<column name="value" value="withdrawal_flags" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="new es index for withdrawal flags" />
		</insert>
		    	<comment>ES Config for new services</comment>
		<insert tableName="cfg">
			<column name="id" value="elasticsearch" />
			<column name="key" value="elasticsearch.withdrawal.fraud.index" />
			<column name="value" value="fraud_check" />
			<column name="editable" value="1" />
			<column name="type" value="text" />
			<column name="description" value="new es index for withdrawal frauds" />
		</insert>
	 </changeSet>

	<changeSet id="jwr-db-howzat-audience-config" author="Pushpender">
    	<comment>Adding Howzat Audience config</comment>
    	<sql>

	     	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencepublisher', 'howzat.oid', 'howzat', 1, 'text', 'Organisation id - howzat')
   			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('audiencepublisher', 'jghowzat.api.url', '', 1, 'text', 'JG-Howzat API URL')

		</sql>
    </changeSet>

	<changeSet id="jwr-db-deposit-amount-tiles-config_viplevel_mod" author="Adhiraj">
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-mod-tiles', 'newbie.mod_tile', '0', 0, 'number:0:100', 'NEWBIE mod value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-mod-tiles', 'nonvip.mod_tile', '0', 0, 'number:0:100', 'NONVIP mod value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-mod-tiles', 'vip1.mod_tile', '0', 0, 'number:0:100', 'VIP1 mod value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-mod-tiles', 'vip2.mod_tile', '0', 0, 'number:0:100', 'VIP2 mod value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-mod-tiles', 'vip3.mod_tile', '0', 0, 'number:0:100', 'VIP3 mod value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-mod-tiles', 'vip4.mod_tile', '0', 0, 'number:0:100', 'VIP4 mod value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-mod-tiles', 'vip5.mod_tile', '0', 0, 'number:0:100', 'VIP5 mod value');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('deposit-amount-mod-tiles', 'vip6.mod_tile', '0', 0, 'number:0:100', 'VIP6 mod value');
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-invoicetransformer-config" author="Udbhav">
    	<comment>Invoice Transformer config </comment>
    	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('invoicetransformerconfig', 'pubsub.namespace', '', 1, 'text', 'namespace ');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('invoicetransformerconfig', 'pubsub.subscriber.consumergroup', '', 1, 'text', 'Subscriber consumer group')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('invoicetransformerconfig', 'pubsub.subscriber.consumercount', '1', 1, 'number:0:1000000:1', 'Number of consumers running per node');
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('invoicetransformerconfig', 'batch.size', '1000', 1, 'number:0:1000000:1', 'Batch size');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('invoicetransformerconfig', 'timeout.ms', '30000', 1, 'number:0:1000000:1', 'timeout ms');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('invoicetransformerconfig', 'pubsub.out.topic', '', 1, 'text', 'invoice out topic');
    	</sql>
    </changeSet>
	<changeSet id="jwr-db-fix-double-int-config" author="Udbhav">
    	<comment>AWS KYC config fix</comment>
    	<sql>
			DELETE from cfg where [id] = 'aws-kyc' and [key] = 'aws-kyc.threadpoolsize';
     	    INSERT INTO cfg VALUES ('aws-kyc', 'aws-kyc.threadpoolsize', '2', '1', 'number:1:20:1', 'Size of the threadpool used to upload documents to AWS S3 bucket');
    	</sql>
    </changeSet>


	<changeSet id="jwr-otp-redis-config" author="Khushal">
    	<comment>PSRMG config </comment>
    	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('OTP', 'redis-server', 'jg-jwr-admin-rumble.2oaslo.clustercfg.aps1.cache.amazonaws.com', 1, 'text', 'redis server');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('OTP', 'redis-port', '6379', 1, 'number:0:10000:1', 'redis port')

    	</sql>
    </changeSet>


	<changeSet id="jwr-db-IpLocationApiUrl" author="Pushpender">
    	<comment>Adding IP Location API logging  config</comment>
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'ipLocationLogging.enable', 'false', 1, 'bool', 'IPs location logging api  enable/disable')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'ipLocationLoggingApiUrl', '', 1, 'text', 'IPs location logging api url')
    	</sql>
    </changeSet>
	<changeSet id="jwr-db-series-config" author="prasadkudale">
		<comment>Insert series config into cfg table</comment>
		<sql>
			INSERT INTO [cfg] (
			        [id],
			        [key],
			        [value],
			        [editable],
			        [type],
			        [description]
			    )
			VALUES(
			        'matcheventsubscriber',
			        'series.config',
			        'TGWF_2022-big-hitters',
			        1,
			        'text',
			        'series config'
			    );
		</sql>
	</changeSet>
	<changeSet id="jwr-db-tour-white-goods" author="Mirek">
		<sql>
			INSERT INTO TransactionTypes(txnName,ttype) VALUES ('TOURNAMENT_WHITE_GOODS_REWARDS','180');
			ALTER TABLE [TournamentCostBalance] ADD [whiteGoodsTotalValue] money NOT NULL DEFAULT 0;
		</sql>
	</changeSet>

	<changeSet id="jwr-db-add-minigames-transaction-types" author="prasadkudale">
		<comment>Add mini games transaction types</comment>
		<sql>
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('MINI_GAMES_RET_CR', 178);
			INSERT [dbo].[TransactionTypes] ([txnName], [ttype]) VALUES ('MINI_GAMES_RET_DR', 179);
		</sql>
	</changeSet>
	
	<changeSet id="upi-collect-config-flag" author="Adhiraj">
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('upi-collect-config', 'upiCollect', '1', 0, 'number:0:1', 'Enable Flag value for upi collect');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('upi-collect-config', 'upiCollectApk', '1', 0, 'number:0:1', 'Enable Flag value for upi collect apk');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('upi-collect-config', 'upiCollectIpa', '1', 0, 'number:0:1', 'Enable Flag value for upi collect ipa');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('upi-collect-config', 'upiCollectMob', '1', 0, 'number:0:1', 'Enable Flag value for upi collect mob');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('upi-collect-config', 'upiCollectPwaa', '1', 0, 'number:0:1', 'Enable Flag value for upi collect pwaa');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('upi-collect-config', 'upiCollectLimit', '2000', 0, 'number:1:10', 'upi collect limit per user per day');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('upi-collect-config', 'savedUpi', '1', 0, 'number:0:1', 'Enable Flag value for saved UPI');
    	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('upi-collect-config', 'upiCollectWeb', '1', 0, 'number:0:1', 'Enable Flag value for upi collect web');
    	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('upi-collect-config', 'upiCollectPwai', '1', 0, 'number:0:1', 'Enable Flag value for upi collect pwaios');
    	</sql>
    </changeSet>

	<changeSet id="jwr-upicollect-redis-config" author="Jaymin">
    	<comment>Redis UPI collect config </comment>
    	<sql>
     	  INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('upi-collect-config', 'redis-server', 'jg-jwr-admin-rumble.2oaslo.clustercfg.aps1.cache.amazonaws.com', 1, 'text', 'redis server');
			  INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('upi-collect-config', 'redis-port', '6379', 1, 'number:0:10000:1', 'redis port')
    	</sql>
    </changeSet>

 	<changeSet id="jwr-db-city-check-withdrawals" author="Niraj">
    	<comment>Adding City config for withdrawals check</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'citiesnotallowed', '', 1, 'text', 'cities we are excluding to instant withdrawal | separated')
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-user-device-limit-service-cfg" author="Akshat">
    	<comment>User device limit Service config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('user-device-limit-service-config', 'user.device.limit.url', '', 1, 'text', 'User device limit API Url')
		</sql>
    </changeSet>

    <changeSet id="jwr-db-user-device-limit-kafka-cfg" author="Akshat">
    	<comment>User device Limit Service kafka config values</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('user-device-limit-kafka-config', 'bootstrap.servers', '', 1, 'text', 'User device limit bootstrap servers')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('user-device-limit-kafka-config', 'user.device.limit.kafka.topic', '', 1, 'text', 'User device limit kafka topic')
    	</sql>
    </changeSet>
    
 	<changeSet id="jwr-db-flag-check-withdrawals" author="Niraj">
    	<comment>Adding Configs for new RAKE n Deposit withdrawal Flag Check</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'rdflag-flag.enabled', 'true', 1, 'bool', 'rake deposit flag enabled')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'rdflag-first-deposit-date', '30', 1, 'number:0:1000:1', 'users first deposit date should not be greater')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'rdflag-rake-deposit-ratio', '5', 1, 'number:0:1000:1', 'rake deposit ratio percentage')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'rdflag-lifetime-deposit', '2000', 1, 'number:0:100000:1', 'total lifetime deposit')
    	</sql>
    </changeSet>
 	<changeSet id="jwr-db-bank-validation-configurations" author="Niraj">
    	<comment>Adding bank validation configurations</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'bankaccount.validation.enabled', 'false', 1, 'bool', 'Bank Validation Enabled')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'max.valid.bankaccount.count', '10', 1, 'number:0:100:1', 'Bank Validation Enabled')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'max.invalid.bankaccount.count', '10', 1, 'number:0:100:1', 'Bank Validation score')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'max.garbage.bankaccount.count', '10', 1, 'number:0:100:1', 'Bank Validation garbage count')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'bank.validation.es.index', 'bank_account_validation', 1, 'text', 'Bank Validation Details')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'bankaccount.validation.fuzzyscore', '10', 1, 'number:0:100:1', 'Bank Validation name match fuzzy score')
    	</sql>
    </changeSet>
 	<changeSet id="jwr-db-penny-drop-configurations" author="Niraj">
    	<comment>Adding Penny drop ab configurations</comment>
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('cashfree', 'pennydrop.user.mod', '-1', 1, 'number:-1:1000:10', 'Control flags , Negative or zero to disable all user all other value to enable percentage of user')
   	</sql>
    </changeSet>
	<changeSet id="jwr-db-city-GeoRestriction" author="Khushal">
    	<comment>Adding Restricted IP config</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'cities-not-allowed', '', 1, 'text', 'city not allowed geolocation | separated')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('geolocation', 'userid-after-not-allowed-in-city', '', 1, 'text', 'userid from city georestriction will apply')
    	</sql>
    </changeSet>
    
	<changeSet id="jwr-db-game-chat" author="Nitish">
    	<comment>Configuration for gamechat enable/disable and ab test</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-chat', 'enabled', 'false', 1, 'bool', 'Enables the game-chat feature at server level')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-chat', 'abtest.enabled', 'false', 1, 'bool', 'Enables the game-chat feature at server level')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-chat', 'abtest.mod', '100', '1', 'number:2:1000000:1', 'only players whose id%mod >= threshold will have this feature enabled')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-chat', 'abtest.threshold', '10', '1', 'number:0:1000000:1', 'only players whose  id%mod >= threshold  will have this feature enabled')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-chat', 'cash.enabled', 'false', 1, 'bool', 'Enables the game-chat feature for cash tables')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-chat', 'practice.enabled', 'false', 1, 'bool', 'Enables the game-chat feature for practice tables')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-chat', 'tournaments.enabled', 'false', 1, 'bool', 'Enables the game-chat feature for tournaments')
    	</sql>
    </changeSet>
    
	<changeSet id="jwr-db-game-chat-messages" author="Nitish">
		<comment>Predefined game chat messages table</comment>
		<sql>
			IF OBJECT_ID('dbo.EmojiShortCodeMap') IS NULL
			  CREATE TABLE [dbo].[EmojiShortCodeMap](
			  [id] [int] NOT NULL IDENTITY(1,1) PRIMARY KEY,
			  [shortCode] [varchar](64),
			  [imageUrl] [varchar](512)
			);
			
			IF OBJECT_ID('dbo.GameChatMessages') IS NULL
			  CREATE TABLE [dbo].[GameChatMessages](
			  [id] [int] NOT NULL IDENTITY(1,1) PRIMARY KEY,
			  [isEnabled] [bit] NOT NULL DEFAULT 0,
			  [message] [varchar](128),
			  [displayOrder] [smallint] NOT NULL
			);
		</sql>
	</changeSet>
    
	<changeSet id="jwr-api-access-token-admin-expity-time" author="Khushal">
		<comment>Configs for API access token admin expiry time</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('api-access-token', 'expiry.time.admin.user', '20', 1, 'number:1:200:1', 'Expiry time for access token in minutes');
		</sql>
	</changeSet>
<changeSet id="jwr-multi-table-support-extension" author="Pushpender">
	<comment>Config for enabling/disabling multiple table support on mobile</comment>
		<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.channel.hzwebview.enabled','false','0','bool', 'Enables/Disables multiple table support on hzwebview channel');
			
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.channel.hzpsapp.enabled','false','0','bool', 'Enables/Disables multiple table support on hzpsapp channel');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('multitable','multitable.channel.hzpscash.enabled','false','0','bool', 'Enables/Disables multiple table support on hzpscash channel');
	
		</sql>
	</changeSet>
	
	<changeSet id="jwr-withdrawal-flag-lifetime-with-amt" author="Prasad">
	 <comment>Insert configs for LifetimeWithdrawalAmount</comment>
		<sql>
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.NON VIP.LifetimeWithdrawalAmount','2000.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 1.LifetimeWithdrawalAmount','10000.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 2.LifetimeWithdrawalAmount','10000.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 3.LifetimeWithdrawalAmount','10000.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 4.LifetimeWithdrawalAmount','10000.0')
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 5.LifetimeWithdrawalAmount','2000.0');
			INSERT INTO [dbo].[WithdrawalFlagConfigs]([key],[value]) VALUES ('cat.VIP 6.LifetimeWithdrawalAmount','2000.0');
		</sql>
	 </changeSet>

	<changeSet id="jwr-withdrawal-automation-configs-tables" author="Niraj">
		<comment>Configs table for withdrawal automation</comment>
		<sql>
			IF OBJECT_ID('withdrawal_metrics_configurations') IS NULL
			BEGIN
			CREATE TABLE withdrawal_metrics_configurations (
				metric_name varchar(100) NOT NULL,
				lowest_threshold float NOT NULL,
				vip_category smallint NOT NULL,
				highest_threshold float NOT NULL,
				direction smallint NOT NULL,
				weightage float NOT NULL,
				product_id varchar(100) NOT NULL,
				enabled bit NOT NULL, 
		    CONSTRAINT pk_withdrawal_metrics PRIMARY KEY (metric_name, vip_category)
			)
			END
			IF OBJECT_ID('withdrawal_vip_configurations') IS NULL
			BEGIN
			CREATE TABLE withdrawal_vip_configurations (
				vip_category smallint NOT NULL PRIMARY KEY,
				fraud_threshold float NOT NULL,
				instant_counter_threshold float NOT NULL,
				enabled bit NOT NULL,
				product_id varchar(100) NOT NULL
			)
			END
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'daysToCalculateFraud', '20', 1, 'number:1:100:1', 'Days to calculate withdrawal fraud');
		</sql>
	</changeSet>
	  <changeSet id="jwr-withdrawal-automation-publisher-config" author="niraj">
    	<comment>Publisher config for withdrawal automation services</comment>
    	<sql>
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('wapublisher', 'enable.wapublisher', 'false', 1, 'bool', 'Enable/Disable withdrawal automation event publisher')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('wapublisher', 'pubsub.model', 'kafka', 1, 'text', 'Publisher-Subscriber model to be used')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('wapublisher', 'pubsub.namespace', '', 1, 'text', 'Kafka brokers')
            INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('wapublisher', 'pubsub.topic', '', 1, 'text', 'topic to publish')
    	</sql>
	  </changeSet>
	  <changeSet id="jwr-withdrawal-automation-service-config" author="niraj">
    	<comment>Adding enable/disable config for withdrawal automation services</comment>
    	<sql>
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('Withdrawals', 'isAutomationServiceEnabled', 'false', 1, 'bool', 'Enable/Disable withdrawal automation service')
    	</sql>
	  </changeSet>
    <changeSet id="jwr-db-automation" author= "Niraj">
	    <comment>Withdrawal State Automation </comment>
	    <sql>
	    	INSERT INTO WithdrawalStatusTypes VALUES ('Automation',19);
	    </sql>
    </changeSet>

	<changeSet id="juspay-routing-config-flag" author="Adhiraj">
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('juspay-routing-config', 'juspayRoutingMod', '0', 0, 'number:0:1', 'Mod value for routing all payments to juspay');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('juspay-routing-config', 'juspayRoutingRemainder', '0', 0, 'number:0:1', 'Remainder value for routing all payments to juspay');

    	</sql>
    </changeSet>

	<changeSet id="add-juspay-gateway-cfg-savedcard-order-KEEP_JUSPAY_FIRST" author="Adhiraj">
    	<sql>
  			update cfg set [value] = 'Juspay|TechPro' where [key] = 'deposit.savedcard.gateways.order';
		</sql>
    </changeSet>

	<changeSet id="add-new-juspay-gateway" author="Adhiraj">
    	<sql>
			INSERT INTO dbo.Gateway (GatewayName,PostURL,ConfigParameters,ReturnURL,ReturnURLMobile,S2Senabled,takesCardDetails,ReconciliationURL,saveCardFlag) VALUES ('Juspay','https://sandbox.juspay.in/','','https://www.jungleegames.com/paymentcallback/razorpayresponse','https://m2.jungleerummydev.com/payments/response.*',1,1,'',1);
    	</sql>
    </changeSet>

	<changeSet id="add-juspay-gateway-cfg-recon" author="Adhiraj">
    	<sql>
			Update cfg set [value] = 'TechPro|Citrus|Paytm|Payu|Freecharge|PhonePe|Cashfree|Razorpay|Juspay' where [key] = 'deposit.reconcile.gateways';
		</sql>
    </changeSet>

	<changeSet id="jwr-db-drautomation-config" author="prasadkudale">
     	<comment>DR Automation Config</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('drautomation', 'dr.automation.api.url', 'http://localhost:8090/drautomation', 1, 'text', 'DR Automation API URL')
	   </sql>
   </changeSet>


	<changeSet id="jwr-persistence-config-default-value" author="pushpender">
     	<comment>Persistence Config Default value</comment>
     	<sql>
			update cfg set [value] = 3 where id = 'persistence-abconfig' and [key] = 'persistence_post_gameplay_mod';
			update cfg set [value] = 3 where id = 'persistence-abconfig' and [key] = 'persistence_new_session_mod';
	   </sql>
   	</changeSet>
   	
   	<changeSet id="jwr-cfg-gametimer-canshowbonustimeleft" author="Shubhangi">
		<sql>
			INSERT INTO cfg VALUES
			('game-timer','gameTimerConfig.canshowbonustimeleft.enable', 'false', '1',
			'bool','Enable to show bonus time left to user when turn timer starts.');
		</sql>
	</changeSet>
	 <changeSet id="jwr-db-ybl-cfg" author="Niraj">
	    	<comment>Adding Ybl Payout Config for routing</comment>
	    	<sql>
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.enabled', 'false', 1, 'bool', 'Enable disable ybl payout imps')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.percentage', '0', 1, 'number:0:100:1', 'Percentage traffic to ybl imps payout')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.consentid', '453733', 1, 'text', 'ybl unique identification number for junglee')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.clientid', '000190600017042', 1, 'text', 'Junglee unique Client ID for Ybl')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.statuscheck.enabled', 'false', 1, 'bool', 'Enable disable ybl payout status check')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.statuscheck.interval', '1', 1, 'number:0:10000:1', 'Interval of status check schedular for pending withdrawals')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.retry.interval', '1', 1, 'number:0:10000:1', 'retry interval of failed withdrawal')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.max.retry', '1', 1, 'number:0:10000:1', 'max retry count of failed withdrawal')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.ldap.userid', 'testuser', 1, 'text', 'Ybl Ldap User ID for IMPS')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.ldap.password', 'TiEsbntp@13N22', 1, 'text', 'Ybl Ldap Password for IMPS')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.xclientId', '229c6ab2-a192-4a03-882f-fe9358ba8d69', 1, 'text', 'Ybl xClientId for IMPS')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.xclientSecret', 'V0vI8sK8yW7rG5jA3pF6lT6iW1lM1lY3jO3sQ4xC6fF4uJ7xQ1', 1, 'text', 'Ybl xClient Secret for IMPS')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.max.sslPath', '/etc/nginx/ssl/jungleerummyqa.com.pfx', 1, 'text', 'Ybl IMPS SSL Path')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.url', 'https://uatskyway.yesbank.in/app/uat/api-banking/domestic-payments', 1, 'text', 'Ybl IMPS Url')
	    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.imps.status.url', 'https://uatskyway.yesbank.in/app/uat/api-banking/payment-details', 1, 'text', 'Ybl IMPS Status Url')

	    	</sql>
	    </changeSet>
	<changeSet id="jwr-withdrawal-adding-gateway-column" author="Niraj">
		<comment>Alter Withdrawals add columns for Gateway name</comment>
		<sql>
			ALTER TABLE Withdrawals ADD gatewayName [varchar](50) NULL;
	</sql>
  </changeSet>
    <changeSet id="jwr-add-Ybl-Payout-Table" author="Niraj">
		<comment>Table to hold Ybl Payout transactions</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[YblPayoutTransactions]') AND type in (N'U'))
            BEGIN
            CREATE TABLE [dbo].[YblPayoutTransactions](
	        [TransferId] [bigint] PRIMARY KEY IDENTITY(1,1) NOT NULL,
			[UTR] varchar(50) NULL,
			[PaymentMethod] varchar(50) NULL,
			[Status] smallint NOT NULL,
	        [WithdrawalId] [int] NOT NULL,
	        [Memo] varchar(250) NULL,
			[RetryCount] [int] NOT NULL DEFAULT(0),
			[IsRetryable] [bit] NOT NULL  default (0),
	        [CreatedDate] [datetime] NOT NULL DEFAULT(GETDATE()),
			[UpdatedDate] [datetime] NOT NULL DEFAULT(GETDATE()),
			[ProcessedBy] [varchar](50) NOT NULL DEFAULT(''),
			)
			END
		</sql>
	</changeSet>
	<changeSet id="jwr-kafka-bonus-config" author="pushpender">
     	<comment>Kafka Bonus config </comment>
     	<sql>

     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafka-howzat-bonus-config', 'bootstrap.servers', 'localhost:9092', 1, 'text', 'Kafka bonus config server')
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafka-howzat-bonus-config', 'kafka.hz.topic', 'hzBonusTopic', 1, 'text', 'Kafka bonus topic')

	   </sql>
   </changeSet>

	<changeSet id="jwr-alter-UserCurrencies-add-netwinnings-tdsliability" author="Ashutosh">
		<comment>Adding two new columns for TDS 2023</comment>
		<sql>
			ALTER TABLE UserCurrencies
				ADD netWinnings MONEY DEFAULT(0);
			ALTER TABLE UserCurrencies
				ADD tdsLiability MONEY DEFAULT(0);
		</sql>
	</changeSet>

	<changeSet id="jwr-alter-UserWithdrawals" author="Udbhav">
		<comment>Adding one new columns for TDS 2023</comment>
		<sql>
			ALTER TABLE Withdrawals ADD tdsDeducted MONEY DEFAULT (0);
		</sql>
	</changeSet>

	<changeSet id="jwr-add-user-monthly-netwinnings-table" author="Ashutosh/Udbhav" context="local">
     	<comment>Table to store User's monthly netwinnings</comment>
     	<sql>
			CREATE TABLE UserMonthlyNetWinnings (
				id bigint IDENTITY(1,1) NOT NULL,
				year SMALLINT NOT NULL,
				month SMALLINT NOT NULL,
				userID INT NOT NULL,
				netWinnings MONEY NOT NULL,
				tdsLiability MONEY NOT NULL,
				createdAt DATETIME NOT NULL DEFAULT (GETDATE()),
				updatedAt DATETIME
			);
			
			ALTER TABLE UserMonthlyNetWinnings
				ADD CONSTRAINT [PK_UserMonthlyNetWinnings] PRIMARY KEY CLUSTERED  (
					id ASC
				);
			
			CREATE NONCLUSTERED Index IDX_UserMonthlyNetWinnings
				ON UserMonthlyNetWinnings (year ASC, month ASC, userID ASC)
				INCLUDE (netWinnings, tdsLiability, createdAt, updatedAt);
	   </sql>
   	</changeSet>

	<changeSet id="jwr-add-net-winnings-audit-table" author="Ashutosh/Udbhav" context="local">
     	<comment>Table to store netwinnings update logs</comment>
     	<sql>
			CREATE TABLE JWRTransactions.dbo.NetWinningTransactions (
				id BIGINT IDENTITY(1,1) NOT NULL,
				monthNumber SMALLINT NOT NULL DEFAULT MONTH(GETDATE()),
				userID BIGINT,
				txnAmt MONEY,
				transactionType INT,
				sourceID BIGINT,
				transactionRefId BIGINT,
				transactionRefIdType INT,
				depositBalance MONEY,
				withdrawableBalance MONEY,
				premiumbonusBalance MONEY,
				bonusBucket MONEY,
				netWinnings MONEY NOT NULL,
				tdsLiability MONEY NOT NULL,
				txnType TINYINT NOT NULL,
				createdAt DATETIME DEFAULT (GETDATE())
			);
			
			ALTER TABLE JWRTransactions.dbo.NetWinningTransactions
				ADD CONSTRAINT [PK_NetWinningTransactions] PRIMARY KEY CLUSTERED  (
					id ASC,
					monthNumber ASC
				);

			CREATE NONCLUSTERED Index IDX_NetWinningTransactions
				ON JWRTransactions.dbo.NetWinningTransactions (monthNumber ASC, userID ASC)
				INCLUDE (txnAmt, transactionType, sourceID, transactionRefId, transactionRefIdType, depositBalance, withdrawableBalance, premiumbonusBalance, bonusBucket, netWinnings, tdsLiability, createdAt);
	   </sql>
   	</changeSet>

	<changeSet id="jwr-db-tds-config" author="Ashutosh/Udbhav">
     	<comment>TDS Config</comment>
     	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tds', 'newregime.wef', '1680287400000', '1', 'datetime', 'TDS 2023 regime onset timestamp');
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tds', 'percentage', '30', 1, 'number:1:100:1', 'TDS percentage');
	   </sql>
   </changeSet>
	<changeSet id="jwr-db-tds-alter-tdsductiondetails" author="Ashutosh">
     	<comment>Add new columns</comment>
     	<sql>
			ALTER TABLE TdsDeductionDetails ADD txnType TINYINT;
			ALTER TABLE TdsDeductionDetails ADD sourceType INT;
	   </sql>
   </changeSet>

	<changeSet id="jwr-add-rummypro-leaderboard" author="pushpender">
     	<comment>Add Rummy Pro Column in LeaderBoard</comment>
     	<sql>
			Alter table LEADERBOARD add [isRummyPro] bit not null default 0
	   </sql>
   	</changeSet>


	<changeSet id="jwr-db-ea-page-mod-test-config" author="Adhiraj">
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('ea-page-mod-test', 'abtestmod', '0', 0, 'number:0:100', 'Mod value for AB test');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('ea-page-mod-test', 'usergroup1.path', '0', 0, 'number:0:4', 'path for user grp 1');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('ea-page-mod-test', 'usergroup2.path', '1', 0, 'number:0:4', 'path for user grp 2');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('ea-page-mod-test', 'usergroup3.path', '2', 0, 'number:0:4', 'path for user grp 3');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('ea-page-mod-test', 'usergroup4.path', '3', 0, 'number:0:4', 'path for user grp 4');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('ea-page-mod-test', 'usergroup5.path', '4', 0, 'number:0:4', 'path for user grp 5');
    	</sql>
    </changeSet>

	<changeSet id="jwr-db-ea-page-threshold-test-config" author="Adhiraj">
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('ea-page-mod-test', 'userIdThreshold', '0', 0, 'number:0:100', 'Threshold value to enable AB test');
    	</sql>
    </changeSet>
	
	<changeSet id="jwr-db-looking-glass-config" author="Mirek">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-logs', 'practice.kafka.bootstrap.servers', '127.0.0.1:9092', 1, 'text', 'kafka servers for practice game events');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-logs', 'cash.kafka.bootstrap.servers', '127.0.0.1:9092', 1, 'text', 'kafka servers for cash game events');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-logs', 'tournament.kafka.bootstrap.servers', '127.0.0.1:9092', 1, 'text', 'kafka servers for tournament game events');
		</sql>
	</changeSet>
	
    <changeSet id="jwr-cfg-game-client-properties-scorecalculator" author="Shubhangi">
		<sql>
			INSERT INTO cfg VALUES
			('game-client-properties','isScoreCalculatorEnabled', 'false', '1',
			'bool','Enable to Total Score at Player UI and Handscore on all tables');
		</sql>
	</changeSet>
    
    <changeSet id="jwr-db-leaderboard-pa-config" author="Akshat">
    	<comment>Leaderboard PA Service</comment>
    	<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leaderboardv2', 'leaderboard.pa.url', '', 1, 'text', 'Leaderboard PA API Url');
    		ALTER TABLE Leaderboard ADD PAScheduler bit NOT NULL DEFAULT ((0));
		</sql>
    </changeSet>

	<changeSet id="jwr-withdrawalflag-automation-config-update" author="Niraj">
     	<comment>Config column for 10 days flag added</comment>
     	<sql>
			alter table [dbo].[withdrawal_vip_configurations] add  automation_wdflag_theshold float NOT NULL DEFAULT (2000)
			alter table [dbo].[withdrawal_vip_configurations] add  automation_wdflag_interval float NOT NULL DEFAULT ((10))
	   </sql>
   	</changeSet>
	
	<changeSet id="jwr-db-tds-config-testuser" author="Ashutosh/Udbhav">
     	<comment>TDS Config</comment>
     	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tds', 'testuser.list', '', '1', 'text', 'TDS enabled test users');
	   </sql>
   </changeSet>

     <changeSet id="jwr-withdrawal-enable-cancel" author="Bharat">
    	<comment>Enable withdrawal cancel feature</comment>
    	<sql>
     	 	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'withdrawal.enable.cancel', 'false', 1, 'bool', 'Enable/Disable cancel withdrawal')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-cfg-tour-lobby-props" author="Mirek">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-lobby', 'reminder.registration-open.enabled', 'false', 1, 'bool', 'Whether a reminder for tour registration open should be enabled by default');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-lobby', 'reminder.games-start.enabled', 'false', 1, 'bool', 'Whether a reminder for tour games start should be enabled by default');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-lobby', 'reminder.games-start.minutes', '3', 1, 'number:1:60:1', 'How many minutes before tournament start a reminder should fire');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-cfg-post-tournament-add-game" author="Mirek">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tour-add-game', 'enabled', 'false', 1, 'bool', 'True if post tournament add game feature should be enabled');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tour-add-game', 'game-variants', 'POINTS,POOL,DEAL,DEAL_SNG,KNOCK_OUT', 1, 'text', 'List of coma separated game variants: POINTS,POOL,DEAL,DEAL_SNG,KNOCK_OUT');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-cfg-tournament-recommender" author="Mirek">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'enabled', 'false', 1, 'bool', 'Enable/disable tournament recommendation');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'slots.max', '3', 1, 'number:1:3:1', 'How many tournament recommendations player should be presented with');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'slot-1.tournament-id', '', 0, 'text', 'Id of tournament to be recommended at slot 1');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'slot-2.tournament-id', '', 0, 'text', 'Id of tournament to be recommended at slot 2');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'slot-3.tournament-id', '', 0, 'text', 'Id of tournament to be recommended at slot 3');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'slot-1.eligibility', '{"categories":["ALL"],"users":[],"segments":[],"loyaltyClubs":[]}', 0, 'text', 'User eligibility to see recommendation on slot 1');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'slot-2.eligibility', '{"categories":["ALL"],"users":[],"segments":[],"loyaltyClubs":[]}', 0, 'text', 'User eligibility to see recommendation on slot 2');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'slot-3.eligibility', '{"categories":["ALL"],"users":[],"segments":[],"loyaltyClubs":[]}', 0, 'text', 'User eligibility to see recommendation on slot 3');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'slot-1.duration.minutes', '60', 0, 'number:1:1000000:1', 'For how long (after start of registration) tournament should be recomended on slot 1');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'slot-2.duration.minutes', '60', 0, 'number:1:1000000:1', 'For how long (after start of registration) tournament should be recomended on slot 2');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-recommender', 'slot-3.duration.minutes', '60', 0, 'number:1:1000000:1', 'For how long (after start of registration) tournament should be recomended on slot 3');
		</sql>
	</changeSet>
	
	<changeSet id="jwr-db-tournament-marquee" author="Mirek">
		<sql>
			CREATE TABLE [dbo].[TournamentLobbyMarquee](
				[id] int IDENTITY(1,1) NOT NULL,
				[message] varchar(200) NOT NULL,
				[url] varchar(300) NOT NULL,
				[cta] varchar(100) NOT NULL,
				[eligibility] text NOT NULL,
				[tabToPositions] text NOT NULL,
				[visibilityStart] datetime,
				[visibilityEnd] datetime,
				[createdAt] datetime NOT NULL,
				[updatedAt] datetime NOT NULL,
				CONSTRAINT PK_TournamentLobbyMarquee PRIMARY KEY ([id])
			);
		</sql>
	</changeSet>
	
	<changeSet id="jwr-tournament-marquee-cfg" author="Mirek">
     	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-admin', 'marquee.msg.length.max', '50', 1, 'number:1:200:1', 'Max length of the message in a tournament marquee');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tournament-admin', 'marquee.cta.length.max', '30', 1, 'number:1:100:1', 'Max length of the CTA in a tournament marquee');
     	</sql>
  	</changeSet>
  	
  	<changeSet id="jwr-direct-ticket-award-subscriber-cfg" author="Mirek">
	    <sql>
	
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('directticketawardsubscriber','enablesubscription','false', '1', 'bool', 'enable subscription');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('directticketawardsubscriber','kafka.bootstrapservers','', '1', 'text', 'list of kafka bootstrap servers');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('directticketawardsubscriber','kafka.topic','pa-jwr-ticket-award', '1', 'text', 'kafka topic into which PA will send requests to award user a ticket');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('directticketawardsubscriber','consumergroup','jwr-direct-ticket-award-consumer', '1', 'text', 'kafka consumer group name');
	    	INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('directticketawardsubscriber','consumercount','8', '1', 'text', 'number of consumers');
	
	    </sql>
	</changeSet>
	
	<changeSet id="jwr-client-logging-flag" author="Akshat">
		<comment>Config for Client Logging enable/disable</comment>
		<sql>
			INSERT INTO cfg VALUES ('registration', 'clientLogging.enable', 'false', '1', 'bool', 'To enable client logging functionality');
			INSERT INTO cfg VALUES ('registration', 'clientLogging.drmid.fcmid', '', '1', 'text', 'Comma seperated device ID (fallback to FCMID) which will have client logging enabled');	
		</sql>
	</changeSet>

	<changeSet id="jwr-point-transaction-header" author="Udbhav/Ashutosh">
    	<comment>Changing Transaction header for EF LOST POINTS</comment>
    	<sql>
     	 	UPDATE [dbo].TransactionTypes SET txnName = 'ENTRY_FEE_LOST_IN_POINTS_GAME' WHERE ttype = 59
		</sql>
	</changeSet>
	<changeSet id="jwr-db-admin-keycloak-config" author="lakshay">
   		<comment>Keycloak Configuration</comment>
   		<sql>

		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('adminaccount', 'oauth.provider', 'google', 1, 'text', 'OAuth Provider for Admin');
		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('keycloak', 'realm.name', 'jungleegames', 1, 'text', 'Keycloak realm name');
		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('keycloak', 'client.id', 'rummy_admin_app', 1, 'text', 'Keycloak client id for rummy admin server');
		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('keycloak', 'client.secret', 'rummy_admin_app', 1, 'text', 'Keycloak client secret for rummy admin server');
		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('keycloak', 'realm.publicKey', 'rummy_admin_app', 1, 'text', 'Keycloak Realm Public Key');
		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('keycloak', 'authServerUrl', 'http://localhost:8280', 1, 'text', 'Keycloak Server URL');

   		</sql>
   	</changeSet>
   	
   	<changeSet id="jwr-otp-server-config" author="Akshat">
		<comment>Adding config in cfg to change ttl and retry count of OTP</comment>
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('OTP', 'otp.redis.ttl', '3600', 1, 'number:0:10000:1', 'Redis TTL')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('OTP', 'otp.retry.count', '100', 1, 'number:0:10000:1', 'OTP Retry count')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('OTP', 'single.login.registration.flow', 'false', 1, 'bool', 'Separate Login-Registration flow')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('OTP', 'single.login.registration.minversion', '2.2.34', 1, 'text', 'Min version on which single login/registration should work');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('OTP', 'single.login.registration.logging', 'false', 1, 'bool', 'Separate Login-Registration logging')
		</sql>
	</changeSet>

   	<changeSet id="jwr-db-admin-users-add-unique-email-constraint" author="lakshay">
    	<comment> Add unique constraint on email in admin_users table</comment>
    	<sql>
    	IF OBJECT_ID('dbo.admin_users_unique_email') IS NULL
    		BEGIN
 	   			ALTER TABLE admin_users ADD CONSTRAINT admin_users_unique_email UNIQUE (email)
    		END
    	</sql>
    </changeSet>

	 <changeSet id="jwr-add-yblStatusTypes-Table" author="Niraj">
		<comment>Create table to hold ybl transactions status types</comment>
		<sql>
			IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[YblPayoutTransactionsType]') AND type in (N'U'))
            BEGIN
            CREATE TABLE [dbo].[YblPayoutTransactionsType](
              [Id] [int] IDENTITY(1,1) NOT NULL,
	          [Status] [varchar] (30) NOT NULL,
			  [Value] [smallint])
			END
		</sql>
	</changeSet>
	
	<changeSet id="jwr-insert-YblPayoutTransactionsType" author="Niraj">
		<comment>Insert ybl transactions status types</comment>
		<sql>
		    INSERT into YblPayoutTransactionsType VALUES('Initiated',0);
			INSERT into YblPayoutTransactionsType VALUES('SettlementCompleted',1);
			INSERT into YblPayoutTransactionsType VALUES('SettlementInProcess',2);
			INSERT into YblPayoutTransactionsType VALUES('Pending',3);
			INSERT into YblPayoutTransactionsType VALUES('Failed',4);
			INSERT into YblPayoutTransactionsType VALUES('Received',5);
			INSERT into YblPayoutTransactionsType VALUES('Duplicate',6);
			INSERT into YblPayoutTransactionsType VALUES('SettlementReversed',7);
			INSERT into YblPayoutTransactionsType VALUES('N/A',8);
		</sql>
	</changeSet>
	<changeSet id="jwr-add-index-YblPayoutTransactions" author="Niraj">
		<comment>Adding index for YblPayoutTransactions table </comment>
		<sql>
             IF NOT EXISTS(SELECT * FROM sys.indexes WHERE name = 'INDX_YblPayoutTransactions_WithdrawalID' AND object_id = OBJECT_ID('[dbo].[YblPayoutTransactions]'))
             BEGIN
             CREATE NONCLUSTERED INDEX INDX_YblPayoutTransactions_WithdrawalID ON YblPayoutTransactions ([WithdrawalId]) WITH (ONLINE=ON)
             END
		</sql>
	</changeSet>
	<changeSet id="jwr-new-withdrawal-limit-config-table" author="Fahad">
		<comment>Creating new table for withdrawal limit configurations</comment>
		<sql>
		    CREATE TABLE [dbo].[WithdrawalLimitConfigurations](
		    [VipCategory] [tinyint] PRIMARY KEY,
		    [isEnabled] int NOT NULL DEFAULT 0,
		    [MaxCountThreshold] [int] NOT NULL DEFAULT 0,
		    [Duration][varchar](10) NOT NULL DEFAULT 'DAY',
		    [MaxAmountThreshold] float NOT NULL DEFAULT 0,
			[EnableDate] datetime)
		</sql>
	</changeSet>
	<changeSet id="jwr-configs-insertion-into-withdrawal-limits" author="Fahad">
		<comment>New Configurations to be added into withdrawal limits table</comment>
		<sql>
		    INSERT [dbo].[WithdrawalLimitConfigurations] ([VipCategory], [isEnabled], [MaxCountThreshold], [Duration], [MaxAmountThreshold],[EnableDate]) VALUES ('1', 0,0,'Day', '100000',0);
		    INSERT [dbo].[WithdrawalLimitConfigurations] ([VipCategory], [isEnabled], [MaxCountThreshold], [Duration], [MaxAmountThreshold],[EnableDate]) VALUES ('2', 0,4,'Day', '100000',0);
		    INSERT [dbo].[WithdrawalLimitConfigurations] ([VipCategory], [isEnabled], [MaxCountThreshold], [Duration], [MaxAmountThreshold],[EnableDate]) VALUES ('3', 0,2,'Day', '50000',0);
		    INSERT [dbo].[WithdrawalLimitConfigurations] ([VipCategory], [isEnabled], [MaxCountThreshold], [Duration], [MaxAmountThreshold],[EnableDate]) VALUES ('4', 0,3,'Day', '60000',0);
		    INSERT [dbo].[WithdrawalLimitConfigurations] ([VipCategory], [isEnabled], [MaxCountThreshold], [Duration], [MaxAmountThreshold],[EnableDate]) VALUES ('5', 0,7,'Day', '50000',0);
		    INSERT [dbo].[WithdrawalLimitConfigurations] ([VipCategory], [isEnabled], [MaxCountThreshold], [Duration], [MaxAmountThreshold],[EnableDate]) VALUES ('6', 0,1,'Day', '15000',0);
		    INSERT [dbo].[WithdrawalLimitConfigurations] ([VipCategory], [isEnabled], [MaxCountThreshold], [Duration], [MaxAmountThreshold],[EnableDate]) VALUES ('7', 0,1,'Day', '100000',0);
		    INSERT [dbo].[WithdrawalLimitConfigurations] ([VipCategory], [isEnabled], [MaxCountThreshold], [Duration], [MaxAmountThreshold],[EnableDate]) VALUES ('0', 0,1,'Day', '100000',0);
		</sql>
	</changeSet>
   <changeSet id="jwr-kafka-bonus-config-enable/disable" author="pushpender">
     	<comment>Kafka Bonus config enable/disable </comment>
     	<sql>
	 		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kafka-howzat-bonus-config', 'enable', 'false', 1, 'bool', 'Kafka bonus config enable/disable')
		</sql>
	</changeSet>
	<changeSet id="jwr-non-native-withdrawal-upgrade-popup" author="Akshat">
	  	   <comment>Set config for withdrawal upgrade popup</comment>
	  	   <sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('registration', 'withdrawal.upgrade.version', '', 1, 'text', 'Below this version force app upgrade flow is shown on withdrawal')
		</sql>
	</changeSet>
	 <changeSet id="jwr-db-ybl-upi-cfg" author="Niraj">
	    	<comment>Adding Ybl UPI Payout Config for routing</comment>
	    	<sql>
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.upi.enabled', 'false', 1, 'bool', 'Enable disable ybl UPI Payout')
    		INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.upi.url', 'https://uatskyway.yesbank.in/app/uat/api-banking/domestic-payments', 1, 'text', 'Ybl UPI Url')
	    	INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.upi.status.url', 'https://uatskyway.yesbank.in/app/uat/api-banking/payment-details', 1, 'text', 'Ybl UPI Status Url')
	        INSERT into  [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.upi.merchant.key', '', 1, 'text', 'Yes Bank UPI Merchant Key');
	        INSERT into  [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.upi.merchant.id', '', 1, 'text', 'Yes Bank UPI Merchant Id');
	        INSERT into  [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.upi.mcc.code', '', 1, 'text', 'Yes Bank UPI mcc code');
	        INSERT into  [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.fund.confirmation.url', '', 1, 'text', 'Yes Bank Balance Check Url');
	    	INSERT into [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('ybl', 'payout.upi.statuscheck.interval', '1', 1, 'number:0:10000:1', 'Interval of status check schedular for pending UPI withdrawals')
	    	</sql>
	    </changeSet>
	 <changeSet id="jwr-db-withdrawal-gateway-table-addition" author="Niraj">
	    	<comment>Adding Withdrawal Payment Gateway routing tables</comment>
	    	<sql>

				CREATE TABLE dbo.WithdrawalPaymentGateways (
					id int IDENTITY(0,1) NOT NULL,
					GatewayName varchar(100) NOT NULL,
					PaymentMethod varchar(100) NOT NULL,
					RoutingPercentage int DEFAULT 0 NOT NULL,
					RoutingPriority int NOT NULL,
					Enabled bit DEFAULT 0 NULL
				);

				INSERT INTO dbo.WithdrawalPaymentGateways VALUES
				('Techpro', 'Bank', 0, 0, 0),
				('Cashfree', 'Bank', 0, 0, 0),
				('Ybl', 'Bank', 0, 0, 0),
				('Ybl', 'UPI', 0, 0, 0),
				('Razorpay', 'UPI', 0, 0, 0);
			</sql>
	    </changeSet>
	
	<changeSet id="jwr-add-table-UserFinancialYearSummary" author="Ashutosh" context="local">
		<sql>
			CREATE TABLE UserFinancialYearSummary (
			    financialYear INT NOT NULL,
			    userID INT NOT NULL,
			    openingBalance MONEY NOT NULL DEFAULT(0),
			    currentBalance MONEY NOT NULL DEFAULT(0),
			    totalDepositAmount MONEY NOT NULL DEFAULT(0),
			    totalWithdrawalAmount MONEY NOT NULL DEFAULT(0),
			    taxDeducted MONEY NOT NULL DEFAULT(0),
			    createdAt DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
			    updatedAt DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
			);
			
			ALTER TABLE UserFinancialYearSummary
			    ADD  CONSTRAINT [PK_UserFinancialYearSummary] PRIMARY KEY CLUSTERED (
			        financialYear ASC,
			        userID ASC
			    ) ON [PRIMARY];
		</sql>
   </changeSet>
   <changeSet id="jwr-db-tds-v2-config" author="Ashutosh">
     	<comment>TDS Config</comment>
     	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('tds', 'wb-minus-db.wef', '1686076200000', '1', 'datetime', 'TDS (Wb-Db) regime onset timestamp');
	   </sql>
   </changeSet>
   <changeSet id="jwr-db-disable-tds-v1-config" author="Ashutosh">
     	<comment>Disable TDS V1 Config</comment>
     	<sql>
			UPDATE cfg SET editable = 0 WHERE [id] = 'tds' AND [key] = 'newregime.wef';
	   </sql>
   </changeSet>
	<changeSet id="jwr-misc-config-main-server" author="Naveen">
     	<comment>Misc Config</comment>
     	<sql>
     		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('game-client-properties', 'wsReconnWaitTime', '5', 1, 'number:1:100:1', 'delay in seconds');
	   </sql>
   </changeSet>

	<changeSet id="jwr-db-add-column-sidebarconfig" author="Niraj">
     	<sql>
			Alter TABLE SidebarConfig add  network [varchar] (100) NOT NULL DEFAULT ('JUNGLEERUMMY');
     	</sql>
     </changeSet>
	 <changeSet id="jwr-db-comm-service-cfg" author="Ashutosh">
     	<comment>Communication service config</comment>
     	<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('CommunicationServiceClient','service.base.url','http://localhost','1','text', 'Service base URL. Dont miss http or https');
     	</sql>
     </changeSet>
   <changeSet id="jwr-db-rummycom-app-roll-out-strategy" author="Niraj">
     	<comment>Config to set RummyCom App roll-out strategy</comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummycom-app-roll-out', 'rummycomCurrentVersion', '1.22.20', 1, 'text', 'Current version of APK')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummycom-app-roll-out', 'rummycomLatestVersion', '1.22.20', 1, 'text', 'Latest version of APK')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummycom-app-roll-out', 'rummycomMinVersion', '1.22.16', 1, 'text', 'Minimum version of APK')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummycom-app-roll-out', 'rummycomUpdateUrl', 'https://m.jungleerummy.com/downloads/apk/', 1, 'text', 'URL of the download URL')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummycom-app-roll-out', 'rummycomForceUpdate', '1.22.17', 1, 'text', 'Enter app versions which need force update')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummycom-app-roll-out', 'rummycom.newrollout.distribution', '100', 1, 'number:0:100:1', 'Percentage of new users, to recieve new app download.')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummycom-app-roll-out', 'rummycom.updaterollout.distribution', '100', 1, 'number:0:100:1', 'Percentage of app users, to recieve this update')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummycom-app-roll-out', 'rummycomUpdatePopup.header', 'Upgrade App', 1, 'text', 'Header text of the update pop-up')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummycom-app-roll-out', 'rummycom.updatePopup.message', 'A better, faster version of the native app (NEW_APK_VER) is available NOW.', 1, 'text', 'Description text of the update pop-up')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('rummycom-app-roll-out', 'rummycom.updatePopup.cta', 'UPDATE NOW', 1, 'text', 'CTA for the update pop-up')

     	</sql>
     </changeSet>
	<changeSet id="jwr-db-raf-campaign-social-network" author="Ashutosh">
    	<comment>Adding social network to RAF campaigns</comment>
    	<sql>
    		ALTER TABLE RAFBonusCampaign
				ADD social_networks VARCHAR(200) NOT NULL DEFAULT('["FBPAGE", "JUNGLEERUMMY", "RUMMYIN", "RUMMYMILLIONAIRE", "ZAPAK", "SHARECHAT"]');
		</sql>
	</changeSet>
	<changeSet id="jwr-db-avatars" author="Ashutosh">
    	<comment>Some more avatar config</comment>
    	<sql>
		  	INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('avatars', 'avatars', '22,23,24,25,26,27,28,29,32,33,34,35,36,37,38,41,42,43,44,45,46,47,48,51,52,53,54,56,57,58,62,63', 1, 'text', 'Comma separated avatar ids')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('avatars', 'rummycom.avatars', '1,2,3,4,5,6,7,8,9,11,12,13,14,15,16,17,18,19,21', 1, 'text', 'Comma separated avatar ids for RUMMYCOM')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('avatars', 'default.avatar', '48', 1, 'number:0:100:1', 'Default avatar')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('avatars', 'rummycom.default.avatar', '48', 1, 'number:0:100:1', 'Default avatar RUMMYCOM')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('avatars', 'rummycom.skip.avatars', '', 1, 'text', 'Comma separated avatar ids to skip for RUMMYCOM')
		</sql>
    </changeSet>

     <changeSet id="jwr-drop-old-leaderboard-SPs" author="Nemesiss">
     	<sql>
     		DROP PROCEDURE IF EXISTS GetLeaderboardSummary
			DROP PROCEDURE IF EXISTS GetLeaderboardSummaryUGExt
     	</sql>
     </changeSet>

     <changeSet id="jwr-birthday-bonus-automation-rummy-com" author="Akshat Singh">
		<comment>birthday-bonus-automation-rummy-com</comment>
		<sql>
			INSERT INTO [cfg]
				([id],
				 [key],
				 [value],
				 [editable],
				 [type],
				 [description]
				)
				VALUES
				('birthday-bonus-automation-rummy-com',
				 'service.birthdaybonusapplicable',
				 'true',
				 '0',
				 'bool',
				 'Trigger email when birthday bonus is applicable'
				),

				('birthday-bonus-automation-rummy-com',
				 'service.birthdaybonusaddition',
				 'true',
				 '0',
				 'bool',
				 'Trigger email when birthday bonus is added'
				),

				('birthday-bonus-automation-rummy-com',
				 'service.birthdaybonusremovalwarning',
				 'true',
				 '0',
				 'bool',
				 'Trigger email for birthdya bonus removal warning'
				),

				('birthday-bonus-automation-rummy-com',
				 'service.birthdaybonusremoval',
				 'true',
				 '0',
				 'bool',
				 'Trigger email for removal of birthday bonus'
				),
				('birthday-bonus-automation-rummy-com',
				 'service.activedays',
				 '30',
				 '0',
				 'number:1:10000:100',
				 'Number of days to consider being active'
				),
				('birthday-bonus-automation-rummy-com',
				 'service.birthdayduein',
				 '7',
				 '0',
				 'number:1:10000:100',
				 'Number of days in which birthday is due'
				);
		</sql>
	 </changeSet>

	 <changeSet id="jwr-birthday-bonus-automation-rummy-com-added-network" author="Akshat Singh">
		<comment>birthday-bonus-automation-rummy-com-added-network</comment>
		<sql>
			ALTER TABLE [dbo].[BirthdayBonusConfig] ADD [network] varchar(30) NOT NULL DEFAULT ('OTHERS');
		</sql>
	 </changeSet>

	 <changeSet id="jwr-birthday-bonus-automation-added-rows-rummy-com" author="Akshat Singh">
		<comment>birthday-bonus-automation-rummy-added-rows-rummy-com</comment>
		<sql>
		INSERT INTO [BirthdayBonusConfig]
		(
			[UserCategory],
			[cashAmount],
			[bonusCodeName],
			[removingDays],
			[minDeposit],
			[bonusPercentage],
			[maBonusAmount],
			[bonusCreditType],
			[isEnabled],
			[network]
		)
		VALUES
		('NONVIP',0.0,'HBB',7,500,100,500,0,0,'RUMMYCOM'),
		('VIP1',5000,'HBB',7,2000,100,2000,0,0,'RUMMYCOM'),
		('VIP2',2500,'HBB',7,2000,100,2000,0,0,'RUMMYCOM'),
		('VIP3',1000,'HBB',7,1000,100,1000,0,0,'RUMMYCOM'),
		('VIP4',500,'HBB',7,1000,100,1000,0,0,'RUMMYCOM'),
		('VIP5',0.0,'HBB',7,500,100,500,0,0,'RUMMYCOM'),
		('VIP6',0.0,'HBB',7,500,100,500,0,0,'RUMMYCOM'),
		('NEWBIE',0.0,'HBB',7,500,100,500,0,0,'RUMMYCOM');
		</sql>
	 </changeSet>

	 <changeSet id="jwr-insert-cfg-for-jr-rm-email-alias-rummycoms" author="Akshat">
		<comment>insert email alias name to cfg for all alert emails for rummycom</comment>
		<sql>
		   INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils','rcEmailFromName','www.rummy.com', '1', 'text', 'Email address alias for all the Rummy com alerts emails');
		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'rcfromemail', 'info@rummy.com', 1, 'text', 'Rummy sender mail')
		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'rcwebsitelink', 'www.rummy.com', 1, 'text', 'Rummy Website Url')

		</sql>
	</changeSet>

	<changeSet id="Alter Deposit Transactions Table" author="Udbhav">
		<comment>Inserting values for Bonus config limits</comment>
		<sql>
		   Alter table dbo.DepositTransactions ADD  SOCIALNETWORK varchar(50) DEFAULT 'JUNGLEERUMMY';
			Create table dbo.GatewayConfigs (
				gatewayConfigId bigint PRIMARY KEY IDENTITY(1,1) NOT NULL,
				gatewayId [int] NOT NULL FOREIGN KEY REFERENCES Gateway(GatewayID),
				socialNetwork varchar(50),
				configs nvarchar(max),
				posturl varchar(500),
				returnurl varchar(500),
				CreatedDate [datetime] NOT NULL DEFAULT(GETDATE()),
				UpdatedDate [datetime] NOT NULL DEFAULT(GETDATE())
			)
		</sql>
	</changeSet>

	<changeSet id="jwr-alter-socialnetwork-to-UserClaims" author="Ashutosh">
		<comment>Add socialNetwork to UserClaims</comment>
    	<sql>
			ALTER TABLE UserClaims
				ADD socialNetwork VARCHAR(20);
   		</sql>
	</changeSet>

	<changeSet id="jwr-db-add-network-to-UserClaims-index" author="Ashutosh" context="local">
		<comment>Add socialNetwork to UserClaims index</comment>
		<sql>
			DROP INDEX INDEX_UserClaims_UserID_ClaimType_ClaimValue_isActive ON dbo.UserClaims;
            CREATE NonClustered Index INDEX_UserClaims_UserID_ClaimType_ClaimValue_isActive_network 
			ON [dbo].[UserClaims] ([userID],[claimType],[claimValue],[isActive],[socialNetwork]) WITH (ONLINE = ON);
		</sql>
	</changeSet>

	<changeSet id="jwr-db-update-UserClaims-unique-constraint" author="Ashutosh" context="local">
		<comment>Add socialNetwork to UserClaims unique constraint</comment>
    	<sql>
			ALTER TABLE UserClaims
				DROP CONSTRAINT UserClaims_unique;

			ALTER TABLE UserClaims ADD CONSTRAINT UserClaims_unique_network_type_value 
				UNIQUE NONCLUSTERED (socialNetwork, claimtype, claimvalue) WITH (ONLINE = ON);
   		</sql>
	</changeSet>

	<changeSet id="jwr-db-set-UserClaims-network" author="Ashutosh" context="local">
		<comment>Update socialNetwork in UserClaims</comment>
		<sql>
			UPDATE UC
			SET UC.socialNetwork = U.socialNetwork
			FROM UserClaims UC
			JOIN Users U ON UC.userID = U.userID
		</sql>
	</changeSet>
	<changeSet id="Add Deposit Tile Configurations Table" author="Udbhav">
		<comment>Inserting values for Bonus config limits</comment>
		<sql>
			BEGIN 
				INSERT INTO DEPOSITAMOUNTCONFIGURATION (userSegment,socialNetwork,amount,bonusCodeOption ,bonusCode,bonusCodeAmount ,instantCashbackOption ,
				instantCashbackAmount ,mostPopularTag ,[source] ,abtestpath ,priority ,isActivated ,stateID)
				SELECT userSegment,'RUMMYCOM',amount,bonusCodeOption ,bonusCode,bonusCodeAmount ,instantCashbackOption ,
				instantCashbackAmount ,mostPopularTag ,[source] ,abtestpath ,priority ,isActivated ,stateID 
				from DEPOSITAMOUNTCONFIGURATION where socialNetwork = 'JUNGLEERUMMY' and stateID = 41
			END
		</sql>
	</changeSet>
	<changeSet id="Adding Gateway Config" author="Udbhav">
		<comment>Inserting values for Gateway config limits</comment>
		<sql>
			INSERT INTO dbo.GATEWAYCONFIGS(gatewayId,socialNetwork,configs,postUrl,returnUrl,createdDate,updateddate)
			SELECT gatewayId ,'JUNGLEERUMMY',configParameters ,posturl ,returnurl ,GETDATE(),GETDATE()
			from dbo.Gateway
			INSERT INTO dbo.GATEWAYCONFIGS(gatewayId,socialNetwork,configs,postUrl,returnUrl,createdDate,updateddate)
			SELECT gatewayId ,'RUMMYCOM',configParameters ,posturl ,returnurl ,GETDATE(),GETDATE()
			from dbo.Gateway 
		</sql>
	</changeSet>
	<changeSet id="jwr-rummy-com-email-support-with-sendGrid" author="AashishGoyal">
		<comment> rummy com verification email configurations  </comment>
		<sql>
			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('email','rummycom.sendgrid.password','OwDjx8GRIPbnpnxconXS','1','text', 'send grid password for rummy.com account');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('email','rummycom.sendgrid.post.url','','1','text', 'send grid url for rummy.com account');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('utils','rummycomWebsiteLink','https://www.rummy.com/','1','text', 'rummy com website link');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('utils','rummycomWebsiteName','Rummy.com','1','text', 'rummy com website name');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('utils','rummycomSupportName','Rummy.com support','1','text', 'rummy com support name');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('utils','rummycomSupportEmail','support@rummy.com','1','text', 'rummy com support email');

			INSERT INTO [cfg] ([id], [key], [value], [editable], [type], [description])
			VALUES ('utils','rummycomPrEmailFromName','Rummy.com support','1','text', 'rummy com email senders name');
		</sql>
	</changeSet>
	<changeSet id="juspay-routing-config-flag-rummy-com" author="AashishGoyal">
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('juspay-routing-config', 'juspayRoutingModRummyCom', '0', 0, 'number:0:1', 'Mod value for routing all payments to juspay in rummy.com');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('juspay-routing-config', 'juspayRoutingRemainderRummyCom', '0', 0, 'number:0:1', 'Remainder value for routing all payments to juspay in rummy.com');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('juspay-routing-config', 'juspayRoutingDefaultRummyCom', 'true', 1, 'bool', 'Enable/Disable Juspay for RummyCom');
    	</sql>
    </changeSet>
	<changeSet id="savedVpaDetails-add-socialNetwork-column" author="AashishGoyal">
    	<sql>
			ALTER TABLE [dbo].[WithdrawalVPADetails] ADD SocialNetwork VARCHAR(50) DEFAULT 'JUNGLEERUMMY';
    	</sql>
    </changeSet>

	<changeSet id="disable-bank-transfer-tab-in-withdrawal-rummy-com" author="AashishGoyal">
    	<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('withdrawals', 'withdrawal.disable.bank.transfer', 'true', 1, 'bool', 'disable bank transfer tab in withdrawal in rummy com');
    	</sql>
    </changeSet>
	<changeSet id="jwr-native-app-install-ab-config" author="Akshat">
	  	   <comment>New Install AB Config Native app</comment>
	  	   <sql>
				Create Table NewInstallAbConfig(
	                ID int IDENTITY(1,1) PRIMARY KEY,
	                apk_version varchar(100) NOT NULL,
	                apk_url varchar(100) NOT NULL,
	                percentage int NOT NULL
	            );
			</sql>
	</changeSet>
	<changeSet id="jwr-native-app-install-ab-config-base-url" author="Akshat">
		<comment>This config is used for adding base url for native app install ab config</comment>
		<sql>
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'native.install.abconfig.url', 'https://m.jungleerummy.com/upgrades/native_apk/', 1, 'text', 'Config for App Install AB Config')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'native.install.abconfig.username', '', 1, 'text', 'App Install AB Config Basic Auth Username')
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('utils', 'native.install.abconfig.password', '', 1, 'text', 'App Install AB Config Basic Auth Password')
		</sql>
	</changeSet>

   <changeSet id="jwr-kyc-lite-ab-config" author="Niraj">
     	<comment>Ab Config for Kyc Lite </comment>
     	<sql>
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kyc', 'kyclite.abtest.enabled', 'false', 1, 'bool', 'If true then kyclite will be enabled for any user');
			INSERT INTO [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('kyc', 'kyclite.abtest.mod', '1', '1', 'number:1:1000000:1', 'only players whose  userid%mod == 0 will have this feature enabled');
		</sql>
	</changeSet>

	<changeSet id="jwr-cfg-kyc-soft_approved_enabled_version" author="Khushal">
		<sql>

			INSERT INTO cfg VALUES ('kyc', 'kyc.soft_approved.enabled.version', '5.1.2', '1', 'text', 'Soft Approved enabled version from in PSRMG');
			
		</sql>
	</changeSet>
	<changeSet id="razorpayx-rummy-com-configuration" author="AashishGoyal">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('razorpayx', 'razorpayx.accountnumber.rummy.com', '', 1, 'text', 'rummy com razorpayx account number');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('razorpayx', 'razorpayx.key.rummy.com', '', 1, 'text', 'rummy com razorpayx account number');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('razorpayx', 'razorpayx.secret.rummy.com', '', 1, 'text', 'rummy com razorpayx account number');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('razorpayx', 'razorpayx.validateapi.rummy.com', '', 1, 'text', 'rummy com razorpayx account number');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('razorpayx', 'razorpayx.fundapi.rummy.com', '', 1, 'text', 'rummy com razorpayx account number');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('razorpayx', 'razorpayx.contactapi.rummy.com', '', 1, 'text', 'rummy com razorpayx account number');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES	('razorpayx', 'razorpayx.payoutapi.rummy.com', '', 1, 'text', 'rummy com razorpayx account number');
		</sql>
	</changeSet>

	<changeSet id="jwr-db-table-configurations-switch-2" author="Nemesiss">
		<sql>
			ALTER TABLE [dbo].[TableConfigurations] ADD SwitchOnDropLateEnabled [bit] NOT NULL DEFAULT ((0));
			ALTER TABLE [dbo].[TableConfigurations] ADD SwitchOnBadDecEnabled [bit] NOT NULL DEFAULT ((0));
		</sql>
	</changeSet>

	<changeSet id="jwr-db-leave-table-popup-abctest-config" author="Nemesiss">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leave-table-popup', 'abctest.enabled', 'false', 1, 'bool', 'If true then only some players (whose id%mod > threshold) will have different leave popup variant');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leave-table-popup', 'abctest.mod', '100', 1, 'number:2:1000000:1', 'only players whose id%mod > threshold will have different leave popup variant')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leave-table-popup', 'abctest.variant1.threshold', 33, 1, 'number:0:1000000:1', 'threshold for leave popup variant 1')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('leave-table-popup', 'abctest.variant2.threshold', '66', 1, 'number:0:1000000:1', 'threshold for leave popup variant 2')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-auto-switch-table-config" author="Nemesiss">
		<sql>
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('switchTable', 'auto.switch.enabled', 'false', 1, 'bool', 'If true then auto switch table feature will be enabled');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('switchTable', 'auto.switch.initial.delay.sec', '7', 1, 'number:1:60:1', 'auto switch delay time in seconds, this value should not be lower then switchTableInitiationTimec - in such case value from switchTableInitiationTime will be used instead')
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('switchTable', 'auto.switch.repetition.delay.sec', 3, 1, 'number:1:60:1', 'auto switch repetition delay time in seconds')
		</sql>
	</changeSet>

	<changeSet id="jwr-db-switch-table-timer-fix" author="Nemesiss">
		<sql>
			UPDATE cfg set [editable] = 1, [type] = 'number:0:60000:1', [description] = 'time in milis after that switch Table button will be visible on game table' WHERE id = 'switchTable' and [key] = 'switchTableInitiationTime';
		</sql>
	</changeSet>

	<changeSet id="jwr-depositTransactions-adding-juspayPG-column" author="Adhiraj">
		<comment>Alter depositTransactions add column for juspayPG name</comment>
		<sql>
			ALTER TABLE DepositTransactions ADD juspayPG [varchar](50) NULL;
	</sql>
  </changeSet>
  <changeSet id="jwr-db-global-flag-enalbe-disable-withdrawal" author="Ashutosh">
    	<comment>Adding global flag to disable withdrawals</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawals', 'global.disabled.till', '1677609000000', 1, 'datetime', 'Withdrawals will be disabled till this timestamp and enabled afterwards');
		</sql>
  </changeSet>
  <changeSet id="jwr-db-global-flag-enalbe-disable-deposits" author="Ashutosh">
    	<comment>Adding global flag to disable deposits</comment>
    	<sql>
    		   INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('payments', 'global.disabled.till', '1677609000000', 1, 'datetime', 'Desposits will be disabled till this timestamp and enabled afterwards');
		</sql>
  </changeSet>
   <changeSet id="jwr-wihdrawal-redis-configs" author="Niraj">
     	<comment>Wihdrawal Redis Configs </comment>
     	<sql>
     	    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawal-redis', 'redis-server', 'jg-jwr-admin-rumble.2oaslo.clustercfg.aps1.cache.amazonaws.com', 1, 'text', 'redis server');
			INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('withdrawal-redis', 'redis-port', '6379', 1, 'number:0:10000:1', 'redis port')
		</sql>
	</changeSet>

  <changeSet id="remove-sp-LoadTournamentPlayers-Exts-if-exists" author="AashishGoyal">
	<comment> Remove Sp - Load Tournament Player Exts if exists</comment>
    	<sql>
			DROP PROCEDURE IF EXISTS LoadTournamentPlayersExts;
		</sql>
	</changeSet>
      <changeSet id="jwr-firebase-config-rummycom" author="AashishGoyal">
		<comment>Adding configs of firebase rummy com</comment>
		<sql>
			INSERT [ritik].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('firebase', 'api_secret_rummy_com', '', 1, 'text', 'rummy com Firebase api secret');
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('firebase', 'firebase_app_id_rummy_com', '', 1, 'text', 'rummy com Firebase app Id');
    		INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('firebase', 'psrmg_api_secret_rummy_com', '', 1, 'text', 'rummy com Firebase psrmg api secret');
		    INSERT [dbo].[cfg] ([id], [key], [value], [editable], [type], [description]) VALUES ('firebase', 'psrmg_firebase_app_id_rummy_com', '', 1, 'text', 'rummy com Firebase psrmg app Id');

		</sql>
	</changeSet>

 </databaseChangeLog>
